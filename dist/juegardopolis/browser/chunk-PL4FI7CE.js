var LM=Object.defineProperty,VM=Object.defineProperties;var UM=Object.getOwnPropertyDescriptors;var Nw=Object.getOwnPropertySymbols,jM=Object.getPrototypeOf,BM=Object.prototype.hasOwnProperty,$M=Object.prototype.propertyIsEnumerable,HM=Reflect.get;var xw=(t,e,n)=>e in t?LM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})BM.call(e,n)&&xw(t,n,e[n]);if(Nw)for(var n of Nw(e))$M.call(e,n)&&xw(t,n,e[n]);return t},ce=(t,e)=>VM(t,UM(e));var cr=(t,e,n)=>HM(jM(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function Pw(t,e){return Object.is(t,e)}var Ue=null,su=!1,ou=1,Tn=Symbol("SIGNAL");function he(t){let e=Ue;return Ue=t,e}function Ow(){return Ue}var Jo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function If(t){if(su)throw new Error("");if(Ue===null)return;Ue.consumerOnSignalRead(t);let e=Ue.nextProducerIndex++;if(lu(Ue),e<Ue.producerNode.length&&Ue.producerNode[e]!==t&&Yo(Ue)){let n=Ue.producerNode[e];uu(n,Ue.producerIndexOfThis[e])}Ue.producerNode[e]!==t&&(Ue.producerNode[e]=t,Ue.producerIndexOfThis[e]=Yo(Ue)?Vw(t,Ue,e):0),Ue.producerLastReadVersion[e]=t.version}function zM(){ou++}function kw(t){if(!(Yo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ou)){if(!t.producerMustRecompute(t)&&!Ef(t)){t.dirty=!1,t.lastCleanEpoch=ou;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ou}}function Fw(t){if(t.liveConsumerNode===void 0)return;let e=su;su=!0;try{for(let n of t.liveConsumerNode)n.dirty||qM(n)}finally{su=e}}function Lw(){return Ue?.consumerAllowSignalWrites!==!1}function qM(t){t.dirty=!0,Fw(t),t.consumerMarkedDirty?.(t)}function cu(t){return t&&(t.nextProducerIndex=0),he(t)}function wf(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Yo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)uu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ef(t){lu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(kw(n),r!==n.version))return!0}return!1}function Df(t){if(lu(t),Yo(t))for(let e=0;e<t.producerNode.length;e++)uu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Vw(t,e,n){if(Uw(t),t.liveConsumerNode.length===0&&jw(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Vw(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function uu(t,e){if(Uw(t),t.liveConsumerNode.length===1&&jw(t))for(let r=0;r<t.producerNode.length;r++)uu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];lu(i),i.producerIndexOfThis[r]=e}}function Yo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function lu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Uw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function jw(t){return t.producerNode!==void 0}function Bw(t){let e=Object.create(GM);e.computation=t;let n=()=>{if(kw(e),If(e),e.value===au)throw e.error;return e.value};return n[Tn]=e,n}var vf=Symbol("UNSET"),_f=Symbol("COMPUTING"),au=Symbol("ERRORED"),GM=ce(F({},Jo),{value:vf,dirty:!0,error:null,equal:Pw,producerMustRecompute(t){return t.value===vf||t.value===_f},producerRecomputeValue(t){if(t.value===_f)throw new Error("Detected cycle in computations.");let e=t.value;t.value=_f;let n=cu(t),r;try{r=t.computation()}catch(i){r=au,t.error=i}finally{wf(t,n)}if(e!==vf&&e!==au&&r!==au&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function WM(){throw new Error}var $w=WM;function Hw(){$w()}function zw(t){$w=t}var KM=null;function qw(t){let e=Object.create(Ww);e.value=t;let n=()=>(If(e),e.value);return n[Tn]=e,n}function bf(t,e){Lw()||Hw(),t.equal(t.value,e)||(t.value=e,QM(t))}function Gw(t,e){Lw()||Hw(),bf(t,e(t.value))}var Ww=ce(F({},Jo),{equal:Pw,value:void 0});function QM(t){t.version++,zM(),Fw(t),KM?.()}function ee(t){return typeof t=="function"}function ts(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var du=ts(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ri(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(s){e=s instanceof du?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Kw(s)}catch(o){e=e??[],o instanceof du?e=[...e,...o.errors]:e.push(o)}}if(e)throw new du(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Kw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ri(n,e)}remove(e){let{_finalizers:n}=this;n&&ri(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var Tf=Re.EMPTY;function hu(t){return t instanceof Re||t&&"closed"in t&&ee(t.remove)&&ee(t.add)&&ee(t.unsubscribe)}function Kw(t){ee(t)?t():t.unsubscribe()}var Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ns={setTimeout(t,e,...n){let{delegate:r}=ns;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ns;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function fu(t){ns.setTimeout(()=>{let{onUnhandledError:e}=Bt;if(e)e(t);else throw t})}function Zo(){}var Qw=Cf("C",void 0,void 0);function Yw(t){return Cf("E",void 0,t)}function Jw(t){return Cf("N",t,void 0)}function Cf(t,e,n){return{kind:t,value:e,error:n}}var ii=null;function rs(t){if(Bt.useDeprecatedSynchronousErrorHandling){let e=!ii;if(e&&(ii={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ii;if(ii=null,n)throw r}}else t()}function Zw(t){Bt.useDeprecatedSynchronousErrorHandling&&ii&&(ii.errorThrown=!0,ii.error=t)}var si=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hu(e)&&e.add(this)):this.destination=ZM}static create(e,n,r){return new ur(e,n,r)}next(e){this.isStopped?Sf(Jw(e),this):this._next(e)}error(e){this.isStopped?Sf(Yw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sf(Qw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YM=Function.prototype.bind;function Af(t,e){return YM.call(t,e)}var Rf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){pu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){pu(r)}else pu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){pu(n)}}},ur=class extends si{constructor(e,n,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Bt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Af(e.next,s),error:e.error&&Af(e.error,s),complete:e.complete&&Af(e.complete,s)}):i=e}this.destination=new Rf(i)}};function pu(t){Bt.useDeprecatedSynchronousErrorHandling?Zw(t):fu(t)}function JM(t){throw t}function Sf(t,e){let{onStoppedNotification:n}=Bt;n&&ns.setTimeout(()=>n(t,e))}var ZM={closed:!0,next:Zo,error:JM,complete:Zo};var is=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(t){return t}function gu(...t){return Mf(t)}function Mf(t){return t.length===0?It:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=eN(n)?n:new ur(n,r,i);return rs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Xw(r),new r((i,s)=>{let o=new ur({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[is](){return this}pipe(...n){return Mf(n)(this)}toPromise(n){return n=Xw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Xw(t){var e;return(e=t??Bt.Promise)!==null&&e!==void 0?e:Promise}function XM(t){return t&&ee(t.next)&&ee(t.error)&&ee(t.complete)}function eN(t){return t&&t instanceof si||XM(t)&&hu(t)}function Nf(t){return ee(t?.lift)}function fe(t){return e=>{if(Nf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new xf(t,e,n,r,i)}var xf=class extends si{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ss(){return fe((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var os=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Nf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return ss()(this)}};var eE=ts(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new mu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new eE}next(n){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){rs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Tf:(this.currentObservers=null,s.push(n),new Re(()=>{this.currentObservers=null,ri(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new mu(e,n),t})(),mu=class extends $e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Tf}};var We=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Pf={now(){return(Pf.delegate||Date).now()},delegate:void 0};var yu=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Xo={setInterval(t,e,...n){let{delegate:r}=Xo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Xo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var as=class extends yu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Xo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Xo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ri(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var cs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};cs.now=Pf.now;var us=class extends cs{constructor(e,n=cs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Of=new us(as);var vu=class extends as{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var _u=class extends us{};var kf=new _u(vu);var wt=new oe(t=>t.complete());function tE(t){return t&&ee(t.schedule)}function nE(t){return t[t.length-1]}function Iu(t){return ee(nE(t))?t.pop():void 0}function lr(t){return tE(nE(t))?t.pop():void 0}function Ff(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iE(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function rE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oi(t){return this instanceof oi?(this.v=t,this):new oi(t)}function sE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,x){s.push([y,N,R,x])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(s[0][3],N)}}function l(y){y.value instanceof oi?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function oE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rE=="function"?rE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var wu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Eu(t){return ee(t?.then)}function Du(t){return ee(t[is])}function bu(t){return Symbol.asyncIterator&&ee(t?.[Symbol.asyncIterator])}function Tu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cu=tN();function Au(t){return ee(t?.[Cu])}function Su(t){return sE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield oi(n.read());if(i)return yield oi(void 0);yield yield oi(r)}}finally{n.releaseLock()}})}function Ru(t){return ee(t?.getReader)}function xe(t){if(t instanceof oe)return t;if(t!=null){if(Du(t))return nN(t);if(wu(t))return rN(t);if(Eu(t))return iN(t);if(bu(t))return aE(t);if(Au(t))return sN(t);if(Ru(t))return oN(t)}throw Tu(t)}function nN(t){return new oe(e=>{let n=t[is]();if(ee(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function rN(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function iN(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,fu)})}function sN(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function aE(t){return new oe(e=>{aN(t,e).catch(n=>e.error(n))})}function oN(t){return aE(Su(t))}function aN(t,e){var n,r,i,s;return iE(this,void 0,void 0,function*(){try{for(n=oE(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function gt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function dr(t,e=0){return fe((n,r)=>{n.subscribe(ue(r,i=>gt(r,t,()=>r.next(i),e),()=>gt(r,t,()=>r.complete(),e),i=>gt(r,t,()=>r.error(i),e)))})}function hr(t,e=0){return fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function cE(t,e){return xe(t).pipe(hr(e),dr(e))}function uE(t,e){return xe(t).pipe(hr(e),dr(e))}function lE(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function dE(t,e){return new oe(n=>{let r;return gt(n,e,()=>{r=t[Cu](),gt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Mu(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{gt(n,e,()=>{let r=t[Symbol.asyncIterator]();gt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function hE(t,e){return Mu(Su(t),e)}function fE(t,e){if(t!=null){if(Du(t))return cE(t,e);if(wu(t))return lE(t,e);if(Eu(t))return uE(t,e);if(bu(t))return Mu(t,e);if(Au(t))return dE(t,e);if(Ru(t))return hE(t,e)}throw Tu(t)}function Ee(t,e){return e?fE(t,e):xe(t)}function K(...t){let e=lr(t);return Ee(t,e)}function ls(t,e){let n=ee(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function Lf(t){return!!t&&(t instanceof oe||ee(t.lift)&&ee(t.subscribe))}var $t=ts(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function cN(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let s=new ur({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new $t)}});t.subscribe(s)})}function Q(t,e){return fe((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:uN}=Array;function lN(t,e){return uN(e)?t(...e):t(e)}function Nu(t){return Q(e=>lN(t,e))}var{isArray:dN}=Array,{getPrototypeOf:hN,prototype:fN,keys:pN}=Object;function xu(t){if(t.length===1){let e=t[0];if(dN(e))return{args:e,keys:null};if(gN(e)){let n=pN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function gN(t){return t&&typeof t=="object"&&hN(t)===fN}function Pu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ea(...t){let e=lr(t),n=Iu(t),{args:r,keys:i}=xu(t);if(r.length===0)return Ee([],e);let s=new oe(mN(r,e,i?o=>Pu(i,o):It));return n?s.pipe(Nu(n)):s}function mN(t,e,n=It){return r=>{pE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)pE(e,()=>{let l=Ee(t[u],e),h=!1;l.subscribe(ue(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function pE(t,e,n){t?gt(n,t,e):e()}function gE(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{s&&e.next(N),l++;let R=!1;xe(n(N,h++)).subscribe(ue(e,x=>{i?.(x),s?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();o?gt(e,o,()=>C(x)):C(x)}m()}catch(x){e.error(x)}}))};return t.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Pe(t,e,n=1/0){return ee(e)?Pe((r,i)=>Q((s,o)=>e(r,s,i,o))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),fe((r,i)=>gE(r,i,t,n)))}function fr(t=1/0){return Pe(It,t)}function mE(){return fr(1)}function ds(...t){return mE()(Ee(t,lr(t)))}function Ou(t){return new oe(e=>{xe(t()).subscribe(e)})}function Vf(...t){let e=Iu(t),{args:n,keys:r}=xu(t),i=new oe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;xe(n[h]).subscribe(ue(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Pu(r,a):a),s.complete())}))}});return e?i.pipe(Nu(e)):i}function dt(t,e){return fe((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function pr(t){return fe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=xe(t(o,pr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function yE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ue(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Cn(t,e){return ee(e)?Pe(t,e,1):Pe(t,1)}function gr(t){return fe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function An(t){return t<=0?()=>wt:fe((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Uf(t){return Q(()=>t)}function ku(t=yN){return fe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function yN(){return new $t}function mr(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Xt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?dt((i,s)=>t(i,s,r)):It,An(1),n?gr(e):ku(()=>new $t))}function hs(t){return t<=0?()=>wt:fe((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function jf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?dt((i,s)=>t(i,s,r)):It,hs(1),n?gr(e):ku(()=>new $t))}function Fu(t,e){return fe(yE(t,e,arguments.length>=2,!0))}function Lu(...t){let e=lr(t);return fe((n,r)=>{(e?ds(t,n,e):ds(t,n)).subscribe(r)})}function mt(t,e){return fe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=s++;xe(t(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Bf(t){return fe((e,n)=>{xe(t).subscribe(ue(n,()=>n.complete(),Zo)),!n.closed&&e.subscribe(n)})}function Oe(t,e,n){let r=ee(t)||e||n?{next:t,error:e,complete:n}:t;return r?fe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var nD="https://g.co/ng/security#xss",$=class extends Error{constructor(e,n){super(_l(e,n)),this.code=e}};function _l(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ua(t){return{toString:t}.toString()}var Vu="__parameters__";function vN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function rD(t,e,n){return ua(()=>{let r=vN(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Vu)?u[Vu]:Object.defineProperty(u,Vu,{value:[]})[Vu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var tp=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function _N(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function vE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var IN=De({__forward_ref__:De});function _i(t){return t.__forward_ref__=_i,t.toString=function(){return ft(this())},t}function ht(t){return iD(t)?t():t}function iD(t){return typeof t=="function"&&t.hasOwnProperty(IN)&&t.__forward_ref__===_i}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function an(t){return{providers:t.providers||[],imports:t.imports||[]}}function Il(t){return _E(t,oD)||_E(t,aD)}function sD(t){return Il(t)!==null}function _E(t,e){return t.hasOwnProperty(e)?t[e]:null}function wN(t){let e=t&&(t[oD]||t[aD]);return e||null}function IE(t){return t&&(t.hasOwnProperty(wE)||t.hasOwnProperty(EN))?t[wE]:null}var oD=De({\u0275prov:De}),wE=De({\u0275inj:De}),aD=De({ngInjectableDef:De}),EN=De({ngInjectorDef:De}),L=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cD(t){return t&&!!t.\u0275providers}var DN=De({\u0275cmp:De}),bN=De({\u0275dir:De}),TN=De({\u0275pipe:De}),CN=De({\u0275mod:De}),Qu=De({\u0275fac:De}),na=De({__NG_ELEMENT_ID__:De}),EE=De({__NG_ENV_ID__:De});function _s(t){return typeof t=="string"?t:t==null?"":String(t)}function AN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():_s(t)}function SN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,t)}function Zp(t,e){throw new $(-201,!1)}var ae=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ae||{}),np;function uD(){return np}function Rt(t){let e=np;return np=t,e}function lD(t,e,n){let r=Il(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ae.Optional)return null;if(e!==void 0)return e;Zp(t,"Injector")}var RN={},ra=RN,rp="__NG_DI_FLAG__",Yu="ngTempTokenPath",MN="ngTokenPath",NN=/\n/gm,xN="\u0275",DE="__source",ys;function PN(){return ys}function yr(t){let e=ys;return ys=t,e}function ON(t,e=ae.Default){if(ys===void 0)throw new $(-203,!1);return ys===null?lD(t,void 0,e):ys.get(t,e&ae.Optional?null:void 0,e)}function z(t,e=ae.Default){return(uD()||ON)(ht(t),e)}function P(t,e=ae.Default){return z(t,wl(e))}function wl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function ip(t){let e=[];for(let n=0;n<t.length;n++){let r=ht(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,s=ae.Default;for(let o=0;o<r.length;o++){let a=r[o],u=kN(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(z(i,s))}else e.push(z(r))}return e}function dD(t,e){return t[rp]=e,t.prototype[rp]=e,t}function kN(t){return t[rp]}function FN(t,e,n,r){let i=t[Yu];throw e[DE]&&i.unshift(e[DE]),t.message=LN(`
`+t.message,i,n,r),t[MN]=i,t[Yu]=null,t}function LN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==xN?t.slice(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):ft(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(NN,`
  `)}`}var st=dD(rD("Optional"),8);var Xp=dD(rD("SkipSelf"),4);function Is(t,e){let n=t.hasOwnProperty(Qu);return n?t[Qu]:null}function VN(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function UN(t){return t.flat(Number.POSITIVE_INFINITY)}function eg(t,e){t.forEach(n=>Array.isArray(n)?eg(n,e):e(n))}function hD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ju(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function jN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function BN(t,e,n){let r=la(t,e);return r>=0?t[r|1]=n:(r=~r,jN(t,r,e,n)),r}function $f(t,e){let n=la(t,e);if(n>=0)return t[n|1]}function la(t,e){return $N(t,e,1)}function $N(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var ws={},Mt=[],Es=new L(""),fD=new L("",-1),pD=new L(""),Zu=class{get(e,n=ra){if(n===ra){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return n}},gD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(gD||{}),nn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(nn||{}),Ir=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ir||{});function HN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function sp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];zN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function mD(t){return t===3||t===4||t===6}function zN(t){return t.charCodeAt(0)===64}function ia(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?bE(t,n,i,null,e[++r]):bE(t,n,i,null,null))}}return t}function bE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var yD="ng-template";function qN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&HN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(tg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function tg(t){return t.type===4&&t.value!==yD}function GN(t,e,n){let r=t.type===4&&!n?yD:t.value;return e===r}function WN(t,e,n){let r=4,i=t.attrs,s=i!==null?YN(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Ht(r)&&!Ht(u))return!1;if(o&&Ht(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!GN(t,u,n)||u===""&&e.length===1){if(Ht(r))return!1;o=!0}}else if(r&8){if(i===null||!qN(t,i,u,n)){if(Ht(r))return!1;o=!0}}else{let l=e[++a],h=KN(u,i,tg(t),n);if(h===-1){if(Ht(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ht(r))return!1;o=!0}}}}return Ht(r)||o}function Ht(t){return(t&1)===0}function KN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return JN(e,t)}function QN(t,e,n=!1){for(let r=0;r<e.length;r++)if(WN(t,e[r],n))return!0;return!1}function YN(t){for(let e=0;e<t.length;e++){let n=t[e];if(mD(n))return e}return t.length}function JN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function TE(t,e){return t?":not("+e.trim()+")":e}function ZN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ht(o)&&(e+=TE(s,i),i=""),r=o,s=s||!Ht(r);n++}return i!==""&&(e+=TE(s,i)),e}function XN(t){return t.map(ZN).join(",")}function ex(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ht(i))break;i=s}r++}return{attrs:e,classes:n}}function El(t){return ua(()=>{let e=ED(t),n=ce(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||nn.Emulated,styles:t.styles||Mt,_:null,schemas:t.schemas||null,tView:null,id:""});DD(n);let r=t.dependencies;return n.directiveDefs=AE(r,!1),n.pipeDefs=AE(r,!0),n.id=rx(n),n})}function tx(t){return wr(t)||vD(t)}function nx(t){return t!==null}function cn(t){return ua(()=>({type:t.type,bootstrap:t.bootstrap||Mt,declarations:t.declarations||Mt,imports:t.imports||Mt,exports:t.exports||Mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function CE(t,e){if(t==null)return ws;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Ir.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Ir.None?[r,a]:r,e[s]=o):n[s]=r}return n}function je(t){return ua(()=>{let e=ED(t);return DD(e),e})}function wr(t){return t[DN]||null}function vD(t){return t[bN]||null}function _D(t){return t[TN]||null}function ID(t){let e=wr(t)||vD(t)||_D(t);return e!==null?e.standalone:!1}function wD(t,e){let n=t[CN]||null;if(!n&&e===!0)throw new Error(`Type ${ft(t)} does not have '\u0275mod' property.`);return n}function ED(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ws,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Mt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:CE(t.inputs,e),outputs:CE(t.outputs),debugInfo:null}}function DD(t){t.features?.forEach(e=>e(t))}function AE(t,e){if(!t)return null;let n=e?_D:tx;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(nx)}function rx(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Pt(t){return{\u0275providers:t}}function ix(...t){return{\u0275providers:bD(!0,t),\u0275fromNgModule:!0}}function bD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return eg(e,o=>{let a=o;op(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&TD(i,s),n}function TD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ng(i,s=>{e(s,r)})}}function op(t,e,n,r){if(t=ht(t),!t)return!1;let i=null,s=IE(t),o=!s&&wr(t);if(!s&&!o){let u=t.ngModule;if(s=IE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)op(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{eg(s.imports,h=>{op(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&TD(l,e)}if(!a){let l=Is(i)||(()=>new i);e({provide:i,useFactory:l,deps:Mt},i),e({provide:pD,useValue:i,multi:!0},i),e({provide:Es,useValue:()=>z(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;ng(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function ng(t,e){for(let n of t)cD(n)&&(n=n.\u0275providers),Array.isArray(n)?ng(n,e):e(n)}var sx=De({provide:String,useValue:De});function CD(t){return t!==null&&typeof t=="object"&&sx in t}function ox(t){return!!(t&&t.useExisting)}function ax(t){return!!(t&&t.useFactory)}function Ds(t){return typeof t=="function"}function cx(t){return!!t.useClass}var Dl=new L(""),Hu={},ux={},Hf;function rg(){return Hf===void 0&&(Hf=new Zu),Hf}var pt=class{},sa=class extends pt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cp(e,o=>this.processProvider(o)),this.records.set(fD,fs(void 0,this)),i.has("environment")&&this.records.set(pt,fs(void 0,this));let s=this.records.get(Dl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(pD,Mt,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=yr(this),r=Rt(void 0),i;try{return e()}finally{yr(n),Rt(r)}}get(e,n=ra,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(EE))return e[EE](this);r=wl(r);let i,s=yr(this),o=Rt(void 0);try{if(!(r&ae.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=px(e)&&Il(e);l&&this.injectableDefInScope(l)?u=fs(ap(e),Hu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ae.Self?rg():this.parent;return n=r&ae.Optional&&n===ra?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Yu]=a[Yu]||[]).unshift(ft(e)),s)throw a;return FN(a,e,"R3InjectorError",this.source)}else throw a}finally{Rt(o),yr(s)}}resolveInjectorInitializers(){let e=he(null),n=yr(this),r=Rt(void 0),i;try{let s=this.get(Es,Mt,ae.Self);for(let o of s)o()}finally{yr(n),Rt(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=ht(e);let n=Ds(e)?e:ht(e&&e.provide),r=dx(e);if(!Ds(e)&&e.multi===!0){let i=this.records.get(n);i||(i=fs(void 0,Hu,!0),i.factory=()=>ip(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===Hu&&(n.value=ux,n.value=n.factory()),typeof n.value=="object"&&n.value&&fx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ht(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ap(t){let e=Il(t),n=e!==null?e.factory:Is(t);if(n!==null)return n;if(t instanceof L)throw new $(204,!1);if(t instanceof Function)return lx(t);throw new $(204,!1)}function lx(t){if(t.length>0)throw new $(204,!1);let n=wN(t);return n!==null?()=>n.factory(t):()=>new t}function dx(t){if(CD(t))return fs(void 0,t.useValue);{let e=AD(t);return fs(e,Hu)}}function AD(t,e,n){let r;if(Ds(t)){let i=ht(t);return Is(i)||ap(i)}else if(CD(t))r=()=>ht(t.useValue);else if(ax(t))r=()=>t.useFactory(...ip(t.deps||[]));else if(ox(t))r=()=>z(ht(t.useExisting));else{let i=ht(t&&(t.useClass||t.provide));if(hx(t))r=()=>new i(...ip(t.deps));else return Is(i)||ap(i)}return r}function fs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function hx(t){return!!t.deps}function fx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function px(t){return typeof t=="function"||typeof t=="object"&&t instanceof L}function cp(t,e){for(let n of t)Array.isArray(n)?cp(n,e):n&&cD(n)?cp(n.\u0275providers,e):e(n)}function Ot(t,e){t instanceof sa&&t.assertNotDestroyed();let n,r=yr(t),i=Rt(void 0);try{return e()}finally{yr(r),Rt(i)}}function SD(){return uD()!==void 0||PN()!=null}function gx(t){if(!SD())throw new $(-203,!1)}function mx(t){return typeof t=="function"}var Pn=0,te=1,Z=2,it=3,zt=4,Gt=5,Xu=6,el=7,xt=8,bs=9,rn=10,ke=11,oa=12,SE=13,xs=14,sn=15,li=16,ps=17,Sn=18,bl=19,RD=20,vr=21,zf=22,Nt=23,qt=25,MD=1;var di=7,tl=8,Ts=9,yt=10,nl=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(nl||{});function _r(t){return Array.isArray(t)&&typeof t[MD]=="object"}function On(t){return Array.isArray(t)&&t[MD]===!0}function ig(t){return(t.flags&4)!==0}function Tl(t){return t.componentOffset>-1}function Cl(t){return(t.flags&1)===1}function Er(t){return!!t.template}function up(t){return(t[Z]&512)!==0}var lp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ND(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function kn(){return xD}function xD(t){return t.type.prototype.ngOnChanges&&(t.setInput=vx),yx}kn.ngInherit=!0;function yx(){let t=OD(this),e=t?.current;if(e){let n=t.previous;if(n===ws)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function vx(t,e,n,r,i){let s=this.declaredInputs[r],o=OD(t)||_x(t,{previous:ws,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new lp(l&&l.currentValue,n,u===ws),ND(t,e,i,n)}var PD="__ngSimpleChanges__";function OD(t){return t[PD]||null}function _x(t,e){return t[PD]=e}var RE=null;var en=function(t,e,n){RE?.(t,e,n)},kD="svg",Ix="math";function on(t){for(;Array.isArray(t);)t=t[Pn];return t}function FD(t,e){return on(e[t])}function kt(t,e){return on(e[t.index])}function sg(t,e){return t.data[e]}function Tr(t,e){let n=e[t];return _r(n)?n:n[Pn]}function wx(t){return(t[Z]&4)===4}function og(t){return(t[Z]&128)===128}function Ex(t){return On(t[it])}function Cs(t,e){return e==null?null:t[e]}function LD(t){t[ps]=0}function VD(t){t[Z]&1024||(t[Z]|=1024,og(t)&&Sl(t))}function Dx(t,e){for(;t>0;)e=e[xs],t--;return e}function Al(t){return!!(t[Z]&9216||t[Nt]?.dirty)}function dp(t){t[rn].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),Al(t)&&Sl(t)}function Sl(t){t[rn].changeDetectionScheduler?.notify(0);let e=hi(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!og(e)));)e=hi(e)}function UD(t,e){if((t[Z]&256)===256)throw new $(911,!1);t[vr]===null&&(t[vr]=[]),t[vr].push(e)}function bx(t,e){if(t[vr]===null)return;let n=t[vr].indexOf(e);n!==-1&&t[vr].splice(n,1)}function hi(t){let e=t[it];return On(e)?e[it]:e}var se={lFrame:YD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jD=!1;function Tx(){return se.lFrame.elementDepthCount}function Cx(){se.lFrame.elementDepthCount++}function Ax(){se.lFrame.elementDepthCount--}function BD(){return se.bindingsEnabled}function Sx(){return se.skipHydrationRootTNode!==null}function Rx(t){return se.skipHydrationRootTNode===t}function Mx(){se.skipHydrationRootTNode=null}function ge(){return se.lFrame.lView}function Qe(){return se.lFrame.tView}function da(t){return se.lFrame.contextLView=t,t[xt]}function ha(t){return se.lFrame.contextLView=null,t}function Ye(){let t=$D();for(;t!==null&&t.type===64;)t=t.parent;return t}function $D(){return se.lFrame.currentTNode}function Nx(){let t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ii(t,e){let n=se.lFrame;n.currentTNode=t,n.isParent=e}function ag(){return se.lFrame.isParent}function HD(){se.lFrame.isParent=!1}function zD(){return jD}function ME(t){jD=t}function qD(){let t=se.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function xx(){return se.lFrame.bindingIndex}function Px(t){return se.lFrame.bindingIndex=t}function fa(){return se.lFrame.bindingIndex++}function GD(t){let e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ox(){return se.lFrame.inI18n}function kx(t,e){let n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,hp(e)}function Fx(){return se.lFrame.currentDirectiveIndex}function hp(t){se.lFrame.currentDirectiveIndex=t}function Lx(t){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function WD(){return se.lFrame.currentQueryIndex}function cg(t){se.lFrame.currentQueryIndex=t}function Vx(t){let e=t[te];return e.type===2?e.declTNode:e.type===1?t[Gt]:null}function KD(t,e,n){if(n&ae.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ae.Host);)if(i=Vx(s),i===null||(s=s[xs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=se.lFrame=QD();return r.currentTNode=e,r.lView=t,!0}function ug(t){let e=QD(),n=t[te];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function QD(){let t=se.lFrame,e=t===null?null:t.child;return e===null?YD(t):e}function YD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function JD(){let t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ZD=JD;function lg(){let t=JD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ux(t){return(se.lFrame.contextLView=Dx(t,se.lFrame.contextLView))[xt]}function wi(){return se.lFrame.selectedIndex}function fi(t){se.lFrame.selectedIndex=t}function dg(){let t=se.lFrame;return sg(t.tView,t.selectedIndex)}function Y9(){se.lFrame.currentNamespace=kD}function jx(){return se.lFrame.currentNamespace}var XD=!0;function Rl(){return XD}function Ml(t){XD=t}function Bx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=xD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Nl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function zu(t,e,n){eb(t,e,3,n)}function qu(t,e,n,r){(t[Z]&3)===n&&eb(t,e,n,r)}function qf(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function eb(t,e,n,r){let i=r!==void 0?t[ps]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ps]+=65536),(a<s||s==-1)&&($x(t,n,e,u),t[ps]=(t[ps]&4294901760)+u+2),u++}function NE(t,e){en(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),en(5,t,e)}}function $x(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Z]>>14<t[ps]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,NE(a,s)):NE(a,s)}var vs=-1,pi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Hx(t){return t instanceof pi}function zx(t){return(t.flags&8)!==0}function qx(t){return(t.flags&16)!==0}var Gf={},fp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=wl(r);let i=this.injector.get(e,Gf,r);return i!==Gf||n===Gf?i:this.parentInjector.get(e,n,r)}};function tb(t){return t!==vs}function rl(t){return t&32767}function Gx(t){return t>>16}function il(t,e){let n=Gx(t),r=e;for(;n>0;)r=r[xs],n--;return r}var pp=!0;function xE(t){let e=pp;return pp=t,e}var Wx=256,nb=Wx-1,rb=5,Kx=0,tn={};function Qx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(na)&&(r=n[na]),r==null&&(r=n[na]=Kx++);let i=r&nb,s=1<<i;e.data[t+(i>>rb)]|=s}function sl(t,e){let n=ib(t,e);if(n!==-1)return n;let r=e[te];r.firstCreatePass&&(t.injectorIndex=e.length,Wf(r.data,t),Wf(e,null),Wf(r.blueprint,null));let i=hg(t,e),s=t.injectorIndex;if(tb(i)){let o=rl(i),a=il(i,e),u=a[te].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Wf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ib(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function hg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=ub(i),r===null)return vs;if(n++,i=i[xs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vs}function gp(t,e,n){Qx(t,e,n)}function Yx(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(mD(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function sb(t,e,n){if(n&ae.Optional||t!==void 0)return t;Zp(e,"NodeInjector")}function ob(t,e,n,r){if(n&ae.Optional&&r===void 0&&(r=null),!(n&(ae.Self|ae.Host))){let i=t[bs],s=Rt(void 0);try{return i?i.get(e,r,n&ae.Optional):lD(e,r,n&ae.Optional)}finally{Rt(s)}}return sb(r,e,n)}function ab(t,e,n,r=ae.Default,i){if(t!==null){if(e[Z]&2048&&!(r&ae.Self)){let o=eP(t,e,n,r,tn);if(o!==tn)return o}let s=cb(t,e,n,r,tn);if(s!==tn)return s}return ob(e,n,r,i)}function cb(t,e,n,r,i){let s=Zx(n);if(typeof s=="function"){if(!KD(e,t,r))return r&ae.Host?sb(i,n,r):ob(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ae.Optional))Zp(n);else return o}finally{ZD()}}else if(typeof s=="number"){let o=null,a=ib(t,e),u=vs,l=r&ae.Host?e[sn][Gt]:null;for((a===-1||r&ae.SkipSelf)&&(u=a===-1?hg(t,e):e[a+8],u===vs||!OE(r,!1)?a=-1:(o=e[te],a=rl(u),e=il(u,e)));a!==-1;){let h=e[te];if(PE(s,a,h.data)){let p=Jx(a,e,n,o,r,l);if(p!==tn)return p}u=e[a+8],u!==vs&&OE(r,e[te].data[a+8]===l)&&PE(s,a,e)?(o=h,a=rl(u),e=il(u,e)):a=-1}}return i}function Jx(t,e,n,r,i,s){let o=e[te],a=o.data[t+8],u=r==null?Tl(a)&&pp:r!=o&&(a.type&3)!==0,l=i&ae.Host&&s===a,h=Gu(a,o,n,u,l);return h!==null?gi(e,o,h,a):tn}function Gu(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=o[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=o[u];if(y&&Er(y)&&y.type===n)return u}return null}function gi(t,e,n,r){let i=t[n],s=e.data;if(Hx(i)){let o=i;o.resolving&&SN(AN(s[n]));let a=xE(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Rt(o.injectImpl):null,h=KD(t,r,ae.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Bx(n,s[n],e)}finally{l!==null&&Rt(l),xE(a),o.resolving=!1,ZD()}}return i}function Zx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(na)?t[na]:void 0;return typeof e=="number"?e>=0?e&nb:Xx:e}function PE(t,e,n){let r=1<<t;return!!(n[e+(t>>rb)]&r)}function OE(t,e){return!(t&ae.Self)&&!(t&ae.Host&&e)}var ui=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ab(this._tNode,this._lView,e,wl(r),n)}};function Xx(){return new ui(Ye(),ge())}function Ps(t){return ua(()=>{let e=t.prototype.constructor,n=e[Qu]||mp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Qu]||mp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function mp(t){return iD(t)?()=>{let e=mp(ht(t));return e&&e()}:Is(t)}function eP(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Z]&2048&&!(o[Z]&512);){let a=cb(s,o,n,r|ae.Self,tn);if(a!==tn)return a;let u=s.parent;if(!u){let l=o[RD];if(l){let h=l.get(n,tn,r);if(h!==tn)return h}u=ub(o),o=o[xs]}s=u}return i}function ub(t){let e=t[te],n=e.type;return n===2?e.declTNode:n===1?t[Gt]:null}function fg(t){return Yx(Ye(),t)}function kE(t,e=null,n=null,r){let i=lb(t,e,n,r);return i.resolveInjectorInitializers(),i}function lb(t,e=null,n=null,r,i=new Set){let s=[n||Mt,ix(t)];return r=r||(typeof t=="object"?void 0:ft(t)),new sa(s,e||rg(),r||null,i)}var ai=class ai{static create(e,n){if(Array.isArray(e))return kE({name:""},n,e,"");{let r=e.name??"";return kE({name:r},e.parent,e.providers,r)}}};ai.THROW_IF_NOT_FOUND=ra,ai.NULL=new Zu,ai.\u0275prov=B({token:ai,providedIn:"any",factory:()=>z(fD)}),ai.__NG_ELEMENT_ID__=-1;var Ke=ai;var tP=new L("");tP.__NG_ELEMENT_ID__=t=>{let e=Ye();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&ae.Optional)return null;throw new $(204,!1)};var nP="ngOriginalError";function Kf(t){return t[nP]}var db=!0,pg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=rP,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),yp=class extends pg{constructor(e){super(),this._lView=e}onDestroy(e){return UD(this._lView,e),()=>bx(this._lView,e)}};function rP(){return new yp(ge())}var Fn=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var vp=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,SD()&&(this.destroyRef=P(pg,{optional:!0})??void 0,this.pendingTasks=P(Fn,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Me=vp;function ol(...t){}function hb(t){let e,n;function r(){t=ol;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function FE(t){return queueMicrotask(()=>t()),()=>{t=ol}}var gg="isAngularZone",al=gg+"_ID",iP=0,ye=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Me(!1),this.onMicrotaskEmpty=new Me(!1),this.onStable=new Me(!1),this.onError=new Me(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=db}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,aP(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(gg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,sP,ol,ol);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},sP={};function mg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function oP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){hb(()=>{t.callbackScheduled=!1,_p(t),t.isCheckStableRunning=!0,mg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),_p(t)}function aP(t){let e=()=>{oP(t)},n=iP++;t._inner=t._inner.fork({name:"angular",properties:{[gg]:!0,[al]:n,[al+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(cP(u))return r.invokeTask(s,o,a,u);try{return LE(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),VE(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return LE(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!uP(u)&&e(),VE(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,_p(t),mg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function _p(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function LE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function VE(t){t._nesting--,mg(t)}var Ip=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Me,this.onMicrotaskEmpty=new Me,this.onStable=new Me,this.onError=new Me}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function cP(t){return fb(t,"__ignore_ng_zone__")}function uP(t){return fb(t,"__scheduler_tick__")}function fb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Rn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Kf(e);for(;n&&Kf(n);)n=Kf(n);return n||null}},lP=new L("",{providedIn:"root",factory:()=>{let t=P(ye),e=P(Rn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function dP(){return Os(Ye(),ge())}function Os(t,e){return new Et(kt(t,e))}var Et=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=dP;let t=e;return t})();function hP(t){return t instanceof Et?t.nativeElement:t}function fP(){return this._results[Symbol.iterator]()}var wp=class t{get changes(){return this._changes??=new Me}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=fP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=UN(e);(this._changesDetected=!VN(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function pb(t){return(t.flags&128)===128}var gb=new Map,pP=0;function gP(){return pP++}function mP(t){gb.set(t[bl],t)}function Ep(t){gb.delete(t[bl])}var UE="__ngContext__";function Dr(t,e){_r(e)?(t[UE]=e[bl],mP(e)):t[UE]=e}function mb(t){return vb(t[oa])}function yb(t){return vb(t[zt])}function vb(t){for(;t!==null&&!On(t);)t=t[zt];return t}var Dp;function _b(t){Dp=t}function yP(){if(Dp!==void 0)return Dp;if(typeof document<"u")return document;throw new $(210,!1)}var yg=new L("",{providedIn:"root",factory:()=>vP}),vP="ng",vg=new L(""),Ft=new L("",{providedIn:"platform",factory:()=>"unknown"});var _g=new L("",{providedIn:"root",factory:()=>yP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var _P="h",IP="b";var wP=()=>null;function Ig(t,e,n=!1){return wP(t,e,n)}var Ib=!1,EP=new L("",{providedIn:"root",factory:()=>Ib});var Uu;function DP(){if(Uu===void 0&&(Uu=null,tp.trustedTypes))try{Uu=tp.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Uu}function jE(t){return DP()?.createScriptURL(t)||t}var cl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nD})`}};function pa(t){return t instanceof cl?t.changingThisBreaksApplicationSecurity:t}function wg(t,e){let n=bP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${nD})`)}return n===e}function bP(t){return t instanceof cl&&t.getTypeName()||null}var TP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wb(t){return t=String(t),t.match(TP)?t:"unsafe:"+t}var xl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(xl||{});function CP(t){let e=Db();return e?e.sanitize(xl.URL,t)||"":wg(t,"URL")?pa(t):wb(_s(t))}function AP(t){let e=Db();if(e)return jE(e.sanitize(xl.RESOURCE_URL,t)||"");if(wg(t,"ResourceURL"))return jE(pa(t));throw new $(904,!1)}function SP(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?AP:CP}function Eb(t,e,n){return SP(e,n)(t)}function Db(){let t=ge();return t&&t[rn].sanitizer}var RP=/^>|^->|<!--|-->|--!>|<!-$/g,MP=/(<|>)/g,NP="\u200B$1\u200B";function xP(t){return t.replace(RP,e=>e.replace(MP,NP))}function bb(t){return t instanceof Function?t():t}function PP(t){return(t??P(Ke)).get(Ft)==="browser"}var Mn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Mn||{}),OP;function Eg(t,e){return OP(t,e)}function gs(t,e,n,r,i){if(r!=null){let s,o=!1;On(r)?s=r:_r(r)&&(o=!0,r=r[Pn]);let a=on(r);t===0&&n!==null?i==null?Sb(e,n,a):ll(e,n,a,i||null,!0):t===1&&n!==null?ll(e,n,a,i||null,!0):t===2?YP(e,a,o):t===3&&e.destroyNode(a),s!=null&&ZP(e,t,s,n,i)}}function kP(t,e){return t.createText(e)}function FP(t,e,n){t.setValue(e,n)}function LP(t,e){return t.createComment(xP(e))}function Tb(t,e,n){return t.createElement(e,n)}function VP(t,e){Cb(t,e),e[Pn]=null,e[Gt]=null}function UP(t,e,n,r,i,s){r[Pn]=i,r[Gt]=e,Ol(t,r,n,1,i,s)}function Cb(t,e){e[rn].changeDetectionScheduler?.notify(9),Ol(t,e,e[ke],2,null,null)}function jP(t){let e=t[oa];if(!e)return Qf(t[te],t);for(;e;){let n=null;if(_r(e))n=e[oa];else{let r=e[yt];r&&(n=r)}if(!n){for(;e&&!e[zt]&&e!==t;)_r(e)&&Qf(e[te],e),e=e[it];e===null&&(e=t),_r(e)&&Qf(e[te],e),n=e&&e[zt]}e=n}}function BP(t,e,n,r){let i=yt+r,s=n.length;r>0&&(n[i-1][zt]=e),r<s-yt?(e[zt]=n[i],hD(n,yt+r,e)):(n.push(e),e[zt]=null),e[it]=n;let o=e[li];o!==null&&n!==o&&Ab(o,e);let a=e[Sn];a!==null&&a.insertView(t),dp(e),e[Z]|=128}function Ab(t,e){let n=t[Ts],r=e[it];if(_r(r))t[Z]|=nl.HasTransplantedViews;else{let i=r[it][sn];e[sn]!==i&&(t[Z]|=nl.HasTransplantedViews)}n===null?t[Ts]=[e]:n.push(e)}function Dg(t,e){let n=t[Ts],r=n.indexOf(e);n.splice(r,1)}function ul(t,e){if(t.length<=yt)return;let n=yt+e,r=t[n];if(r){let i=r[li];i!==null&&i!==t&&Dg(i,r),e>0&&(t[n-1][zt]=r[zt]);let s=Ju(t,yt+e);VP(r[te],r);let o=s[Sn];o!==null&&o.detachView(s[te]),r[it]=null,r[zt]=null,r[Z]&=-129}return r}function bg(t,e){if(!(e[Z]&256)){let n=e[ke];n.destroyNode&&Ol(t,e,n,3,null,null),jP(e)}}function Qf(t,e){if(e[Z]&256)return;let n=he(null);try{e[Z]&=-129,e[Z]|=256,e[Nt]&&Df(e[Nt]),HP(t,e),$P(t,e),e[te].type===1&&e[ke].destroy();let r=e[li];if(r!==null&&On(e[it])){r!==e[it]&&Dg(r,e);let i=e[Sn];i!==null&&i.detachView(t)}Ep(e)}finally{he(n)}}function $P(t,e){let n=t.cleanup,r=e[el];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[el]=null);let i=e[vr];if(i!==null){e[vr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function HP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof pi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];en(4,a,u);try{u.call(a)}finally{en(5,a,u)}}else{en(4,i,s);try{s.call(i)}finally{en(5,i,s)}}}}}function zP(t,e,n){return qP(t,e.parent,n)}function qP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Pn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===nn.None||s===nn.Emulated)return null}return kt(r,n)}}function ll(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Sb(t,e,n){t.appendChild(e,n)}function BE(t,e,n,r,i){r!==null?ll(t,e,n,r,i):Sb(t,e,n)}function Rb(t,e){return t.parentNode(e)}function GP(t,e){return t.nextSibling(e)}function WP(t,e,n){return QP(t,e,n)}function KP(t,e,n){return t.type&40?kt(t,n):null}var QP=KP,$E;function Pl(t,e,n,r){let i=zP(t,r,e),s=e[ke],o=r.parent||e[Gt],a=WP(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)BE(s,i,n[u],a,!1);else BE(s,i,n,a,!1);$E!==void 0&&$E(s,r,e,n,i)}function ta(t,e){if(e!==null){let n=e.type;if(n&3)return kt(e,t);if(n&4)return bp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ta(t,r);{let i=t[e.index];return On(i)?bp(-1,i):on(i)}}else{if(n&128)return ta(t,e.next);if(n&32)return Eg(e,t)()||on(t[e.index]);{let r=Mb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=hi(t[sn]);return ta(i,r)}else return ta(t,e.next)}}}return null}function Mb(t,e){if(e!==null){let r=t[sn][Gt],i=e.projection;return r.projection[i]}return null}function bp(t,e){let n=yt+t+1;if(n<e.length){let r=e[n],i=r[te].firstChild;if(i!==null)return ta(r,i)}return e[di]}function YP(t,e,n){t.removeChild(null,e,n)}function Tg(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Dr(on(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Tg(t,e,n.child,r,i,s,!1),gs(e,t,i,a,s);else if(u&32){let l=Eg(n,r),h;for(;h=l();)gs(e,t,i,h,s);gs(e,t,i,a,s)}else u&16?JP(t,e,r,n,i,s):gs(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ol(t,e,n,r,i,s){Tg(n,r,t.firstChild,e,i,s,!1)}function JP(t,e,n,r,i,s){let o=n[sn],u=o[Gt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];gs(e,t,i,h,s)}else{let l=u,h=o[it];pb(r)&&(l.flags|=128),Tg(t,e,l,h,i,s,!0)}}function ZP(t,e,n,r,i){let s=n[di],o=on(n);s!==o&&gs(e,t,r,s,i);for(let a=yt;a<n.length;a++){let u=n[a];Ol(u[te],u,t,e,r,s)}}function XP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Mn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Mn.Important),t.setStyle(n,r,i,s))}}function eO(t,e,n){t.setAttribute(e,"style",n)}function Nb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function xb(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&sp(t,e,r),i!==null&&Nb(t,e,i),s!==null&&eO(t,e,s)}var un={};function Cr(t=1){Pb(Qe(),ge(),wi()+t,!1)}function Pb(t,e,n,r){if(!r)if((e[Z]&3)===3){let s=t.preOrderCheckHooks;s!==null&&zu(e,s,n)}else{let s=t.preOrderHooks;s!==null&&qu(e,s,0,n)}fi(n)}function ne(t,e=ae.Default){let n=ge();if(n===null)return z(t,e);let r=Ye();return ab(r,n,ht(t),e)}function Ob(){let t="invalid";throw new Error(t)}function kb(t,e,n,r,i,s){let o=he(null);try{let a=null;i&Ir.SignalBased&&(a=e[r][Tn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ir.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):ND(e,a,r,s)}finally{he(o)}}function tO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)fi(~i);else{let s=i,o=n[++r],a=n[++r];kx(o,s);let u=e[s];a(2,u)}}}finally{fi(-1)}}function kl(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Pn]=i,p[Z]=r|4|128|8|64,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),LD(p),p[it]=p[xs]=t,p[xt]=n,p[rn]=o||t&&t[rn],p[ke]=a||t&&t[ke],p[bs]=u||t&&t[bs]||null,p[Gt]=s,p[bl]=gP(),p[Xu]=h,p[RD]=l,p[sn]=e.type==2?t[sn]:p,p}function ga(t,e,n,r,i){let s=t.data[e];if(s===null)s=nO(t,e,n,r,i),Ox()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Nx();s.injectorIndex=o===null?-1:o.injectorIndex}return Ii(s,!0),s}function nO(t,e,n,r,i){let s=$D(),o=ag(),a=o?s:s&&s.parent,u=t.data[e]=cO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Fb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Lb(t,e,n,r,i){let s=wi(),o=r&2;try{fi(-1),o&&e.length>qt&&Pb(t,e,qt,!1),en(o?2:0,i),n(r,i)}finally{fi(s),en(o?3:1,i)}}function Cg(t,e,n){if(ig(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{he(r)}}}function Ag(t,e,n){BD()&&(pO(t,e,n,kt(n,e)),(n.flags&64)===64&&Bb(t,e,n))}function Sg(t,e,n=kt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Vb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Rg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Rg(t,e,n,r,i,s,o,a,u,l,h){let p=qt+r,m=p+i,y=rO(p,m),C=typeof l=="function"?l():l;return y[te]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function rO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:un);return n}function iO(t,e,n,r){let s=r.get(EP,Ib)||n===nn.ShadowDom,o=t.selectRootElement(e,s);return sO(o),o}function sO(t){oO(t)}var oO=()=>null;function aO(t,e,n,r){let i=zb(e);i.push(n),t.firstCreatePass&&qb(t).push(r,i.length-1)}function cO(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Sx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function HE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Ir.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?zE(r,n,l,a,u):zE(r,n,l,a)}return r}function zE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function uO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,y=m?m.inputs:null,C=m?m.outputs:null;u=HE(0,p.inputs,h,u,y),l=HE(1,p.outputs,h,l,C);let N=u!==null&&o!==null&&!tg(e)?TO(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function lO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Ub(t,e,n,r,i,s,o,a){let u=kt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Ng(t,n,h,r,i),Tl(e)&&dO(n,e.index)):e.type&3?(r=lO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function dO(t,e){let n=Tr(e,t);n[Z]&16||(n[Z]|=64)}function Mg(t,e,n,r){if(BD()){let i=r===null?null:{"":-1},s=mO(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&jb(t,e,n,o,i,a),i&&yO(n,r,i)}n.mergedAttrs=ia(n.mergedAttrs,n.attrs)}function jb(t,e,n,r,i,s){for(let l=0;l<r.length;l++)gp(sl(n,e),t,r[l].type);_O(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Fb(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=ia(n.mergedAttrs,h.hostAttrs),IO(t,n,e,u,h),vO(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}uO(t,n,s)}function hO(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;fO(o)!=a&&o.push(a),o.push(n,r,s)}}function fO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function pO(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Tl(n)&&wO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||sl(n,e),Dr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=gi(e,t,a,n);if(Dr(l,e),o!==null&&bO(e,a-i,l,u,n,o),Er(u)){let h=Tr(n.index,e);h[xt]=gi(e,t,a,n)}}}function Bb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Fx();try{fi(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];hp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&gO(u,l)}}finally{fi(-1),hp(o)}}function gO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function mO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(QN(e,o.selectors,!1))if(r||(r=[]),Er(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Tp(t,e,u)}else r.unshift(o),Tp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Tp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function yO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new $(-301,!1);r.push(e[i],s)}}}function vO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Er(e)&&(n[""]=t)}}function _O(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function IO(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Is(i.type,!0)),o=new pi(s,Er(i),ne);t.blueprint[r]=o,n[r]=o,hO(t,e,r,Fb(t,n,i.hostVars,un),i)}function wO(t,e,n){let r=kt(e,t),i=Vb(n),s=t[rn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Fl(t,kl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function EO(t,e,n,r,i,s){let o=kt(t,e);DO(e[ke],o,s,t.value,n,r,i)}function DO(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?_s(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function bO(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];kb(r,n,u,l,h,p)}}function TO(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function $b(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Hb(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];cg(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function Fl(t,e){return t[oa]?t[SE][zt]=e:t[oa]=e,t[SE]=e,e}function Cp(t,e,n){cg(0);let r=he(null);try{e(t,n)}finally{he(r)}}function zb(t){return t[el]??=[]}function qb(t){return t.cleanup??=[]}function Gb(t,e){let n=t[bs],r=n?n.get(Rn,null):null;r&&r.handleError(e)}function Ng(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];kb(h,l,r,a,u,i)}}function Wb(t,e,n){let r=FD(e,t);FP(t[ke],r,n)}function CO(t,e){let n=Tr(e,t),r=n[te];AO(r,n);let i=n[Pn];i!==null&&n[Xu]===null&&(n[Xu]=Ig(i,n[bs])),xg(r,n,n[xt])}function AO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function xg(t,e,n){ug(e);try{let r=t.viewQuery;r!==null&&Cp(1,r,n);let i=t.template;i!==null&&Lb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Sn]?.finishViewCreation(t),t.staticContentQueries&&Hb(t,e),t.staticViewQueries&&Cp(2,t.viewQuery,n);let s=t.components;s!==null&&SO(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,lg()}}function SO(t,e){for(let n=0;n<e.length;n++)CO(t,e[n])}function Kb(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[Z]&4096?4096:16,u=kl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[li]=l;let h=t[Sn];return h!==null&&(u[Sn]=h.createEmbeddedView(s)),xg(s,u,n),u}finally{he(i)}}function RO(t,e){let n=yt+e;if(n<t.length)return t[n]}function Ap(t,e){return!e||e.firstChild===null||pb(t)}function Qb(t,e,n,r=!0){let i=e[te];if(BP(i,e,t,n),r){let o=bp(n,t),a=e[ke],u=Rb(a,t[di]);u!==null&&UP(i,t[Gt],a,e,u,o)}let s=e[Xu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function MO(t,e){let n=ul(t,e);return n!==void 0&&bg(n[te],n),n}function dl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(on(s)),On(s)&&NO(s,r);let o=n.type;if(o&8)dl(t,e,n.child,r);else if(o&32){let a=Eg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Mb(e,n);if(Array.isArray(a))r.push(...a);else{let u=hi(e[sn]);dl(u[te],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function NO(t,e){for(let n=yt;n<t.length;n++){let r=t[n],i=r[te].firstChild;i!==null&&dl(r[te],r,i,e)}t[di]!==t[Pn]&&e.push(t[di])}var Yb=[];function xO(t){return t[Nt]??PO(t)}function PO(t){let e=Yb.pop()??Object.create(kO);return e.lView=t,e}function OO(t){t.lView[Nt]!==t&&(t.lView=null,Yb.push(t))}var kO=ce(F({},Jo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Sl(t.lView)},consumerOnSignalRead(){this.lView[Nt]=this}});function FO(t){let e=t[Nt]??Object.create(LO);return e.lView=t,e}var LO=ce(F({},Jo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=hi(t.lView);for(;e&&!Jb(e[te]);)e=hi(e);e&&VD(e)},consumerOnSignalRead(){this.lView[Nt]=this}});function Jb(t){return t.type!==2}var VO=100;function Zb(t,e=!0,n=0){let r=t[rn],i=r.rendererFactory,s=!1;s||i.begin?.();try{UO(t,n)}catch(o){throw e&&Gb(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function UO(t,e){let n=zD();try{ME(!0),Sp(t,e);let r=0;for(;Al(t);){if(r===VO)throw new $(103,!1);r++,Sp(t,1)}}finally{ME(n)}}function jO(t,e,n,r){let i=e[Z];if((i&256)===256)return;let s=!1,o=!1;!s&&e[rn].inlineEffectRunner?.flush(),ug(e);let a=!0,u=null,l=null;s||(Jb(t)?(l=xO(e),u=cu(l)):Ow()===null?(a=!1,l=FO(e),u=cu(l)):e[Nt]&&(Df(e[Nt]),e[Nt]=null));try{LD(e),Px(t.bindingStartIndex),n!==null&&Lb(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&zu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&qu(e,y,0,null),qf(e,0)}if(o||BO(e),Xb(e,0),t.contentQueries!==null&&Hb(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&zu(e,y)}else{let y=t.contentHooks;y!==null&&qu(e,y,1),qf(e,1)}tO(t,e);let p=t.components;p!==null&&tT(e,p,0);let m=t.viewQuery;if(m!==null&&Cp(2,m,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&zu(e,y)}else{let y=t.viewHooks;y!==null&&qu(e,y,2),qf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[zf]){for(let y of e[zf])y();e[zf]=null}s||(e[Z]&=-73)}catch(h){throw s||Sl(e),h}finally{l!==null&&(wf(l,u),a&&OO(l)),lg()}}function Xb(t,e){for(let n=mb(t);n!==null;n=yb(n))for(let r=yt;r<n.length;r++){let i=n[r];eT(i,e)}}function BO(t){for(let e=mb(t);e!==null;e=yb(e)){if(!(e[Z]&nl.HasTransplantedViews))continue;let n=e[Ts];for(let r=0;r<n.length;r++){let i=n[r];VD(i)}}}function $O(t,e,n){let r=Tr(e,t);eT(r,n)}function eT(t,e){og(t)&&Sp(t,e)}function Sp(t,e){let r=t[te],i=t[Z],s=t[Nt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Ef(s)),o||=!1,s&&(s.dirty=!1),t[Z]&=-9217,o)jO(r,t,r.template,t[xt]);else if(i&8192){Xb(t,1);let a=r.components;a!==null&&tT(t,a,1)}}function tT(t,e,n){for(let r=0;r<e.length;r++)$O(t,e[r],n)}function Pg(t,e){let n=zD()?64:1088;for(t[rn].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=hi(t);if(up(t)&&!r)return t;t=r}return null}var mi=class{get rootNodes(){let e=this._lView,n=e[te];return dl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xt]}set context(e){this._lView[xt]=e}get destroyed(){return(this._lView[Z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(On(e)){let n=e[tl],r=n?n.indexOf(this):-1;r>-1&&(ul(e,r),Ju(n,r))}this._attachedToViewContainer=!1}bg(this._lView[te],this._lView)}onDestroy(e){UD(this._lView,e)}markForCheck(){Pg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){dp(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,Zb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=up(this._lView),n=this._lView[li];n!==null&&!e&&Dg(n,this._lView),Cb(this._lView[te],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=up(this._lView),r=this._lView[li];r!==null&&!n&&Ab(r,this._lView),dp(this._lView)}},yi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qO;let t=e;return t})(),HO=yi,zO=class extends HO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Kb(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new mi(i)}};function qO(){return Og(Ye(),ge())}function Og(t,e){return t.type&4?new zO(e,t,Os(t,e)):null}var Z9=new RegExp(`^(\\d+)*(${IP}|${_P})*(.*)`);var GO=()=>null;function Rp(t,e){return GO(t,e)}var As=class{},kg=new L("",{providedIn:"root",factory:()=>!1});var nT=new L(""),rT=new L(""),Mp=class{},hl=class{};function WO(t){let e=Error(`No component factory found for ${ft(t)}.`);return e[KO]=t,e}var KO="ngComponent";var Np=class{resolveComponentFactory(e){throw WO(e)}},qg=class qg{};qg.NULL=new Np;var Ss=qg,Rs=class{},Ln=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>QO();let t=e;return t})();function QO(){let t=ge(),e=Ye(),n=Tr(e.index,t);return(_r(n)?n:t)[ke]}var YO=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function fl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=vE(i,a);else if(s==2){let u=a,l=e[++o];r=vE(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var pl=class extends Ss{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=wr(e);return new Ms(n,this.ngModule)}};function qE(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Ir.None;e?n.push({propName:o,templateName:r,isSignal:(a&Ir.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function JO(t){let e=t.toLowerCase();return e==="svg"?kD:e==="math"?Ix:null}var Ms=class extends hl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=qE(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return qE(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=XN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof pt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new fp(e,o):e,u=a.get(Rs,null);if(u===null)throw new $(407,!1);let l=a.get(YO,null),h=a.get(As,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?iO(m,r,this.componentDef.encapsulation,a):Tb(m,y,JO(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;C!==null&&(R=Ig(C,a,!0));let x=Rg(0,null,null,1,0,null,null,null,null,null,null),j=kl(null,x,null,N,null,null,p,m,a,null,R);ug(j);let H,q,Ie=null;try{let W=this.componentDef,E,v=null;W.findHostDirectiveDefs?(E=[],v=new Map,W.findHostDirectiveDefs(W,E,v),E.push(W)):E=[W];let _=ZO(j,C);Ie=XO(_,C,W,E,j,p,m),q=sg(x,qt),C&&nk(m,W,C,r),n!==void 0&&rk(q,this.ngContentSelectors,n),H=tk(Ie,W,E,v,j,[ik]),xg(x,j,null)}catch(W){throw Ie!==null&&Ep(Ie),Ep(j),W}finally{lg()}return new xp(this.componentType,H,Os(q,j),j,q)}finally{he(s)}}},xp=class extends Mp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new mi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Ng(s[te],s,i,e,n),this.previousInputValues.set(e,n);let o=Tr(this._tNode.index,s);Pg(o,1)}}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZO(t,e){let n=t[te],r=qt;return t[r]=e,ga(n,r,2,"#host",null)}function XO(t,e,n,r,i,s,o){let a=i[te];ek(r,t,e,o);let u=null;e!==null&&(u=Ig(e,i[bs]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=kl(i,Vb(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Tp(a,t,r.length-1),Fl(i,p),i[t.index]=p}function ek(t,e,n,r){for(let i of t)e.mergedAttrs=ia(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(fl(e,e.mergedAttrs,!0),n!==null&&xb(r,n,e))}function tk(t,e,n,r,i,s){let o=Ye(),a=i[te],u=kt(o,i);jb(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=gi(i,a,p,o);Dr(m,i)}Bb(a,i,o),u&&Dr(u,i);let l=gi(i,a,o.directiveStart+o.componentOffset,o);if(t[xt]=i[xt]=l,s!==null)for(let h of s)h(l,e);return Cg(a,o,i),l}function nk(t,e,n,r){if(r)sp(t,n,["ng-version","18.2.2"]);else{let{attrs:i,classes:s}=ex(e.selectors[0]);i&&sp(t,n,i),s&&s.length>0&&Nb(t,n,s.join(" "))}}function rk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function ik(){let t=Ye();Nl(ge()[te],t)}var Ar=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sk;let t=e;return t})();function sk(){let t=Ye();return sT(t,ge())}var ok=Ar,iT=class extends ok{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Os(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){let e=hg(this._hostTNode,this._hostLView);if(tb(e)){let n=il(e,this._hostLView),r=rl(e),i=n[te].data[r+8];return new ui(i,n)}else return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=GE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-yt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Rp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Ap(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!mx(e),a;if(o)a=n;else{let C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new Ms(wr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(pt,null);N&&(s=N)}let h=wr(u.componentType??{}),p=Rp(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,s);return this.insertImpl(y.hostView,a,Ap(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Ex(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[it],l=new iT(u,u[Gt],u[it]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Qb(o,i,s,r),e.attachToViewContainerRef(),hD(Yf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=GE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=ul(this._lContainer,n);r&&(Ju(Yf(this._lContainer),n),bg(r[te],r))}detach(e){let n=this._adjustIndex(e,-1),r=ul(this._lContainer,n);return r&&Ju(Yf(this._lContainer),n)!=null?new mi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function GE(t){return t[tl]}function Yf(t){return t[tl]||(t[tl]=[])}function sT(t,e){let n,r=e[t.index];return On(r)?n=r:(n=$b(r,e,null,t),e[t.index]=n,Fl(e,n)),ck(n,e,t,r),new iT(n,t,e)}function ak(t,e){let n=t[ke],r=n.createComment(""),i=kt(e,t),s=Rb(n,i);return ll(n,s,r,GP(n,i),!1),r}var ck=dk,uk=()=>!1;function lk(t,e,n){return uk(t,e,n)}function dk(t,e,n,r){if(t[di])return;let i;n.type&8?i=on(r):i=ak(e,n),t[di]=i}var Pp=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Op=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Fg(e,n).matches!==null&&this.queries[n].setDirty()}},kp=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=_k(e):this.predicate=e}},Fp=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Lp=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,hk(n,s)),this.matchTNodeWithReadOption(e,n,Gu(n,e,s,!1,!1))}else r===yi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Gu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Et||i===Ar||i===yi&&n.type&4)this.addMatch(n.index,-2);else{let s=Gu(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function hk(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function fk(t,e){return t.type&11?Os(t,e):t.type&4?Og(t,e):null}function pk(t,e,n,r){return n===-1?fk(e,t):n===-2?gk(t,e,r):gi(t,t[te],n,e)}function gk(t,e,n){if(n===Et)return Os(e,t);if(n===yi)return Og(e,t);if(n===Ar)return sT(e,t)}function oT(t,e,n,r){let i=e[Sn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)a.push(null);else{let h=s[l];a.push(pk(e,h,o[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Vp(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=oT(t,e,i,n);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-u];for(let p=yt;p<h.length;p++){let m=h[p];m[li]===m[it]&&Vp(m[te],m,l,r)}if(h[Ts]!==null){let p=h[Ts];for(let m=0;m<p.length;m++){let y=p[m];Vp(y[te],y,l,r)}}}}}return r}function mk(t,e){return t[Sn].queries[e].queryList}function yk(t,e,n){let r=new wp((n&4)===4);return aO(t,e,r,r.destroy),(e[Sn]??=new Op).queries.push(new Pp(r))-1}function vk(t,e,n,r){let i=Qe();if(i.firstCreatePass){let s=Ye();Ik(i,new kp(e,n,r),s.index),wk(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return yk(i,ge(),n)}function _k(t){return t.split(",").map(e=>e.trim())}function Ik(t,e,n){t.queries===null&&(t.queries=new Fp),t.queries.track(new Lp(e,n))}function wk(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Fg(t,e){return t.queries.getByIndex(e)}function Ek(t,e){let n=t[te],r=Fg(n,e);return r.crossesNgTemplate?Vp(n,t,e,[]):oT(n,t,r,e)}var WE=new Set;function Sr(t){WE.has(t)||(WE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Dk(t){return typeof t=="function"&&t[Tn]!==void 0}function ma(t,e){Sr("NgSignals");let n=qw(t),r=n[Tn];return e?.equal&&(r.equal=e.equal),n.set=i=>bf(r,i),n.update=i=>Gw(r,i),n.asReadonly=bk.bind(n),n}function bk(){let t=this[Tn];if(t.readonlyFn===void 0){let e=()=>this();e[Tn]=t,t.readonlyFn=e}return t.readonlyFn}function aT(t){return Dk(t)&&typeof t.set=="function"}function Tk(t){return Object.getPrototypeOf(t.prototype).constructor}function Vn(t){let e=Tk(t.type),n=!0,r=[t];for(;e;){let i;if(Er(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=ju(t.inputs),o.inputTransforms=ju(t.inputTransforms),o.declaredInputs=ju(t.declaredInputs),o.outputs=ju(t.outputs);let a=i.hostBindings;a&&Mk(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Sk(t,u),l&&Rk(t,l),Ck(t,i),_N(t.outputs,i.outputs),Er(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Vn&&(n=!1)}}e=Object.getPrototypeOf(e)}Ak(r)}function Ck(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Ak(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ia(i.hostAttrs,n=ia(n,i.hostAttrs))}}function ju(t){return t===ws?{}:t===Mt?[]:t}function Sk(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Rk(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function Mk(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Lg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var br=class{},aa=class{};var Up=class extends br{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pl(this);let s=wD(e);this._bootstrapComponents=bb(s.bootstrap),this._r3Injector=lb(e,n,[{provide:br,useValue:this},{provide:Ss,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},jp=class extends aa{constructor(e){super(),this.moduleType=e}create(e){return new Up(this.moduleType,e,[])}};var gl=class extends br{constructor(e){super(),this.componentFactoryResolver=new pl(this),this.instance=null;let n=new sa([...e.providers,{provide:br,useValue:this},{provide:Ss,useValue:this.componentFactoryResolver}],e.parent||rg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ll(t,e,n=null){return new gl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function cT(t){return xk(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Nk(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function xk(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function uT(t,e,n){return t[e]=n}function Nn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function lT(t,e,n,r){let i=Nn(t,e,n);return Nn(t,e+1,r)||i}function Pk(t){return(t.flags&32)===32}function Ok(t,e,n,r,i,s,o,a,u){let l=e.consts,h=ga(e,t,4,o||null,a||null);Mg(e,n,h,Cs(l,u)),Nl(e,h);let p=h.tView=Rg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function kk(t,e,n,r,i,s,o,a,u,l){let h=n+qt,p=e.firstCreatePass?Ok(h,e,t,r,i,s,o,a,u):e.data[h];Ii(p,!1);let m=Fk(e,t,p,n);Rl()&&Pl(e,t,m,p),Dr(m,t);let y=$b(m,t,m,p);return t[h]=y,Fl(t,y),lk(y,p,t),Cl(p)&&Ag(e,t,p),u!=null&&Sg(t,p,l),p}function Vl(t,e,n,r,i,s,o,a){let u=ge(),l=Qe(),h=Cs(l.consts,s);return kk(u,l,t,e,n,r,i,h,o,a),Vl}var Fk=Lk;function Lk(t,e,n,r){return Ml(!0),e[ke].createComment("")}var ms=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ms||{}),dT=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),ci=class ci{constructor(){this.ngZone=P(ye),this.scheduler=P(As),this.errorHandler=P(Rn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of ci.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};ci.PHASES=[ms.EarlyRead,ms.Write,ms.MixedReadWrite,ms.Read],ci.\u0275prov=B({token:ci,providedIn:"root",factory:()=>new ci});var Bp=ci,$p=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Vg(t,e){!e?.injector&&gx(Vg);let n=e?.injector??P(Ke);return PP(n)?(Sr("NgAfterNextRender"),Uk(t,n,e,!0)):jk}function Vk(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Uk(t,e,n,r){let i=e.get(dT);i.impl??=e.get(Bp);let s=n?.phase??ms.MixedReadWrite,o=new $p(i.impl,Vk(t,s),r,e.get(pg));return i.impl.register(o),o}var jk={destroy(){}};function ya(t,e,n,r){let i=ge(),s=fa();if(Nn(i,s,e)){let o=Qe(),a=dg();EO(a,i,t,e,n,r)}return ya}function Bk(t,e,n,r){return Nn(t,fa(),n)?e+_s(n)+r:un}function $k(t,e,n,r,i,s){let o=xx(),a=lT(t,o,n,i);return GD(2),a?e+_s(n)+r+_s(i)+s:un}function Bu(t,e){return t<<17|e<<2}function vi(t){return t>>17&32767}function Hk(t){return(t&2)==2}function zk(t,e){return t&131071|e<<17}function Hp(t){return t|2}function Ns(t){return(t&131068)>>2}function Jf(t,e){return t&-131069|e<<2}function qk(t){return(t&1)===1}function zp(t){return t|1}function Gk(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=vi(o),u=Ns(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||la(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=vi(t[a+1]);t[r+1]=Bu(m,a),m!==0&&(t[m+1]=Jf(t[m+1],r)),t[a+1]=zk(t[a+1],r)}else t[r+1]=Bu(a,0),a!==0&&(t[a+1]=Jf(t[a+1],r)),a=r;else t[r+1]=Bu(u,0),a===0?a=r:t[u+1]=Jf(t[u+1],r),u=r;l&&(t[r+1]=Hp(t[r+1])),KE(t,h,r,!0),KE(t,h,r,!1),Wk(e,h,t,r,s),o=Bu(a,u),s?e.classBindings=o:e.styleBindings=o}function Wk(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&la(s,e)>=0&&(n[r+1]=zp(n[r+1]))}function KE(t,e,n,r){let i=t[n+1],s=e===null,o=r?vi(i):Ns(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];Kk(u,e)&&(a=!0,t[o+1]=r?zp(l):Hp(l)),o=r?vi(l):Ns(l)}a&&(t[n+1]=r?Hp(i):zp(i))}function Kk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?la(t,e)>=0:!1}function ks(t,e,n){let r=ge(),i=fa();if(Nn(r,i,e)){let s=Qe(),o=dg();Ub(s,o,r,t,e,r[ke],n,!1)}return ks}function QE(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Ng(t,n,s[o],o,r)}function hT(t,e,n){return fT(t,e,n,!1),hT}function Ul(t,e){return fT(t,e,null,!0),Ul}function fT(t,e,n,r){let i=ge(),s=Qe(),o=GD(2);if(s.firstUpdatePass&&Yk(s,t,o,r),e!==un&&Nn(i,o,e)){let a=s.data[wi()];t1(s,a,i,i[ke],t,i[o+1]=n1(e,n),r,o)}}function Qk(t,e){return e>=t.expandoStartIndex}function Yk(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[wi()],o=Qk(t,n);r1(s,r)&&e===null&&!o&&(e=!1),e=Jk(i,s,e,r),Gk(i,s,e,n,o,r)}}function Jk(t,e,n,r){let i=Lx(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Zf(null,t,e,n,r),n=ca(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Zf(i,t,e,n,r),s===null){let u=Zk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Zf(null,t,e,u[1],r),u=ca(u,e.attrs,r),Xk(t,e,r,u))}else s=e1(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Zk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ns(r)!==0)return t[vi(r)]}function Xk(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[vi(i)]=r}function e1(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ca(r,o,n)}return ca(r,e.attrs,n)}function Zf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ca(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ca(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),BN(t,o,n?!0:e[++s]))}return t===void 0?null:t}function t1(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=qk(l)?YE(u,e,n,i,Ns(l),o):void 0;if(!ml(h)){ml(s)||Hk(l)&&(s=YE(u,null,n,i,a,o));let p=FD(wi(),n);XP(r,o,p,i,s)}}function YE(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===un&&(m=p?Mt:void 0);let y=p?$f(m,r):h===r?m:void 0;if(l&&!ml(y)&&(y=$f(u,r)),ml(y)&&(a=y,o))return a;let C=t[i+1];i=o?vi(C):Ns(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=$f(u,r))}return a}function ml(t){return t!==void 0}function n1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ft(pa(t)))),t}function r1(t,e){return(t.flags&(e?8:16))!==0}function e6(t,e){Sr("NgControlFlow");let n=ge(),r=fa(),i=n[r]!==un?n[r]:-1,s=i!==-1?JE(n,qt+i):void 0,o=0;if(Nn(n,r,t)){let a=he(null);try{if(s!==void 0&&MO(s,o),t!==-1){let u=qt+t,l=JE(n,u),h=i1(n[te],u),p=Rp(l,h.tView.ssrId),m=Kb(n,h,e,{dehydratedView:p});Qb(l,m,o,Ap(h,p))}}finally{he(a)}}else if(s!==void 0){let a=RO(s,o);a!==void 0&&(a[xt]=e)}}function JE(t,e){return t[e]}function i1(t,e){return sg(t,e)}function s1(t,e,n,r,i,s){let o=e.consts,a=Cs(o,i),u=ga(e,t,2,r,a);return Mg(e,n,u,Cs(o,s)),u.attrs!==null&&fl(u,u.attrs,!1),u.mergedAttrs!==null&&fl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Dt(t,e,n,r){let i=ge(),s=Qe(),o=qt+t,a=i[ke],u=s.firstCreatePass?s1(o,s,i,e,n,r):s.data[o],l=o1(s,i,u,a,e,t);i[o]=l;let h=Cl(u);return Ii(u,!0),xb(a,l,u),!Pk(u)&&Rl()&&Pl(s,i,l,u),Tx()===0&&Dr(l,i),Cx(),h&&(Ag(s,i,u),Cg(s,u,i)),r!==null&&Sg(i,u),Dt}function Lt(){let t=Ye();ag()?HD():(t=t.parent,Ii(t,!1));let e=t;Rx(e)&&Mx(),Ax();let n=Qe();return n.firstCreatePass&&(Nl(n,t),ig(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&zx(e)&&QE(n,e,ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&qx(e)&&QE(n,e,ge(),e.stylesWithoutHost,!1),Lt}function Fs(t,e,n,r){return Dt(t,e,n,r),Lt(),Fs}var o1=(t,e,n,r,i,s)=>(Ml(!0),Tb(r,i,jx()));function a1(t,e,n,r,i){let s=e.consts,o=Cs(s,r),a=ga(e,t,8,"ng-container",o);o!==null&&fl(a,o,!0);let u=Cs(s,i);return Mg(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function c1(t,e,n){let r=ge(),i=Qe(),s=t+qt,o=i.firstCreatePass?a1(s,i,r,e,n):i.data[s];Ii(o,!0);let a=l1(i,r,o,t);return r[s]=a,Rl()&&Pl(i,r,a,o),Dr(a,r),Cl(o)&&(Ag(i,r,o),Cg(i,o,r)),n!=null&&Sg(r,o),c1}function u1(){let t=Ye(),e=Qe();return ag()?HD():(t=t.parent,Ii(t,!1)),e.firstCreatePass&&(Nl(e,t),ig(t)&&e.queries.elementEnd(t)),u1}var l1=(t,e,n,r)=>(Ml(!0),LP(e[ke],""));function Ug(){return ge()}var yl="en-US";var d1=yl;function h1(t){typeof t=="string"&&(d1=t.toLowerCase().replace(/_/g,"-"))}var f1=(t,e,n)=>{};function ln(t,e,n,r){let i=ge(),s=Qe(),o=Ye();return pT(s,i,i[ke],o,t,e,r),ln}function p1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[el],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function pT(t,e,n,r,i,s,o){let a=Cl(r),l=t.firstCreatePass&&qb(t),h=e[xt],p=zb(e),m=!0;if(r.type&3||o){let N=kt(r,e),R=o?o(N):N,x=p.length,j=o?q=>o(on(q[r.index])):r.index,H=null;if(!o&&a&&(H=p1(t,e,i,r.index)),H!==null){let q=H.__ngLastListenerFn__||H;q.__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,m=!1}else{s=XE(r,e,h,s),f1(N,i,s);let q=n.listen(R,i,s);p.push(s,q),l&&l.push(i,j,x,x+1)}}else s=XE(r,e,h,s);let y=r.outputs,C;if(m&&y!==null&&(C=y[i])){let N=C.length;if(N)for(let R=0;R<N;R+=2){let x=C[R],j=C[R+1],Ie=e[x][j].subscribe(s),W=p.length;p.push(s,Ie),l&&l.push(i,r.index,W,-(W+1))}}}function ZE(t,e,n,r){let i=he(null);try{return en(6,e,n),n(r)!==!1}catch(s){return Gb(t,s),!1}finally{en(7,e,n),he(i)}}function XE(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Tr(t.index,e):e;Pg(o,5);let a=ZE(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=ZE(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function Ei(t=1){return Ux(t)}function gT(t,e,n,r){vk(t,e,n,r)}function mT(t){let e=ge(),n=Qe(),r=WD();cg(r+1);let i=Fg(n,r);if(t.dirty&&wx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=Ek(e,r);t.reset(s,hP),t.notifyOnChanges()}return!0}return!1}function yT(){return mk(ge(),WD())}function va(t,e=""){let n=ge(),r=Qe(),i=t+qt,s=r.firstCreatePass?ga(r,i,1,e,null):r.data[i],o=g1(r,n,s,e,t);n[i]=o,Rl()&&Pl(r,n,o,s),Ii(s,!1)}var g1=(t,e,n,r,i)=>(Ml(!0),kP(e[ke],r));function m1(t){return jl("",t,""),m1}function jl(t,e,n){let r=ge(),i=Bk(r,t,e,n);return i!==un&&Wb(r,wi(),i),jl}function jg(t,e,n,r,i){let s=ge(),o=$k(s,t,e,n,r,i);return o!==un&&Wb(s,wi(),o),jg}function Bg(t,e,n){aT(e)&&(e=e());let r=ge(),i=fa();if(Nn(r,i,e)){let s=Qe(),o=dg();Ub(s,o,r,t,e,r[ke],n,!1)}return Bg}function vT(t,e){let n=aT(t);return n&&t.set(e),n}function $g(t,e){let n=ge(),r=Qe(),i=Ye();return pT(r,n,n[ke],i,t,e),$g}function y1(t,e,n){let r=Qe();if(r.firstCreatePass){let i=Er(t);qp(n,r.data,r.blueprint,i,!0),qp(e,r.data,r.blueprint,i,!1)}}function qp(t,e,n,r,i){if(t=ht(t),Array.isArray(t))for(let s=0;s<t.length;s++)qp(t[s],e,n,r,i);else{let s=Qe(),o=ge(),a=Ye(),u=Ds(t)?t:ht(t.provide),l=AD(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ds(t)||!t.multi){let y=new pi(l,i,ne),C=ep(u,e,i?h:h+m,p);C===-1?(gp(sl(a,o),s,u),Xf(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[C]=y,o[C]=y)}else{let y=ep(u,e,h+m,p),C=ep(u,e,h,h+m),N=y>=0&&n[y],R=C>=0&&n[C];if(i&&!R||!i&&!N){gp(sl(a,o),s,u);let x=I1(i?_1:v1,n.length,i,r,l);!i&&R&&(n[C].providerFactory=x),Xf(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),o.push(x)}else{let x=_T(n[i?C:y],l,!i&&r);Xf(s,t,y>-1?y:C,x)}!i&&r&&R&&n[C].componentProviders++}}}function Xf(t,e,n,r){let i=Ds(e),s=cx(e);if(i||s){let u=(s?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function _T(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ep(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function v1(t,e,n,r){return Gp(this.multi,[])}function _1(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=gi(n,n[te],this.providerFactory.index,r);s=a.slice(0,o),Gp(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Gp(i,s);return s}function Gp(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function I1(t,e,n,r,i){let s=new pi(t,n,ne);return s.multi=[],s.index=e,s.componentProviders=0,_T(s,i,r&&!n),s}function _a(t,e=[]){return n=>{n.providersResolver=(r,i)=>y1(r,i?i(t):t,e)}}var w1=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=bD(!1,r.type),s=i.length>0?Ll([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=B({token:e,providedIn:"environment",factory:()=>new e(z(pt))});let t=e;return t})();function Bl(t){Sr("NgStandalone"),t.getStandaloneInjector=e=>e.get(w1).getOrCreateStandaloneInjector(t)}function t6(t,e,n,r){return E1(ge(),qD(),t,e,n,r)}function IT(t,e,n,r,i){return D1(ge(),qD(),t,e,n,r,i)}function wT(t,e){let n=t[e];return n===un?void 0:n}function E1(t,e,n,r,i,s){let o=e+n;return Nn(t,o,i)?uT(t,o+1,s?r.call(s,i):r(i)):wT(t,o+1)}function D1(t,e,n,r,i,s,o){let a=e+n;return lT(t,a,i,s)?uT(t,a+2,o?r.call(o,i,s):r(i,s)):wT(t,a+2)}var xn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ET=new xn("18.2.2");var $l=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var DT=new L("");function Di(t){return!!t&&typeof t.then=="function"}function bT(t){return!!t&&typeof t.subscribe=="function"}var Hl=new L(""),TT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=P(Hl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Di(o))r.push(o);else if(bT(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ia=new L("");function b1(){zw(()=>{throw new $(600,!1)})}function T1(t){return t.isBoundToModule}var C1=10;function A1(t,e,n){try{let r=n();return Di(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Rr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(lP),this.afterRenderManager=P(dT),this.zonelessEnabled=P(kg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=P(Fn).hasPendingTasks.pipe(Q(r=>!r)),this._injector=P(pt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof hl;if(!this._injector.get(TT).done){let y=!s&&ID(r),C=!1;throw new $(405,C)}let a;s?a=r:a=this._injector.get(Ss).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=T1(a)?void 0:this._injector.get(br),l=i||a.selector,h=a.create(Ke.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(DT,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Wu(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new $(101,!1);let r=he(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,he(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Rs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<C1;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)S1(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Al(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Wu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ia,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Wu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new $(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Wu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function S1(t,e,n,r){if(!n&&!Al(t))return;Zb(t,e,n&&!r?0:1)}var Wp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},zl=(()=>{let e=class e{compileModuleSync(r){return new jp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=wD(r),o=bb(s.declarations).reduce((a,u)=>{let l=wr(u);return l&&a.push(new Ms(l)),a},[]);return new Wp(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var R1=(()=>{let e=class e{constructor(){this.zone=P(ye),this.changeDetectionScheduler=P(As),this.applicationRef=P(Rr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),M1=new L("",{factory:()=>!1});function CT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ye(ce(F({},AT()),{scheduleInRootZone:n})),[{provide:ye,useFactory:t},{provide:Es,multi:!0,useFactory:()=>{let r=P(R1,{optional:!0});return()=>r.initialize()}},{provide:Es,multi:!0,useFactory:()=>{let r=P(N1);return()=>{r.initialize()}}},e===!0?{provide:nT,useValue:!0}:[],{provide:rT,useValue:n??db}]}function n6(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=CT({ngZoneFactory:()=>{let i=AT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Sr("NgZone_CoalesceEvent"),new ye(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Pt([{provide:M1,useValue:!0},{provide:kg,useValue:!1},r])}function AT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var N1=(()=>{let e=class e{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=P(ye),this.pendingTasks=P(Fn)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var x1=(()=>{let e=class e{constructor(){this.appRef=P(Rr),this.taskService=P(Fn),this.ngZone=P(ye),this.zonelessEnabled=P(kg),this.disableScheduling=P(nT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Re,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(al):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(rT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ip||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?FE:hb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(al+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,FE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function P1(){return typeof $localize<"u"&&$localize.locale||yl}var Hg=new L("",{providedIn:"root",factory:()=>P(Hg,ae.Optional|ae.SkipSelf)||P1()});var ST=new L("");function $u(t){return!!t.platformInjector}function O1(t){let e=$u(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ye);return n.run(()=>{$u(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Rn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),$u(t)){let s=()=>e.destroy(),o=t.platformInjector.get(ST);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{Wu(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return A1(r,n,()=>{let s=e.get(TT);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Hg,yl);if(h1(o||yl),$u(t)){let a=e.get(Rr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return k1(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function k1(t,e){let n=t.injector.get(Rr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new $(-403,!1);e.push(t)}var Ku=null;function F1(t=[],e){return Ke.create({name:e,providers:[{provide:Dl,useValue:"platform"},{provide:ST,useValue:new Set([()=>Ku=null])},...t]})}function L1(t=[]){if(Ku)return Ku;let e=F1(t);return Ku=e,b1(),V1(e),e}function V1(t){t.get(vg,null)?.forEach(n=>n())}var Mr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=U1;let t=e;return t})();function U1(t){return j1(Ye(),ge(),(t&16)===16)}function j1(t,e,n){if(Tl(t)&&!n){let r=Tr(t.index,e);return new mi(r,r)}else if(t.type&175){let r=e[sn];return new mi(r,e)}return null}var Kp=class{constructor(){}supports(e){return cT(e)}create(e){return new Qp(e)}},B1=(t,e)=>e,Qp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||B1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<eD(r,i,s)?n:r,a=eD(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,C=y+m;h<=C&&C<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!cT(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,Nk(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Yp(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new vl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Yp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Jp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},vl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Jp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function eD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function tD(){return new zg([new Kp])}var zg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||tD()),deps:[[e,new Xp,new st]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new $(901,!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:tD});let t=e;return t})();function RT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=L1(r),s=[CT({}),{provide:As,useExisting:x1},...n||[]],o=new gl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return O1({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var MT=new L("");function Nr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function wa(t,e){Sr("NgSignals");let n=Bw(t);return e?.equal&&(n[Tn].equal=e.equal),n}function Un(t){let e=he(null);try{return t()}finally{he(e)}}function NT(t){let e=wr(t);if(!e)return null;let n=new Ms(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var LT=null;function Bn(){return LT}function VT(t){LT??=t}var ql=class{};var Je=new L(""),Jg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(H1),providedIn:"platform"});let t=e;return t})(),UT=new L(""),H1=(()=>{let e=class e extends Jg{constructor(){super(),this._doc=P(Je),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bn().getBaseHref(this._doc)}onPopState(r){let i=Bn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Bn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Zg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function xT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function jn(t){return t&&t[0]!=="?"?"?"+t:t}var $n=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(Xg),providedIn:"root"});let t=e;return t})(),jT=new L(""),Xg=(()=>{let e=class e extends $n{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Zg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+jn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+jn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+jn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(Jg),z(jT,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BT=(()=>{let e=class e extends $n{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Zg(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+jn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+jn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(z(Jg),z(jT,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Vs=(()=>{let e=class e{constructor(r){this._subject=new Me,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=G1(xT(PT(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+jn(i))}normalize(r){return e.stripTrailingSlash(q1(this._basePath,PT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+jn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+jn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=jn,e.joinWithSlash=Zg,e.stripTrailingSlash=xT,e.\u0275fac=function(i){return new(i||e)(z($n))},e.\u0275prov=B({token:e,factory:()=>z1(),providedIn:"root"});let t=e;return t})();function z1(){return new Vs(z($n))}function q1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function PT(t){return t.replace(/\/index.html$/,"")}function G1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Gl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Gg=/\s+/,OT=[],$T=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=OT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Gg):OT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Gg):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Gg).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(ne(Et),ne(Ln))},e.\u0275dir=je({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Wg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},HT=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Wg(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),kT(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);kT(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ne(Ar),ne(yi),ne(zg))},e.\u0275dir=je({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function kT(t,e){t.context.$implicit=e.item}var zT=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Kg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){FT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){FT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ne(Ar),ne(yi))},e.\u0275dir=je({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Kg=class{constructor(){this.$implicit=null,this.ngIf=null}};function FT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ft(e)}'.`)}var em=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=an({});let t=e;return t})(),tm="browser",W1="server";function K1(t){return t===tm}function Wl(t){return t===W1}var qT=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>K1(P(Ft))?new Qg(P(Je),window):new Yg});let t=e;return t})(),Qg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=Q1(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function Q1(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Yg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ls=class{};var Da=class{},Ql=class{},Hn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var im=class{encodeKey(e){return GT(e)}encodeValue(e){return GT(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Y1(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var J1=/%(\d[a-f0-9])/gi,Z1={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GT(t){return encodeURIComponent(t).replace(J1,(e,n)=>Z1[n]??e)}function Kl(t){return`${t}`}var Or=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new im,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Y1(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Kl):[Kl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Kl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Kl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var sm=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function X1(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function WT(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function KT(t){return typeof Blob<"u"&&t instanceof Blob}function QT(t){return typeof FormData<"u"&&t instanceof FormData}function eF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ea=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(X1(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Hn,this.context??=new sm,!this.params)this.params=new Or,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||WT(this.body)||KT(this.body)||QT(this.body)||eF(this.body)?this.body:this.body instanceof Or?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||QT(this.body)?null:KT(this.body)?this.body.type||null:WT(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Or?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},kr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(kr||{}),ba=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Hn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Yl=class t extends ba{constructor(e={}){super(e),this.type=kr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ta=class t extends ba{constructor(e={}){super(e),this.type=kr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Pr=class extends ba{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},eC=200,tF=204;function rm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var nF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Ea)o=r;else{let l;s.headers instanceof Hn?l=s.headers:l=new Hn(s.headers);let h;s.params&&(s.params instanceof Or?h=s.params:h=new Or({fromObject:s.params})),o=new Ea(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=K(o).pipe(Cn(l=>this.handler.handle(l)));if(r instanceof Ea||s.observe==="events")return a;let u=a.pipe(dt(l=>l instanceof Ta));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(Q(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return u.pipe(Q(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return u.pipe(Q(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return u.pipe(Q(l=>l.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Or().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,rm(s,i))}post(r,i,s={}){return this.request("POST",r,rm(s,i))}put(r,i,s={}){return this.request("PUT",r,rm(s,i))}};e.\u0275fac=function(i){return new(i||e)(z(Da))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),rF=/^\)\]\}',?\n/,iF="X-Request-URL";function YT(t){if(t.url)return t.url;let e=iF.toLocaleLowerCase();return t.headers.get(e)}var sF=(()=>{let e=class e{constructor(){this.fetchImpl=P(om,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=P(ye)}handle(r){return new oe(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(am,o=>i.error(new Pr({error:o}))),()=>s.abort()})}doRequest(r,i,s){return w(this,null,function*(){let o=this.createRequestInit(r),a;try{let C=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,F({signal:i},o)));oF(C),s.next({type:kr.Sent}),a=yield C}catch(C){s.error(new Pr({error:C,status:C.status??0,statusText:C.statusText,url:r.urlWithParams,headers:C.headers}));return}let u=new Hn(a.headers),l=a.statusText,h=YT(a)??r.urlWithParams,p=a.status,m=null;if(r.reportProgress&&s.next(new Yl({headers:u,status:p,statusText:l,url:h})),a.body){let C=a.headers.get("content-length"),N=[],R=a.body.getReader(),x=0,j,H,q=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>w(this,null,function*(){for(;;){let{done:W,value:E}=yield R.read();if(W)break;if(N.push(E),x+=E.length,r.reportProgress){H=r.responseType==="text"?(H??"")+(j??=new TextDecoder).decode(E,{stream:!0}):void 0;let v=()=>s.next({type:kr.DownloadProgress,total:C?+C:void 0,loaded:x,partialText:H});q?q.run(v):v()}}}));let Ie=this.concatChunks(N,x);try{let W=a.headers.get("Content-Type")??"";m=this.parseBody(r,Ie,W)}catch(W){s.error(new Pr({error:W,headers:new Hn(a.headers),status:a.status,statusText:a.statusText,url:YT(a)??r.urlWithParams}));return}}p===0&&(p=m?eC:0),p>=200&&p<300?(s.next(new Ta({body:m,headers:u,status:p,statusText:l,url:h})),s.complete()):s.error(new Pr({error:m,headers:u,status:p,statusText:l,url:h}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(rF,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),om=class{};function am(){}function oF(t){t.then(am,am)}function tC(t,e){return e(t)}function aF(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function cF(t,e,n){return(r,i)=>Ot(n,()=>e(r,s=>t(s,i)))}var uF=new L(""),cm=new L(""),lF=new L(""),nC=new L("",{providedIn:"root",factory:()=>!0});function dF(){let t=null;return(e,n)=>{t===null&&(t=(P(uF,{optional:!0})??[]).reduceRight(aF,tC));let r=P(Fn);if(P(nC)){let s=r.add();return t(e,n).pipe(mr(()=>r.remove(s)))}else return t(e,n)}}var JT=(()=>{let e=class e extends Da{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=P(Fn),this.contributeToStability=P(nC)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(cm),...this.injector.get(lF,[])]));this.chain=i.reduceRight((s,o)=>cF(s,o,this.injector),tC)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(mr(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(z(Ql),z(pt))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();var hF=/^\)\]\}',?\n/;function fF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var ZT=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new $(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Ee(i.\u0275loadImpl()):K(null)).pipe(mt(()=>new oe(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((R,x)=>a.setRequestHeader(R,x.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let R=r.detectContentTypeHeader();R!==null&&a.setRequestHeader("Content-Type",R)}if(r.responseType){let R=r.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let u=r.serializeBody(),l=null,h=()=>{if(l!==null)return l;let R=a.statusText||"OK",x=new Hn(a.getAllResponseHeaders()),j=fF(a)||r.url;return l=new Yl({headers:x,status:a.status,statusText:R,url:j}),l},p=()=>{let{headers:R,status:x,statusText:j,url:H}=h(),q=null;x!==tF&&(q=typeof a.response>"u"?a.responseText:a.response),x===0&&(x=q?eC:0);let Ie=x>=200&&x<300;if(r.responseType==="json"&&typeof q=="string"){let W=q;q=q.replace(hF,"");try{q=q!==""?JSON.parse(q):null}catch(E){q=W,Ie&&(Ie=!1,q={error:E,text:q})}}Ie?(o.next(new Ta({body:q,headers:R,status:x,statusText:j,url:H||void 0})),o.complete()):o.error(new Pr({error:q,headers:R,status:x,statusText:j,url:H||void 0}))},m=R=>{let{url:x}=h(),j=new Pr({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:x||void 0});o.error(j)},y=!1,C=R=>{y||(o.next(h()),y=!0);let x={type:kr.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(x.total=R.total),r.responseType==="text"&&a.responseText&&(x.partialText=a.responseText),o.next(x)},N=R=>{let x={type:kr.UploadProgress,loaded:R.loaded};R.lengthComputable&&(x.total=R.total),o.next(x)};return a.addEventListener("load",p),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),r.reportProgress&&(a.addEventListener("progress",C),u!==null&&a.upload&&a.upload.addEventListener("progress",N)),a.send(u),o.next({type:kr.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",p),a.removeEventListener("timeout",m),r.reportProgress&&(a.removeEventListener("progress",C),u!==null&&a.upload&&a.upload.removeEventListener("progress",N)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(z(Ls))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),rC=new L(""),pF="XSRF-TOKEN",gF=new L("",{providedIn:"root",factory:()=>pF}),mF="X-XSRF-TOKEN",yF=new L("",{providedIn:"root",factory:()=>mF}),Jl=class{},vF=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gl(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(z(Je),z(Ft),z(gF))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function _F(t,e){let n=t.url.toLowerCase();if(!P(rC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=P(Jl).getToken(),i=P(yF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var iC=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(iC||{});function IF(t,e){return{\u0275kind:t,\u0275providers:e}}function wF(...t){let e=[nF,ZT,JT,{provide:Da,useExisting:JT},{provide:Ql,useFactory:()=>P(sF,{optional:!0})??P(ZT)},{provide:cm,useValue:_F,multi:!0},{provide:rC,useValue:!0},{provide:Jl,useClass:vF}];for(let n of t)e.push(...n.\u0275providers);return Pt(e)}var XT=new L("");function EF(){return IF(iC.LegacyInterceptors,[{provide:XT,useFactory:dF},{provide:cm,useExisting:XT,multi:!0}])}var j6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=an({providers:[wF(EF())]});let t=e;return t})();var dm=class extends ql{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hm=class t extends dm{static makeCurrent(){VT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=DF();return n==null?null:bF(n)}resetBaseElement(){Ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gl(document.cookie,e)}},Ca=null;function DF(){return Ca=Ca||document.querySelector("base"),Ca?Ca.getAttribute("href"):null}function bF(t){return new URL(t,document.baseURI).pathname}var TF=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Zl=new L(""),cC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new $(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(z(Zl),z(ye))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Aa=class{constructor(e){this._doc=e}},um="ng-app-id",uC=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wl(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${um}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(um),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(um,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(z(Je),z(yg),z(_g,8),z(Ft))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),lm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},pm=/%COMP%/g,lC="%COMP%",CF=`_nghost-${lC}`,AF=`_ngcontent-${lC}`,SF=!0,RF=new L("",{providedIn:"root",factory:()=>SF});function MF(t){return AF.replace(pm,t)}function NF(t){return CF.replace(pm,t)}function dC(t,e){return e.map(n=>n.replace(pm,t))}var sC=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Wl(u),this.defaultRenderer=new Sa(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===nn.ShadowDom&&(i=ce(F({},i),{encapsulation:nn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Xl?s.applyToHost(r):s instanceof Ra&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case nn.Emulated:o=new Xl(l,h,i,this.appId,p,a,u,m);break;case nn.ShadowDom:return new fm(l,h,r,i,a,u,this.nonce,m);default:o=new Ra(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(z(cC),z(uC),z(yg),z(RF),z(Je),z(Ft),z(ye),z(_g))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Sa=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(lm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(oC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(oC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=lm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=lm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Mn.DashCase|Mn.Important)?e.style.setProperty(n,r,i&Mn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Mn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Bn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function oC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var fm=class extends Sa{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=dC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ra=class extends Sa{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?dC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xl=class extends Ra{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=MF(l),this.hostAttr=NF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},xF=(()=>{let e=class e extends Aa{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(z(Je))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),PF=(()=>{let e=class e extends Aa{constructor(r){super(r),this.delegate=P(MT,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(z(Je))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),aC=["alt","control","meta","shift"],OF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},FF=(()=>{let e=class e extends Aa{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),aC.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=OF[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),aC.forEach(a=>{if(a!==s){let u=kF[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(z(Je))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function h8(t,e){return RT(F({rootComponent:t},LF(e)))}function LF(t){return{appProviders:[...$F,...t?.providers??[]],platformProviders:BF}}function VF(){hm.makeCurrent()}function UF(){return new Rn}function jF(){return _b(document),document}var BF=[{provide:Ft,useValue:tm},{provide:vg,useValue:VF,multi:!0},{provide:Je,useFactory:jF,deps:[]}];var $F=[{provide:Dl,useValue:"root"},{provide:Rn,useFactory:UF,deps:[]},{provide:Zl,useClass:xF,multi:!0,deps:[Je,ye,Ft]},{provide:Zl,useClass:FF,multi:!0,deps:[Je]},{provide:Zl,useClass:PF,multi:!0},sC,uC,cC,{provide:Rs,useExisting:sC},{provide:Ls,useClass:TF,deps:[]},[]];var hC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(z(Je))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ie="primary",za=Symbol("RouteTitle"),_m=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function zs(t){return new _m(t)}function zF(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function qF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!dn(t[n],e[n]))return!1;return!0}function dn(t,e){let n=t?Im(t):void 0,r=e?Im(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!bC(t[i],e[i]))return!1;return!0}function Im(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function bC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function TC(t){return t.length>0?t[t.length-1]:null}function Vr(t){return Lf(t)?t:Di(t)?Ee(Promise.resolve(t)):K(t)}var GF={exact:AC,subset:SC},CC={exact:WF,subset:KF,ignored:()=>!0};function fC(t,e,n){return GF[n.paths](t.root,e.root,n.matrixParams)&&CC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function WF(t,e){return dn(t,e)}function AC(t,e,n){if(!Ti(t.segments,e.segments)||!nd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!AC(t.children[r],e.children[r],n))return!1;return!0}function KF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>bC(t[n],e[n]))}function SC(t,e,n){return RC(t,e,e.segments,n)}function RC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ti(i,n)||e.hasChildren()||!nd(i,n,r))}else if(t.segments.length===n.length){if(!Ti(t.segments,n)||!nd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!SC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ti(t.segments,i)||!nd(t.segments,i,r)||!t.children[ie]?!1:RC(t.children[ie],e,s,r)}}function nd(t,e,n){return e.every((r,i)=>CC[n](t[i].parameters,r.parameters))}var qn=class{constructor(e=new _e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zs(this.queryParams),this._queryParamMap}toString(){return JF.serialize(this)}},_e=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rd(this)}},bi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=zs(this.parameters),this._parameterMap}toString(){return NC(this)}};function QF(t,e){return Ti(t,e)&&t.every((n,r)=>dn(n.parameters,e[r].parameters))}function Ti(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function YF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ie&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ie&&(n=n.concat(e(i,r)))}),n}var qa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new qs,providedIn:"root"});let t=e;return t})(),qs=class{parse(e){let n=new Em(e);return new qn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ma(e.root,!0)}`,r=eL(e.queryParams),i=typeof e.fragment=="string"?`#${ZF(e.fragment)}`:"";return`${n}${r}${i}`}},JF=new qs;function rd(t){return t.segments.map(e=>NC(e)).join("/")}function Ma(t,e){if(!t.hasChildren())return rd(t);if(e){let n=t.children[ie]?Ma(t.children[ie],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ie&&r.push(`${i}:${Ma(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=YF(t,(r,i)=>i===ie?[Ma(t.children[ie],!1)]:[`${i}:${Ma(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ie]!=null?`${rd(t)}/${n[0]}`:`${rd(t)}/(${n.join("//")})`}}function MC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ed(t){return MC(t).replace(/%3B/gi,";")}function ZF(t){return encodeURI(t)}function wm(t){return MC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function id(t){return decodeURIComponent(t)}function pC(t){return id(t.replace(/\+/g,"%20"))}function NC(t){return`${wm(t.path)}${XF(t.parameters)}`}function XF(t){return Object.entries(t).map(([e,n])=>`;${wm(e)}=${wm(n)}`).join("")}function eL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ed(n)}=${ed(i)}`).join("&"):`${ed(n)}=${ed(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var tL=/^[^\/()?;#]+/;function gm(t){let e=t.match(tL);return e?e[0]:""}var nL=/^[^\/()?;=#]+/;function rL(t){let e=t.match(nL);return e?e[0]:""}var iL=/^[^=?&#]+/;function sL(t){let e=t.match(iL);return e?e[0]:""}var oL=/^[^&#]+/;function aL(t){let e=t.match(oL);return e?e[0]:""}var Em=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ie]=new _e(e,n)),r}parseSegment(){let e=gm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new bi(id(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=rL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=gm(this.remaining);i&&(r=i,this.capture(r))}e[id(n)]=id(r)}parseQueryParam(e){let n=sL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=aL(this.remaining);o&&(r=o,this.capture(r))}let i=pC(n),s=pC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ie);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ie]:new _e([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function xC(t){return t.segments.length>0?new _e([],{[ie]:t}):t}function PC(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=PC(i);if(r===ie&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new _e(t.segments,e);return cL(n)}function cL(t){if(t.numberOfChildren===1&&t.children[ie]){let e=t.children[ie];return new _e(t.segments.concat(e.segments),e.children)}return t}function Ci(t){return t instanceof qn}function uL(t,e,n=null,r=null){let i=OC(t);return kC(i,e,n,r)}function OC(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new _e(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=xC(r);return e??i}function kC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return mm(i,i,i,n,r);let s=lL(e);if(s.toRoot())return mm(i,i,new _e([],{}),n,r);let o=dL(s,i,t),a=o.processChildren?Pa(o.segmentGroup,o.index,s.commands):LC(o.segmentGroup,o.index,s.commands);return mm(i,o.segmentGroup,a,n,r)}function sd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Fa(t){return typeof t=="object"&&t!=null&&t.outlets}function mm(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=FC(t,e,n);let a=xC(PC(o));return new qn(a,s,i)}function FC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=FC(s,e,n)}),new _e(t.segments,r)}var od=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&sd(r[0]))throw new $(4003,!1);let i=r.find(Fa);if(i&&i!==TC(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new od(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new od(n,e,r)}var Bs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function dL(t,e,n){if(t.isAbsolute)return new Bs(e,!0,0);if(!n)return new Bs(e,!1,NaN);if(n.parent===null)return new Bs(n,!0,0);let r=sd(t.commands[0])?0:1,i=n.segments.length-1+r;return hL(n,i,t.numberOfDoubleDots)}function hL(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Bs(r,!1,i-s)}function fL(t){return Fa(t[0])?t[0].outlets:{[ie]:t}}function LC(t,e,n){if(t??=new _e([],{}),t.segments.length===0&&t.hasChildren())return Pa(t,e,n);let r=pL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new _e(t.segments.slice(0,r.pathIndex),{});return s.children[ie]=new _e(t.segments.slice(r.pathIndex),t.children),Pa(s,0,i)}else return r.match&&i.length===0?new _e(t.segments,{}):r.match&&!t.hasChildren()?Dm(t,e,n):r.match?Pa(t,0,i):Dm(t,e,n)}function Pa(t,e,n){if(n.length===0)return new _e(t.segments,{});{let r=fL(n),i={};if(Object.keys(r).some(s=>s!==ie)&&t.children[ie]&&t.numberOfChildren===1&&t.children[ie].segments.length===0){let s=Pa(t.children[ie],e,n);return new _e(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=LC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new _e(t.segments,i)}}function pL(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Fa(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!mC(u,l,o))return s;r+=2}else{if(!mC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Fa(s)){let u=gL(s.outlets);return new _e(r,u)}if(i===0&&sd(n[0])){let u=t.segments[e];r.push(new bi(u.path,gC(n[0]))),i++;continue}let o=Fa(s)?s.outlets[ie]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&sd(a)?(r.push(new bi(o,gC(a))),i+=2):(r.push(new bi(o,{})),i++)}return new _e(r,{})}function gL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Dm(new _e([],{}),0,r))}),e}function gC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function mC(t,e,n){return t==n.path&&dn(e,n.parameters)}var Oa="imperative",He=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(He||{}),Vt=class{constructor(e,n){this.id=e,this.url=n}},Gs=class extends Vt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=He.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kt=class extends Vt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=He.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Tt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Tt||{}),ad=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ad||{}),zn=class extends Vt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fr=class extends Vt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationSkipped}},La=class extends Vt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=He.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},cd=class extends Vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bm=class extends Vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tm=class extends Vt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=He.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Cm=class extends Vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Am=class extends Vt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sm=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rm=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mm=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nm=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xm=class{constructor(e){this.snapshot=e,this.type=He.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pm=class{constructor(e){this.snapshot=e,this.type=He.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ud=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=He.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Va=class{},Ws=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function mL(t,e){return t.providers&&!t._injector&&(t._injector=Ll(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Wt(t){return t.outlet||ie}function yL(t,e){let n=t.filter(r=>Wt(r)===e);return n.push(...t.filter(r=>Wt(r)!==e)),n}function Ga(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Om=class{get injector(){return Ga(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Wa(this.rootInjector),this.attachRef=null}},Wa=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Om(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(z(pt))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ld=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=km(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=km(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Fm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fm(e,this._root).map(n=>n.value)}};function km(t,e){if(t===e.value)return e;for(let n of e.children){let r=km(t,n);if(r)return r}return null}function Fm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Fm(t,n);if(r.length)return r.unshift(e),r}return[]}var bt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function js(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var dd=class extends ld{constructor(e,n){super(e),this.snapshot=n,qm(this,e)}toString(){return this.snapshot.toString()}};function VC(t){let e=vL(t),n=new We([new bi("",{})]),r=new We({}),i=new We({}),s=new We({}),o=new We(""),a=new Lr(n,r,s,o,i,ie,t,e.root);return a.snapshot=e.root,new dd(new bt(a,[]),e)}function vL(t){let e={},n={},r={},i="",s=new $s([],e,r,i,n,ie,t,null,{});return new fd("",new bt(s,[]))}var Lr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Q(l=>l[za]))??K(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>zs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>zs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&jC(i)&&(r.resolve[za]=i.title),r}var $s=class{get title(){return this.data?.[za]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},fd=class extends ld{constructor(e,n){super(n),this.url=e,qm(this,n)}toString(){return UC(this._root)}};function qm(t,e){e.value._routerState=t,e.children.forEach(n=>qm(t,n))}function UC(t){let e=t.children.length>0?` { ${t.children.map(UC).join(", ")} } `:"";return`${t.value}${e}`}function ym(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),dn(e.params,n.params)||t.paramsSubject.next(n.params),qF(e.url,n.url)||t.urlSubject.next(n.url),dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Lm(t,e){let n=dn(t.params,e.params)&&QF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Lm(t.parent,e.parent))}function jC(t){return typeof t.title=="string"||t.title===null}var _L=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ie,this.activateEvents=new Me,this.deactivateEvents=new Me,this.attachEvents=new Me,this.detachEvents=new Me,this.parentContexts=P(Wa),this.location=P(Ar),this.changeDetector=P(Mr),this.inputBinder=P(yd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Vm(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[kn]});let t=e;return t})(),Vm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Lr?this.route:e===Wa?this.childContexts:this.parent.get(e,n)}},yd=new L(""),yC=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=ea([i.queryParams,i.params,i.data]).pipe(mt(([o,a,u],l)=>(u=F(F(F({},o),a),u),l===0?K(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=NT(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function IL(t,e,n){let r=Ua(t,e._root,n?n._root:void 0);return new dd(r,e)}function Ua(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=wL(t,e,n);return new bt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ua(t,a)),o}}let r=EL(e.value),i=e.children.map(s=>Ua(t,s));return new bt(r,i)}}function wL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ua(t,r,i);return Ua(t,r)})}function EL(t){return new Lr(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var ja=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},BC="ngNavigationCancelingError";function pd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ci(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$C(!1,Tt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $C(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[BC]=!0,n.cancellationCode=e,n}function DL(t){return HC(t)&&Ci(t.url)}function HC(t){return!!t&&t[BC]}var bL=(t,e,n,r)=>Q(i=>(new Um(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Um=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ym(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=js(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=js(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=js(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=js(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Pm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Nm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(ym(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ym(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},gd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hs=class{constructor(e,n){this.component=e,this.route=n}};function TL(t,e,n){let r=t._root,i=e?e._root:null;return Na(r,i,n,[r.value])}function CL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Qs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!sD(t)?t:e.get(t):r}function Na(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=js(e);return t.children.forEach(o=>{AL(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ka(a,n.getContext(o),i)),i}function AL(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=SL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new gd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Na(t,e,a?a.children:null,r,i):Na(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hs(a.outlet.component,o))}else o&&ka(e,a,i),i.canActivateChecks.push(new gd(r)),s.component?Na(t,null,a?a.children:null,r,i):Na(t,null,n,r,i);return i}function SL(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ti(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ti(t.url,e.url)||!dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lm(t,e)||!dn(t.queryParams,e.queryParams);case"paramsChange":default:return!Lm(t,e)}}function ka(t,e,n){let r=js(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ka(o,e.children.getContext(s),n):ka(o,null,n):ka(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Hs(e.outlet.component,i)):n.canDeactivateChecks.push(new Hs(null,i)):n.canDeactivateChecks.push(new Hs(null,i))}function Ka(t){return typeof t=="function"}function RL(t){return typeof t=="boolean"}function ML(t){return t&&Ka(t.canLoad)}function NL(t){return t&&Ka(t.canActivate)}function xL(t){return t&&Ka(t.canActivateChild)}function PL(t){return t&&Ka(t.canDeactivate)}function OL(t){return t&&Ka(t.canMatch)}function zC(t){return t instanceof $t||t?.name==="EmptyError"}var td=Symbol("INITIAL_VALUE");function Ks(){return mt(t=>ea(t.map(e=>e.pipe(An(1),Lu(td)))).pipe(Q(e=>{for(let n of e)if(n!==!0){if(n===td)return td;if(n===!1||kL(n))return n}return!0}),dt(e=>e!==td),An(1)))}function kL(t){return Ci(t)||t instanceof ja}function FL(t,e){return Pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?K(ce(F({},n),{guardsResult:!0})):LL(o,r,i,t).pipe(Pe(a=>a&&RL(a)?VL(r,s,t,e):K(a)),Q(a=>ce(F({},n),{guardsResult:a})))})}function LL(t,e,n,r){return Ee(t).pipe(Pe(i=>HL(i.component,i.route,n,e,r)),Xt(i=>i!==!0,!0))}function VL(t,e,n,r){return Ee(e).pipe(Cn(i=>ds(jL(i.route.parent,r),UL(i.route,r),$L(t,i.path,n),BL(t,i.route,n))),Xt(i=>i!==!0,!0))}function UL(t,e){return t!==null&&e&&e(new xm(t)),K(!0)}function jL(t,e){return t!==null&&e&&e(new Mm(t)),K(!0)}function BL(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(s=>Ou(()=>{let o=Ga(e)??n,a=Qs(s,o),u=NL(a)?a.canActivate(e,t):Ot(o,()=>a(e,t));return Vr(u).pipe(Xt())}));return K(i).pipe(Ks())}function $L(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>CL(o)).filter(o=>o!==null).map(o=>Ou(()=>{let a=o.guards.map(u=>{let l=Ga(o.node)??n,h=Qs(u,l),p=xL(h)?h.canActivateChild(r,t):Ot(l,()=>h(r,t));return Vr(p).pipe(Xt())});return K(a).pipe(Ks())}));return K(s).pipe(Ks())}function HL(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return K(!0);let o=s.map(a=>{let u=Ga(e)??i,l=Qs(a,u),h=PL(l)?l.canDeactivate(t,e,n,r):Ot(u,()=>l(t,e,n,r));return Vr(h).pipe(Xt())});return K(o).pipe(Ks())}function zL(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let s=i.map(o=>{let a=Qs(o,t),u=ML(a)?a.canLoad(e,n):Ot(t,()=>a(e,n));return Vr(u)});return K(s).pipe(Ks(),qC(r))}function qC(t){return gu(Oe(e=>{if(typeof e!="boolean")throw pd(t,e)}),Q(e=>e===!0))}function qL(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let s=i.map(o=>{let a=Qs(o,t),u=OL(a)?a.canMatch(e,n):Ot(t,()=>a(e,n));return Vr(u)});return K(s).pipe(Ks(),qC(r))}var Ba=class{constructor(e){this.segmentGroup=e||null}},$a=class extends Error{constructor(e){super(),this.urlTree=e}};function Us(t){return ls(new Ba(t))}function GL(t){return ls(new $(4e3,!1))}function WL(t){return ls($C(!1,Tt.GuardRejected))}var jm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[ie])return GL(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:C,title:N}=i,R=Ot(s,()=>a({params:y,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof qn)throw new $a(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new $a(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new qn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new _e(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Bm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KL(t,e,n,r,i){let s=GC(t,e,n);return s.matched?(r=mL(e,r),qL(r,e,n,i).pipe(Q(o=>o===!0?s:F({},Bm)))):K(s)}function GC(t,e,n){if(e.path==="**")return QL(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Bm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zF)(n,t,e);if(!i)return F({},Bm);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function QL(t){return{matched:!0,parameters:t.length>0?TC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function vC(t,e,n,r){return n.length>0&&ZL(t,n,r)?{segmentGroup:new _e(e,JL(r,new _e(n,t.children))),slicedSegments:[]}:n.length===0&&XL(t,n,r)?{segmentGroup:new _e(t.segments,YL(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new _e(t.segments,t.children),slicedSegments:n}}function YL(t,e,n,r){let i={};for(let s of n)if(vd(t,e,s)&&!r[Wt(s)]){let o=new _e([],{});i[Wt(s)]=o}return F(F({},r),i)}function JL(t,e){let n={};n[ie]=e;for(let r of t)if(r.path===""&&Wt(r)!==ie){let i=new _e([],{});n[Wt(r)]=i}return n}function ZL(t,e,n){return n.some(r=>vd(t,e,r)&&Wt(r)!==ie)}function XL(t,e,n){return n.some(r=>vd(t,e,r))}function vd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function eV(t,e,n){return e.length===0&&!t.children[n]}var $m=class{};function tV(t,e,n,r,i,s,o="emptyOnly"){return new Hm(t,e,n,r,i,o,s).recognize()}var nV=31,Hm=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new jm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=vC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:n,rootSnapshot:r})=>{let i=new bt(r,n),s=new fd("",i),o=uL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new $s([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,n).pipe(Q(r=>({children:r,rootSnapshot:n})),pr(r=>{if(r instanceof $a)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ba?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Q(o=>o instanceof bt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ee(s).pipe(Cn(o=>{let a=r.children[o],u=yL(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Fu((o,a)=>(o.push(...a),o)),gr(null),jf(),Pe(o=>{if(o===null)return Us(r);let a=WC(o);return rV(a),K(a)}))}processSegment(e,n,r,i,s,o,a){return Ee(n).pipe(Cn(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(pr(l=>{if(l instanceof Ba)return K(null);throw l}))),Xt(u=>!!u),pr(u=>{if(zC(u))return eV(r,i,s)?K(new $m):Us(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return Wt(r)!==o&&(o===ie||!vd(i,s,r))?Us(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):Us(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=GC(n,i,s);if(!u)return Us(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nV&&(this.allowRedirects=!1));let y=new $s(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,_C(i),Wt(i),i.component??i._loadedComponent??null,i,IC(i)),C=hd(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Pe(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=KL(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(mt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(mt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new $s(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,_C(r),Wt(r),r.component??r._loadedComponent??null,r,IC(r)),N=hd(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:x}=vC(n,m,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(Q(H=>new bt(C,H)));if(l.length===0&&x.length===0)return K(new bt(C,[]));let j=Wt(r)===s;return this.processSegment(h,l,R,x,j?ie:s,!0,C).pipe(Q(H=>new bt(C,H instanceof bt?[H]:[])))}))):Us(n)))}getChildConfig(e,n,r){return n.children?K({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?K({routes:n._loadedRoutes,injector:n._loadedInjector}):zL(e,n,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,n).pipe(Oe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):WL(n))):K({routes:[],injector:e})}};function rV(t){t.sort((e,n)=>e.value.outlet===ie?-1:n.value.outlet===ie?1:e.value.outlet.localeCompare(n.value.outlet))}function iV(t){let e=t.value.routeConfig;return e&&e.path===""}function WC(t){let e=[],n=new Set;for(let r of t){if(!iV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=WC(r.children);e.push(new bt(r.value,i))}return e.filter(r=>!n.has(r))}function _C(t){return t.data||{}}function IC(t){return t.resolve||{}}function sV(t,e,n,r,i,s){return Pe(o=>tV(t,e,n,r,o.extractedUrl,i,s).pipe(Q(({state:a,tree:u})=>ce(F({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function oV(t,e){return Pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return K(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of KC(u))o.add(l);let a=0;return Ee(o).pipe(Cn(u=>s.has(u)?aV(u,r,t,e):(u.data=hd(u,u.parent,t).resolve,K(void 0))),Oe(()=>a++),hs(1),Pe(u=>a===o.size?K(n):wt))})}function KC(t){let e=t.children.map(n=>KC(n)).flat();return[t,...e]}function aV(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!jC(i)&&(s[za]=i.title),cV(s,t,e,r).pipe(Q(o=>(t._resolvedData=o,t.data=hd(t,t.parent,n).resolve,null)))}function cV(t,e,n,r){let i=Im(t);if(i.length===0)return K({});let s={};return Ee(i).pipe(Pe(o=>uV(t[o],e,n,r).pipe(Xt(),Oe(a=>{if(a instanceof ja)throw pd(new qs,a);s[o]=a}))),hs(1),Uf(s),pr(o=>zC(o)?wt:ls(o)))}function uV(t,e,n,r){let i=Ga(e)??r,s=Qs(t,i),o=s.resolve?s.resolve(e,n):Ot(i,()=>s(e,n));return Vr(o)}function vm(t){return mt(e=>{let n=t(e);return n?Ee(n).pipe(Q(()=>e)):K(e)})}var QC=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ie);return i}getResolvedTitleForRoute(r){return r.data[za]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(lV),providedIn:"root"});let t=e;return t})(),lV=(()=>{let e=class e extends QC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(z(hC))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qa=new L("",{providedIn:"root",factory:()=>({})}),dV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=El({type:e,selectors:[["ng-component"]],standalone:!0,features:[Bl],decls:1,vars:0,template:function(i,s){i&1&&Fs(0,"router-outlet")},dependencies:[_L],encapsulation:2});let t=e;return t})();function Gm(t){let e=t.children&&t.children.map(Gm),n=e?ce(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ie&&(n.component=dV),n}var Ha=new L(""),Wm=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(zl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Vr(r.loadComponent()).pipe(Q(YC),Oe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),mr(()=>{this.componentLoaders.delete(r)})),s=new os(i,()=>new $e).pipe(ss());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return K({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=hV(i,this.compiler,r,this.onLoadEndListener).pipe(mr(()=>{this.childrenLoaders.delete(i)})),a=new os(o,()=>new $e).pipe(ss());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hV(t,e,n,r){return Vr(t.loadChildren()).pipe(Q(YC),Pe(i=>i instanceof aa||Array.isArray(i)?K(i):Ee(e.compileModuleAsync(i))),Q(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Ha,[],{optional:!0,self:!0}).flat()),{routes:o.map(Gm),injector:s}}))}function fV(t){return t&&typeof t=="object"&&"default"in t}function YC(t){return fV(t)?t.default:t}var Km=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(pV),providedIn:"root"});let t=e;return t})(),pV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),JC=new L(""),ZC=new L("");function gV(t,e,n){let r=t.get(ZC),i=t.get(Je);return t.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),mV(t))),{onViewTransitionCreated:u}=r;return u&&Ot(t,()=>u({transition:a,from:e,to:n})),o})}function mV(t){return new Promise(e=>{Vg({read:()=>setTimeout(e)},{injector:t})})}var yV=new L(""),Qm=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=P(Wm),this.environmentInjector=P(pt),this.urlSerializer=P(qa),this.rootContexts=P(Wa),this.location=P(Vs),this.inputBindingEnabled=P(yd,{optional:!0})!==null,this.titleStrategy=P(QC),this.options=P(Qa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(Km),this.createViewTransition=P(JC,{optional:!0}),this.navigationErrorHandler=P(yV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Sm(s)),i=s=>this.events.next(new Rm(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ce(F(F({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new We({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Oa,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dt(o=>o.id!==0),Q(o=>ce(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mt(o=>{let a=!1,u=!1;return K(o).pipe(mt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Tt.SupersededByNewNavigation),wt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ce(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Fr(l.id,this.urlSerializer.serialize(l.rawUrl),m,ad.IgnoredSameUrlNavigation)),l.resolve(!1),wt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return K(l).pipe(mt(m=>{let y=this.transitions?.getValue();return this.events.next(new Gs(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?wt:Promise.resolve(m)}),sV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Oe(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=ce(F({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new cd(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:C,restoredState:N,extras:R}=l,x=new Gs(m,this.urlSerializer.serialize(y),C,N);this.events.next(x);let j=VC(this.rootComponentType).snapshot;return this.currentTransition=o=ce(F({},l),{targetSnapshot:j,urlAfterRedirects:y,extras:ce(F({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,K(o)}else{let m="";return this.events.next(new Fr(l.id,this.urlSerializer.serialize(l.extractedUrl),m,ad.IgnoredByUrlHandlingStrategy)),l.resolve(!1),wt}}),Oe(l=>{let h=new bm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Q(l=>(this.currentTransition=o=ce(F({},l),{guards:TL(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),FL(this.environmentInjector,l=>this.events.next(l)),Oe(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw pd(this.urlSerializer,l.guardsResult);let h=new Tm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),dt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Tt.GuardRejected),!1)),vm(l=>{if(l.guards.canActivateChecks.length)return K(l).pipe(Oe(h=>{let p=new Cm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),mt(h=>{let p=!1;return K(h).pipe(oV(this.paramsInheritanceStrategy,this.environmentInjector),Oe({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Tt.NoDataFromResolver)}}))}),Oe(h=>{let p=new Am(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),vm(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Oe(y=>{p.component=y}),Q(()=>{})));for(let y of p.children)m.push(...h(y));return m};return ea(h(l.targetSnapshot.root)).pipe(gr(null),An(1))}),vm(()=>this.afterPreactivation()),mt(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ee(p).pipe(Q(()=>o)):K(o)}),Q(l=>{let h=IL(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ce(F({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Oe(()=>{this.events.next(new Va)}),bL(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),An(1),Oe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Bf(this.transitionAbortSubject.pipe(Oe(l=>{throw l}))),mr(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Tt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),pr(l=>{if(u=!0,HC(l))this.events.next(new zn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),DL(l)?this.events.next(new Ws(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let h=new La(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=Ot(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof ja){let{message:m,cancellationCode:y}=pd(this.urlSerializer,p);this.events.next(new zn(o.id,this.urlSerializer.serialize(o.extractedUrl),m,y)),this.events.next(new Ws(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let m=r.errorHandler(l);o.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return wt}))}))}cancelNavigationTransition(r,i,s){let o=new zn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vV(t){return t!==Oa}var _V=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(IV),providedIn:"root"});let t=e;return t})(),zm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},IV=(()=>{let e=class e extends zm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ps(e)))(s||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),XC=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(wV),providedIn:"root"});let t=e;return t})(),wV=(()=>{let e=class e extends XC{constructor(){super(...arguments),this.location=P(Vs),this.urlSerializer=P(qa),this.options=P(Qa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(Km),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new qn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=VC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Gs)this.stateMemento=this.createStateMemento();else if(r instanceof Fr)this.rawUrlTree=i.initialUrl;else if(r instanceof cd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Va?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof zn&&(r.code===Tt.GuardRejected||r.code===Tt.NoDataFromResolver)?this.restoreHistory(i):r instanceof La?this.restoreHistory(i,!0):r instanceof Kt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof qn?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=F(F({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ps(e)))(s||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xa=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(xa||{});function e0(t,e){t.events.pipe(dt(n=>n instanceof Kt||n instanceof zn||n instanceof La||n instanceof Fr),Q(n=>n instanceof Kt||n instanceof Fr?xa.COMPLETE:(n instanceof zn?n.code===Tt.Redirect||n.code===Tt.SupersededByNewNavigation:!1)?xa.REDIRECTING:xa.FAILED),dt(n=>n!==xa.REDIRECTING),An(1)).subscribe(()=>{e()})}function EV(t){throw t}var DV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},hn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P($l),this.stateManager=P(XC),this.options=P(Qa,{optional:!0})||{},this.pendingTasks=P(Fn),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(Qm),this.urlSerializer=P(qa),this.location=P(Vs),this.urlHandlingStrategy=P(Km),this._events=new $e,this.errorHandler=this.options.errorHandler||EV,this.navigated=!1,this.routeReuseStrategy=P(_V),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Ha,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(yd,{optional:!0}),this.eventsSubscription=new Re,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof zn&&i.code!==Tt.Redirect&&i.code!==Tt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Kt)this.navigated=!0;else if(i instanceof Ws){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=F({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||vV(s.source)},a);this.scheduleNavigation(u,Oa,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}CV(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Oa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=F({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":p=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let y=s?s.snapshot:this.routerState.snapshot.root;m=OC(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),m=this.currentUrlTree.root}return kC(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Ci(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Oa,null,i)}navigate(r,i={skipLocationChange:!1}){return TV(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=F({},DV):i===!1?s=F({},bV):s=i,Ci(r))return fC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return fC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,y)=>{u=m,l=y});let p=this.pendingTasks.add();return e0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function CV(t){return!(t instanceof Va)&&!(t instanceof Ws)}var wC=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof Kt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ci(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Eb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.routerLinkInput===null?null:Ci(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(ne(hn),ne(Lr),fg("tabindex"),ne(Ln),ne(Et),ne($n))},e.\u0275dir=je({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ln("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ya("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Nr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Nr],replaceUrl:[2,"replaceUrl","replaceUrl",Nr],routerLink:"routerLink"},standalone:!0,features:[Lg,kn]});let t=e;return t})(),M8=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,s,o,a){this.router=r,this.element=i,this.renderer=s,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Me,this.routerEventsSubscription=r.events.subscribe(u=>{u instanceof Kt&&this.update()})}ngAfterContentInit(){K(this.links.changes,K(null)).pipe(fr()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Ee(r).pipe(fr()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.isActiveChange.emit(r))})}isLinkActive(r){let i=AV(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let o=s.urlTree;return o?r.isActive(o,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)(ne(hn),ne(Et),ne(Ln),ne(Mr),ne(wC,8))},e.\u0275dir=je({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,o){if(i&1&&gT(o,wC,5),i&2){let a;mT(a=yT())&&(s.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[kn]});let t=e;return t})();function AV(t){return!!t.paths}var md=class{};var SV=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(dt(r=>r instanceof Kt),Cn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Ll(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Ee(s).pipe(fr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=K(null);let o=s.pipe(Pe(a=>a===null?K(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Ee([o,a]).pipe(fr())}else return o})}};e.\u0275fac=function(i){return new(i||e)(z(hn),z(zl),z(pt),z(md),z(Wm))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),t0=new L(""),RV=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Gs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Kt?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Fr&&r.code===ad.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ud&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ud(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Ob()},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function N8(t,...e){return Pt([{provide:Ha,multi:!0,useValue:t},[],{provide:Lr,useFactory:n0,deps:[hn]},{provide:Ia,multi:!0,useFactory:r0},e.map(n=>n.\u0275providers)])}function n0(t){return t.routerState.root}function Ya(t,e){return{\u0275kind:t,\u0275providers:e}}function r0(){let t=P(Ke);return e=>{let n=t.get(Rr);if(e!==n.components[0])return;let r=t.get(hn),i=t.get(i0);t.get(Ym)===1&&r.initialNavigation(),t.get(s0,null,ae.Optional)?.setUpPreloading(),t.get(t0,null,ae.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var i0=new L("",{factory:()=>new $e}),Ym=new L("",{providedIn:"root",factory:()=>1});function MV(){return Ya(2,[{provide:Ym,useValue:0},{provide:Hl,multi:!0,deps:[Ke],useFactory:e=>{let n=e.get(UT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(hn),s=e.get(i0);e0(i,()=>{r(!0)}),e.get(Qm).afterPreactivation=()=>(r(!0),s.closed?K(void 0):s),i.initialNavigation()}))}}])}function NV(){return Ya(3,[{provide:Hl,multi:!0,useFactory:()=>{let e=P(hn);return()=>{e.setUpLocationChangeListener()}}},{provide:Ym,useValue:2}])}var s0=new L("");function xV(t){return Ya(0,[{provide:s0,useExisting:SV},{provide:md,useExisting:t}])}function PV(){return Ya(8,[yC,{provide:yd,useExisting:yC}])}function OV(t){let e=[{provide:JC,useValue:gV},{provide:ZC,useValue:F({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ya(9,e)}var EC=new L("ROUTER_FORROOT_GUARD"),kV=[Vs,{provide:qa,useClass:qs},hn,Wa,{provide:Lr,useFactory:n0,deps:[hn]},Wm,[]],x8=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[kV,[],{provide:Ha,multi:!0,useValue:r},{provide:EC,useFactory:UV,deps:[[hn,new st,new Xp]]},{provide:Qa,useValue:i||{}},i?.useHash?LV():VV(),FV(),i?.preloadingStrategy?xV(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?jV(i):[],i?.bindToComponentInputs?PV().\u0275providers:[],i?.enableViewTransitions?OV().\u0275providers:[],BV()]}}static forChild(r){return{ngModule:e,providers:[{provide:Ha,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(z(EC,8))},e.\u0275mod=cn({type:e}),e.\u0275inj=an({});let t=e;return t})();function FV(){return{provide:t0,useFactory:()=>{let t=P(qT),e=P(ye),n=P(Qa),r=P(Qm),i=P(qa);return n.scrollOffset&&t.setOffset(n.scrollOffset),new RV(i,r,t,e,n)}}}function LV(){return{provide:$n,useClass:BT}}function VV(){return{provide:$n,useClass:Xg}}function UV(t){return"guarded"}function jV(t){return[t.initialNavigation==="disabled"?NV().\u0275providers:[],t.initialNavigation==="enabledBlocking"?MV().\u0275providers:[]]}var DC=new L("");function BV(){return[{provide:DC,useFactory:r0},{provide:Ia,multi:!0,useExisting:DC}]}var a0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$V=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},c0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$V(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Zm;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Zm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},HV=function(t){let e=a0(t);return c0.encodeByteArray(e,!0)},Ja=function(t){return HV(t).replace(/\./g,"")},ey=function(t){try{return c0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function zV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var qV=()=>zV().__FIREBASE_DEFAULTS__,GV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ey(t[1]);return e&&JSON.parse(e)},Id=()=>{try{return qV()||GV()||WV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ty=t=>{var e,n;return(n=(e=Id())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},u0=t=>{let e=ty(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ny=()=>{var t;return(t=Id())===null||t===void 0?void 0:t.config},ry=t=>{var e;return(e=Id())===null||e===void 0?void 0:e[`_${t}`]};var _d=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function l0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ja(JSON.stringify(n)),Ja(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function KV(){var t;let e=(t=Id())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function h0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function f0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function p0(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g0(){return!KV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iy(){try{return typeof indexedDB=="object"}catch{return!1}}function m0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var QV="FirebaseError",Ct=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gn.prototype.create)}},Gn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?YV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ct(i,a,r)}};function YV(t,e){return t.replace(JV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var JV=/\{\$([^}]+)}/g;function y0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ai(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(o0(s)&&o0(o)){if(!Ai(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function o0(t){return t!==null&&typeof t=="object"}function Za(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ys(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Js(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function v0(t,e){let n=new Xm(t,e);return n.subscribe.bind(n)}var Xm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jm),i.error===void 0&&(i.error=Jm),i.complete===void 0&&(i.complete=Jm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ZV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jm(){}var k8=4*60*60*1e3;function Ze(t){return t&&t._delegate?t._delegate:t}var Ut=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Si="[DEFAULT]";var sy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new _d;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eU(e))try{this.getOrInitializeService({instanceIdentifier:Si})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Si){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Si){return this.instances.has(e)}getOptions(e=Si){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Si){return this.component?this.component.multipleInstances?e:Si:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function XV(t){return t===Si?void 0:t}function eU(t){return t.instantiationMode==="EAGER"}var wd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new sy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var tU=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),nU={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},rU=le.INFO,iU={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},sU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=iU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ur=class{constructor(e){this.name=e,this._logLevel=rU,this._logHandler=sU,this._userLogHandler=null,tU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var oU=(t,e)=>e.some(n=>t instanceof n),_0,I0;function aU(){return _0||(_0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cU(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var w0=new WeakMap,ay=new WeakMap,E0=new WeakMap,oy=new WeakMap,uy=new WeakMap;function uU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(fn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&w0.set(n,t)}).catch(()=>{}),uy.set(e,t),e}function lU(t){if(ay.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ay.set(t,e)}var cy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ay.get(t);if(e==="objectStoreNames")return t.objectStoreNames||E0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function D0(t){cy=t(cy)}function dU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ed(this),e,...n);return E0.set(r,e.sort?e.sort():[e]),fn(r)}:cU().includes(t)?function(...e){return t.apply(Ed(this),e),fn(w0.get(this))}:function(...e){return fn(t.apply(Ed(this),e))}}function hU(t){return typeof t=="function"?dU(t):(t instanceof IDBTransaction&&lU(t),oU(t,aU())?new Proxy(t,cy):t)}function fn(t){if(t instanceof IDBRequest)return uU(t);if(oy.has(t))return oy.get(t);let e=hU(t);return e!==t&&(oy.set(t,e),uy.set(e,t)),e}var Ed=t=>uy.get(t);function T0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=fn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(fn(o.result),u.oldVersion,u.newVersion,fn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var fU=["get","getKey","getAll","getAllKeys","count"],pU=["put","add","delete","clear"],ly=new Map;function b0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ly.get(e))return ly.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=pU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fU.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return ly.set(e,s),s}D0(t=>ce(F({},t),{get:(e,n,r)=>b0(e,n)||t.get(e,n,r),has:(e,n)=>!!b0(e,n)||t.has(e,n)}));var hy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gU(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function gU(t){let e=t.getComponent();return e?.type==="VERSION"}var fy="@firebase/app",C0="0.10.10";var Wn=new Ur("@firebase/app"),mU="@firebase/app-compat",yU="@firebase/analytics-compat",vU="@firebase/analytics",_U="@firebase/app-check-compat",IU="@firebase/app-check",wU="@firebase/auth",EU="@firebase/auth-compat",DU="@firebase/database",bU="@firebase/database-compat",TU="@firebase/functions",CU="@firebase/functions-compat",AU="@firebase/installations",SU="@firebase/installations-compat",RU="@firebase/messaging",MU="@firebase/messaging-compat",NU="@firebase/performance",xU="@firebase/performance-compat",PU="@firebase/remote-config",OU="@firebase/remote-config-compat",kU="@firebase/storage",FU="@firebase/storage-compat",LU="@firebase/firestore",VU="@firebase/vertexai-preview",UU="@firebase/firestore-compat",jU="firebase",BU="10.13.1";var py="[DEFAULT]",$U={[fy]:"fire-core",[mU]:"fire-core-compat",[vU]:"fire-analytics",[yU]:"fire-analytics-compat",[IU]:"fire-app-check",[_U]:"fire-app-check-compat",[wU]:"fire-auth",[EU]:"fire-auth-compat",[DU]:"fire-rtdb",[bU]:"fire-rtdb-compat",[TU]:"fire-fn",[CU]:"fire-fn-compat",[AU]:"fire-iid",[SU]:"fire-iid-compat",[RU]:"fire-fcm",[MU]:"fire-fcm-compat",[NU]:"fire-perf",[xU]:"fire-perf-compat",[PU]:"fire-rc",[OU]:"fire-rc-compat",[kU]:"fire-gcs",[FU]:"fire-gcs-compat",[LU]:"fire-fst",[UU]:"fire-fst-compat",[VU]:"fire-vertex","fire-js":"fire-js",[jU]:"fire-js-all"};var Xa=new Map,HU=new Map,gy=new Map;function A0(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Br(t){let e=t.name;if(gy.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;gy.set(e,t);for(let n of Xa.values())A0(n,t);for(let n of HU.values())A0(n,t);return!0}function tc(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qt(t){return t.settings!==void 0}var zU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new Gn("app","Firebase",zU);var my=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ut("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}};var $r=BU;function _y(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:py,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=ny()),!n)throw jr.create("no-options");let s=Xa.get(i);if(s){if(Ai(n,s.options)&&Ai(r,s.config))return s;throw jr.create("duplicate-app",{appName:i})}let o=new wd(i);for(let u of gy.values())o.addComponent(u);let a=new my(n,r,o);return Xa.set(i,a),a}function Zs(t=py){let e=Xa.get(t);if(!e&&t===py&&ny())return _y();if(!e)throw jr.create("no-app",{appName:t});return e}function Dd(){return Array.from(Xa.values())}function Be(t,e,n){var r;let i=(r=$U[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(a.join(" "));return}Br(new Ut(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var qU="firebase-heartbeat-database",GU=1,ec="firebase-heartbeat-store",dy=null;function N0(){return dy||(dy=T0(qU,GU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ec)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),dy}function WU(t){return w(this,null,function*(){try{let n=(yield N0()).transaction(ec),r=yield n.objectStore(ec).get(x0(t));return yield n.done,r}catch(e){if(e instanceof Ct)Wn.warn(e.message);else{let n=jr.create("idb-get",{originalErrorMessage:e?.message});Wn.warn(n.message)}}})}function S0(t,e){return w(this,null,function*(){try{let r=(yield N0()).transaction(ec,"readwrite");yield r.objectStore(ec).put(e,x0(t)),yield r.done}catch(n){if(n instanceof Ct)Wn.warn(n.message);else{let r=jr.create("idb-set",{originalErrorMessage:n?.message});Wn.warn(r.message)}}})}function x0(t){return`${t.name}!${t.options.appId}`}var KU=1024,QU=30*24*60*60*1e3,yy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new vy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=R0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=QU}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wn.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=R0(),{heartbeatsToSend:r,unsentEntries:i}=YU(this._heartbeatsCache.heartbeats),s=Ja(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Wn.warn(n),""}})}};function R0(){return new Date().toISOString().substring(0,10)}function YU(t,e=KU){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),M0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),M0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var vy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return iy()?m0().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield WU(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return S0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return S0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function M0(t){return Ja(JSON.stringify({version:2,heartbeats:t})).length}function JU(t){Br(new Ut("platform-logger",e=>new hy(e),"PRIVATE")),Br(new Ut("heartbeat",e=>new yy(e),"PRIVATE")),Be(fy,C0,t),Be(fy,C0,"esm2017"),Be("fire-js","")}JU("");var ZU="firebase",XU="10.13.1";Be(ZU,XU,"app");var Mi=new xn("ANGULARFIRE2_VERSION");function Td(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var nc=(t,e)=>{let n=e?[e]:Dd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},eo=class{constructor(){return nc(ej)}},ej="app-check";function Xs(){}var bd=class{zone;delegate;constructor(e,n=kf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Iy=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xs,{},Xs,Xs)),n.pipe(Oe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},to=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new bd(Zone.current)),this.insideAngular=n.run(()=>new bd(Zone.current,Of)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(z(ye))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function tj(t){return Cd().ngZone.runOutsideAngular(()=>t())}function Ri(t){return Cd().ngZone.run(()=>t())}function nj(t){return rj(Cd())(t)}function rj(t){return function(n){return n=n.lift(new Iy(t.ngZone)),n.pipe(hr(t.outsideAngular),dr(t.insideAngular))}}var ij=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ri(()=>t.apply(void 0,r))},vt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Ri(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xs,{},Xs,Xs))),r[s]=ij(r[s],n));let i=tj(()=>t.apply(this,r));if(!e)if(i instanceof oe){let s=Cd();return i.pipe(hr(s.outsideAngular),dr(s.insideAngular))}else return Ri(()=>i);return i instanceof oe?i.pipe(nj):i instanceof Promise?Ri(()=>new Promise((s,o)=>i.then(a=>Ri(()=>s(a)),a=>Ri(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ri(()=>i)};var Kn=class{constructor(e){return e}},Ni=class{constructor(){return Dd()}};function sj(t){return t&&t.length===1?t[0]:new Kn(Zs())}var wy=new L("angularfire2._apps"),oj={provide:Kn,useFactory:sj,deps:[[new st,wy]]},aj={provide:Ni,deps:[[new st,wy]]};function cj(t){return(e,n)=>{let r=n.get(Ft);Be("angularfire",Mi.full,"core"),Be("angularfire",Mi.full,"app"),Be("angular",ET.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Kn(i)}}function w5(t,...e){return Pt([oj,aj,{provide:wy,useFactory:cj(t),multi:!0,deps:[ye,Ke,to,...e]}])}var E5=vt(_y,!0);function Q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Y0=Q0,J0=new Gn("auth","Firebase",Q0());var xd=new Ur("@firebase/auth");function uj(t,...e){xd.logLevel<=le.WARN&&xd.warn(`Auth (${$r}): ${t}`,...e)}function Sd(t,...e){xd.logLevel<=le.ERROR&&xd.error(`Auth (${$r}): ${t}`,...e)}function gn(t,...e){throw zy(t,...e)}function xi(t,...e){return zy(t,...e)}function Z0(t,e,n){let r=Object.assign(Object.assign({},Y0()),{[e]:n});return new Gn("auth","Firebase",r).create(e,{appName:t.name})}function Jn(t){return Z0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return J0.create(t,...e)}function Y(t,e,...n){if(!t)throw zy(e,...n)}function Qn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Sd(e),new Error(e)}function zr(t,e){t||Qn(e)}function Ty(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lj(){return P0()==="http:"||P0()==="https:"}function P0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function dj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lj()||h0()||"connection"in navigator)?navigator.onLine:!0}function hj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Pi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,zr(n>e,"Short delay should be less than long delay!"),this.isMobile=d0()||f0()}get(){return dj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qy(t,e){zr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Pd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var fj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var pj=new Pi(3e4,6e4);function qr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Gr(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return X0(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Za(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),Pd.fetch()(eA(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function X0(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},fj),e);try{let i=new Cy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ad(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ad(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ad(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ad(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Z0(t,h,l);gn(t,h)}}catch(i){if(i instanceof Ct)throw i;gn(t,"network-request-failed",{message:String(i)})}})}function lc(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield Gr(t,e,n,r,i);return"mfaPendingCredential"in l&&gn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function eA(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?qy(t.config,i):`${t.config.apiScheme}://${i}`}function gj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Cy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xi(this.auth,"network-request-failed")),pj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ad(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=xi(t,e,r);return i.customData._tokenResponse=n,i}function O0(t){return t!==void 0&&t.enterprise!==void 0}var Ay=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return gj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function mj(t,e){return w(this,null,function*(){return Gr(t,"GET","/v2/recaptchaConfig",qr(t,e))})}function yj(t,e){return w(this,null,function*(){return Gr(t,"POST","/v1/accounts:delete",e)})}function tA(t,e){return w(this,null,function*(){return Gr(t,"POST","/v1/accounts:lookup",e)})}function rc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Gy(t,e=!1){return w(this,null,function*(){let n=Ze(t),r=yield n.getIdToken(e),i=Wy(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:rc(Ey(i.auth_time)),issuedAtTime:rc(Ey(i.iat)),expirationTime:rc(Ey(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Ey(t){return Number(t)*1e3}function Wy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{let i=ey(n);return i?JSON.parse(i):(Sd("Failed to decode base64 JWT payload"),null)}catch(i){return Sd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function k0(t){let e=Wy(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function sc(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ct&&vj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function vj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Sy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var oc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Od(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield sc(t,tA(n,{idToken:r}));Y(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?nA(s.providerUserInfo):[],a=_j(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new oc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Ky(t){return w(this,null,function*(){let e=Ze(t);yield Od(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _j(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nA(t){return t.map(e=>{var{providerId:n}=e,r=Ff(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Ij(t,e){return w(this,null,function*(){let n=yield X0(t,{},()=>w(this,null,function*(){let r=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=eA(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Pd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function wj(t,e){return w(this,null,function*(){return Gr(t,"POST","/v2/accounts:revokeToken",qr(t,e))})}var ic=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let n=k0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Ij(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Qn("not implemented")}};function Hr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var no=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new oc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield sc(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Gy(this,e)}reload(){return Ky(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Od(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Qt(this.auth.app))return Promise.reject(Jn(this.auth));let e=yield this.getIdToken();return yield sc(this,yj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,j=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:H,emailVerified:q,isAnonymous:Ie,providerData:W,stsTokenManager:E}=n;Y(H&&E,e,"internal-error");let v=ic.fromJSON(this.name,E);Y(typeof H=="string",e,"internal-error"),Hr(p,e.name),Hr(m,e.name),Y(typeof q=="boolean",e,"internal-error"),Y(typeof Ie=="boolean",e,"internal-error"),Hr(y,e.name),Hr(C,e.name),Hr(N,e.name),Hr(R,e.name),Hr(x,e.name),Hr(j,e.name);let _=new t({uid:H,auth:e,email:m,emailVerified:q,displayName:p,isAnonymous:Ie,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:x,lastLoginAt:j});return W&&Array.isArray(W)&&(_.providerData=W.map(D=>Object.assign({},D))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new ic;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Od(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];Y(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?nA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ic;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new oc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var F0=new Map;function Yn(t){zr(t instanceof Function,"Expected a class definition");let e=F0.get(t);return e?(zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,F0.set(t,e),e)}var Ej=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ry=Ej;function Rd(t,e,n){return`firebase:${t}:${e}:${n}`}var kd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Rd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Rd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?no._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(Yn(Ry),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Yn(Ry),o=Rd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=no._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function L0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cA(e))return"Blackberry";if(uA(e))return"Webos";if(iA(e))return"Safari";if((e.includes("chrome/")||sA(e))&&!e.includes("edge/"))return"Chrome";if(aA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function rA(t=ze()){return/firefox\//i.test(t)}function iA(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sA(t=ze()){return/crios\//i.test(t)}function oA(t=ze()){return/iemobile/i.test(t)}function aA(t=ze()){return/android/i.test(t)}function cA(t=ze()){return/blackberry/i.test(t)}function uA(t=ze()){return/webos/i.test(t)}function Qy(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Dj(t=ze()){var e;return Qy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bj(){return p0()&&document.documentMode===10}function lA(t=ze()){return Qy(t)||aA(t)||uA(t)||cA(t)||/windows phone/i.test(t)||oA(t)}function dA(t,e=[]){let n;switch(t){case"Browser":n=L0(ze());break;case"Worker":n=`${L0(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$r}/${r}`}var My=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Tj(n){return w(this,arguments,function*(t,e={}){return Gr(t,"GET","/v2/passwordPolicy",qr(t,e))})}var Cj=6,Ny=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Cj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var xy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fd(this),this.idTokenSubscription=new Fd(this),this.beforeStateQueue=new My(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=J0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield kd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield tA(this,{idToken:e}),r=yield no._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(Qt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Od(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=hj()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Qt(this.app))return Promise.reject(Jn(this));let n=e?Ze(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Qt(this.app)?Promise.reject(Jn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qt(this.app)?Promise.reject(Jn(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Yn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield Tj(this),n=new Ny(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield wj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Yn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=yield kd.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&uj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function ki(t){return Ze(t)}var Fd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=v0(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Hd={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Aj(t){Hd=t}function hA(t){return Hd.loadJS(t)}function Sj(){return Hd.recaptchaEnterpriseScript}function Rj(){return Hd.gapiScript}function fA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Mj="recaptcha-enterprise",Nj="NO_RECAPTCHA",Py=class{constructor(e){this.type=Mj,this.auth=ki(e)}verify(e="verify",n=!1){return w(this,null,function*(){function r(s){return w(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>w(this,null,function*(){mj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Ay(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;O0(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(Nj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&O0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Sj();u.length!==0&&(u+=a),hA(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function V0(t,e,n,r=!1){return w(this,null,function*(){let i=new Py(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Oy(t,e,n,r){return w(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield V0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>w(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield V0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Yy(t,e){let n=tc(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Ai(s,e??{}))return i;gn(i,"already-initialized")}return n.initialize({options:e})}function xj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Yn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Jy(t,e,n){let r=ki(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=pA(e),{host:o,port:a}=Pj(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Oj()}function pA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Pj(t){let e=pA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:U0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:U0(o)}}}function U0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Oj(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ac=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}};function kj(t,e){return w(this,null,function*(){return Gr(t,"POST","/v1/accounts:signUp",e)})}function Fj(t,e){return w(this,null,function*(){return lc(t,"POST","/v1/accounts:signInWithPassword",qr(t,e))})}function Lj(t,e){return w(this,null,function*(){return lc(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))})}function Vj(t,e){return w(this,null,function*(){return lc(t,"POST","/v1/accounts:signInWithEmailLink",qr(t,e))})}var cc=class t extends ac{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return w(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oy(e,n,"signInWithPassword",Fj);case"emailLink":return Lj(e,{email:this._email,oobCode:this._password});default:gn(e,"internal-error")}})}_linkToIdToken(e,n){return w(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Oy(e,r,"signUpPassword",kj);case"emailLink":return Vj(e,{idToken:n,email:this._email,oobCode:this._password});default:gn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Dy(t,e){return w(this,null,function*(){return lc(t,"POST","/v1/accounts:signInWithIdp",qr(t,e))})}function Uj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jj(t){let e=Ys(Js(t)).link,n=e?Ys(Js(e)).deep_link_id:null,r=Ys(Js(t)).deep_link_id;return(r?Ys(Js(r)).link:null)||r||n||e||t}var Ld=class t{constructor(e){var n,r,i,s,o,a;let u=Ys(Js(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Uj((i=u.mode)!==null&&i!==void 0?i:null);Y(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=jj(e);try{return new t(n)}catch{return null}}};var gA=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return cc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Ld.parseLink(r);return Y(i,"argument-error"),cc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Vd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ky=class extends Vd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function Bj(t,e){return w(this,null,function*(){return lc(t,"POST","/v1/accounts:signUp",qr(t,e))})}var ro=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield no._fromIdTokenResponse(e,r,i),o=j0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=j0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function j0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Fy=class t extends Ct{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function mA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Fy._fromErrorAndOperation(t,s,e,r):s})}function $j(t,e,n=!1){return w(this,null,function*(){let r=yield sc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ro._forOperation(t,"link",r)})}function Hj(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(Qt(r.app))return Promise.reject(Jn(r));let i="reauthenticate";try{let s=yield sc(t,mA(r,i,e,t),n);Y(s.idToken,r,"internal-error");let o=Wy(s.idToken);Y(o,r,"internal-error");let{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),ro._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&gn(r,"user-mismatch"),s}})}function yA(t,e,n=!1){return w(this,null,function*(){if(Qt(t.app))return Promise.reject(Jn(t));let r="signIn",i=yield mA(t,r,e),s=yield ro._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Zy(t,e){return w(this,null,function*(){return yA(ki(t),e)})}function vA(t){return w(this,null,function*(){let e=ki(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Xy(t,e,n){return w(this,null,function*(){if(Qt(t.app))return Promise.reject(Jn(t));let r=ki(t),o=yield Oy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bj).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&vA(t),u}),a=yield ro._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function ev(t,e,n){return Qt(t.app)?Promise.reject(Jn(t)):Zy(Ze(t),gA.credential(e,n)).catch(r=>w(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&vA(t),r}))}function tv(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function nv(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function rv(t){return Ze(t).signOut()}var Ud="__sak";var jd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var zj=1e3,qj=10,Gj=(()=>{class t extends jd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);bj()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,qj):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},zj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield cr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield cr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield cr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),_A=Gj;var Wj=(()=>{class t extends jd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),iv=Wj;function Kj(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Qj=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield Kj(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function IA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Ly=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=IA("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function pn(){return window}function Yj(t){pn().location.href=t}function wA(){return typeof pn().WorkerGlobalScope<"u"&&typeof pn().importScripts=="function"}function Jj(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Zj(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Xj(){return wA()?self:null}var EA="firebaseLocalStorageDb",e2=1,Bd="firebaseLocalStorage",DA="fbase_key",Oi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function zd(t,e){return t.transaction([Bd],e?"readwrite":"readonly").objectStore(Bd)}function t2(){let t=indexedDB.deleteDatabase(EA);return new Oi(t).toPromise()}function Vy(){let t=indexedDB.open(EA,e2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Bd,{keyPath:DA})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Bd)?e(r):(r.close(),yield t2(),e(yield Vy()))}))})}function B0(t,e,n){return w(this,null,function*(){let r=zd(t,!0).put({[DA]:e,value:n});return new Oi(r).toPromise()})}function n2(t,e){return w(this,null,function*(){let n=zd(t,!1).get(e),r=yield new Oi(n).toPromise();return r===void 0?null:r.value})}function $0(t,e){let n=zd(t,!0).delete(e);return new Oi(n).toPromise()}var r2=800,i2=3,s2=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield Vy(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>i2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return wA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=Qj._getInstance(Xj()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield Jj(),!this.activeServiceWorker)return;this.sender=new Ly(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Zj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Vy();return yield B0(n,Ud,"1"),yield $0(n,Ud),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>B0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>n2(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>$0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=zd(s,!1).getAll();return new Oi(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),r2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),bA=s2;var M5=fA("rcb"),N5=new Pi(3e4,6e4);function o2(t,e){return e?Yn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var uc=class extends ac{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function a2(t){return yA(t.auth,new uc(t),t.bypassAuthState)}function c2(t){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),Hj(n,new uc(t),t.bypassAuthState)}function u2(t){return w(this,null,function*(){let{auth:e,user:n}=t;return Y(n,e,"internal-error"),$j(n,new uc(t),t.bypassAuthState)})}var Uy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a2;case"linkViaPopup":case"linkViaRedirect":return u2;case"reauthViaPopup":case"reauthViaRedirect":return c2;default:gn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var x5=new Pi(2e3,1e4);var l2="pendingRedirect",Md=new Map,jy=class t extends Uy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=Md.get(this.auth._key());if(!e){try{let r=(yield d2(this.resolver,this.auth))?yield cr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return cr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,cr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function d2(t,e){return w(this,null,function*(){let n=p2(e),r=f2(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function h2(t,e){Md.set(t._key(),e)}function f2(t){return Yn(t._redirectPersistence)}function p2(t){return Rd(l2,t.config.apiKey,t.name)}function g2(t,e,n=!1){return w(this,null,function*(){if(Qt(t.app))return Promise.reject(Jn(t));let r=ki(t),i=o2(r,e),o=yield new jy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var m2=10*60*1e3,By=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!y2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m2&&this.cachedEventUids.clear(),this.cachedEventUids.has(H0(e))}saveEventToCache(e){this.cachedEventUids.add(H0(e)),this.lastProcessedEventTime=Date.now()}};function H0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function y2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TA(t);default:return!1}}function v2(n){return w(this,arguments,function*(t,e={}){return Gr(t,"GET","/v1/projects",e)})}var _2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I2=/^https?/;function w2(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield v2(t);for(let n of e)try{if(E2(n))return}catch{}gn(t,"unauthorized-domain")})}function E2(t){let e=Ty(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!I2.test(n))return!1;if(_2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var D2=new Pi(3e4,6e4);function z0(){let t=pn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function b2(t){return new Promise((e,n)=>{var r,i,s;function o(){z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{z0(),n(xi(t,"network-request-failed"))},timeout:D2.get()})}if(!((i=(r=pn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=pn().gapi)===null||s===void 0)&&s.load)o();else{let a=fA("iframefcb");return pn()[a]=()=>{gapi.load?o():n(xi(t,"network-request-failed"))},hA(`${Rj()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Nd=null,e})}var Nd=null;function T2(t){return Nd=Nd||b2(t),Nd}var C2=new Pi(5e3,15e3),A2="__/auth/iframe",S2="emulator/auth/iframe",R2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N2(t){let e=t.config;Y(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?qy(e,S2):`https://${t.config.authDomain}/${A2}`,r={apiKey:e.apiKey,appName:t.name,v:$r},i=M2.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Za(r).slice(1)}`}function x2(t){return w(this,null,function*(){let e=yield T2(t),n=pn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:N2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R2,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=xi(t,"network-request-failed"),a=pn().setTimeout(()=>{s(o)},C2.get());function u(){pn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var P2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},O2=500,k2=600,F2="_blank",L2="http://localhost",$d=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function V2(t,e,n,r=O2,i=k2){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},P2),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=sA(l)?F2:n),rA(l)&&(e=e||L2,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(Dj(l)&&a!=="_self")return U2(e||"",a),new $d(null);let p=window.open(e||"",a,h);Y(p,t,"popup-blocked");try{p.focus()}catch{}return new $d(p)}function U2(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var j2="__/auth/handler",B2="emulator/auth/handler",$2=encodeURIComponent("fac");function q0(t,e,n,r,i,s){return w(this,null,function*(){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$r,eventId:i};if(e instanceof Vd){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",y0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof ky){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${$2}=${encodeURIComponent(u)}`:"";return`${H2(t)}?${Za(a).slice(1)}${l}`})}function H2({config:t}){return t.emulator?qy(t,B2):`https://${t.authDomain}/${j2}`}var by="webStorageSupport",$y=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iv,this._completeRedirectFn=g2,this._overrideRedirectResult=h2}_openPopup(e,n,r,i){return w(this,null,function*(){var s;zr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield q0(e,n,r,Ty(),i);return V2(e,o,IA())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield q0(e,n,r,Ty(),i);return Yj(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield x2(e),r=new By(e);return n.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(by,{type:by},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[by];o!==void 0&&n(!!o),gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=w2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lA()||iA()||Qy()}},CA=$y;var G0="@firebase/auth",W0="1.7.8";var Hy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function z2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function q2(t){Br(new Ut("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dA(t)},l=new xy(r,i,s,u);return xj(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Br(new Ut("auth-internal",e=>{let n=ki(e.getProvider("auth").getImmediate());return(r=>new Hy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(G0,W0,z2(t)),Be(G0,W0,"esm2017")}var G2=5*60,W2=ry("authIdTokenMaxAge")||G2,K0=null,K2=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>W2)return;let i=n?.token;K0!==i&&(K0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function sv(t=Zs()){let e=tc(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Yy(t,{popupRedirectResolver:CA,persistence:[bA,_A,iv]}),r=ry("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=K2(s.toString());nv(n,o,()=>o(n.currentUser)),tv(n,a=>o(a))}}let i=ty("auth");return i&&Jy(n,`http://${i}`),n}function Q2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Aj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=xi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Q2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});q2("Browser");var AA="auth",Fi=class{constructor(e){return e}},dc=class{constructor(){return nc(AA)}};var ov=new L("angularfire2.auth-instances");function UB(t,e){let n=Td(AA,t,e);return n&&new Fi(n)}function jB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Fi(r)}}var BB={provide:dc,deps:[[new st,ov]]},$B={provide:Fi,useFactory:UB,deps:[[new st,ov],Kn]};function gK(t,...e){return Be("angularfire",Mi.full,"auth"),Pt([$B,BB,{provide:ov,useFactory:jB(t),multi:!0,deps:[ye,Ke,to,Ni,[new st,eo],...e]}])}var mK=vt(Xy,!0);var yK=vt(sv,!0);var vK=vt(ev,!0);var _K=vt(rv,!0);var SA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},RA={};var Wr,av;(function(){var t;function e(E,v){function _(){}_.prototype=v.prototype,E.D=v.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(D,b,A){for(var I=Array(arguments.length-2),En=2;En<arguments.length;En++)I[En-2]=arguments[En];return v.prototype[b].apply(D,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,_){_||(_=0);var D=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)D[b]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(b=0;16>b;++b)D[b]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=E.g[0],_=E.g[1],b=E.g[2];var A=E.g[3],I=v+(A^_&(b^A))+D[0]+3614090360&4294967295;v=_+(I<<7&4294967295|I>>>25),I=A+(b^v&(_^b))+D[1]+3905402710&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(_^A&(v^_))+D[2]+606105819&4294967295,b=A+(I<<17&4294967295|I>>>15),I=_+(v^b&(A^v))+D[3]+3250441966&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(A^_&(b^A))+D[4]+4118548399&4294967295,v=_+(I<<7&4294967295|I>>>25),I=A+(b^v&(_^b))+D[5]+1200080426&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(_^A&(v^_))+D[6]+2821735955&4294967295,b=A+(I<<17&4294967295|I>>>15),I=_+(v^b&(A^v))+D[7]+4249261313&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(A^_&(b^A))+D[8]+1770035416&4294967295,v=_+(I<<7&4294967295|I>>>25),I=A+(b^v&(_^b))+D[9]+2336552879&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(_^A&(v^_))+D[10]+4294925233&4294967295,b=A+(I<<17&4294967295|I>>>15),I=_+(v^b&(A^v))+D[11]+2304563134&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(A^_&(b^A))+D[12]+1804603682&4294967295,v=_+(I<<7&4294967295|I>>>25),I=A+(b^v&(_^b))+D[13]+4254626195&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(_^A&(v^_))+D[14]+2792965006&4294967295,b=A+(I<<17&4294967295|I>>>15),I=_+(v^b&(A^v))+D[15]+1236535329&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(b^A&(_^b))+D[1]+4129170786&4294967295,v=_+(I<<5&4294967295|I>>>27),I=A+(_^b&(v^_))+D[6]+3225465664&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(A^v))+D[11]+643717713&4294967295,b=A+(I<<14&4294967295|I>>>18),I=_+(A^v&(b^A))+D[0]+3921069994&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(_^b))+D[5]+3593408605&4294967295,v=_+(I<<5&4294967295|I>>>27),I=A+(_^b&(v^_))+D[10]+38016083&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(A^v))+D[15]+3634488961&4294967295,b=A+(I<<14&4294967295|I>>>18),I=_+(A^v&(b^A))+D[4]+3889429448&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(_^b))+D[9]+568446438&4294967295,v=_+(I<<5&4294967295|I>>>27),I=A+(_^b&(v^_))+D[14]+3275163606&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(A^v))+D[3]+4107603335&4294967295,b=A+(I<<14&4294967295|I>>>18),I=_+(A^v&(b^A))+D[8]+1163531501&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(_^b))+D[13]+2850285829&4294967295,v=_+(I<<5&4294967295|I>>>27),I=A+(_^b&(v^_))+D[2]+4243563512&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(A^v))+D[7]+1735328473&4294967295,b=A+(I<<14&4294967295|I>>>18),I=_+(A^v&(b^A))+D[12]+2368359562&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(_^b^A)+D[5]+4294588738&4294967295,v=_+(I<<4&4294967295|I>>>28),I=A+(v^_^b)+D[8]+2272392833&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^_)+D[11]+1839030562&4294967295,b=A+(I<<16&4294967295|I>>>16),I=_+(b^A^v)+D[14]+4259657740&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^A)+D[1]+2763975236&4294967295,v=_+(I<<4&4294967295|I>>>28),I=A+(v^_^b)+D[4]+1272893353&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^_)+D[7]+4139469664&4294967295,b=A+(I<<16&4294967295|I>>>16),I=_+(b^A^v)+D[10]+3200236656&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^A)+D[13]+681279174&4294967295,v=_+(I<<4&4294967295|I>>>28),I=A+(v^_^b)+D[0]+3936430074&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^_)+D[3]+3572445317&4294967295,b=A+(I<<16&4294967295|I>>>16),I=_+(b^A^v)+D[6]+76029189&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^A)+D[9]+3654602809&4294967295,v=_+(I<<4&4294967295|I>>>28),I=A+(v^_^b)+D[12]+3873151461&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^_)+D[15]+530742520&4294967295,b=A+(I<<16&4294967295|I>>>16),I=_+(b^A^v)+D[2]+3299628645&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(b^(_|~A))+D[0]+4096336452&4294967295,v=_+(I<<6&4294967295|I>>>26),I=A+(_^(v|~b))+D[7]+1126891415&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~_))+D[14]+2878612391&4294967295,b=A+(I<<15&4294967295|I>>>17),I=_+(A^(b|~v))+D[5]+4237533241&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~A))+D[12]+1700485571&4294967295,v=_+(I<<6&4294967295|I>>>26),I=A+(_^(v|~b))+D[3]+2399980690&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~_))+D[10]+4293915773&4294967295,b=A+(I<<15&4294967295|I>>>17),I=_+(A^(b|~v))+D[1]+2240044497&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~A))+D[8]+1873313359&4294967295,v=_+(I<<6&4294967295|I>>>26),I=A+(_^(v|~b))+D[15]+4264355552&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~_))+D[6]+2734768916&4294967295,b=A+(I<<15&4294967295|I>>>17),I=_+(A^(b|~v))+D[13]+1309151649&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~A))+D[4]+4149444226&4294967295,v=_+(I<<6&4294967295|I>>>26),I=A+(_^(v|~b))+D[11]+3174756917&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~_))+D[2]+718787259&4294967295,b=A+(I<<15&4294967295|I>>>17),I=_+(A^(b|~v))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var _=v-this.blockSize,D=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=_;)i(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<v;)if(D[b++]=E.charCodeAt(A++),b==this.blockSize){i(this,D),b=0;break}}else for(;A<v;)if(D[b++]=E[A++],b==this.blockSize){i(this,D),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var _=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=_&255,_/=256;for(this.u(E),E=Array(16),v=_=0;4>v;++v)for(var D=0;32>D;D+=8)E[_++]=this.g[v]>>>D&255;return E};function s(E,v){var _=a;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=v(E)}function o(E,v){this.h=v;for(var _=[],D=!0,b=E.length-1;0<=b;b--){var A=E[b]|0;D&&A==v||(_[b]=A,D=!1)}this.g=_}var a={};function u(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var v=[],_=1,D=0;E>=_;D++)v[D]=E/_|0,_*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return R(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),D=p,b=0;b<E.length;b+=8){var A=Math.min(8,E.length-b),I=parseInt(E.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),D=D.j(A).add(l(I))):(D=D.j(_),D=D.add(l(I)))}return D}var p=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var E=0,v=1,_=0;_<this.g.length;_++){var D=this.i(_);E+=(0<=D?D:4294967296+D)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var v=l(Math.pow(E,6)),_=this,D="";;){var b=q(_,v).g;_=x(_,b.j(v));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=b,C(_))return A+D;for(;6>A.length;)A="0"+A;D=A+D}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=x(this,E),N(E)?-1:C(E)?0:1};function R(E){for(var v=E.g.length,_=[],D=0;D<v;D++)_[D]=~E.g[D];return new o(_,~E.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0,b=0;b<=v;b++){var A=D+(this.i(b)&65535)+(E.i(b)&65535),I=(A>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);D=I>>>16,A&=65535,I&=65535,_[b]=I<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function x(E,v){return E.add(R(v))}t.j=function(E){if(C(this)||C(E))return p;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,_=[],D=0;D<2*v;D++)_[D]=0;for(D=0;D<this.g.length;D++)for(var b=0;b<E.g.length;b++){var A=this.i(D)>>>16,I=this.i(D)&65535,En=E.i(b)>>>16,No=E.i(b)&65535;_[2*D+2*b]+=I*No,j(_,2*D+2*b),_[2*D+2*b+1]+=A*No,j(_,2*D+2*b+1),_[2*D+2*b+1]+=I*En,j(_,2*D+2*b+1),_[2*D+2*b+2]+=A*En,j(_,2*D+2*b+2)}for(D=0;D<v;D++)_[D]=_[2*D+1]<<16|_[2*D];for(D=v;D<2*v;D++)_[D]=0;return new o(_,0)};function j(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function H(E,v){this.g=E,this.h=v}function q(E,v){if(C(v))throw Error("division by zero");if(C(E))return new H(p,p);if(N(E))return v=q(R(E),v),new H(R(v.g),R(v.h));if(N(v))return v=q(E,R(v)),new H(R(v.g),v.h);if(30<E.g.length){if(N(E)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,D=v;0>=D.l(E);)_=Ie(_),D=Ie(D);var b=W(_,1),A=W(D,1);for(D=W(D,2),_=W(_,2);!C(D);){var I=A.add(D);0>=I.l(E)&&(b=b.add(_),A=I),D=W(D,1),_=W(_,1)}return v=x(E,b.j(v)),new H(b,v)}for(b=p;0<=E.l(v);){for(_=Math.max(1,Math.floor(E.m()/v.m())),D=Math.ceil(Math.log(_)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),A=l(_),I=A.j(v);N(I)||0<I.l(E);)_-=D,A=l(_),I=A.j(v);C(A)&&(A=m),b=b.add(A),E=x(E,I)}return new H(b,E)}t.A=function(E){return q(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)&E.i(D);return new o(_,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)|E.i(D);return new o(_,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)^E.i(D);return new o(_,this.h^E.h)};function Ie(E){for(var v=E.g.length+1,_=[],D=0;D<v;D++)_[D]=E.i(D)<<1|E.i(D-1)>>>31;return new o(_,E.h)}function W(E,v){var _=v>>5;v%=32;for(var D=E.g.length-_,b=[],A=0;A<D;A++)b[A]=0<v?E.i(A+_)>>>v|E.i(A+_+1)<<32-v:E.i(A+_);return new o(b,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,av=RA.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Wr=RA.Integer=o}).apply(typeof SA<"u"?SA:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zn={};var cv,uv,io,lv,hc,Gd,dv,hv,fv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,S){for(var k=Array(arguments.length-2),we=2;we<arguments.length;we++)k[we-2]=arguments[we];return d.prototype[T].apply(g,k)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,S=g.length||0;c.length=T+S;for(let k=0;k<S;k++)c[T+k]=g[k]}else c.push(g)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function j(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var Ie=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function W(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let S=0;S<_.length;S++)f=_[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function A(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Gh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class En{constructor(){this.h=this.g=null}add(d,f){let g=No.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var No=new x(()=>new rM,c=>c.reset());class rM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let xo,Po=!1,Gh=new En,MI=()=>{let c=a.Promise.resolve(void 0);xo=()=>{c.then(iM)}};var iM=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){A(f)}var d=No;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Po=!1};function ir(){this.s=this.s,this.C=this.C}ir.prototype.s=!1,ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var sM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Oo(c,d){if(et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ie){e:{try{q(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:oM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Oo.aa.h.call(this)}}C(Oo,et);var oM={2:"touch",3:"pen",4:"mouse"};Oo.prototype.h=function(){Oo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ko="closure_listenable_"+(1e6*Math.random()|0),aM=0;function cM(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++aM,this.da=this.fa=!1}function $c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hc(c){this.src=c,this.g={},this.h=0}Hc.prototype.add=function(c,d,f,g,T){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var k=Kh(c,d,g,T);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new cM(d,this.src,S,!!g,T),d.fa=f,c.push(d)),d};function Wh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=T)&&Array.prototype.splice.call(g,T,1),S&&($c(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Kh(c,d,f,g){for(var T=0;T<c.length;++T){var S=c[T];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return T}return-1}var Qh="closure_lm_"+(1e6*Math.random()|0),Yh={};function NI(c,d,f,g,T){if(g&&g.once)return PI(c,d,f,g,T);if(Array.isArray(d)){for(var S=0;S<d.length;S++)NI(c,d[S],f,g,T);return null}return f=ef(f),c&&c[ko]?c.K(d,f,l(g)?!!g.capture:!!g,T):xI(c,d,f,!1,g,T)}function xI(c,d,f,g,T,S){if(!d)throw Error("Invalid event type");var k=l(T)?!!T.capture:!!T,we=Zh(c);if(we||(c[Qh]=we=new Hc(c)),f=we.add(d,f,g,k,S),f.proxy)return f;if(g=uM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)sM||(T=k),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(kI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function uM(){function c(f){return d.call(c.src,c.listener,f)}let d=lM;return c}function PI(c,d,f,g,T){if(Array.isArray(d)){for(var S=0;S<d.length;S++)PI(c,d[S],f,g,T);return null}return f=ef(f),c&&c[ko]?c.L(d,f,l(g)?!!g.capture:!!g,T):xI(c,d,f,!0,g,T)}function OI(c,d,f,g,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)OI(c,d[S],f,g,T);else g=l(g)?!!g.capture:!!g,f=ef(f),c&&c[ko]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=Kh(S,f,g,T),-1<f&&($c(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=Zh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Kh(d,f,g,T)),(f=-1<c?d[c]:null)&&Jh(f))}function Jh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[ko])Wh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(kI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Zh(d))?(Wh(f,c),f.h==0&&(f.src=null,d[Qh]=null)):$c(c)}}}function kI(c){return c in Yh?Yh[c]:Yh[c]="on"+c}function lM(c,d){if(c.da)c=!0;else{d=new Oo(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Jh(c),c=f.call(g,d)}return c}function Zh(c){return c=c[Qh],c instanceof Hc?c:null}var Xh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ef(c){return typeof c=="function"?c:(c[Xh]||(c[Xh]=function(d){return c.handleEvent(d)}),c[Xh])}function tt(){ir.call(this),this.i=new Hc(this),this.M=this,this.F=null}C(tt,ir),tt.prototype[ko]=!0,tt.prototype.removeEventListener=function(c,d,f,g){OI(this,c,d,f,g)};function ut(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new et(d,c);else if(d instanceof et)d.target=d.target||c;else{var T=d;d=new et(g,c),D(d,T)}if(T=!0,f)for(var S=f.length-1;0<=S;S--){var k=d.g=f[S];T=zc(k,g,!0,d)&&T}if(k=d.g=c,T=zc(k,g,!0,d)&&T,T=zc(k,g,!1,d)&&T,f)for(S=0;S<f.length;S++)k=d.g=f[S],T=zc(k,g,!1,d)&&T}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)$c(f[g]);delete c.g[d],c.h--}}this.F=null},tt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},tt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function zc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,S=0;S<d.length;++S){var k=d[S];if(k&&!k.da&&k.capture==f){var we=k.listener,Ge=k.ha||k.src;k.fa&&Wh(c.i,k),T=we.call(Ge,g)!==!1&&T}}return T&&!g.defaultPrevented}function FI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function LI(c){c.g=FI(()=>{c.g=null,c.i&&(c.i=!1,LI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class dM extends ir{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:LI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fo(c){ir.call(this),this.h=c,this.g={}}C(Fo,ir);var VI=[];function UI(c){W(c.g,function(d,f){this.g.hasOwnProperty(f)&&Jh(d)},c),c.g={}}Fo.prototype.N=function(){Fo.aa.N.call(this),UI(this)},Fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tf=a.JSON.stringify,hM=a.JSON.parse,fM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function nf(){}nf.prototype.h=null;function jI(c){return c.h||(c.h=c.i())}function BI(){}var Lo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rf(){et.call(this,"d")}C(rf,et);function sf(){et.call(this,"c")}C(sf,et);var Xr={},$I=null;function qc(){return $I=$I||new tt}Xr.La="serverreachability";function HI(c){et.call(this,Xr.La,c)}C(HI,et);function Vo(c){let d=qc();ut(d,new HI(d))}Xr.STAT_EVENT="statevent";function zI(c,d){et.call(this,Xr.STAT_EVENT,c),this.stat=d}C(zI,et);function lt(c){let d=qc();ut(d,new zI(d,c))}Xr.Ma="timingevent";function qI(c,d){et.call(this,Xr.Ma,c),this.size=d}C(qI,et);function Uo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function jo(){this.g=!0}jo.prototype.xa=function(){this.g=!1};function pM(c,d,f,g,T,S){c.info(function(){if(c.g)if(S)for(var k="",we=S.split("&"),Ge=0;Ge<we.length;Ge++){var me=we[Ge].split("=");if(1<me.length){var nt=me[0];me=me[1];var rt=nt.split("_");k=2<=rt.length&&rt[1]=="type"?k+(nt+"="+me+"&"):k+(nt+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+k})}function gM(c,d,f,g,T,S,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+S+" "+k})}function Ji(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+yM(c,f)+(g?" "+g:"")})}function mM(c,d){c.info(function(){return"TIMEOUT: "+d})}jo.prototype.info=function(){};function yM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return tf(f)}catch{return d}}var Gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},GI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},of;function Wc(){}C(Wc,nf),Wc.prototype.g=function(){return new XMLHttpRequest},Wc.prototype.i=function(){return{}},of=new Wc;function sr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Fo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new WI}function WI(){this.i=null,this.g="",this.h=!1}var KI={},af={};function cf(c,d,f){c.L=1,c.v=Jc(Dn(d)),c.m=f,c.P=!0,QI(c,null)}function QI(c,d){c.F=Date.now(),Kc(c),c.A=Dn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),uw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new WI,c.g=Aw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new dM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(VI[0]=T.toString()),T=VI);for(var S=0;S<T.length;S++){var k=NI(f,T[S],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Vo(),pM(c.i,c.u,c.A,c.l,c.R,c.m)}sr.prototype.ca=function(c){c=c.target;let d=this.M;d&&bn(c)==3?d.j():this.Y(c)},sr.prototype.Y=function(c){try{if(c==this.g)e:{let rt=bn(this.g);var d=this.g.Ba();let es=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||mw(this.g)))){this.J||rt!=4||d==7||(d==8||0>=es?Vo(3):Vo(2)),uf(this);var f=this.g.Z();this.X=f;t:if(YI(this)){var g=mw(this.g);c="";var T=g.length,S=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),Bo(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,gM(this.i,this.u,this.A,this.l,this.R,rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Ge=this.g;if((we=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(we)){var me=we;break t}}me=null}if(f=me)Ji(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,lf(this,f);else{this.o=!1,this.s=3,lt(12),ei(this),Bo(this);break e}}if(this.P){f=!0;let jt;for(;!this.J&&this.C<k.length;)if(jt=vM(this,k),jt==af){rt==4&&(this.s=4,lt(14),f=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==KI){this.s=4,lt(15),Ji(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Ji(this.i,this.l,jt,null),lf(this,jt);if(YI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||k.length!=0||this.h.h||(this.s=1,lt(16),f=!1),this.o=this.o&&f,!f)Ji(this.i,this.l,k,"[Invalid Chunked Response]"),ei(this),Bo(this);else if(0<k.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),mf(nt),nt.M=!0,lt(11))}}else Ji(this.i,this.l,k,null),lf(this,k);rt==4&&ei(this),this.o&&!this.J&&(rt==4?Dw(this.j,this):(this.o=!1,Kc(this)))}else kM(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),ei(this),Bo(this)}}}catch{}finally{}};function YI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function vM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?af:(f=Number(d.substring(f,g)),isNaN(f)?KI:(g+=1,g+f>d.length?af:(d=d.slice(g,g+f),c.C=g+f,d)))}sr.prototype.cancel=function(){this.J=!0,ei(this)};function Kc(c){c.S=Date.now()+c.I,JI(c,c.I)}function JI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Uo(m(c.ba,c),d)}function uf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}sr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(mM(this.i,this.A),this.L!=2&&(Vo(),lt(17)),ei(this),this.s=2,Bo(this)):JI(this,this.S-c)};function Bo(c){c.j.G==0||c.J||Dw(c.j,c)}function ei(c){uf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,UI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function lf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||df(f.h,c))){if(!c.K&&df(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)nu(f),eu(f);else break e;gf(f),lt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Uo(m(f.Za,f),6e3));if(1>=ew(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ni(f,11)}else if((c.K||f.g==c)&&nu(f),!j(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let me=T[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let nt=me[3];nt!=null&&(f.la=nt,f.j.info("VER="+f.la));let rt=me[4];rt!=null&&(f.Aa=rt,f.j.info("SVER="+f.Aa));let es=me[5];es!=null&&typeof es=="number"&&0<es&&(g=1.5*es,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let jt=c.g;if(jt){let iu=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var S=g.h;S.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(hf(S,S.h),S.h=null))}if(g.D){let yf=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;yf&&(g.ya=yf,Te(g.I,g.D,yf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=Cw(g,g.J?g.ia:null,g.W),k.K){tw(g.h,k);var we=k,Ge=g.L;Ge&&(we.I=Ge),we.B&&(uf(we),Kc(we)),g.g=k}else ww(g);0<f.i.length&&tu(f)}else me[0]!="stop"&&me[0]!="close"||ni(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?ni(f,7):pf(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}Vo(4)}catch{}}var _M=class{constructor(c,d){this.g=c,this.map=d}};function ZI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function XI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ew(c){return c.h?1:c.g?c.g.size:0}function df(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function hf(c,d){c.g?c.g.add(d):c.h=d}function tw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}ZI.prototype.cancel=function(){if(this.i=nw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function nw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function IM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function wM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function rw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=wM(c),g=IM(c),T=g.length,S=0;S<T;S++)d.call(void 0,g[S],f&&f[S],c)}var iw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var S=c[f].substring(0,g);T=c[f].substring(g+1)}else S=c[f];d(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ti(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ti){this.h=c.h,Qc(this,c.j),this.o=c.o,this.g=c.g,Yc(this,c.s),this.l=c.l;var d=c.i,f=new zo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),sw(this,f),this.m=c.m}else c&&(d=String(c).match(iw))?(this.h=!1,Qc(this,d[1]||"",!0),this.o=$o(d[2]||""),this.g=$o(d[3]||"",!0),Yc(this,d[4]),this.l=$o(d[5]||"",!0),sw(this,d[6]||"",!0),this.m=$o(d[7]||"")):(this.h=!1,this.i=new zo(null,this.h))}ti.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ho(d,ow,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ho(d,ow,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ho(f,f.charAt(0)=="/"?TM:bM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ho(f,AM)),c.join("")};function Dn(c){return new ti(c)}function Qc(c,d,f){c.j=f?$o(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function sw(c,d,f){d instanceof zo?(c.i=d,SM(c.i,c.h)):(f||(d=Ho(d,CM)),c.i=new zo(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function Jc(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function $o(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ho(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,DM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function DM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ow=/[#\/\?@]/g,bM=/[#\?:]/g,TM=/[#\?]/g,CM=/[#\?@]/g,AM=/#/g;function zo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function or(c){c.g||(c.g=new Map,c.h=0,c.i&&EM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=zo.prototype,t.add=function(c,d){or(this),this.i=null,c=Zi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function aw(c,d){or(c),d=Zi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function cw(c,d){return or(c),d=Zi(c,d),c.g.has(d)}t.forEach=function(c,d){or(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},t.na=function(){or(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let S=0;S<T.length;S++)f.push(d[g])}return f},t.V=function(c){or(this);let d=[];if(typeof c=="string")cw(this,c)&&(d=d.concat(this.g.get(Zi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return or(this),this.i=null,c=Zi(this,c),cw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function uw(c,d,f){aw(c,d),0<f.length&&(c.i=null,c.g.set(Zi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var T=S;k[g]!==""&&(T+="="+encodeURIComponent(String(k[g]))),c.push(T)}}return this.i=c.join("&")};function Zi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function SM(c,d){d&&!c.j&&(or(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(aw(this,g),uw(this,T,f))},c)),c.j=d}function RM(c,d){let f=new jo;if(a.Image){let g=new Image;g.onload=y(ar,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(ar,f,"TestLoadImage: error",!1,d,g),g.onabort=y(ar,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(ar,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function MM(c,d){let f=new jo,g=new AbortController,T=setTimeout(()=>{g.abort(),ar(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(T),S.ok?ar(f,"TestPingServer: ok",!0,d):ar(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),ar(f,"TestPingServer: error",!1,d)})}function ar(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function NM(){this.g=new fM}function xM(c,d,f){let g=f||"";try{rw(c,function(T,S){let k=T;l(T)&&(k=tf(T)),d.push(g+S+"="+encodeURIComponent(k))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function qo(c){this.l=c.Ub||null,this.j=c.eb||!1}C(qo,nf),qo.prototype.g=function(){return new Zc(this.l,this.j)},qo.prototype.i=function(c){return function(){return c}}({});function Zc(c,d){tt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Zc,tt),t=Zc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Wo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Go(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wo(this)),this.g&&(this.readyState=3,Wo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function lw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Go(this):Wo(this),this.readyState==3&&lw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Go(this))},t.Qa=function(c){this.g&&(this.response=c,Go(this))},t.ga=function(){this.g&&Go(this)};function Go(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Wo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Wo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function dw(c){let d="";return W(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ff(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=dw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Se(c){tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Se,tt);var PM=/^https?$/i,OM=["POST","PUT"];t=Se.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():of.g(),this.v=this.o?jI(this.o):jI(of),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){hw(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(OM,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of f)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gw(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){hw(this,S)}};function hw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,fw(c),Xc(c)}function fw(c){c.A||(c.A=!0,ut(c,"complete"),ut(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ut(this,"complete"),ut(this,"abort"),Xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pw(this):this.bb())},t.bb=function(){pw(this)};function pw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||bn(c)!=4||c.Z()!=2)){if(c.u&&bn(c)==4)FI(c.Ea,0,c);else if(ut(c,"readystatechange"),bn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var T=String(c.D).match(iw)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!PM.test(T?T.toLowerCase():"")}f=g}if(f)ut(c,"complete"),ut(c,"success");else{c.m=6;try{var S=2<bn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",fw(c)}}finally{Xc(c)}}}}function Xc(c,d){if(c.g){gw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ut(c,"ready");try{f.onreadystatechange=g}catch{}}}function gw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function bn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),hM(d)}};function mw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kM(c){let d={};c=(c.g&&2<=bn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(j(c[g]))continue;var f=b(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[T]||[];d[T]=S,S.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ko(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function yw(c){this.Aa=0,this.i=[],this.j=new jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ko("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ko("baseRetryDelayMs",5e3,c),this.cb=Ko("retryDelaySeedMs",1e4,c),this.Wa=Ko("forwardChannelMaxRetries",2,c),this.wa=Ko("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ZI(c&&c.concurrentRequestLimit),this.Da=new NM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){lt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Cw(this,null,this.W),tu(this)};function pf(c){if(vw(c),c.G==3){var d=c.U++,f=Dn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),Qo(c,f),d=new sr(c,c.j,d),d.L=2,d.v=Jc(Dn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Aw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Kc(d)}Tw(c)}function eu(c){c.g&&(mf(c),c.g.cancel(),c.g=null)}function vw(c){eu(c),c.u&&(a.clearTimeout(c.u),c.u=null),nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tu(c){if(!XI(c.h)&&!c.s){c.s=!0;var d=c.Ga;xo||MI(),Po||(xo(),Po=!0),Gh.add(d,c),c.B=0}}function FM(c,d){return ew(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Uo(m(c.Ga,c,d),bw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new sr(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),D(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Iw(this,T,d),f=Dn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),Qo(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(dw(S)))+"&"+d:this.m&&ff(f,this.m,S)),hf(this.h,T),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),T.T=!0,cf(T,f,null)):cf(T,f,d),this.G=2}}else this.G==3&&(c?_w(this,c):this.i.length==0||XI(this.h)||_w(this))};function _w(c,d){var f;d?f=d.l:f=c.U++;let g=Dn(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),Qo(c,g),c.m&&c.o&&ff(g,c.m,c.o),f=new sr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Iw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),hf(c.h,f),cf(f,g,d)}function Qo(c,d){c.H&&W(c.H,function(f,g){Te(d,g,f)}),c.l&&rw({},function(f,g){Te(d,g,f)})}function Iw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let S=-1;for(;;){let k=["count="+f];S==-1?0<f?(S=T[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let we=!0;for(let Ge=0;Ge<f;Ge++){let me=T[Ge].g,nt=T[Ge].map;if(me-=S,0>me)S=Math.max(0,T[Ge].g-100),we=!1;else try{xM(nt,k,"req"+me+"_")}catch{g&&g(nt)}}if(we){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function ww(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;xo||MI(),Po||(xo(),Po=!0),Gh.add(d,c),c.v=0}}function gf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Uo(m(c.Fa,c),bw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Ew(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Uo(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),eu(this),Ew(this))};function mf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Ew(c){c.g=new sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Dn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),Qo(c,d),c.m&&c.o&&ff(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Jc(Dn(d)),f.m=null,f.P=!0,QI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),gf(this),lt(19))};function nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Dw(c,d){var f=null;if(c.g==d){nu(c),mf(c),c.g=null;var g=2}else if(df(c.h,d))f=d.D,tw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=qc(),ut(g,new qI(g,f)),tu(c)}else ww(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&FM(c,d)||g==2&&gf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:ni(c,5);break;case 4:ni(c,10);break;case 3:ni(c,6);break;default:ni(c,2)}}}function bw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ni(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new ti(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(g,"https"),Jc(g),T?RM(g.toString(),f):MM(g.toString(),f)}else lt(2);c.G=0,c.l&&c.l.sa(d),Tw(c),vw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Tw(c){if(c.G=0,c.ka=[],c.l){let d=nw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Cw(c,d,f){var g=f instanceof ti?Dn(f):new ti(f);if(g.g!="")d&&(g.g=d+"."+g.g),Yc(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var S=new ti(null);g&&Qc(S,g),d&&(S.g=d),T&&Yc(S,T),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),Qo(c,g),g}function Aw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Se(new qo({eb:f})):new Se(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sw(){}t=Sw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ru(){}ru.prototype.g=function(c,d){return new _t(c,d)};function _t(c,d){tt.call(this),this.g=new yw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!j(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!j(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Xi(this)}C(_t,tt),_t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_t.prototype.close=function(){pf(this.g)},_t.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=tf(c),c=f);d.i.push(new _M(d.Ya++,c)),d.G==3&&tu(d)},_t.prototype.N=function(){this.g.l=null,delete this.j,pf(this.g),delete this.g,_t.aa.N.call(this)};function Rw(c){rf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(Rw,rf);function Mw(){sf.call(this),this.status=1}C(Mw,sf);function Xi(c){this.g=c}C(Xi,Sw),Xi.prototype.ua=function(){ut(this.g,"a")},Xi.prototype.ta=function(c){ut(this.g,new Rw(c))},Xi.prototype.sa=function(c){ut(this.g,new Mw)},Xi.prototype.ra=function(){ut(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,_t.prototype.send=_t.prototype.o,_t.prototype.open=_t.prototype.m,_t.prototype.close=_t.prototype.close,fv=Zn.createWebChannelTransport=function(){return new ru},hv=Zn.getStatEventTarget=function(){return qc()},dv=Zn.Event=Xr,Gd=Zn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,hc=Zn.ErrorCode=Gc,GI.COMPLETE="complete",lv=Zn.EventType=GI,BI.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",tt.prototype.listen=tt.prototype.K,io=Zn.WebChannel=BI,uv=Zn.FetchXmlHttpFactory=qo,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,cv=Zn.XhrIo=Se}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});var MA="@firebase/firestore";var qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");var bo="10.13.1";var Bi=new Ur("@firebase/firestore");function fc(){return Bi.logLevel}function U(t,...e){if(Bi.logLevel<=le.DEBUG){let n=e.map(eI);Bi.debug(`Firestore (${bo}): ${t}`,...n)}}function er(t,...e){if(Bi.logLevel<=le.ERROR){let n=e.map(eI);Bi.error(`Firestore (${bo}): ${t}`,...n)}}function ho(t,...e){if(Bi.logLevel<=le.WARN){let n=e.map(eI);Bi.warn(`Firestore (${bo}): ${t}`,...n)}}function eI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function J(t="Unexpected state"){let e=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: `+t;throw er(e),new Error(e)}function be(t,e){t||J()}function X(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends Ct{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Jd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},vv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}},_v=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Iv=class{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string"),new Jd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new qe(e)}},wv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ev=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new wv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Dv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},bv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new Dv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function zB(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Zd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=zB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ve(t,e){return t<e?-1:t>e?1:0}function fo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Xe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Xd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ae=class t extends Xd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},qB=/^[_a-zA-Z][_a-zA-Z0-9]*$/,At=class t extends Xd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return qB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ae.fromString(e))}static fromName(e){return new t(Ae.fromString(e).popFirst(5))}static empty(){return new t(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ae(e.slice()))}};var Tv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Tv.UNKNOWN_ID=-1;function GB(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new $i(i,G.empty(),e)}function WB(t){return new $i(t.readTime,t.key,-1)}var $i=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(re.min(),G.empty(),-1)}static max(){return new t(re.max(),G.empty(),-1)}};function KB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}var QB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function xc(t){return w(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==QB)throw t;U("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function YB(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pc(t){return t.name==="IndexedDbTransactionError"}var dS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Sh(t){return t==null}function Ic(t){return t===0&&1/t==-1/0}function JB(t){return typeof t=="number"&&Number.isInteger(t)&&!Ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ZB=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xK=[...ZB,"documentOverlays"],XB=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],e$=XB,t$=[...e$,"indexConfiguration","indexState","indexEntries"];var PK=[...t$,"globals"];function NA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function To(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||vn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new co(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new co(this.root,e,this.comparator,!1)}getReverseIterator(){return new co(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new co(this.root,e,this.comparator,!0)}},co=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},vn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();let e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}};vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1;vn.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,i,s){return this}insert(e,n,r){return new vn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var at=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new eh(this.data.getIterator())}getIteratorFrom(e){return new eh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},eh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var yn=class t{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new t([])}unionWith(e){let n=new at(At.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var th=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ct=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new th("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ct.EMPTY_BYTE_STRING=new ct("");var n$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tr(t){if(be(!!t),typeof t=="string"){let e=0,n=n$.exec(t);if(be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}function tI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nI(t){let e=t.mapValue.fields.__previous_value__;return tI(e)?nI(e):e}function wc(t){let e=tr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}var Av=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},nh=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Wd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Hi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tI(t)?4:pS(t)?9007199254740991:fS(t)?10:11:J()}function wn(t,e){if(t===e)return!0;let n=Hi(t);if(n!==Hi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wc(t).isEqual(wc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=tr(i.timestampValue),a=tr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Qr(i.bytesValue).isEqual(Qr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ce(i.geoPointValue.latitude)===Ce(s.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ce(i.integerValue)===Ce(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ce(i.doubleValue),a=Ce(s.doubleValue);return o===a?Ic(o)===Ic(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return fo(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(NA(o)!==NA(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!wn(o[u],a[u])))return!1;return!0}(t,e);default:return J()}}function Ec(t,e){return(t.values||[]).find(n=>wn(n,e))!==void 0}function po(t,e){if(t===e)return 0;let n=Hi(t),r=Hi(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ce(s.integerValue||s.doubleValue),u=Ce(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return xA(t.timestampValue,e.timestampValue);case 4:return xA(wc(t),wc(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Qr(s),u=Qr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ve(a[l],u[l]);if(h!==0)return h}return ve(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ve(Ce(s.latitude),Ce(o.latitude));return a!==0?a:ve(Ce(s.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return PA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ve(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:PA(y,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Wd.mapValue&&o===Wd.mapValue)return 0;if(s===Wd.mapValue)return 1;if(o===Wd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ve(u[p],h[p]);if(m!==0)return m;let y=po(a[u[p]],l[h[p]]);if(y!==0)return y}return ve(u.length,h.length)}(t.mapValue,e.mapValue);default:throw J()}}function xA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);let n=tr(t),r=tr(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function PA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=po(n[i],r[i]);if(s)return s}return ve(n.length,r.length)}function go(t){return Sv(t)}function Sv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Sv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Sv(n.fields[o])}`;return i+"}"}(t.mapValue):J()}function OA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rv(t){return!!t&&"integerValue"in t}function rI(t){return!!t&&"arrayValue"in t}function kA(t){return!!t&&"nullValue"in t}function FA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qd(t){return!!t&&"mapValue"in t}function fS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function gc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return To(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Yt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Qd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(n)}setAll(e){let n=At.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=gc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Qd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Qd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){To(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(gc(this.value))}};function gS(t){let e=[];return To(t.fields,(n,r)=>{let i=new At([n]);if(Qd(r)){let s=gS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new yn(e)}var Jt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,re.min(),re.min(),re.min(),Yt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,re.min(),re.min(),Yt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,re.min(),re.min(),Yt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mo=class{constructor(e,n){this.position=e,this.inclusive=n}};function LA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=po(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}var zi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function r$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var rh=class{},Ve=class t extends rh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nv(e,n,r):n==="array-contains"?new Ov(e,r):n==="in"?new kv(e,r):n==="not-in"?new Fv(e,r):n==="array-contains-any"?new Lv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new xv(e,r):new Pv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(po(n,this.value)):n!==null&&Hi(this.value)===Hi(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Zt=class t extends rh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return mS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function mS(t){return t.op==="and"}function yS(t){return i$(t)&&mS(t)}function i$(t){for(let e of t.filters)if(e instanceof Zt)return!1;return!0}function Mv(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+go(t.value);if(yS(t))return t.filters.map(e=>Mv(e)).join(",");{let e=t.filters.map(n=>Mv(n)).join(",");return`${t.op}(${e})`}}function vS(t,e){return t instanceof Ve?function(r,i){return i instanceof Ve&&r.op===i.op&&r.field.isEqual(i.field)&&wn(r.value,i.value)}(t,e):t instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&vS(o,i.filters[a]),!0):!1}(t,e):void J()}function _S(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`}(t):t instanceof Zt?function(n){return n.op.toString()+" {"+n.getFilters().map(_S).join(" ,")+"}"}(t):"Filter"}var Nv=class extends Ve{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},xv=class extends Ve{constructor(e,n){super(e,"in",n),this.keys=IS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Pv=class extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=IS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function IS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}var Ov=class extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return rI(n)&&Ec(n.arrayValue,this.value)}},kv=class extends Ve{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ec(this.value.arrayValue,n)}},Fv=class extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ec(this.value.arrayValue,n)}},Lv=class extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!rI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ec(this.value.arrayValue,r))}};var Vv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function UA(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Vv(t,e,n,r,i,s,o)}function iI(t){let e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>go(r)).join(",")),e.ue=n}return e.ue}function sI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!r$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VA(t.startAt,e.startAt)&&VA(t.endAt,e.endAt)}function Uv(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Yr=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function s$(t,e,n,r,i,s,o,a){return new Yr(t,e,n,r,i,s,o,a)}function oI(t){return new Yr(t)}function jA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wS(t){return t.collectionGroup!==null}function mc(t){let e=X(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new at(At.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zi(s,r))}),n.has(At.keyField().canonicalString())||e.ce.push(new zi(At.keyField(),r))}return e.ce}function _n(t){let e=X(t);return e.le||(e.le=o$(e,mc(t))),e.le}function o$(t,e){if(t.limitType==="F")return UA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new zi(i.field,s)});let n=t.endAt?new mo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mo(t.startAt.position,t.startAt.inclusive):null;return UA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function jv(t,e){let n=t.filters.concat([e]);return new Yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Bv(t,e,n){return new Yr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rh(t,e){return sI(_n(t),_n(e))&&t.limitType===e.limitType}function ES(t){return`${iI(_n(t))}|lt:${t.limitType}`}function so(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_S(i)).join(", ")}]`),Sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>go(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>go(i)).join(",")),`Target(${r})`}(_n(t))}; limitType=${t.limitType})`}function Mh(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of mc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=LA(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,mc(r),i)||r.endAt&&!function(o,a,u){let l=LA(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,mc(r),i))}(t,e)}function a$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DS(t){return(e,n)=>{let r=!1;for(let i of mc(t)){let s=c$(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function c$(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?po(u,l):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}var Jr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return hS(this.inner)}size(){return this.innerSize}};var u$=new Ne(G.comparator);function nr(){return u$}var bS=new Ne(G.comparator);function pc(...t){let e=bS;for(let n of t)e=e.insert(n.key,n);return e}function TS(t){let e=bS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Li(){return yc()}function CS(){return yc()}function yc(){return new Jr(t=>t.toString(),(t,e)=>t.isEqual(e))}var l$=new Ne(G.comparator),d$=new at(G.comparator);function de(...t){let e=d$;for(let n of t)e=e.add(n);return e}var h$=new at(ve);function f$(){return h$}function aI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function AS(t){return{integerValue:""+t}}function p$(t,e){return JB(e)?AS(e):aI(t,e)}var yo=class{constructor(){this._=void 0}};function g$(t,e,n){return t instanceof vo?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tI(s)&&(s=nI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof qi?RS(t,e):t instanceof Gi?MS(t,e):function(i,s){let o=SS(i,s),a=BA(o)+BA(i.Pe);return Rv(o)&&Rv(i.Pe)?AS(a):aI(i.serializer,a)}(t,e)}function m$(t,e,n){return t instanceof qi?RS(t,e):t instanceof Gi?MS(t,e):n}function SS(t,e){return t instanceof _o?function(r){return Rv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var vo=class extends yo{},qi=class extends yo{constructor(e){super(),this.elements=e}};function RS(t,e){let n=NS(e);for(let r of t.elements)n.some(i=>wn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Gi=class extends yo{constructor(e){super(),this.elements=e}};function MS(t,e){let n=NS(e);for(let r of t.elements)n=n.filter(i=>!wn(i,r));return{arrayValue:{values:n}}}var _o=class extends yo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function BA(t){return Ce(t.integerValue||t.doubleValue)}function NS(t){return rI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function y$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qi&&i instanceof qi||r instanceof Gi&&i instanceof Gi?fo(r.elements,i.elements,wn):r instanceof _o&&i instanceof _o?wn(r.Pe,i.Pe):r instanceof vo&&i instanceof vo}(t.transform,e.transform)}var $v=class{constructor(e,n){this.version=e,this.transformResults=n}},ji=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Yd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Io=class{};function xS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ih(t.key,ji.none()):new Wi(t.key,t.data,ji.none());{let n=t.data,r=Yt.empty(),i=new at(At.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new rr(t.key,r,new yn(i.toArray()),ji.none())}}function v$(t,e,n){t instanceof Wi?function(i,s,o){let a=i.value.clone(),u=HA(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof rr?function(i,s,o){if(!Yd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=HA(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(PS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vc(t,e,n,r){return t instanceof Wi?function(s,o,a,u){if(!Yd(s.precondition,o))return a;let l=s.value.clone(),h=zA(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof rr?function(s,o,a,u){if(!Yd(s.precondition,o))return a;let l=zA(s.fieldTransforms,u,o),h=o.data;return h.setAll(PS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Yd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function _$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=SS(r.transform,i||null);s!=null&&(n===null&&(n=Yt.empty()),n.set(r.field,s))}return n||null}function $A(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&fo(r,i,(s,o)=>y$(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Wi=class extends Io{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},rr=class extends Io{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function PS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function HA(t,e,n){let r=new Map;be(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,m$(o,a,n[i]))}return r}function zA(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,g$(s,o,e))}return r}var ih=class extends Io{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Hv=class extends Io{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var zv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&v$(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=CS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=xS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,(n,r)=>$A(n,r))&&fo(this.baseMutations,e.baseMutations,(n,r)=>$A(n,r))}},qv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length);let i=function(){return l$}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Gv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Wv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Fe,pe;function I$(t){switch(t){default:return J();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function OS(t){if(t===void 0)return er("GRPC error has no .code"),M.UNKNOWN;switch(t){case Fe.OK:return M.OK;case Fe.CANCELLED:return M.CANCELLED;case Fe.UNKNOWN:return M.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return M.INTERNAL;case Fe.UNAVAILABLE:return M.UNAVAILABLE;case Fe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Fe.NOT_FOUND:return M.NOT_FOUND;case Fe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Fe.ABORTED:return M.ABORTED;case Fe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Fe.DATA_LOSS:return M.DATA_LOSS;default:return J()}}(pe=Fe||(Fe={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var qA=null;function w$(){return new TextEncoder}var E$=new Wr([4294967295,4294967295],0);function GA(t){let e=w$().encode(t),n=new av;return n.update(e),new Uint8Array(n.digest())}function WA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([i,s],0)]}var Kv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vi(`Invalid padding: ${n}`);if(r<0)throw new Vi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Wr.fromNumber(r)));return i.compare(E$)===1&&(i=new Wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=GA(e),[r,i]=WA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=GA(e),[r,i]=WA(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Vi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var sh=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(re.min(),i,new Ne(ve),nr(),de())}},Dc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var uo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},oh=class{constructor(e,n){this.targetId=e,this.me=n}},ah=class{constructor(e,n,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ch=class{constructor(){this.fe=0,this.ge=QA(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:J()}}),new Dc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=QA()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Qv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=KA(),this.Qe=new Ne(ve)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Uv(s))if(r===0){let o=new G(s.path);this.Ue(n,o,Jt.newNoDocument(o,re.min()))}else be(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}qA?.et(function(h,p,m,y,C){var N,R,x,j,H,q;let Ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},W=p.unchangedNames;return W&&(Ie.bloomFilter={applied:C===0,hashCount:(N=W?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(j=(x=(R=W?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&j!==void 0?j:0,padding:(q=(H=W?.bits)===null||H===void 0?void 0:H.padding)!==null&&q!==void 0?q:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),Ie}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Qr(r).toUint8Array()}catch(u){if(u instanceof th)return ho("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Kv(o,i,s)}catch(u){return ho(u instanceof Vi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Uv(a.target)){let u=new G(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Jt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new sh(e,n,this.Qe,this.ke,r);return this.ke=nr(),this.qe=KA(),this.Qe=new Ne(ve),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ch,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new at(ve),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ch),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function KA(){return new Ne(G.comparator)}function QA(){return new Ne(G.comparator)}var D$={asc:"ASCENDING",desc:"DESCENDING"},b$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T$={and:"AND",or:"OR"},Yv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Jv(t,e){return t.useProto3Json||Sh(e)?e:{value:e}}function uh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function C$(t,e){return uh(t,e.toTimestamp())}function In(t){return be(!!t),re.fromTimestamp(function(n){let r=tr(n);return new Xe(r.seconds,r.nanos)}(t))}function cI(t,e){return Zv(t,e).canonicalString()}function Zv(t,e){let n=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FS(t){let e=Ae.fromString(t);return be(BS(e)),e}function Xv(t,e){return cI(t.databaseId,e.path)}function pv(t,e){let n=FS(e);if(n.get(1)!==t.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(VS(n))}function LS(t,e){return cI(t.databaseId,e)}function A$(t){let e=FS(t);return e.length===4?Ae.emptyPath():VS(e)}function e_(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VS(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function YA(t,e,n){return{name:Xv(t,e),fields:n.value.mapValue.fields}}function S$(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(be(h===void 0||typeof h=="string"),ct.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:OS(l.code);return new V(h,l.message||"")}(o);n=new ah(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=pv(t,r.document.name),s=In(r.document.updateTime),o=r.document.createTime?In(r.document.createTime):re.min(),a=new Yt({mapValue:{fields:r.document.fields}}),u=Jt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new uo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=pv(t,r.document),s=r.readTime?In(r.readTime):re.min(),o=Jt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new uo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=pv(t,r.document),s=r.removedTargetIds||[];n=new uo([],s,i,null)}else{if(!("filter"in e))return J();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Wv(i,s),a=r.targetId;n=new oh(a,o)}}return n}function R$(t,e){let n;if(e instanceof Wi)n={update:YA(t,e.key,e.value)};else if(e instanceof ih)n={delete:Xv(t,e.key)};else if(e instanceof rr)n={update:YA(t,e.key,e.data),updateMask:V$(e.fieldMask)};else{if(!(e instanceof Hv))return J();n={verify:Xv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof vo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _o)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:C$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function M$(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?In(i.updateTime):In(s);return o.isEqual(re.min())&&(o=In(s)),new $v(o,i.transformResults||[])}(n,e))):[]}function N$(t,e){return{documents:[LS(t,e.path)]}}function x$(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LS(t,i);let s=function(l){if(l.length!==0)return jS(Zt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:oo(m.field),direction:k$(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Jv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function P$(t){let e=A$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){be(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=US(p);return m instanceof Zt&&yS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new zi(ao(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Sh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new mo(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new mo(y,m)}(n.endAt)),s$(e,i,o,s,a,"F",u,l)}function O$(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function US(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ao(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ao(n.unaryFilter.field);return Ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ao(n.unaryFilter.field);return Ve.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ao(n.unaryFilter.field);return Ve.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(ao(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zt.create(n.compositeFilter.filters.map(r=>US(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function k$(t){return D$[t]}function F$(t){return b$[t]}function L$(t){return T$[t]}function oo(t){return{fieldPath:t.canonicalString()}}function ao(t){return At.fromServerFormat(t.fieldPath)}function jS(t){return t instanceof Ve?function(n){if(n.op==="=="){if(FA(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NAN"}};if(kA(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(FA(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NAN"}};if(kA(n.value))return{unaryFilter:{field:oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(n.field),op:F$(n.op),value:n.value}}}(t):t instanceof Zt?function(n){let r=n.getFilters().map(i=>jS(i));return r.length===1?r[0]:{compositeFilter:{op:L$(n.op),filters:r}}}(t):J()}function V$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var bc=class t{constructor(e,n,r,i,s=re.min(),o=re.min(),a=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var t_=class{constructor(e){this.ct=e}};function U$(t){let e=P$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bv(e,e.limit,"L"):e}var lh=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ic(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=tr(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Qr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?pS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):fS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):J()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ce(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),G.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};lh.vt=new lh;var n_=class{constructor(){this.un=new r_}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve($i.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve($i.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},r_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(Ae.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Ae.comparator)).toArray()}};var kK=new Uint8Array(0);var mn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(41943040,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);var Tc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var i_=class{constructor(){this.changes=new Jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var s_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var o_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&vc(r.mutation,i,yn.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=Li();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=pc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Li();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=nr(),o=yc(),a=function(){return yc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof rr)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),vc(h.mutation,l,h.mutation.getFieldMask(),Xe.now())):o.set(l.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new s_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=yc(),i=new Ne((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||yn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=CS();h.forEach(m=>{if(!s.has(m)){let y=xS(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Li()),a=-1,u=s;return o.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:TS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=pc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=pc();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{let l=function(p,m){return new Yr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Jt.newInvalidDocument(h)))});let a=pc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&vc(h.mutation,l,yn.empty(),Xe.now()),Mh(n,l)&&(a=a.insert(u,l))}),a})}};var a_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:In(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:U$(i.bundledQuery),readTime:In(i.readTime)}}(n)),O.resolve()}};var c_=class{constructor(){this.overlays=new Ne(G.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Li();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=Li(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Li(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Li(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Gv(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var u_=class{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var Cc=class{constructor(){this.Tr=new at(Le.Er),this.dr=new at(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Le(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Le(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new G(new Ae([])),r=new Le(n,e),i=new Le(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new G(new Ae([])),r=new Le(n,e),i=new Le(n,e+1),s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Le(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Le=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||G.comparator(e.key,n.key)}};var l_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new at(Le.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new zv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Le(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Le(n,0),i=new Le(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(ve);return n.forEach(i=>{let s=new Le(i,0),o=new Le(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;G.isDocumentKey(s)||(s=s.child(""));let o=new Le(new G(s),0),a=new at(ve);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{let s=new Le(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Le(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var d_=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Jt.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=nr(),o=n.path,a=new G(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||KB(WB(h),r)<=0||(i.has(h.key)||Mh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){J()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new h_(this)}getSize(e){return O.resolve(this.size)}},h_=class extends i_{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var f_=class{constructor(e){this.persistence=e,this.Nr=new Jr(n=>iI(n),sI),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cc,this.targetCount=0,this.kr=Tc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Tc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}};var p_=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new dS(0),this.Kr=!1,this.Kr=!0,this.$r=new u_,this.referenceDelegate=e(this),this.Ur=new f_(this),this.indexManager=new n_,this.remoteDocumentCache=function(i){return new d_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new t_(n),this.Gr=new a_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new c_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new l_(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){U("MemoryPersistence","Starting transaction:",e);let i=new g_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},g_=class extends Cv{constructor(e){super(),this.currentSequenceNumber=e}},m_=class t{constructor(e){this.persistence=e,this.Jr=new Cc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=G.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var y_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var v_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var __=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return g0()?8:YB(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new v_;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(fc()<=le.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",so(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(fc()<=le.DEBUG&&U("QueryEngine","Query:",so(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(fc()<=le.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",so(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):O.resolve())}Yi(e,n){if(jA(n))return O.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Bv(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,Bv(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return jA(n)||i.isEqual(re.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?O.resolve(null):(fc()<=le.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),so(n)),this.rs(e,o,n,GB(i,-1)).next(a=>a))})}ts(e,n){let r=new at(DS(e));return n.forEach((i,s)=>{Mh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return fc()<=le.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",so(n)),this.Ji.getDocumentsMatchingQuery(e,n,$i.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var I_=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ne(ve),this._s=new Jr(s=>iI(s),sI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function j$(t,e,n,r){return new I_(t,e,n,r)}function $S(t,e){return w(this,null,function*(){let n=X(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=de();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function B$(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=O.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);be(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function HS(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $$(t,e){let n=X(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ct.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=nr(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(H$(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(re.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function H$(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=nr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function z$(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q$(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new bc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function w_(t,e,n){return w(this,null,function*(){let r=X(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Pc(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function JA(t,e,n){let r=X(t),i=re.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=X(u),m=p._s.get(h);return m!==void 0?O.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,_n(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:de())).next(a=>(G$(r,a$(e),a),{documents:a,Ts:s})))}function G$(t,e,n){let r=t.us.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var dh=class{constructor(){this.activeTargetIds=f$()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var E_=class{constructor(){this.so=new dh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var D_=class{_o(e){}shutdown(){}};var hh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Kd=null;function gv(){return Kd===null?Kd=function(){return 268435456+Math.round(2147483648*Math.random())}():Kd++,"0x"+Kd.toString(16)}var W$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var b_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ot="WebChannelConnection",T_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=gv(),u=this.xo(n,r.toUriEncodedString());U("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(U("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ho("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=W$[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=gv();return new Promise((o,a)=>{let u=new cv;u.setWithCredentials(!0),u.listenOnce(lv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hc.NO_ERROR:let h=u.getResponseJson();U(ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case hc.TIMEOUT:U(ot,`RPC '${e}' ${s} timed out`),a(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:let p=u.getStatus();if(U(ot,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let C=function(R){let x=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(x)>=0?x:M.UNKNOWN}(y.status);a(new V(C,y.message))}else a(new V(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new V(M.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{U(ot,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);U(ot,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=gv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fv(),a=hv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new uv({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");U(ot,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,y=!1,C=new b_({Io:R=>{y?U(ot,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(U(ot,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),U(ot,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,x,j)=>{R.listen(x,H=>{try{j(H)}catch(q){setTimeout(()=>{throw q},0)}})};return N(p,io.EventType.OPEN,()=>{y||(U(ot,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),N(p,io.EventType.CLOSE,()=>{y||(y=!0,U(ot,`RPC '${e}' stream ${i} transport closed`),C.So())}),N(p,io.EventType.ERROR,R=>{y||(y=!0,ho(ot,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,io.EventType.MESSAGE,R=>{var x;if(!y){let j=R.data[0];be(!!j);let H=j,q=H.error||((x=H[0])===null||x===void 0?void 0:x.error);if(q){U(ot,`RPC '${e}' stream ${i} received error:`,q);let Ie=q.status,W=function(_){let D=Fe[_];if(D!==void 0)return OS(D)}(Ie),E=q.message;W===void 0&&(W=M.INTERNAL,E="Unknown error status: "+Ie+" with message "+q.message),y=!0,C.So(new V(W,E)),p.close()}else U(ot,`RPC '${e}' stream ${i} received:`,j),C.bo(j)}}),N(a,dv.STAT_EVENT,R=>{R.stat===Gd.PROXY?U(ot,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Gd.NOPROXY&&U(ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function mv(){return typeof document<"u"?document:null}function Nh(t){return new Yv(t,!0)}var fh=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ph=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fh(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(er(n.toString()),er("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},C_=class extends ph{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=S$(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?In(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=e_(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Uv(u)?{documents:N$(s,u)}:{query:x$(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kS(s,o.resumeToken);let l=Jv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=uh(s,o.snapshotVersion.toTimestamp());let l=Jv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=O$(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=e_(this.serializer),n.removeTarget=e,this.a_(n)}},A_=class extends ph{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=M$(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=e_(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>R$(this.serializer,r))};this.a_(n)}};var S_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Zv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Zv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},R_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(er(n),this.D_=!1):U("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var M_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){Qi(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=X(u);l.L_.add(4),yield Oc(l),l.q_.set("Unknown"),l.L_.delete(4),yield xh(l)})}(this))}))}),this.q_=new R_(r,i)}};function xh(t){return w(this,null,function*(){if(Qi(t))for(let e of t.B_)yield e(!0)})}function Oc(t){return w(this,null,function*(){for(let e of t.B_)yield e(!1)})}function zS(t,e){let n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),hI(n)?dI(n):Co(n).r_()&&lI(n,e))}function uI(t,e){let n=X(t),r=Co(n);n.N_.delete(e),r.r_()&&qS(n,e),n.N_.size===0&&(r.r_()?r.o_():Qi(n)&&n.q_.set("Unknown"))}function lI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(t).A_(e)}function qS(t,e){t.Q_.xe(e),Co(t).R_(e)}function dI(t){t.Q_=new Qv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Co(t).start(),t.q_.v_()}function hI(t){return Qi(t)&&!Co(t).n_()&&t.N_.size>0}function Qi(t){return X(t).L_.size===0}function GS(t){t.Q_=void 0}function K$(t){return w(this,null,function*(){t.q_.set("Online")})}function Q$(t){return w(this,null,function*(){t.N_.forEach((e,n)=>{lI(t,e)})})}function Y$(t,e){return w(this,null,function*(){GS(t),hI(t)?(t.q_.M_(e),dI(t)):t.q_.set("Unknown")})}function J$(t,e,n){return w(this,null,function*(){if(t.q_.set("Online"),e instanceof ah&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gh(t,r)}else if(e instanceof uo?t.Q_.Ke(e):e instanceof oh?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{let r=yield HS(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),qS(s,u);let p=new bc(h.target,u,l,h.sequenceNumber);lI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield gh(t,r)}})}function gh(t,e,n){return w(this,null,function*(){if(!Pc(e))throw e;t.L_.add(1),yield Oc(t),t.q_.set("Offline"),n||(n=()=>HS(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield xh(t)}))})}function WS(t,e){return e().catch(n=>gh(t,n,e))}function Ph(t){return w(this,null,function*(){let e=X(t),n=Zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Z$(e);)try{let i=yield z$(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,X$(e,i)}catch(i){yield gh(e,i)}KS(e)&&QS(e)})}function Z$(t){return Qi(t)&&t.O_.length<10}function X$(t,e){t.O_.push(e);let n=Zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function KS(t){return Qi(t)&&!Zr(t).n_()&&t.O_.length>0}function QS(t){Zr(t).start()}function eH(t){return w(this,null,function*(){Zr(t).p_()})}function tH(t){return w(this,null,function*(){let e=Zr(t);for(let n of t.O_)e.m_(n.mutations)})}function nH(t,e,n){return w(this,null,function*(){let r=t.O_.shift(),i=qv.from(r,e,n);yield WS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ph(t)})}function rH(t,e){return w(this,null,function*(){e&&Zr(t).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return I$(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Zr(r).s_(),yield WS(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ph(r)}})}(t,e)),KS(t)&&QS(t)})}function ZA(t,e){return w(this,null,function*(){let n=X(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=Qi(n);n.L_.add(3),yield Oc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield xh(n)})}function iH(t,e){return w(this,null,function*(){let n=X(t);e?(n.L_.delete(2),yield xh(n)):e||(n.L_.add(2),yield Oc(n),n.q_.set("Unknown"))})}function Co(t){return t.K_||(t.K_=function(n,r,i){let s=X(n);return s.w_(),new C_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:K$.bind(null,t),Ro:Q$.bind(null,t),mo:Y$.bind(null,t),d_:J$.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.K_.s_(),hI(t)?dI(t):t.q_.set("Unknown")):(yield t.K_.stop(),GS(t))}))),t.K_}function Zr(t){return t.U_||(t.U_=function(n,r,i){let s=X(n);return s.w_(),new A_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:eH.bind(null,t),mo:rH.bind(null,t),f_:tH.bind(null,t),g_:nH.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.U_.s_(),yield Ph(t)):(yield t.U_.stop(),t.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var N_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function fI(t,e){if(er("AsyncQueue",`${e}: ${t}`),Pc(t))return new V(M.UNAVAILABLE,`${e}: ${t}`);throw t}var mh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=pc(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var yh=class{constructor(){this.W_=new Ne(G.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},wo=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,mh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var x_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},P_=class{constructor(){this.queries=XA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=X(n),s=i.queries;i.queries=XA(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new V(M.ABORTED,"Firestore shutting down"))}};function XA(){return new Jr(t=>ES(t),Rh)}function sH(t,e){return w(this,null,function*(){let n=X(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new x_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=fI(o,`Initialization of query '${so(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&pI(n)})}function oH(t,e){return w(this,null,function*(){let n=X(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function aH(t,e){let n=X(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&pI(n)}function cH(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function pI(t){t.Y_.forEach(e=>{e.next()})}var O_,eS;(eS=O_||(O_={})).ea="default",eS.Cache="cache";var k_=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==O_.Cache}};var vh=class{constructor(e){this.key=e}},_h=class{constructor(e){this.key=e}},F_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=DS(e),this.Ra=new mh(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new yh,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Mh(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return N(y)-N(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new wo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new _h(r))}),this.da.forEach(r=>{e.has(r)||n.push(new vh(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return wo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},L_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},V_=class{constructor(e){this.key=e,this.va=!1}},U_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Jr(a=>ES(a),Rh),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(G.comparator),this.Na=new Map,this.La=new Cc,this.Ba={},this.ka=new Map,this.qa=Tc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function uH(t,e,n=!0){return w(this,null,function*(){let r=tR(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield YS(r,e,n,!0),i})}function lH(t,e){return w(this,null,function*(){let n=tR(t);yield YS(n,e,!0,!1)})}function YS(t,e,n,r){return w(this,null,function*(){let i=yield q$(t.localStore,_n(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield dH(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&zS(t.remoteStore,i),a})}function dH(t,e,n,r,i){return w(this,null,function*(){t.Ka=(p,m,y)=>function(N,R,x,j){return w(this,null,function*(){let H=R.view.ma(x);H.ns&&(H=yield JA(N.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,H)));let q=j&&j.targetChanges.get(R.targetId),Ie=j&&j.targetMismatches.get(R.targetId)!=null,W=R.view.applyChanges(H,N.isPrimaryClient,q,Ie);return nS(N,R.targetId,W.wa),W.snapshot})}(t,p,m,y);let s=yield JA(t.localStore,e,!0),o=new F_(e,s.Ts),a=o.ma(s.documents),u=Dc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);nS(t,n,l.wa);let h=new L_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function hH(t,e,n){return w(this,null,function*(){let r=X(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Rh(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield w_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uI(r.remoteStore,i.targetId),j_(r,i.targetId)}).catch(xc))):(j_(r,i.targetId),yield w_(r.localStore,i.targetId,!0))})}function fH(t,e){return w(this,null,function*(){let n=X(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uI(n.remoteStore,r.targetId))})}function pH(t,e,n){return w(this,null,function*(){let r=wH(t);try{let i=yield function(o,a){let u=X(o),l=Xe.now(),h=a.reduce((y,C)=>y.add(C.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=nr(),N=de();return u.cs.getEntries(y,h).next(R=>{C=R,C.forEach((x,j)=>{j.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let x=[];for(let j of a){let H=_$(j,p.get(j.key).overlayedDocument);H!=null&&x.push(new rr(j.key,H,gS(H.value.mapValue),ji.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{m=R;let x=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:m.batchId,changes:TS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ne(ve)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield kc(r,i.changes),yield Ph(r.remoteStore)}catch(i){let s=fI(i,"Failed to persist write");n.reject(s)}})}function JS(t,e){return w(this,null,function*(){let n=X(t);try{let r=yield $$(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?be(o.va):i.removedDocuments.size>0&&(be(o.va),o.va=!1))}),yield kc(n,r,e)}catch(r){yield xc(r)}})}function tS(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=X(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&pI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gH(t,e,n){return w(this,null,function*(){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ne(G.comparator);o=o.insert(s,Jt.newNoDocument(s,re.min()));let a=de().add(s),u=new sh(re.min(),new Map,new Ne(ve),o,a);yield JS(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),gI(r)}else yield w_(r.localStore,e,!1).then(()=>j_(r,e,n)).catch(xc)})}function mH(t,e){return w(this,null,function*(){let n=X(t),r=e.batch.batchId;try{let i=yield B$(n.localStore,e);XS(n,r,null),ZS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield kc(n,i)}catch(i){yield xc(i)}})}function yH(t,e,n){return w(this,null,function*(){let r=X(t);try{let i=yield function(o,a){let u=X(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(be(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);XS(r,e,n),ZS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield kc(r,i)}catch(i){yield xc(i)}})}function ZS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function XS(t,e,n){let r=X(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function j_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||eR(t,r)})}function eR(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(uI(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),gI(t))}function nS(t,e,n){for(let r of n)r instanceof vh?(t.La.addReference(r.key,e),vH(t,r)):r instanceof _h?(U("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||eR(t,r.key)):J()}function vH(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(U("SyncEngine","New document in limbo: "+n),t.xa.add(r),gI(t))}function gI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new G(Ae.fromString(e)),r=t.qa.next();t.Na.set(r,new V_(n)),t.Oa=t.Oa.insert(n,r),zS(t.remoteStore,new bc(_n(oI(n.path)),r,"TargetPurposeLimboResolution",dS.oe))}}function kc(t,e,n){return w(this,null,function*(){let r=X(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=y_.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return w(this,null,function*(){let h=X(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>O.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Pc(p))throw p;U("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function _H(t,e){return w(this,null,function*(){let n=X(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield $S(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new V(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield kc(n,r.hs)}})}function IH(t,e){let n=X(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function tR(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gH.bind(null,e),e.Ca.d_=aH.bind(null,e.eventManager),e.Ca.$a=cH.bind(null,e.eventManager),e}function wH(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yH.bind(null,e),e}var Ih=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=Nh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return j$(this.persistence,new __,e.initialUser,this.serializer)}createPersistence(e){return new p_(m_.Zr,this.serializer)}createSharedClientState(e){return new E_}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var B_=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_H.bind(null,this.syncEngine),yield iH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new P_}()}createDatastore(e){let n=Nh(e.databaseInfo.databaseId),r=function(s){return new T_(s)}(e.databaseInfo);return function(s,o,a,u){return new S_(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new M_(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>tS(this.syncEngine,n,0),function(){return hh.D()?new hh:new D_}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new U_(i,s,o,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e,n;yield function(i){return w(this,null,function*(){let s=X(i);U("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Oc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var $_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var H_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qe.UNAUTHENTICATED,this.clientId=Zd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){U("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=fI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function yv(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield $S(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function rS(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield DH(t);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ZA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ZA(e.remoteStore,i)),t._onlineComponents=e})}function EH(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function DH(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!EH(n))throw n;ho("Error using user provided cache. Falling back to memory cache: "+n),yield yv(t,new Ih)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield yv(t,new Ih);return t._offlineComponents})}function nR(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield rS(t,t._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield rS(t,new B_))),t._onlineComponents})}function bH(t){return nR(t).then(e=>e.syncEngine)}function iS(t){return w(this,null,function*(){let e=yield nR(t),n=e.eventManager;return n.onListen=uH.bind(null,e.syncEngine),n.onUnlisten=hH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fH.bind(null,e.syncEngine),n})}function rR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var sS=new Map;function iR(t,e,n){if(!n)throw new V(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TH(t,e,n,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function oS(t){if(!G.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function aS(t){if(G.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Oh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function _c(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Oh(t);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var wh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new vv;switch(r.type){case"firstParty":return new Ev(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=sS.get(n);r&&(U("ComponentProvider","Removing Datastore"),sS.delete(n),r.terminate())}(this),Promise.resolve()}};function sR(t,e,n,r={}){var i;let s=(t=_c(t,Eo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=qe.MOCK_USER;else{a=l0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qe(l)}t._authCredentials=new _v(new Jd(a,u))}}var Ki=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},St=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Kr=class t extends Ki{constructor(e,n,r){super(e,n,oI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function oR(t,e,...n){if(t=Ze(t),iR("collection","path",e),t instanceof Eo){let r=Ae.fromString(e,...n);return aS(r),new Kr(t,null,r)}{if(!(t instanceof St||t instanceof Kr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ae.fromString(e,...n));return aS(r),new Kr(t.firestore,null,r)}}function aR(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=Zd.newId()),iR("doc","path",e),t instanceof Eo){let r=Ae.fromString(e,...n);return oS(r),new St(t,null,new G(r))}{if(!(t instanceof St||t instanceof Kr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ae.fromString(e,...n));return oS(r),new St(t.firestore,t instanceof Kr?t.converter:null,new G(r))}}var z_=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new fh(this,"async_queue_retry"),this.Eu=()=>{let n=mv();n&&U("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=mv();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=mv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Xn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return w(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Pc(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw er("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=N_.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&J()}verifyOperationInProgress(){}mu(){return w(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function cS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Do=class extends Eo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new z_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||lR(this),this._firestoreClient.terminate()}};function cR(t,e){let n=typeof t=="object"?t:Zs(),r=typeof t=="string"?t:e||"(default)",i=tc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=u0("firestore");s&&sR(i,...s)}return i}function uR(t){return t._firestoreClient||lR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function lR(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new Av(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rR(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new H_(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ac=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ct.fromBase64String(e))}catch(n){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Sc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Eh=class{constructor(e){this._methodName=e}};var Rc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}};var Mc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var CH=/^__.*__$/,q_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wi(e,this.data,n,this.fieldTransforms)}};function dR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}var G_=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Dh(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(dR(this.wu)&&CH.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},W_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nh(e)}Nu(e,n,r,i=!1){return new G_({wu:e,methodName:n,Ou:r,path:At.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function hR(t){let e=t._freezeSettings(),n=Nh(t._databaseId);return new W_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function AH(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);gR("Data must be an object, but it was:",o,r);let a=fR(r,o),u,l;if(s.merge)u=new yn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=RH(e,p,n);if(!o.contains(m))throw new V(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);NH(h,m)||h.push(m)}u=new yn(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new q_(new Yt(a),u,l)}function SH(t,e,n,r=!1){return mI(n,t.Nu(r?4:3,e))}function mI(t,e){if(pR(t=Ze(t)))return gR("Unsupported field value:",e,t),fR(t,e);if(t instanceof Eh)return function(r,i){if(!dR(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=mI(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return p$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xe.fromDate(r);return{timestampValue:uh(i.serializer,s)}}if(r instanceof Xe){let s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uh(i.serializer,s)}}if(r instanceof Rc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ac)return{bytesValue:kS(i.serializer,r._byteString)};if(r instanceof St){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Mc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return aI(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Oh(r)}`)}(t,e)}function fR(t,e){let n={};return hS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(t,(r,i)=>{let s=mI(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function pR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Rc||t instanceof Ac||t instanceof St||t instanceof Eh||t instanceof Mc)}function gR(t,e,n){if(!pR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Oh(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function RH(t,e,n){if((e=Ze(e))instanceof Sc)return e._internalPath;if(typeof e=="string")return mR(t,e);throw Dh("Field path arguments must be of type string or ",t,!1,void 0,n)}var MH=new RegExp("[~\\*/\\[\\]]");function mR(t,e,n){if(e.search(MH)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sc(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dh(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(M.INVALID_ARGUMENT,a+t+u)}function NH(t,e){return t.some(n=>n.isEqual(e))}var bh=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new K_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(yI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},K_=class extends bh{data(){return super.data()}};function yI(t,e){return typeof e=="string"?mR(t,e):e instanceof Sc?e._internalPath:e._delegate._internalPath}function xH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nc=class{},Th=class extends Nc{};function yR(t,e,...n){let r=[];e instanceof Nc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof Y_).length,a=s.filter(u=>u instanceof Q_).length;if(o>1||o>0&&a>0)throw new V(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Q_=class t extends Th{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return _R(e._query,n),new Ki(e.firestore,e.converter,jv(e._query,n))}_parse(e){let n=hR(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new V(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){lS(p,h);let y=[];for(let C of p)y.push(uS(u,s,C));m={arrayValue:{values:y}}}else m=uS(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||lS(p,h),m=SH(a,o,p,h==="in"||h==="not-in");return Ve.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var Y_=class t extends Nc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)_R(o,u),o=jv(o,u)}(e._query,n),new Ki(e.firestore,e.converter,jv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var J_=class t extends Th{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new V(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zi(s,o)}(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Yr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function vR(t,e="asc"){let n=e,r=yI("orderBy",t);return J_._create(r,n)}function uS(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new V(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wS(e)&&n.indexOf("/")!==-1)throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ae.fromString(n));if(!G.isDocumentKey(r))throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return OA(t,new G(r))}if(n instanceof St)return OA(t,n._key);throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oh(n)}.`)}function lS(t,e){if(!Array.isArray(t)||t.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _R(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new V(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Z_=class{convertValue(e,n="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return To(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ce(o.doubleValue));return new Mc(s)}convertGeoPoint(e){return new Rc(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=nI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wc(e));default:return null}}convertTimestamp(e){let n=tr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ae.fromString(e);be(BS(r));let i=new nh(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||er(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function PH(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ui=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ch=class extends bh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new lo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(yI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},lo=class extends Ch{data(e={}){return super.data(e)}},X_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ui(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lo(this._firestore,this._userDataWriter,r.key,r,new Ui(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new lo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ui(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new lo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ui(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:OH(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function OH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}var Ah=class extends Z_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ac(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}};function IR(t,e){let n=_c(t.firestore,Do),r=aR(t),i=PH(t.converter,e);return kH(n,[AH(hR(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ji.exists(!1))]).then(()=>r)}function vI(t,...e){var n,r,i;t=Ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||cS(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(cS(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof St)l=_c(t.firestore,Do),h=oI(t._key.path),u={next:p=>{e[o]&&e[o](FH(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=_c(t,Ki);l=_c(p.firestore,Do),h=p._query;let m=new Ah(l);u={next:y=>{e[o]&&e[o](new X_(l,m,p,y))},error:e[o+1],complete:e[o+2]},xH(t._query)}return function(m,y,C,N){let R=new $_(N),x=new k_(y,R,C);return m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return sH(yield iS(m),x)})),()=>{R.za(),m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return oH(yield iS(m),x)}))}}(uR(l),h,a,u)}function kH(t,e){return function(r,i){let s=new Xn;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return pH(yield bH(r),i,s)})),s.promise}(uR(t),e)}function FH(t,e,n){let r=n.docs.get(e._key),i=new Ah(t);return new Ch(t,i,e._key,r,new Ui(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){bo=i})($r),Br(new Ut("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Do(new Iv(r.getProvider("auth-internal")),new bv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Be(MA,"4.7.1",e),Be(MA,"4.7.1","esm2017")})();var kh=function(){return kh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kh.apply(this,arguments)};var UH={includeMetadataChanges:!1};function wR(t,e){return e===void 0&&(e=UH),new oe(function(n){var r=vI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function ER(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:kh(kh({},r),(n={},n[e.idField]=t.id,n))}function DR(t){return wR(t,{includeMetadataChanges:!0}).pipe(Q(function(e){return e.docs}))}function bR(t,e){return e===void 0&&(e={}),DR(t).pipe(Q(function(n){return n.map(function(r){return ER(r,e)})}))}var Yi=class{constructor(e){return e}},TR="firestore",_I=class{constructor(){return nc(TR)}};var II=new L("angularfire2.firestore-instances");function jH(t,e){let n=Td(TR,t,e);return n&&new Yi(n)}function BH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Yi(r)}}var $H={provide:_I,deps:[[new st,II]]},HH={provide:Yi,useFactory:jH,deps:[[new st,II],Kn]};function fQ(t,...e){return Be("angularfire",Mi.full,"fst"),Pt([HH,$H,{provide:II,useFactory:BH(t),multi:!0,deps:[ye,Ke,to,Ni,[new st,dc],[new st,eo],...e]}])}var CR=vt(bR,!0);var AR=vt(IR,!0);var SR=vt(oR,!0);var pQ=vt(cR,!0);var RR=vt(vR,!0);var MR=vt(yR,!0);var UR=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ne(Ln),ne(Et))},e.\u0275dir=je({type:e});let t=e;return t})(),qH=(()=>{let e=class e extends UR{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ps(e)))(s||e)}})(),e.\u0275dir=je({type:e,features:[Vn]});let t=e;return t})(),jR=new L("");var GH={provide:jR,useExisting:_i(()=>Hh),multi:!0};function WH(){let t=Bn()?Bn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var KH=new L(""),Hh=(()=>{let e=class e extends UR{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!WH())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ne(Ln),ne(Et),ne(KH,8))},e.\u0275dir=je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&ln("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[_a([GH]),Vn]});let t=e;return t})();function QH(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var EI=new L(""),BR=new L("");function YH(t){return QH(t.value)?{required:!0}:null}function NR(t){return null}function $R(t){return t!=null}function HR(t){return Di(t)?Ee(t):t}function zR(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function qR(t,e){return e.map(n=>n(t))}function JH(t){return!t.validate}function GR(t){return t.map(e=>JH(e)?e:n=>e.validate(n))}function ZH(t){if(!t)return null;let e=t.filter($R);return e.length==0?null:function(n){return zR(qR(n,e))}}function DI(t){return t!=null?ZH(GR(t)):null}function XH(t){if(!t)return null;let e=t.filter($R);return e.length==0?null:function(n){let r=qR(n,e).map(HR);return Vf(r).pipe(Q(zR))}}function bI(t){return t!=null?XH(GR(t)):null}function xR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ez(t){return t._rawValidators}function tz(t){return t._rawAsyncValidators}function wI(t){return t?Array.isArray(t)?t:[t]:[]}function Lh(t,e){return Array.isArray(t)?t.includes(e):t===e}function PR(t,e){let n=wI(e);return wI(t).forEach(i=>{Lh(n,i)||n.push(i)}),n}function OR(t,e){return wI(e).filter(n=>!Lh(t,n))}var Vh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ro=class extends Vh{get formDirective(){return null}get path(){return null}},Bc=class extends Vh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Uh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},NQ=ce(F({},nz),{"[class.ng-submitted]":"isSubmitted"}),WR=(()=>{let e=class e extends Uh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(Bc,2))},e.\u0275dir=je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Ul("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Vn]});let t=e;return t})(),KR=(()=>{let e=class e extends Uh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ne(Ro,10))},e.\u0275dir=je({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Ul("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Vn]});let t=e;return t})();var Fc="VALID",Fh="INVALID",Ao="PENDING",Lc="DISABLED",Mo=class{},jh=class extends Mo{constructor(e,n){super(),this.value=e,this.source=n}},Uc=class extends Mo{constructor(e,n){super(),this.pristine=e,this.source=n}},jc=class extends Mo{constructor(e,n){super(),this.touched=e,this.source=n}},So=class extends Mo{constructor(e,n){super(),this.status=e,this.source=n}};function QR(t){return(zh(t)?t.validators:t)||null}function rz(t){return Array.isArray(t)?DI(t):t||null}function YR(t,e){return(zh(e)?e.asyncValidators:t)||null}function iz(t){return Array.isArray(t)?bI(t):t||null}function zh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function sz(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[n])throw new $(1001,"")}function oz(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new $(1002,"")})}var Bh=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=wa(()=>this.statusReactive()),this.statusReactive=ma(void 0),this._pristine=wa(()=>this.pristineReactive()),this.pristineReactive=ma(!0),this._touched=wa(()=>this.touchedReactive()),this.touchedReactive=ma(!1),this._events=new $e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Un(this.statusReactive)}set status(e){Un(()=>this.statusReactive.set(e))}get valid(){return this.status===Fc}get invalid(){return this.status===Fh}get pending(){return this.status==Ao}get disabled(){return this.status===Lc}get enabled(){return this.status!==Lc}get pristine(){return Un(this.pristineReactive)}set pristine(e){Un(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Un(this.touchedReactive)}set touched(e){Un(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(PR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(OR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(OR(e,this._rawAsyncValidators))}hasValidator(e){return Lh(this._rawValidators,e)}hasAsyncValidator(e){return Lh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new jc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new jc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Uc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Uc(!0,r))}markAsPending(e={}){this.status=Ao;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new So(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Lc,this.errors=null,this._forEachChild(i=>{i.disable(ce(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jh(this.value,r)),this._events.next(new So(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Fc,this._forEachChild(r=>{r.enable(ce(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fc||this.status===Ao)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jh(this.value,n)),this._events.next(new So(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Lc:Fc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ao,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=HR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new So(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Me,this.statusChanges=new Me}_calculateStatus(){return this._allControlsDisabled()?Lc:this.errors?Fh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ao)?Ao:this._anyControlsHaveStatus(Fh)?Fh:Fc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Uc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new jc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){zh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=iz(this._rawAsyncValidators)}},$h=class extends Bh{constructor(e,n,r){super(QR(n),YR(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){oz(this,!0,e),Object.keys(e).forEach(r=>{sz(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var TI=new L("CallSetDisabledState",{providedIn:"root",factory:()=>CI}),CI="always";function az(t,e){return[...e.path,t]}function JR(t,e,n=CI){ZR(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),uz(t,e),dz(t,e),lz(t,e),cz(t,e)}function kR(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function cz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function ZR(t,e){let n=ez(t);e.validator!==null?t.setValidators(xR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=tz(t);e.asyncValidator!==null?t.setAsyncValidators(xR(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();kR(e._rawValidators,i),kR(e._rawAsyncValidators,i)}function uz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&XR(t,e)})}function lz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&XR(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function XR(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function dz(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function hz(t,e){t==null,ZR(t,e)}function fz(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function pz(t){return Object.getPrototypeOf(t.constructor)===qH}function gz(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mz(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Hh?n=s:pz(s)?r=s:i=s}),i||r||n||null}var yz={provide:Ro,useExisting:_i(()=>AI)},Vc=Promise.resolve(),AI=(()=>{let e=class e extends Ro{get submitted(){return Un(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=wa(()=>this.submittedReactive()),this.submittedReactive=ma(!1),this._directives=new Set,this.ngSubmit=new Me,this.form=new $h({},DI(r),bI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Vc.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),JR(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Vc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Vc.then(()=>{let i=this._findContainer(r.path),s=new $h({});hz(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Vc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Vc.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),gz(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(ne(EI,10),ne(BR,10),ne(TI,8))},e.\u0275dir=je({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&ln("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_a([yz]),Vn]});let t=e;return t})();function FR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function LR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var vz=class extends Bh{constructor(e=null,n,r){super(QR(n),YR(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(LR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){FR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){FR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){LR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var _z={provide:Bc,useExisting:_i(()=>SI)},VR=Promise.resolve(),SI=(()=>{let e=class e extends Bc{constructor(r,i,s,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new vz,this._registered=!1,this.name="",this.update=new Me,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=mz(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),fz(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){JR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){VR.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Nr(i);VR.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?az(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(ne(Ro,9),ne(EI,10),ne(BR,10),ne(jR,10),ne(Mr,8),ne(TI,8))},e.\u0275dir=je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_a([_z]),Vn,kn]});let t=e;return t})(),eM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var Iz=(()=>{let e=class e{constructor(){this._validator=NR}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):NR,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,features:[kn]});let t=e;return t})();var wz={provide:EI,useExisting:_i(()=>RI),multi:!0};var RI=(()=>{let e=class e extends Iz{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Nr,this.createValidator=r=>YH}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ps(e)))(s||e)}})(),e.\u0275dir=je({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&ya("required",s._enabled?"":null)},inputs:{required:"required"},features:[_a([wz]),Vn]});let t=e;return t})();var Ez=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=an({});let t=e;return t})();var tM=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:TI,useValue:r.callSetDisabledState??CI}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=cn({type:e}),e.\u0275inj=an({imports:[Ez]});let t=e;return t})();var qh=class t{constructor(e){this.firestore=e;this.messagesCollection=SR(this.firestore,"messages");let n=MR(this.messagesCollection,RR("time","asc"));this.messages=CR(n,{idField:"id"})}messagesCollection;messages;sendMessage(e,n){let i={user:e,message:n,time:new Date};return AR(this.messagesCollection,i).then(()=>{}).catch(s=>{console.error("Error al enviar mensaje: ",s)})}getMessages(){return this.messages.pipe(Q(e=>e.map(n=>{let r=n.time.toDate();return ce(F({},n),{time:r})})))}static \u0275fac=function(n){return new(n||t)(z(Yi))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Tz=(t,e)=>({"bg-primary text-white ms-auto text-end own-msg":t,"bg-success text-white text-start":e});function Cz(t,e){if(t&1){let n=Ug();Dt(0,"button",3),ln("click",function(){da(n);let i=Ei();return ha(i.toggleChat())}),Fs(1,"i",4),Lt()}}function Az(t,e){if(t&1&&(Dt(0,"div")(1,"small",16),va(2),Lt(),Dt(3,"div",17),va(4),Lt()()),t&2){let n=e.$implicit,r=Ei(2);Cr(2),jg("",n.user," - ",n.time.toLocaleString(),""),Cr(),ks("ngClass",IT(4,Tz,n.user===r.currentUser,n.user!==r.currentUser)),Cr(),jl(" ",n.message," ")}}function Sz(t,e){if(t&1){let n=Ug();Dt(0,"div",5)(1,"div",6)(2,"h3",7),va(3,"Chat Mini"),Lt(),Dt(4,"button",8),ln("click",function(){da(n);let i=Ei();return ha(i.toggleChat())}),Fs(5,"i",9),Lt()(),Dt(6,"div",10),Vl(7,Az,5,7,"div",11),Lt(),Dt(8,"form",12),ln("submit",function(){da(n);let i=Ei();return ha(i.sendMessage())}),Dt(9,"div",13)(10,"input",14),$g("ngModelChange",function(i){da(n);let s=Ei();return vT(s.newMessage,i)||(s.newMessage=i),ha(i)}),Lt(),Dt(11,"button",15),va(12,"Enviar"),Lt()()()()}if(t&2){let n=Ei();Cr(7),ks("ngForOf",n.messages),Cr(3),Bg("ngModel",n.newMessage)}}var nM=class t{constructor(e,n){this.chatService=e;this.auth=n;this.currentUser=this.auth.currentUser?.email||"Anonimo"}messages=[];newMessage="";currentUser;messagesSubscription;isOpen=!1;toggleChat(){this.isOpen=!this.isOpen}ngOnInit(){this.messagesSubscription=this.chatService.getMessages().subscribe(e=>{this.messages=e})}ngOnDestroy(){this.messagesSubscription&&this.messagesSubscription.unsubscribe()}sendMessage(){this.newMessage.trim()!==""&&(this.chatService.sendMessage(this.currentUser,this.newMessage),this.newMessage="")}static \u0275fac=function(n){return new(n||t)(ne(qh),ne(Fi))};static \u0275cmp=El({type:t,selectors:[["app-chat"]],standalone:!0,features:[Bl],decls:3,vars:2,consts:[[1,"chat-btn-container"],["class","btn btn-primary rounded-circle p-0 chat-closed-icon",3,"click",4,"ngIf"],["class","bg-white border rounded shadow-lg d-flex flex-column chat-open",4,"ngIf"],[1,"btn","btn-primary","rounded-circle","p-0","chat-closed-icon",3,"click"],[1,"bi","bi-chat-dots-fill"],[1,"bg-white","border","rounded","shadow-lg","d-flex","flex-column","chat-open"],[1,"d-flex","justify-content-between","align-items-center","p-2","border-bottom"],[1,"fw-semibold"],[1,"btn","btn-link",3,"click"],[1,"bi","bi-x"],[1,"flex-grow-1","p-2","overflow-auto"],[4,"ngFor","ngForOf"],[1,"p-2","border-top",3,"submit"],[1,"input-group"],["type","text","placeholder","Escribe un mensaje...","name","message","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"text-muted"],[1,"mb-2","p-2","rounded","message-bubble",3,"ngClass"]],template:function(n,r){n&1&&(Dt(0,"div",0),Vl(1,Cz,2,0,"button",1)(2,Sz,13,2,"div",2),Lt()),n&2&&(Cr(),ks("ngIf",!r.isOpen),Cr(),ks("ngIf",r.isOpen))},dependencies:[tM,eM,Hh,WR,KR,RI,SI,AI,em,$T,HT,zT],styles:[".chat-btn-container[_ngcontent-%COMP%]{position:fixed;right:32px;bottom:10vh}.chat-closed-icon[_ngcontent-%COMP%]{width:48px;height:48px}.chat-open[_ngcontent-%COMP%]{width:320px;max-height:80vh}.message-bubble[_ngcontent-%COMP%]{max-width:80%}.own-msg[_ngcontent-%COMP%]{color:#fff}"]})};export{w as a,cN as b,B as c,an as d,z as e,El as f,cn as g,da as h,ha as i,Y9 as j,CP as k,Cr as l,ne as m,Vl as n,ks as o,hT as p,e6 as q,Dt as r,Lt as s,Fs as t,c1 as u,u1 as v,Ug as w,ln as x,Ei as y,va as z,m1 as A,jl as B,jg as C,Bg as D,vT as E,$g as F,Bl as G,t6 as H,IT as I,n6 as J,$T as K,HT as L,zT as M,em as N,nF as O,wF as P,j6 as Q,h8 as R,_L as S,hn as T,wC as U,M8 as V,N8 as W,x8 as X,Hh as Y,WR as Z,KR as _,AI as $,SI as aa,eM as ba,RI as ca,tM as da,w5 as ea,E5 as fa,Fi as ga,gK as ha,mK as ia,yK as ja,vK as ka,_K as la,Yi as ma,fQ as na,AR as oa,SR as pa,pQ as qa,nM as ra};
