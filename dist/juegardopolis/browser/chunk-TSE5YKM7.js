var lN=Object.defineProperty,dN=Object.defineProperties;var hN=Object.getOwnPropertyDescriptors;var $w=Object.getOwnPropertySymbols,fN=Object.getPrototypeOf,pN=Object.prototype.hasOwnProperty,gN=Object.prototype.propertyIsEnumerable,mN=Reflect.get;var Hw=(t,e,n)=>e in t?lN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})pN.call(e,n)&&Hw(t,n,e[n]);if($w)for(var n of $w(e))gN.call(e,n)&&Hw(t,n,e[n]);return t},ce=(t,e)=>dN(t,hN(e));var pr=(t,e,n)=>mN(fN(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function zw(t,e){return Object.is(t,e)}var je=null,uu=!1,lu=1,Nn=Symbol("SIGNAL");function he(t){let e=je;return je=t,e}function qw(){return je}var ra={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nf(t){if(uu)throw new Error("");if(je===null)return;je.consumerOnSignalRead(t);let e=je.nextProducerIndex++;if(pu(je),e<je.producerNode.length&&je.producerNode[e]!==t&&na(je)){let n=je.producerNode[e];fu(n,je.producerIndexOfThis[e])}je.producerNode[e]!==t&&(je.producerNode[e]=t,je.producerIndexOfThis[e]=na(je)?Qw(t,je,e):0),je.producerLastReadVersion[e]=t.version}function yN(){lu++}function Gw(t){if(!(na(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===lu)){if(!t.producerMustRecompute(t)&&!Pf(t)){t.dirty=!1,t.lastCleanEpoch=lu;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=lu}}function Ww(t){if(t.liveConsumerNode===void 0)return;let e=uu;uu=!0;try{for(let n of t.liveConsumerNode)n.dirty||vN(n)}finally{uu=e}}function Kw(){return je?.consumerAllowSignalWrites!==!1}function vN(t){t.dirty=!0,Ww(t),t.consumerMarkedDirty?.(t)}function hu(t){return t&&(t.nextProducerIndex=0),he(t)}function xf(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(na(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)fu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Pf(t){pu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Gw(n),r!==n.version))return!0}return!1}function Of(t){if(pu(t),na(t))for(let e=0;e<t.producerNode.length;e++)fu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Qw(t,e,n){if(Yw(t),t.liveConsumerNode.length===0&&Jw(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=Qw(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function fu(t,e){if(Yw(t),t.liveConsumerNode.length===1&&Jw(t))for(let r=0;r<t.producerNode.length;r++)fu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];pu(i),i.producerIndexOfThis[r]=e}}function na(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function pu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Yw(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Jw(t){return t.producerNode!==void 0}function Zw(t){let e=Object.create(_N);e.computation=t;let n=()=>{if(Gw(e),Nf(e),e.value===du)throw e.error;return e.value};return n[Nn]=e,n}var Rf=Symbol("UNSET"),Mf=Symbol("COMPUTING"),du=Symbol("ERRORED"),_N=ce(F({},ra),{value:Rf,dirty:!0,error:null,equal:zw,producerMustRecompute(t){return t.value===Rf||t.value===Mf},producerRecomputeValue(t){if(t.value===Mf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Mf;let n=hu(t),r;try{r=t.computation()}catch(i){r=du,t.error=i}finally{xf(t,n)}if(e!==Rf&&e!==du&&r!==du&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function IN(){throw new Error}var Xw=IN;function eE(){Xw()}function tE(t){Xw=t}var wN=null;function nE(t){let e=Object.create(iE);e.value=t;let n=()=>(Nf(e),e.value);return n[Nn]=e,n}function kf(t,e){Kw()||eE(),t.equal(t.value,e)||(t.value=e,EN(t))}function rE(t,e){Kw()||eE(),kf(t,e(t.value))}var iE=ce(F({},ra),{equal:zw,value:void 0});function EN(t){t.version++,yN(),Ww(t),wN?.()}function te(t){return typeof t=="function"}function as(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gu=as(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function li(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ne=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(s){e=s instanceof gu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{sE(s)}catch(o){e=e??[],o instanceof gu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new gu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)sE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&li(n,e)}remove(e){let{_finalizers:n}=this;n&&li(n,e),e instanceof t&&e._removeParent(this)}};Ne.EMPTY=(()=>{let t=new Ne;return t.closed=!0,t})();var Ff=Ne.EMPTY;function mu(t){return t instanceof Ne||t&&"closed"in t&&te(t.remove)&&te(t.add)&&te(t.unsubscribe)}function sE(t){te(t)?t():t.unsubscribe()}var zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var cs={setTimeout(t,e,...n){let{delegate:r}=cs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=cs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function yu(t){cs.setTimeout(()=>{let{onUnhandledError:e}=zt;if(e)e(t);else throw t})}function ia(){}var oE=Lf("C",void 0,void 0);function aE(t){return Lf("E",void 0,t)}function cE(t){return Lf("N",t,void 0)}function Lf(t,e,n){return{kind:t,value:e,error:n}}var di=null;function us(t){if(zt.useDeprecatedSynchronousErrorHandling){let e=!di;if(e&&(di={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=di;if(di=null,n)throw r}}else t()}function uE(t){zt.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=t)}var hi=class extends Ne{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,mu(e)&&e.add(this)):this.destination=TN}static create(e,n,r){return new gr(e,n,r)}next(e){this.isStopped?Uf(cE(e),this):this._next(e)}error(e){this.isStopped?Uf(aE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Uf(oE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},DN=Function.prototype.bind;function Vf(t,e){return DN.call(t,e)}var jf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){vu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){vu(r)}else vu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){vu(n)}}},gr=class extends hi{constructor(e,n,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&zt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Vf(e.next,s),error:e.error&&Vf(e.error,s),complete:e.complete&&Vf(e.complete,s)}):i=e}this.destination=new jf(i)}};function vu(t){zt.useDeprecatedSynchronousErrorHandling?uE(t):yu(t)}function bN(t){throw t}function Uf(t,e){let{onStoppedNotification:n}=zt;n&&cs.setTimeout(()=>n(t,e))}var TN={closed:!0,next:ia,error:bN,complete:ia};var ls=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(t){return t}function _u(...t){return Bf(t)}function Bf(t){return t.length===0?Dt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=AN(n)?n:new gr(n,r,i);return us(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=lE(r),new r((i,s)=>{let o=new gr({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ls](){return this}pipe(...n){return Bf(n)(this)}toPromise(n){return n=lE(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function lE(t){var e;return(e=t??zt.Promise)!==null&&e!==void 0?e:Promise}function CN(t){return t&&te(t.next)&&te(t.error)&&te(t.complete)}function AN(t){return t&&t instanceof hi||CN(t)&&mu(t)}function $f(t){return te(t?.lift)}function fe(t){return e=>{if($f(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Hf(t,e,n,r,i)}var Hf=class extends hi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ds(){return fe((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var hs=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,$f(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ne;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ne.EMPTY)}return e}refCount(){return ds()(this)}};var dE=as(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Iu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new dE}next(n){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){us(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Ff:(this.currentObservers=null,s.push(n),new Ne(()=>{this.currentObservers=null,li(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new Iu(e,n),t})(),Iu=class extends $e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Ff}};var We=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zf={now(){return(zf.delegate||Date).now()},delegate:void 0};var wu=class extends Ne{constructor(e,n){super()}schedule(e,n=0){return this}};var sa={setInterval(t,e,...n){let{delegate:r}=sa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=sa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var fs=class extends wu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return sa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&sa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,li(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ps=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ps.now=zf.now;var gs=class extends ps{constructor(e,n=ps.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var qf=new gs(fs);var Eu=class extends fs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Du=class extends gs{};var Gf=new Du(Eu);var bt=new oe(t=>t.complete());function hE(t){return t&&te(t.schedule)}function fE(t){return t[t.length-1]}function bu(t){return te(fE(t))?t.pop():void 0}function mr(t){return hE(fE(t))?t.pop():void 0}function Wf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gE(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function pE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fi(t){return this instanceof fi?(this.v=t,this):new fi(t)}function mE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(N){return new Promise(function(R,x){s.push([y,N,R,x])>1||u(y,N)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(N){m(s[0][3],N)}}function l(y){y.value instanceof fi?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),s.shift(),s.length&&u(s[0][0],s[0][1])}}function yE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof pE=="function"?pE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Tu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Cu(t){return te(t?.then)}function Au(t){return te(t[ls])}function Su(t){return Symbol.asyncIterator&&te(t?.[Symbol.asyncIterator])}function Ru(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function SN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mu=SN();function Nu(t){return te(t?.[Mu])}function xu(t){return mE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield fi(n.read());if(i)return yield fi(void 0);yield yield fi(r)}}finally{n.releaseLock()}})}function Pu(t){return te(t?.getReader)}function Pe(t){if(t instanceof oe)return t;if(t!=null){if(Au(t))return RN(t);if(Tu(t))return MN(t);if(Cu(t))return NN(t);if(Su(t))return vE(t);if(Nu(t))return xN(t);if(Pu(t))return PN(t)}throw Ru(t)}function RN(t){return new oe(e=>{let n=t[ls]();if(te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MN(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function NN(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,yu)})}function xN(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function vE(t){return new oe(e=>{ON(t,e).catch(n=>e.error(n))})}function PN(t){return vE(xu(t))}function ON(t,e){var n,r,i,s;return gE(this,void 0,void 0,function*(){try{for(n=yE(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function mt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function yr(t,e=0){return fe((n,r)=>{n.subscribe(ue(r,i=>mt(r,t,()=>r.next(i),e),()=>mt(r,t,()=>r.complete(),e),i=>mt(r,t,()=>r.error(i),e)))})}function vr(t,e=0){return fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function _E(t,e){return Pe(t).pipe(vr(e),yr(e))}function IE(t,e){return Pe(t).pipe(vr(e),yr(e))}function wE(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function EE(t,e){return new oe(n=>{let r;return mt(n,e,()=>{r=t[Mu](),mt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Ou(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{mt(n,e,()=>{let r=t[Symbol.asyncIterator]();mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function DE(t,e){return Ou(xu(t),e)}function bE(t,e){if(t!=null){if(Au(t))return _E(t,e);if(Tu(t))return wE(t,e);if(Cu(t))return IE(t,e);if(Su(t))return Ou(t,e);if(Nu(t))return EE(t,e);if(Pu(t))return DE(t,e)}throw Ru(t)}function Ee(t,e){return e?bE(t,e):Pe(t)}function Q(...t){let e=mr(t);return Ee(t,e)}function ms(t,e){let n=te(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function Kf(t){return!!t&&(t instanceof oe||te(t.lift)&&te(t.subscribe))}var qt=as(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function kN(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let s=new gr({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new qt)}});t.subscribe(s)})}function Y(t,e){return fe((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:FN}=Array;function LN(t,e){return FN(e)?t(...e):t(e)}function ku(t){return Y(e=>LN(t,e))}var{isArray:VN}=Array,{getPrototypeOf:UN,prototype:jN,keys:BN}=Object;function Fu(t){if(t.length===1){let e=t[0];if(VN(e))return{args:e,keys:null};if($N(e)){let n=BN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function $N(t){return t&&typeof t=="object"&&UN(t)===jN}function Lu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function oa(...t){let e=mr(t),n=bu(t),{args:r,keys:i}=Fu(t);if(r.length===0)return Ee([],e);let s=new oe(HN(r,e,i?o=>Lu(i,o):Dt));return n?s.pipe(ku(n)):s}function HN(t,e,n=Dt){return r=>{TE(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)TE(e,()=>{let l=Ee(t[u],e),h=!1;l.subscribe(ue(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function TE(t,e,n){t?mt(n,t,e):e()}function CE(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?C(N):u.push(N),C=N=>{s&&e.next(N),l++;let R=!1;Pe(n(N,h++)).subscribe(ue(e,x=>{i?.(x),s?y(x):e.next(x)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let x=u.shift();o?mt(e,o,()=>C(x)):C(x)}m()}catch(x){e.error(x)}}))};return t.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{a?.()}}function Oe(t,e,n=1/0){return te(e)?Oe((r,i)=>Y((s,o)=>e(r,s,i,o))(Pe(t(r,i))),n):(typeof e=="number"&&(n=e),fe((r,i)=>CE(r,i,t,n)))}function _r(t=1/0){return Oe(Dt,t)}function AE(){return _r(1)}function ys(...t){return AE()(Ee(t,mr(t)))}function Vu(t){return new oe(e=>{Pe(t()).subscribe(e)})}function Qf(...t){let e=bu(t),{args:n,keys:r}=Fu(t),i=new oe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Pe(n[h]).subscribe(ue(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Lu(r,a):a),s.complete())}))}});return e?i.pipe(ku(e)):i}function dt(t,e){return fe((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Ir(t){return fe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=Pe(t(o,Ir(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function SE(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ue(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function xn(t,e){return te(e)?Oe(t,e,1):Oe(t,1)}function wr(t){return fe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Pn(t){return t<=0?()=>bt:fe((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Yf(t){return Y(()=>t)}function Uu(t=zN){return fe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function zN(){return new qt}function Er(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function an(t,e){let n=arguments.length>=2;return r=>r.pipe(t?dt((i,s)=>t(i,s,r)):Dt,Pn(1),n?wr(e):Uu(()=>new qt))}function vs(t){return t<=0?()=>bt:fe((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Jf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?dt((i,s)=>t(i,s,r)):Dt,vs(1),n?wr(e):Uu(()=>new qt))}function ju(t,e){return fe(SE(t,e,arguments.length>=2,!0))}function Bu(...t){let e=mr(t);return fe((n,r)=>{(e?ys(t,n,e):ys(t,n)).subscribe(r)})}function yt(t,e){return fe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=s++;Pe(t(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Zf(t){return fe((e,n)=>{Pe(t).subscribe(ue(n,()=>n.complete(),ia)),!n.closed&&e.subscribe(n)})}function ke(t,e,n){let r=te(t)||e||n?{next:t,error:e,complete:n}:t;return r?fe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var fD="https://g.co/ng/security#xss",H=class extends Error{constructor(e,n){super(Dl(e,n)),this.code=e}};function Dl(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ga(t){return{toString:t}.toString()}var $u="__parameters__";function qN(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function pD(t,e,n){return ga(()=>{let r=qN(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty($u)?u[$u]:Object.defineProperty(u,$u,{value:[]})[$u];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var hp=globalThis;function De(t){for(let e in t)if(t[e]===De)return e;throw Error("Could not find renamed property on target object.")}function GN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function RE(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var WN=De({__forward_ref__:De});function kt(t){return t.__forward_ref__=kt,t.toString=function(){return ft(this())},t}function ht(t){return gD(t)?t():t}function gD(t){return typeof t=="function"&&t.hasOwnProperty(WN)&&t.__forward_ref__===kt}function U(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qt(t){return{providers:t.providers||[],imports:t.imports||[]}}function bl(t){return ME(t,yD)||ME(t,vD)}function mD(t){return bl(t)!==null}function ME(t,e){return t.hasOwnProperty(e)?t[e]:null}function KN(t){let e=t&&(t[yD]||t[vD]);return e||null}function NE(t){return t&&(t.hasOwnProperty(xE)||t.hasOwnProperty(QN))?t[xE]:null}var yD=De({\u0275prov:De}),xE=De({\u0275inj:De}),vD=De({ngInjectableDef:De}),QN=De({ngInjectorDef:De}),L=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=U({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _D(t){return t&&!!t.\u0275providers}var YN=De({\u0275cmp:De}),JN=De({\u0275dir:De}),ZN=De({\u0275pipe:De}),XN=De({\u0275mod:De}),Xu=De({\u0275fac:De}),ca=De({__NG_ELEMENT_ID__:De}),PE=De({__NG_ENV_ID__:De});function Ts(t){return typeof t=="string"?t:t==null?"":String(t)}function ex(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Ts(t)}function tx(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new H(-200,t)}function ug(t,e){throw new H(-201,!1)}var ae=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ae||{}),fp;function ID(){return fp}function Nt(t){let e=fp;return fp=t,e}function wD(t,e,n){let r=bl(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ae.Optional)return null;if(e!==void 0)return e;ug(t,"Injector")}var nx={},ua=nx,pp="__NG_DI_FLAG__",el="ngTempTokenPath",rx="ngTokenPath",ix=/\n/gm,sx="\u0275",OE="__source",Ds;function ox(){return Ds}function Dr(t){let e=Ds;return Ds=t,e}function ax(t,e=ae.Default){if(Ds===void 0)throw new H(-203,!1);return Ds===null?wD(t,void 0,e):Ds.get(t,e&ae.Optional?null:void 0,e)}function $(t,e=ae.Default){return(ID()||ax)(ht(t),e)}function P(t,e=ae.Default){return $(t,Tl(e))}function Tl(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function gp(t){let e=[];for(let n=0;n<t.length;n++){let r=ht(t[n]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,s=ae.Default;for(let o=0;o<r.length;o++){let a=r[o],u=cx(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push($(i,s))}else e.push($(r))}return e}function ED(t,e){return t[pp]=e,t.prototype[pp]=e,t}function cx(t){return t[pp]}function ux(t,e,n,r){let i=t[el];throw e[OE]&&i.unshift(e[OE]),t.message=lx(`
`+t.message,i,n,r),t[rx]=i,t[el]=null,t}function lx(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==sx?t.slice(2):t;let i=ft(e);if(Array.isArray(e))i=e.map(ft).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):ft(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ix,`
  `)}`}var st=ED(pD("Optional"),8);var lg=ED(pD("SkipSelf"),4);function Cs(t,e){let n=t.hasOwnProperty(Xu);return n?t[Xu]:null}function dx(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function hx(t){return t.flat(Number.POSITIVE_INFINITY)}function dg(t,e){t.forEach(n=>Array.isArray(n)?dg(n,e):e(n))}function DD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function tl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fx(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function px(t,e,n){let r=ma(t,e);return r>=0?t[r|1]=n:(r=~r,fx(t,r,e,n)),r}function Xf(t,e){let n=ma(t,e);if(n>=0)return t[n|1]}function ma(t,e){return gx(t,e,1)}function gx(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var As={},xt=[],Ss=new L(""),bD=new L("",-1),TD=new L(""),nl=class{get(e,n=ua){if(n===ua){let r=new Error(`NullInjectorError: No provider for ${ft(e)}!`);throw r.name="NullInjectorError",r}return n}},CD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(CD||{}),ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ln||{}),Cr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Cr||{});function mx(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function mp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];yx(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function AD(t){return t===3||t===4||t===6}function yx(t){return t.charCodeAt(0)===64}function la(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?kE(t,n,i,null,e[++r]):kE(t,n,i,null,null))}}return t}function kE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var SD="ng-template";function vx(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&mx(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(hg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function hg(t){return t.type===4&&t.value!==SD}function _x(t,e,n){let r=t.type===4&&!n?SD:t.value;return e===r}function Ix(t,e,n){let r=4,i=t.attrs,s=i!==null?Dx(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Gt(r)&&!Gt(u))return!1;if(o&&Gt(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!_x(t,u,n)||u===""&&e.length===1){if(Gt(r))return!1;o=!0}}else if(r&8){if(i===null||!vx(t,i,u,n)){if(Gt(r))return!1;o=!0}}else{let l=e[++a],h=wx(u,i,hg(t),n);if(h===-1){if(Gt(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Gt(r))return!1;o=!0}}}}return Gt(r)||o}function Gt(t){return(t&1)===0}function wx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return bx(e,t)}function Ex(t,e,n=!1){for(let r=0;r<e.length;r++)if(Ix(t,e[r],n))return!0;return!1}function Dx(t){for(let e=0;e<t.length;e++){let n=t[e];if(AD(n))return e}return t.length}function bx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function FE(t,e){return t?":not("+e.trim()+")":e}function Tx(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Gt(o)&&(e+=FE(s,i),i=""),r=o,s=s||!Gt(r);n++}return i!==""&&(e+=FE(s,i)),e}function Cx(t){return t.map(Tx).join(",")}function Ax(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Gt(i))break;i=s}r++}return{attrs:e,classes:n}}function Cl(t){return ga(()=>{let e=PD(t),n=ce(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===CD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ln.Emulated,styles:t.styles||xt,_:null,schemas:t.schemas||null,tView:null,id:""});OD(n);let r=t.dependencies;return n.directiveDefs=VE(r,!1),n.pipeDefs=VE(r,!0),n.id=Mx(n),n})}function Sx(t){return Ar(t)||RD(t)}function Rx(t){return t!==null}function Yt(t){return ga(()=>({type:t.type,bootstrap:t.bootstrap||xt,declarations:t.declarations||xt,imports:t.imports||xt,exports:t.exports||xt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function LE(t,e){if(t==null)return As;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Cr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Cr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Te(t){return ga(()=>{let e=PD(t);return OD(e),e})}function Ar(t){return t[YN]||null}function RD(t){return t[JN]||null}function MD(t){return t[ZN]||null}function ND(t){let e=Ar(t)||RD(t)||MD(t);return e!==null?e.standalone:!1}function xD(t,e){let n=t[XN]||null;if(!n&&e===!0)throw new Error(`Type ${ft(t)} does not have '\u0275mod' property.`);return n}function PD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||As,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||xt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:LE(t.inputs,e),outputs:LE(t.outputs),debugInfo:null}}function OD(t){t.features?.forEach(e=>e(t))}function VE(t,e){if(!t)return null;let n=e?MD:Sx;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Rx)}function Mx(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ft(t){return{\u0275providers:t}}function Nx(...t){return{\u0275providers:kD(!0,t),\u0275fromNgModule:!0}}function kD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return dg(e,o=>{let a=o;yp(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&FD(i,s),n}function FD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];fg(i,s=>{e(s,r)})}}function yp(t,e,n,r){if(t=ht(t),!t)return!1;let i=null,s=NE(t),o=!s&&Ar(t);if(!s&&!o){let u=t.ngModule;if(s=NE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)yp(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{dg(s.imports,h=>{yp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&FD(l,e)}if(!a){let l=Cs(i)||(()=>new i);e({provide:i,useFactory:l,deps:xt},i),e({provide:TD,useValue:i,multi:!0},i),e({provide:Ss,useValue:()=>$(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;fg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function fg(t,e){for(let n of t)_D(n)&&(n=n.\u0275providers),Array.isArray(n)?fg(n,e):e(n)}var xx=De({provide:String,useValue:De});function LD(t){return t!==null&&typeof t=="object"&&xx in t}function Px(t){return!!(t&&t.useExisting)}function Ox(t){return!!(t&&t.useFactory)}function Rs(t){return typeof t=="function"}function kx(t){return!!t.useClass}var Al=new L(""),Wu={},Fx={},ep;function pg(){return ep===void 0&&(ep=new nl),ep}var pt=class{},da=class extends pt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_p(e,o=>this.processProvider(o)),this.records.set(bD,_s(void 0,this)),i.has("environment")&&this.records.set(pt,_s(void 0,this));let s=this.records.get(Al);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(TD,xt,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Dr(this),r=Nt(void 0),i;try{return e()}finally{Dr(n),Nt(r)}}get(e,n=ua,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(PE))return e[PE](this);r=Tl(r);let i,s=Dr(this),o=Nt(void 0);try{if(!(r&ae.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Bx(e)&&bl(e);l&&this.injectableDefInScope(l)?u=_s(vp(e),Wu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ae.Self?pg():this.parent;return n=r&ae.Optional&&n===ua?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[el]=a[el]||[]).unshift(ft(e)),s)throw a;return ux(a,e,"R3InjectorError",this.source)}else throw a}finally{Nt(o),Dr(s)}}resolveInjectorInitializers(){let e=he(null),n=Dr(this),r=Nt(void 0),i;try{let s=this.get(Ss,xt,ae.Self);for(let o of s)o()}finally{Dr(n),Nt(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ft(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){e=ht(e);let n=Rs(e)?e:ht(e&&e.provide),r=Vx(e);if(!Rs(e)&&e.multi===!0){let i=this.records.get(n);i||(i=_s(void 0,Wu,!0),i.factory=()=>gp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===Wu&&(n.value=Fx,n.value=n.factory()),typeof n.value=="object"&&n.value&&jx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ht(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function vp(t){let e=bl(t),n=e!==null?e.factory:Cs(t);if(n!==null)return n;if(t instanceof L)throw new H(204,!1);if(t instanceof Function)return Lx(t);throw new H(204,!1)}function Lx(t){if(t.length>0)throw new H(204,!1);let n=KN(t);return n!==null?()=>n.factory(t):()=>new t}function Vx(t){if(LD(t))return _s(void 0,t.useValue);{let e=VD(t);return _s(e,Wu)}}function VD(t,e,n){let r;if(Rs(t)){let i=ht(t);return Cs(i)||vp(i)}else if(LD(t))r=()=>ht(t.useValue);else if(Ox(t))r=()=>t.useFactory(...gp(t.deps||[]));else if(Px(t))r=()=>$(ht(t.useExisting));else{let i=ht(t&&(t.useClass||t.provide));if(Ux(t))r=()=>new i(...gp(t.deps));else return Cs(i)||vp(i)}return r}function _s(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ux(t){return!!t.deps}function jx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Bx(t){return typeof t=="function"||typeof t=="object"&&t instanceof L}function _p(t,e){for(let n of t)Array.isArray(n)?_p(n,e):n&&_D(n)?_p(n.\u0275providers,e):e(n)}function Lt(t,e){t instanceof da&&t.assertNotDestroyed();let n,r=Dr(t),i=Nt(void 0);try{return e()}finally{Dr(r),Nt(i)}}function UD(){return ID()!==void 0||ox()!=null}function $x(t){if(!UD())throw new H(-203,!1)}function Hx(t){return typeof t=="function"}var Un=0,ne=1,X=2,it=3,Wt=4,Jt=5,rl=6,il=7,Ot=8,Ms=9,dn=10,Fe=11,ha=12,UE=13,Vs=14,hn=15,yi=16,Is=17,On=18,Sl=19,jD=20,br=21,tp=22,Pt=23,Kt=25,BD=1;var vi=7,sl=8,Ns=9,vt=10,ol=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ol||{});function Tr(t){return Array.isArray(t)&&typeof t[BD]=="object"}function jn(t){return Array.isArray(t)&&t[BD]===!0}function gg(t){return(t.flags&4)!==0}function Rl(t){return t.componentOffset>-1}function Ml(t){return(t.flags&1)===1}function Sr(t){return!!t.template}function Ip(t){return(t[X]&512)!==0}var wp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function $D(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Zt(){return HD}function HD(t){return t.type.prototype.ngOnChanges&&(t.setInput=qx),zx}Zt.ngInherit=!0;function zx(){let t=qD(this),e=t?.current;if(e){let n=t.previous;if(n===As)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function qx(t,e,n,r,i){let s=this.declaredInputs[r],o=qD(t)||Gx(t,{previous:As,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new wp(l&&l.currentValue,n,u===As),$D(t,e,i,n)}var zD="__ngSimpleChanges__";function qD(t){return t[zD]||null}function Gx(t,e){return t[zD]=e}var jE=null;var cn=function(t,e,n){jE?.(t,e,n)},GD="svg",Wx="math";function fn(t){for(;Array.isArray(t);)t=t[Un];return t}function WD(t,e){return fn(e[t])}function Vt(t,e){return fn(e[t.index])}function mg(t,e){return t.data[e]}function Nr(t,e){let n=e[t];return Tr(n)?n:n[Un]}function Kx(t){return(t[X]&4)===4}function yg(t){return(t[X]&128)===128}function Qx(t){return jn(t[it])}function xs(t,e){return e==null?null:t[e]}function KD(t){t[Is]=0}function QD(t){t[X]&1024||(t[X]|=1024,yg(t)&&xl(t))}function Yx(t,e){for(;t>0;)e=e[Vs],t--;return e}function Nl(t){return!!(t[X]&9216||t[Pt]?.dirty)}function Ep(t){t[dn].changeDetectionScheduler?.notify(8),t[X]&64&&(t[X]|=1024),Nl(t)&&xl(t)}function xl(t){t[dn].changeDetectionScheduler?.notify(0);let e=_i(t);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!yg(e)));)e=_i(e)}function YD(t,e){if((t[X]&256)===256)throw new H(911,!1);t[br]===null&&(t[br]=[]),t[br].push(e)}function Jx(t,e){if(t[br]===null)return;let n=t[br].indexOf(e);n!==-1&&t[br].splice(n,1)}function _i(t){let e=t[it];return jn(e)?e[it]:e}var se={lFrame:ab(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var JD=!1;function Zx(){return se.lFrame.elementDepthCount}function Xx(){se.lFrame.elementDepthCount++}function eP(){se.lFrame.elementDepthCount--}function ZD(){return se.bindingsEnabled}function tP(){return se.skipHydrationRootTNode!==null}function nP(t){return se.skipHydrationRootTNode===t}function rP(){se.skipHydrationRootTNode=null}function ge(){return se.lFrame.lView}function Qe(){return se.lFrame.tView}function ya(t){return se.lFrame.contextLView=t,t[Ot]}function va(t){return se.lFrame.contextLView=null,t}function Ye(){let t=XD();for(;t!==null&&t.type===64;)t=t.parent;return t}function XD(){return se.lFrame.currentTNode}function iP(){let t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ci(t,e){let n=se.lFrame;n.currentTNode=t,n.isParent=e}function vg(){return se.lFrame.isParent}function eb(){se.lFrame.isParent=!1}function tb(){return JD}function BE(t){JD=t}function nb(){let t=se.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function sP(){return se.lFrame.bindingIndex}function oP(t){return se.lFrame.bindingIndex=t}function _a(){return se.lFrame.bindingIndex++}function rb(t){let e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function aP(){return se.lFrame.inI18n}function cP(t,e){let n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,Dp(e)}function uP(){return se.lFrame.currentDirectiveIndex}function Dp(t){se.lFrame.currentDirectiveIndex=t}function lP(t){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ib(){return se.lFrame.currentQueryIndex}function _g(t){se.lFrame.currentQueryIndex=t}function dP(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[Jt]:null}function sb(t,e,n){if(n&ae.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ae.Host);)if(i=dP(s),i===null||(s=s[Vs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=se.lFrame=ob();return r.currentTNode=e,r.lView=t,!0}function Ig(t){let e=ob(),n=t[ne];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ob(){let t=se.lFrame,e=t===null?null:t.child;return e===null?ab(t):e}function ab(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function cb(){let t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ub=cb;function wg(){let t=cb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function hP(t){return(se.lFrame.contextLView=Yx(t,se.lFrame.contextLView))[Ot]}function Ai(){return se.lFrame.selectedIndex}function Ii(t){se.lFrame.selectedIndex=t}function Eg(){let t=se.lFrame;return mg(t.tView,t.selectedIndex)}function R6(){se.lFrame.currentNamespace=GD}function fP(){return se.lFrame.currentNamespace}var lb=!0;function Pl(){return lb}function Ol(t){lb=t}function pP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=HD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function kl(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Ku(t,e,n){db(t,e,3,n)}function Qu(t,e,n,r){(t[X]&3)===n&&db(t,e,n,r)}function np(t,e){let n=t[X];(n&3)===e&&(n&=16383,n+=1,t[X]=n)}function db(t,e,n,r){let i=r!==void 0?t[Is]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Is]+=65536),(a<s||s==-1)&&(gP(t,n,e,u),t[Is]=(t[Is]&4294901760)+u+2),u++}function $E(t,e){cn(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),cn(5,t,e)}}function gP(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[X]>>14<t[Is]>>16&&(t[X]&3)===e&&(t[X]+=16384,$E(a,s)):$E(a,s)}var bs=-1,wi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function mP(t){return t instanceof wi}function yP(t){return(t.flags&8)!==0}function vP(t){return(t.flags&16)!==0}var rp={},bp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Tl(r);let i=this.injector.get(e,rp,r);return i!==rp||n===rp?i:this.parentInjector.get(e,n,r)}};function hb(t){return t!==bs}function al(t){return t&32767}function _P(t){return t>>16}function cl(t,e){let n=_P(t),r=e;for(;n>0;)r=r[Vs],n--;return r}var Tp=!0;function HE(t){let e=Tp;return Tp=t,e}var IP=256,fb=IP-1,pb=5,wP=0,un={};function EP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ca)&&(r=n[ca]),r==null&&(r=n[ca]=wP++);let i=r&fb,s=1<<i;e.data[t+(i>>pb)]|=s}function ul(t,e){let n=gb(t,e);if(n!==-1)return n;let r=e[ne];r.firstCreatePass&&(t.injectorIndex=e.length,ip(r.data,t),ip(e,null),ip(r.blueprint,null));let i=Dg(t,e),s=t.injectorIndex;if(hb(i)){let o=al(i),a=cl(i,e),u=a[ne].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function ip(t,e){t.push(0,0,0,0,0,0,0,0,e)}function gb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Dg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Ib(i),r===null)return bs;if(n++,i=i[Vs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return bs}function Cp(t,e,n){EP(t,e,n)}function DP(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(AD(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function mb(t,e,n){if(n&ae.Optional||t!==void 0)return t;ug(e,"NodeInjector")}function yb(t,e,n,r){if(n&ae.Optional&&r===void 0&&(r=null),!(n&(ae.Self|ae.Host))){let i=t[Ms],s=Nt(void 0);try{return i?i.get(e,r,n&ae.Optional):wD(e,r,n&ae.Optional)}finally{Nt(s)}}return mb(r,e,n)}function vb(t,e,n,r=ae.Default,i){if(t!==null){if(e[X]&2048&&!(r&ae.Self)){let o=AP(t,e,n,r,un);if(o!==un)return o}let s=_b(t,e,n,r,un);if(s!==un)return s}return yb(e,n,r,i)}function _b(t,e,n,r,i){let s=TP(n);if(typeof s=="function"){if(!sb(e,t,r))return r&ae.Host?mb(i,n,r):yb(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ae.Optional))ug(n);else return o}finally{ub()}}else if(typeof s=="number"){let o=null,a=gb(t,e),u=bs,l=r&ae.Host?e[hn][Jt]:null;for((a===-1||r&ae.SkipSelf)&&(u=a===-1?Dg(t,e):e[a+8],u===bs||!qE(r,!1)?a=-1:(o=e[ne],a=al(u),e=cl(u,e)));a!==-1;){let h=e[ne];if(zE(s,a,h.data)){let p=bP(a,e,n,o,r,l);if(p!==un)return p}u=e[a+8],u!==bs&&qE(r,e[ne].data[a+8]===l)&&zE(s,a,e)?(o=h,a=al(u),e=cl(u,e)):a=-1}}return i}function bP(t,e,n,r,i,s){let o=e[ne],a=o.data[t+8],u=r==null?Rl(a)&&Tp:r!=o&&(a.type&3)!==0,l=i&ae.Host&&s===a,h=Yu(a,o,n,u,l);return h!==null?Ei(e,o,h,a):un}function Yu(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=o[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=o[u];if(y&&Sr(y)&&y.type===n)return u}return null}function Ei(t,e,n,r){let i=t[n],s=e.data;if(mP(i)){let o=i;o.resolving&&tx(ex(s[n]));let a=HE(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Nt(o.injectImpl):null,h=sb(t,r,ae.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&pP(n,s[n],e)}finally{l!==null&&Nt(l),HE(a),o.resolving=!1,ub()}}return i}function TP(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ca)?t[ca]:void 0;return typeof e=="number"?e>=0?e&fb:CP:e}function zE(t,e,n){let r=1<<t;return!!(n[e+(t>>pb)]&r)}function qE(t,e){return!(t&ae.Self)&&!(t&ae.Host&&e)}var mi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return vb(this._tNode,this._lView,e,Tl(r),n)}};function CP(){return new mi(Ye(),ge())}function Bn(t){return ga(()=>{let e=t.prototype.constructor,n=e[Xu]||Ap(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Xu]||Ap(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ap(t){return gD(t)?()=>{let e=Ap(ht(t));return e&&e()}:Cs(t)}function AP(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[X]&2048&&!(o[X]&512);){let a=_b(s,o,n,r|ae.Self,un);if(a!==un)return a;let u=s.parent;if(!u){let l=o[jD];if(l){let h=l.get(n,un,r);if(h!==un)return h}u=Ib(o),o=o[Vs]}s=u}return i}function Ib(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[Jt]:null}function bg(t){return DP(Ye(),t)}function GE(t,e=null,n=null,r){let i=wb(t,e,n,r);return i.resolveInjectorInitializers(),i}function wb(t,e=null,n=null,r,i=new Set){let s=[n||xt,Nx(t)];return r=r||(typeof t=="object"?void 0:ft(t)),new da(s,e||pg(),r||null,i)}var pi=class pi{static create(e,n){if(Array.isArray(e))return GE({name:""},n,e,"");{let r=e.name??"";return GE({name:r},e.parent,e.providers,r)}}};pi.THROW_IF_NOT_FOUND=ua,pi.NULL=new nl,pi.\u0275prov=U({token:pi,providedIn:"any",factory:()=>$(bD)}),pi.__NG_ELEMENT_ID__=-1;var Ke=pi;var SP=new L("");SP.__NG_ELEMENT_ID__=t=>{let e=Ye();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&ae.Optional)return null;throw new H(204,!1)};var RP="ngOriginalError";function sp(t){return t[RP]}var Eb=!0,Tg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=MP,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Sp=class extends Tg{constructor(e){super(),this._lView=e}onDestroy(e){return YD(this._lView,e),()=>Jx(this._lView,e)}};function MP(){return new Sp(ge())}var $n=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Rp=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,UD()&&(this.destroyRef=P(Tg,{optional:!0})??void 0,this.pendingTasks=P($n,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ne&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ae=Rp;function ll(...t){}function Db(t){let e,n;function r(){t=ll;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function WE(t){return queueMicrotask(()=>t()),()=>{t=ll}}var Cg="isAngularZone",dl=Cg+"_ID",NP=0,ye=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ae(!1),this.onMicrotaskEmpty=new Ae(!1),this.onStable=new Ae(!1),this.onError=new Ae(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Eb}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,OP(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Cg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,xP,ll,ll);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},xP={};function Ag(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function PP(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Db(()=>{t.callbackScheduled=!1,Mp(t),t.isCheckStableRunning=!0,Ag(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Mp(t)}function OP(t){let e=()=>{PP(t)},n=NP++;t._inner=t._inner.fork({name:"angular",properties:{[Cg]:!0,[dl]:n,[dl+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(kP(u))return r.invokeTask(s,o,a,u);try{return KE(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),QE(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return KE(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!FP(u)&&e(),QE(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Mp(t),Ag(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Mp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function KE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function QE(t){t._nesting--,Ag(t)}var Np=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ae,this.onMicrotaskEmpty=new Ae,this.onStable=new Ae,this.onError=new Ae}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function kP(t){return bb(t,"__ignore_ng_zone__")}function FP(t){return bb(t,"__scheduler_tick__")}function bb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var kn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&sp(e);for(;n&&sp(n);)n=sp(n);return n||null}},LP=new L("",{providedIn:"root",factory:()=>{let t=P(ye),e=P(kn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function VP(){return Us(Ye(),ge())}function Us(t,e){return new gt(Vt(t,e))}var gt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=VP;let t=e;return t})();function UP(t){return t instanceof gt?t.nativeElement:t}function jP(){return this._results[Symbol.iterator]()}var xp=class t{get changes(){return this._changes??=new Ae}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=jP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=hx(e);(this._changesDetected=!dx(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Tb(t){return(t.flags&128)===128}var Cb=new Map,BP=0;function $P(){return BP++}function HP(t){Cb.set(t[Sl],t)}function Pp(t){Cb.delete(t[Sl])}var YE="__ngContext__";function Rr(t,e){Tr(e)?(t[YE]=e[Sl],HP(e)):t[YE]=e}function Ab(t){return Rb(t[ha])}function Sb(t){return Rb(t[Wt])}function Rb(t){for(;t!==null&&!jn(t);)t=t[Wt];return t}var Op;function Mb(t){Op=t}function zP(){if(Op!==void 0)return Op;if(typeof document<"u")return document;throw new H(210,!1)}var Sg=new L("",{providedIn:"root",factory:()=>qP}),qP="ng",Rg=new L(""),Ut=new L("",{providedIn:"platform",factory:()=>"unknown"});var Mg=new L("",{providedIn:"root",factory:()=>zP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var GP="h",WP="b";var KP=()=>null;function Ng(t,e,n=!1){return KP(t,e,n)}var Nb=!1,QP=new L("",{providedIn:"root",factory:()=>Nb});var Hu;function YP(){if(Hu===void 0&&(Hu=null,hp.trustedTypes))try{Hu=hp.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Hu}function JE(t){return YP()?.createScriptURL(t)||t}var hl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fD})`}};function Ia(t){return t instanceof hl?t.changingThisBreaksApplicationSecurity:t}function xg(t,e){let n=JP(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${fD})`)}return n===e}function JP(t){return t instanceof hl&&t.getTypeName()||null}var ZP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xb(t){return t=String(t),t.match(ZP)?t:"unsafe:"+t}var Fl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Fl||{});function XP(t){let e=Ob();return e?e.sanitize(Fl.URL,t)||"":xg(t,"URL")?Ia(t):xb(Ts(t))}function eO(t){let e=Ob();if(e)return JE(e.sanitize(Fl.RESOURCE_URL,t)||"");if(xg(t,"ResourceURL"))return JE(Ia(t));throw new H(904,!1)}function tO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?eO:XP}function Pb(t,e,n){return tO(e,n)(t)}function Ob(){let t=ge();return t&&t[dn].sanitizer}var nO=/^>|^->|<!--|-->|--!>|<!-$/g,rO=/(<|>)/g,iO="\u200B$1\u200B";function sO(t){return t.replace(nO,e=>e.replace(rO,iO))}function kb(t){return t instanceof Function?t():t}function oO(t){return(t??P(Ke)).get(Ut)==="browser"}var Fn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Fn||{}),aO;function Pg(t,e){return aO(t,e)}function ws(t,e,n,r,i){if(r!=null){let s,o=!1;jn(r)?s=r:Tr(r)&&(o=!0,r=r[Un]);let a=fn(r);t===0&&n!==null?i==null?Ub(e,n,a):pl(e,n,a,i||null,!0):t===1&&n!==null?pl(e,n,a,i||null,!0):t===2?DO(e,a,o):t===3&&e.destroyNode(a),s!=null&&TO(e,t,s,n,i)}}function cO(t,e){return t.createText(e)}function uO(t,e,n){t.setValue(e,n)}function lO(t,e){return t.createComment(sO(e))}function Fb(t,e,n){return t.createElement(e,n)}function dO(t,e){Lb(t,e),e[Un]=null,e[Jt]=null}function hO(t,e,n,r,i,s){r[Un]=i,r[Jt]=e,Vl(t,r,n,1,i,s)}function Lb(t,e){e[dn].changeDetectionScheduler?.notify(9),Vl(t,e,e[Fe],2,null,null)}function fO(t){let e=t[ha];if(!e)return op(t[ne],t);for(;e;){let n=null;if(Tr(e))n=e[ha];else{let r=e[vt];r&&(n=r)}if(!n){for(;e&&!e[Wt]&&e!==t;)Tr(e)&&op(e[ne],e),e=e[it];e===null&&(e=t),Tr(e)&&op(e[ne],e),n=e&&e[Wt]}e=n}}function pO(t,e,n,r){let i=vt+r,s=n.length;r>0&&(n[i-1][Wt]=e),r<s-vt?(e[Wt]=n[i],DD(n,vt+r,e)):(n.push(e),e[Wt]=null),e[it]=n;let o=e[yi];o!==null&&n!==o&&Vb(o,e);let a=e[On];a!==null&&a.insertView(t),Ep(e),e[X]|=128}function Vb(t,e){let n=t[Ns],r=e[it];if(Tr(r))t[X]|=ol.HasTransplantedViews;else{let i=r[it][hn];e[hn]!==i&&(t[X]|=ol.HasTransplantedViews)}n===null?t[Ns]=[e]:n.push(e)}function Og(t,e){let n=t[Ns],r=n.indexOf(e);n.splice(r,1)}function fl(t,e){if(t.length<=vt)return;let n=vt+e,r=t[n];if(r){let i=r[yi];i!==null&&i!==t&&Og(i,r),e>0&&(t[n-1][Wt]=r[Wt]);let s=tl(t,vt+e);dO(r[ne],r);let o=s[On];o!==null&&o.detachView(s[ne]),r[it]=null,r[Wt]=null,r[X]&=-129}return r}function kg(t,e){if(!(e[X]&256)){let n=e[Fe];n.destroyNode&&Vl(t,e,n,3,null,null),fO(e)}}function op(t,e){if(e[X]&256)return;let n=he(null);try{e[X]&=-129,e[X]|=256,e[Pt]&&Of(e[Pt]),mO(t,e),gO(t,e),e[ne].type===1&&e[Fe].destroy();let r=e[yi];if(r!==null&&jn(e[it])){r!==e[it]&&Og(r,e);let i=e[On];i!==null&&i.detachView(t)}Pp(e)}finally{he(n)}}function gO(t,e){let n=t.cleanup,r=e[il];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[il]=null);let i=e[br];if(i!==null){e[br]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function mO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof wi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];cn(4,a,u);try{u.call(a)}finally{cn(5,a,u)}}else{cn(4,i,s);try{s.call(i)}finally{cn(5,i,s)}}}}}function yO(t,e,n){return vO(t,e.parent,n)}function vO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Un];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===ln.None||s===ln.Emulated)return null}return Vt(r,n)}}function pl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Ub(t,e,n){t.appendChild(e,n)}function ZE(t,e,n,r,i){r!==null?pl(t,e,n,r,i):Ub(t,e,n)}function jb(t,e){return t.parentNode(e)}function _O(t,e){return t.nextSibling(e)}function IO(t,e,n){return EO(t,e,n)}function wO(t,e,n){return t.type&40?Vt(t,n):null}var EO=wO,XE;function Ll(t,e,n,r){let i=yO(t,r,e),s=e[Fe],o=r.parent||e[Jt],a=IO(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)ZE(s,i,n[u],a,!1);else ZE(s,i,n,a,!1);XE!==void 0&&XE(s,r,e,n,i)}function aa(t,e){if(e!==null){let n=e.type;if(n&3)return Vt(e,t);if(n&4)return kp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return aa(t,r);{let i=t[e.index];return jn(i)?kp(-1,i):fn(i)}}else{if(n&128)return aa(t,e.next);if(n&32)return Pg(e,t)()||fn(t[e.index]);{let r=Bb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=_i(t[hn]);return aa(i,r)}else return aa(t,e.next)}}}return null}function Bb(t,e){if(e!==null){let r=t[hn][Jt],i=e.projection;return r.projection[i]}return null}function kp(t,e){let n=vt+t+1;if(n<e.length){let r=e[n],i=r[ne].firstChild;if(i!==null)return aa(r,i)}return e[vi]}function DO(t,e,n){t.removeChild(null,e,n)}function Fg(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Rr(fn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Fg(t,e,n.child,r,i,s,!1),ws(e,t,i,a,s);else if(u&32){let l=Pg(n,r),h;for(;h=l();)ws(e,t,i,h,s);ws(e,t,i,a,s)}else u&16?bO(t,e,r,n,i,s):ws(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Vl(t,e,n,r,i,s){Fg(n,r,t.firstChild,e,i,s,!1)}function bO(t,e,n,r,i,s){let o=n[hn],u=o[Jt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ws(e,t,i,h,s)}else{let l=u,h=o[it];Tb(r)&&(l.flags|=128),Fg(t,e,l,h,i,s,!0)}}function TO(t,e,n,r,i){let s=n[vi],o=fn(n);s!==o&&ws(e,t,r,s,i);for(let a=vt;a<n.length;a++){let u=n[a];Vl(u[ne],u,t,e,r,s)}}function CO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Fn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Fn.Important),t.setStyle(n,r,i,s))}}function AO(t,e,n){t.setAttribute(e,"style",n)}function $b(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Hb(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&mp(t,e,r),i!==null&&$b(t,e,i),s!==null&&AO(t,e,s)}var pn={};function xr(t=1){zb(Qe(),ge(),Ai()+t,!1)}function zb(t,e,n,r){if(!r)if((e[X]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ku(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Qu(e,s,0,n)}Ii(n)}function q(t,e=ae.Default){let n=ge();if(n===null)return $(t,e);let r=Ye();return vb(r,n,ht(t),e)}function qb(){let t="invalid";throw new Error(t)}function Gb(t,e,n,r,i,s){let o=he(null);try{let a=null;i&Cr.SignalBased&&(a=e[r][Nn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Cr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):$D(e,a,r,s)}finally{he(o)}}function SO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ii(~i);else{let s=i,o=n[++r],a=n[++r];cP(o,s);let u=e[s];a(2,u)}}}finally{Ii(-1)}}function Ul(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Un]=i,p[X]=r|4|128|8|64,(l!==null||t&&t[X]&2048)&&(p[X]|=2048),KD(p),p[it]=p[Vs]=t,p[Ot]=n,p[dn]=o||t&&t[dn],p[Fe]=a||t&&t[Fe],p[Ms]=u||t&&t[Ms]||null,p[Jt]=s,p[Sl]=$P(),p[rl]=h,p[jD]=l,p[hn]=e.type==2?t[hn]:p,p}function wa(t,e,n,r,i){let s=t.data[e];if(s===null)s=RO(t,e,n,r,i),aP()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=iP();s.injectorIndex=o===null?-1:o.injectorIndex}return Ci(s,!0),s}function RO(t,e,n,r,i){let s=XD(),o=vg(),a=o?s:s&&s.parent,u=t.data[e]=kO(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function Wb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Kb(t,e,n,r,i){let s=Ai(),o=r&2;try{Ii(-1),o&&e.length>Kt&&zb(t,e,Kt,!1),cn(o?2:0,i),n(r,i)}finally{Ii(s),cn(o?3:1,i)}}function Lg(t,e,n){if(gg(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{he(r)}}}function Vg(t,e,n){ZD()&&(BO(t,e,n,Vt(n,e)),(n.flags&64)===64&&Zb(t,e,n))}function Ug(t,e,n=Vt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Qb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=jg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function jg(t,e,n,r,i,s,o,a,u,l,h){let p=Kt+r,m=p+i,y=MO(p,m),C=typeof l=="function"?l():l;return y[ne]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function MO(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:pn);return n}function NO(t,e,n,r){let s=r.get(QP,Nb)||n===ln.ShadowDom,o=t.selectRootElement(e,s);return xO(o),o}function xO(t){PO(t)}var PO=()=>null;function OO(t,e,n,r){let i=tT(e);i.push(n),t.firstCreatePass&&nT(t).push(r,i.length-1)}function kO(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return tP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function eD(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Cr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?tD(r,n,l,a,u):tD(r,n,l,a)}return r}function tD(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function FO(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,y=m?m.inputs:null,C=m?m.outputs:null;u=eD(0,p.inputs,h,u,y),l=eD(1,p.outputs,h,l,C);let N=u!==null&&o!==null&&!hg(e)?ZO(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function LO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Yb(t,e,n,r,i,s,o,a){let u=Vt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?($g(t,n,h,r,i),Rl(e)&&VO(n,e.index)):e.type&3?(r=LO(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function VO(t,e){let n=Nr(e,t);n[X]&16||(n[X]|=64)}function Bg(t,e,n,r){if(ZD()){let i=r===null?null:{"":-1},s=HO(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Jb(t,e,n,o,i,a),i&&zO(n,r,i)}n.mergedAttrs=la(n.mergedAttrs,n.attrs)}function Jb(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Cp(ul(n,e),t,r[l].type);GO(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=Wb(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=la(n.mergedAttrs,h.hostAttrs),WO(t,n,e,u,h),qO(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}FO(t,n,s)}function UO(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;jO(o)!=a&&o.push(a),o.push(n,r,s)}}function jO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function BO(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Rl(n)&&KO(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||ul(n,e),Rr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=Ei(e,t,a,n);if(Rr(l,e),o!==null&&JO(e,a-i,l,u,n,o),Sr(u)){let h=Nr(n.index,e);h[Ot]=Ei(e,t,a,n)}}}function Zb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=uP();try{Ii(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Dp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&$O(u,l)}}finally{Ii(-1),Dp(o)}}function $O(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function HO(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Ex(e,o.selectors,!1))if(r||(r=[]),Sr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Fp(t,e,u)}else r.unshift(o),Fp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Fp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function zO(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new H(-301,!1);r.push(e[i],s)}}}function qO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Sr(e)&&(n[""]=t)}}function GO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function WO(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Cs(i.type,!0)),o=new wi(s,Sr(i),q);t.blueprint[r]=o,n[r]=o,UO(t,e,r,Wb(t,n,i.hostVars,pn),i)}function KO(t,e,n){let r=Vt(e,t),i=Qb(n),s=t[dn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=jl(t,Ul(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function QO(t,e,n,r,i,s){let o=Vt(t,e);YO(e[Fe],o,s,t.value,n,r,i)}function YO(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Ts(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function JO(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];Gb(r,n,u,l,h,p)}}function ZO(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Xb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function eT(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];_g(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function jl(t,e){return t[ha]?t[UE][Wt]=e:t[ha]=e,t[UE]=e,e}function Lp(t,e,n){_g(0);let r=he(null);try{e(t,n)}finally{he(r)}}function tT(t){return t[il]??=[]}function nT(t){return t.cleanup??=[]}function rT(t,e){let n=t[Ms],r=n?n.get(kn,null):null;r&&r.handleError(e)}function $g(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];Gb(h,l,r,a,u,i)}}function iT(t,e,n){let r=WD(e,t);uO(t[Fe],r,n)}function XO(t,e){let n=Nr(e,t),r=n[ne];ek(r,n);let i=n[Un];i!==null&&n[rl]===null&&(n[rl]=Ng(i,n[Ms])),Hg(r,n,n[Ot])}function ek(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Hg(t,e,n){Ig(e);try{let r=t.viewQuery;r!==null&&Lp(1,r,n);let i=t.template;i!==null&&Kb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[On]?.finishViewCreation(t),t.staticContentQueries&&eT(t,e),t.staticViewQueries&&Lp(2,t.viewQuery,n);let s=t.components;s!==null&&tk(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[X]&=-5,wg()}}function tk(t,e){for(let n=0;n<e.length;n++)XO(t,e[n])}function sT(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[X]&4096?4096:16,u=Ul(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[yi]=l;let h=t[On];return h!==null&&(u[On]=h.createEmbeddedView(s)),Hg(s,u,n),u}finally{he(i)}}function nk(t,e){let n=vt+e;if(n<t.length)return t[n]}function Vp(t,e){return!e||e.firstChild===null||Tb(t)}function oT(t,e,n,r=!0){let i=e[ne];if(pO(i,e,t,n),r){let o=kp(n,t),a=e[Fe],u=jb(a,t[vi]);u!==null&&hO(i,t[Jt],a,e,u,o)}let s=e[rl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function rk(t,e){let n=fl(t,e);return n!==void 0&&kg(n[ne],n),n}function gl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(fn(s)),jn(s)&&ik(s,r);let o=n.type;if(o&8)gl(t,e,n.child,r);else if(o&32){let a=Pg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Bb(e,n);if(Array.isArray(a))r.push(...a);else{let u=_i(e[hn]);gl(u[ne],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function ik(t,e){for(let n=vt;n<t.length;n++){let r=t[n],i=r[ne].firstChild;i!==null&&gl(r[ne],r,i,e)}t[vi]!==t[Un]&&e.push(t[vi])}var aT=[];function sk(t){return t[Pt]??ok(t)}function ok(t){let e=aT.pop()??Object.create(ck);return e.lView=t,e}function ak(t){t.lView[Pt]!==t&&(t.lView=null,aT.push(t))}var ck=ce(F({},ra),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{xl(t.lView)},consumerOnSignalRead(){this.lView[Pt]=this}});function uk(t){let e=t[Pt]??Object.create(lk);return e.lView=t,e}var lk=ce(F({},ra),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=_i(t.lView);for(;e&&!cT(e[ne]);)e=_i(e);e&&QD(e)},consumerOnSignalRead(){this.lView[Pt]=this}});function cT(t){return t.type!==2}var dk=100;function uT(t,e=!0,n=0){let r=t[dn],i=r.rendererFactory,s=!1;s||i.begin?.();try{hk(t,n)}catch(o){throw e&&rT(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function hk(t,e){let n=tb();try{BE(!0),Up(t,e);let r=0;for(;Nl(t);){if(r===dk)throw new H(103,!1);r++,Up(t,1)}}finally{BE(n)}}function fk(t,e,n,r){let i=e[X];if((i&256)===256)return;let s=!1,o=!1;!s&&e[dn].inlineEffectRunner?.flush(),Ig(e);let a=!0,u=null,l=null;s||(cT(t)?(l=sk(e),u=hu(l)):qw()===null?(a=!1,l=uk(e),u=hu(l)):e[Pt]&&(Of(e[Pt]),e[Pt]=null));try{KD(e),oP(t.bindingStartIndex),n!==null&&Kb(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let y=t.preOrderCheckHooks;y!==null&&Ku(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Qu(e,y,0,null),np(e,0)}if(o||pk(e),lT(e,0),t.contentQueries!==null&&eT(t,e),!s)if(h){let y=t.contentCheckHooks;y!==null&&Ku(e,y)}else{let y=t.contentHooks;y!==null&&Qu(e,y,1),np(e,1)}SO(t,e);let p=t.components;p!==null&&hT(e,p,0);let m=t.viewQuery;if(m!==null&&Lp(2,m,r),!s)if(h){let y=t.viewCheckHooks;y!==null&&Ku(e,y)}else{let y=t.viewHooks;y!==null&&Qu(e,y,2),np(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[tp]){for(let y of e[tp])y();e[tp]=null}s||(e[X]&=-73)}catch(h){throw s||xl(e),h}finally{l!==null&&(xf(l,u),a&&ak(l)),wg()}}function lT(t,e){for(let n=Ab(t);n!==null;n=Sb(n))for(let r=vt;r<n.length;r++){let i=n[r];dT(i,e)}}function pk(t){for(let e=Ab(t);e!==null;e=Sb(e)){if(!(e[X]&ol.HasTransplantedViews))continue;let n=e[Ns];for(let r=0;r<n.length;r++){let i=n[r];QD(i)}}}function gk(t,e,n){let r=Nr(e,t);dT(r,n)}function dT(t,e){yg(t)&&Up(t,e)}function Up(t,e){let r=t[ne],i=t[X],s=t[Pt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Pf(s)),o||=!1,s&&(s.dirty=!1),t[X]&=-9217,o)fk(r,t,r.template,t[Ot]);else if(i&8192){lT(t,1);let a=r.components;a!==null&&hT(t,a,1)}}function hT(t,e,n){for(let r=0;r<e.length;r++)gk(t,e[r],n)}function zg(t,e){let n=tb()?64:1088;for(t[dn].changeDetectionScheduler?.notify(e);t;){t[X]|=n;let r=_i(t);if(Ip(t)&&!r)return t;t=r}return null}var Di=class{get rootNodes(){let e=this._lView,n=e[ne];return gl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ot]}set context(e){this._lView[Ot]=e}get destroyed(){return(this._lView[X]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[it];if(jn(e)){let n=e[sl],r=n?n.indexOf(this):-1;r>-1&&(fl(e,r),tl(n,r))}this._attachedToViewContainer=!1}kg(this._lView[ne],this._lView)}onDestroy(e){YD(this._lView,e)}markForCheck(){zg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){Ep(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,uT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ip(this._lView),n=this._lView[yi];n!==null&&!e&&Og(n,this._lView),Lb(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=Ip(this._lView),r=this._lView[yi];r!==null&&!n&&Vb(r,this._lView),Ep(this._lView)}},bi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vk;let t=e;return t})(),mk=bi,yk=class extends mk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=sT(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Di(i)}};function vk(){return qg(Ye(),ge())}function qg(t,e){return t.type&4?new yk(e,t,Us(t,e)):null}var N6=new RegExp(`^(\\d+)*(${WP}|${GP})*(.*)`);var _k=()=>null;function jp(t,e){return _k(t,e)}var Ps=class{},Gg=new L("",{providedIn:"root",factory:()=>!1});var fT=new L(""),pT=new L(""),Bp=class{},ml=class{};function Ik(t){let e=Error(`No component factory found for ${ft(t)}.`);return e[wk]=t,e}var wk="ngComponent";var $p=class{resolveComponentFactory(e){throw Ik(e)}},nm=class nm{};nm.NULL=new $p;var Os=nm,ks=class{},Xt=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>Ek();let t=e;return t})();function Ek(){let t=ge(),e=Ye(),n=Nr(e.index,t);return(Tr(n)?n:t)[Fe]}var Dk=(()=>{let e=class e{};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function yl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=RE(i,a);else if(s==2){let u=a,l=e[++o];r=RE(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var vl=class extends Os{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ar(e);return new Fs(n,this.ngModule)}};function nD(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Cr.None;e?n.push({propName:o,templateName:r,isSignal:(a&Cr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function bk(t){let e=t.toLowerCase();return e==="svg"?GD:e==="math"?Wx:null}var Fs=class extends ml{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=nD(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return nD(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Cx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof pt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new bp(e,o):e,u=a.get(ks,null);if(u===null)throw new H(407,!1);let l=a.get(Dk,null),h=a.get(Ps,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?NO(m,r,this.componentDef.encapsulation,a):Fb(m,y,bk(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;C!==null&&(R=Ng(C,a,!0));let x=jg(0,null,null,1,0,null,null,null,null,null,null),B=Ul(null,x,null,N,null,null,p,m,a,null,R);Ig(B);let z,G,Ie=null;try{let K=this.componentDef,E,v=null;K.findHostDirectiveDefs?(E=[],v=new Map,K.findHostDirectiveDefs(K,E,v),E.push(K)):E=[K];let _=Tk(B,C);Ie=Ck(_,C,K,E,B,p,m),G=mg(x,Kt),C&&Rk(m,K,C,r),n!==void 0&&Mk(G,this.ngContentSelectors,n),z=Sk(Ie,K,E,v,B,[Nk]),Hg(x,B,null)}catch(K){throw Ie!==null&&Pp(Ie),Pp(B),K}finally{wg()}return new Hp(this.componentType,z,Us(G,B),B,G)}finally{he(s)}}},Hp=class extends Bp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Di(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;$g(s[ne],s,i,e,n),this.previousInputValues.set(e,n);let o=Nr(this._tNode.index,s);zg(o,1)}}get injector(){return new mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Tk(t,e){let n=t[ne],r=Kt;return t[r]=e,wa(n,r,2,"#host",null)}function Ck(t,e,n,r,i,s,o){let a=i[ne];Ak(r,t,e,o);let u=null;e!==null&&(u=Ng(e,i[Ms]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Ul(i,Qb(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Fp(a,t,r.length-1),jl(i,p),i[t.index]=p}function Ak(t,e,n,r){for(let i of t)e.mergedAttrs=la(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(yl(e,e.mergedAttrs,!0),n!==null&&Hb(r,n,e))}function Sk(t,e,n,r,i,s){let o=Ye(),a=i[ne],u=Vt(o,i);Jb(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=Ei(i,a,p,o);Rr(m,i)}Zb(a,i,o),u&&Rr(u,i);let l=Ei(i,a,o.directiveStart+o.componentOffset,o);if(t[Ot]=i[Ot]=l,s!==null)for(let h of s)h(l,e);return Lg(a,o,i),l}function Rk(t,e,n,r){if(r)mp(t,n,["ng-version","18.2.2"]);else{let{attrs:i,classes:s}=Ax(e.selectors[0]);i&&mp(t,n,i),s&&s.length>0&&$b(t,n,s.join(" "))}}function Mk(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Nk(){let t=Ye();kl(ge()[ne],t)}var Pr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xk;let t=e;return t})();function xk(){let t=Ye();return mT(t,ge())}var Pk=Pr,gT=class extends Pk{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Us(this._hostTNode,this._hostLView)}get injector(){return new mi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Dg(this._hostTNode,this._hostLView);if(hb(e)){let n=cl(e,this._hostLView),r=al(e),i=n[ne].data[r+8];return new mi(i,n)}else return new mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=rD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-vt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=jp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Vp(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!Hx(e),a;if(o)a=n;else{let C=n||{};a=C.index,r=C.injector,i=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let u=o?e:new Fs(Ar(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(pt,null);N&&(s=N)}let h=Ar(u.componentType??{}),p=jp(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,s);return this.insertImpl(y.hostView,a,Vp(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Qx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[it],l=new gT(u,u[Jt],u[it]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return oT(o,i,s,r),e.attachToViewContainerRef(),DD(ap(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=rD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=fl(this._lContainer,n);r&&(tl(ap(this._lContainer),n),kg(r[ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=fl(this._lContainer,n);return r&&tl(ap(this._lContainer),n)!=null?new Di(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function rD(t){return t[sl]}function ap(t){return t[sl]||(t[sl]=[])}function mT(t,e){let n,r=e[t.index];return jn(r)?n=r:(n=Xb(r,e,null,t),e[t.index]=n,jl(e,n)),kk(n,e,t,r),new gT(n,t,e)}function Ok(t,e){let n=t[Fe],r=n.createComment(""),i=Vt(e,t),s=jb(n,i);return pl(n,s,r,_O(n,i),!1),r}var kk=Vk,Fk=()=>!1;function Lk(t,e,n){return Fk(t,e,n)}function Vk(t,e,n,r){if(t[vi])return;let i;n.type&8?i=fn(r):i=Ok(e,n),t[vi]=i}var zp=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},qp=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Wg(e,n).matches!==null&&this.queries[n].setDirty()}},Gp=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=Gk(e):this.predicate=e}},Wp=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Kp=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,Uk(n,s)),this.matchTNodeWithReadOption(e,n,Yu(n,e,s,!1,!1))}else r===bi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Yu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===gt||i===Pr||i===bi&&n.type&4)this.addMatch(n.index,-2);else{let s=Yu(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function Uk(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function jk(t,e){return t.type&11?Us(t,e):t.type&4?qg(t,e):null}function Bk(t,e,n,r){return n===-1?jk(e,t):n===-2?$k(t,e,r):Ei(t,t[ne],n,e)}function $k(t,e,n){if(n===gt)return Us(e,t);if(n===bi)return qg(e,t);if(n===Pr)return mT(e,t)}function yT(t,e,n,r){let i=e[On].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)a.push(null);else{let h=s[l];a.push(Bk(e,h,o[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Qp(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=yT(t,e,i,n);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-u];for(let p=vt;p<h.length;p++){let m=h[p];m[yi]===m[it]&&Qp(m[ne],m,l,r)}if(h[Ns]!==null){let p=h[Ns];for(let m=0;m<p.length;m++){let y=p[m];Qp(y[ne],y,l,r)}}}}}return r}function Hk(t,e){return t[On].queries[e].queryList}function zk(t,e,n){let r=new xp((n&4)===4);return OO(t,e,r,r.destroy),(e[On]??=new qp).queries.push(new zp(r))-1}function qk(t,e,n,r){let i=Qe();if(i.firstCreatePass){let s=Ye();Wk(i,new Gp(e,n,r),s.index),Kk(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return zk(i,ge(),n)}function Gk(t){return t.split(",").map(e=>e.trim())}function Wk(t,e,n){t.queries===null&&(t.queries=new Wp),t.queries.track(new Kp(e,n))}function Kk(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Wg(t,e){return t.queries.getByIndex(e)}function Qk(t,e){let n=t[ne],r=Wg(n,e);return r.crossesNgTemplate?Qp(n,t,e,[]):yT(n,t,r,e)}var iD=new Set;function Or(t){iD.has(t)||(iD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Yk(t){return typeof t=="function"&&t[Nn]!==void 0}function js(t,e){Or("NgSignals");let n=nE(t),r=n[Nn];return e?.equal&&(r.equal=e.equal),n.set=i=>kf(r,i),n.update=i=>rE(r,i),n.asReadonly=Jk.bind(n),n}function Jk(){let t=this[Nn];if(t.readonlyFn===void 0){let e=()=>this();e[Nn]=t,t.readonlyFn=e}return t.readonlyFn}function vT(t){return Yk(t)&&typeof t.set=="function"}function Zk(t){return Object.getPrototypeOf(t.prototype).constructor}function _t(t){let e=Zk(t.type),n=!0,r=[t];for(;e;){let i;if(Sr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=zu(t.inputs),o.inputTransforms=zu(t.inputTransforms),o.declaredInputs=zu(t.declaredInputs),o.outputs=zu(t.outputs);let a=i.hostBindings;a&&r1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&t1(t,u),l&&n1(t,l),Xk(t,i),GN(t.outputs,i.outputs),Sr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===_t&&(n=!1)}}e=Object.getPrototypeOf(e)}e1(r)}function Xk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function e1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=la(i.hostAttrs,n=la(n,i.hostAttrs))}}function zu(t){return t===As?{}:t===xt?[]:t}function t1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function n1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function r1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Kg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Mr=class{},fa=class{};var Yp=class extends Mr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vl(this);let s=xD(e);this._bootstrapComponents=kb(s.bootstrap),this._r3Injector=wb(e,n,[{provide:Mr,useValue:this},{provide:Os,useValue:this.componentFactoryResolver},...r],ft(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jp=class extends fa{constructor(e){super(),this.moduleType=e}create(e){return new Yp(this.moduleType,e,[])}};var _l=class extends Mr{constructor(e){super(),this.componentFactoryResolver=new vl(this),this.instance=null;let n=new da([...e.providers,{provide:Mr,useValue:this},{provide:Os,useValue:this.componentFactoryResolver}],e.parent||pg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Bl(t,e,n=null){return new _l({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function _T(t){return s1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function i1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function s1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function IT(t,e,n){return t[e]=n}function Ln(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function wT(t,e,n,r){let i=Ln(t,e,n);return Ln(t,e+1,r)||i}function o1(t){return(t.flags&32)===32}function a1(t,e,n,r,i,s,o,a,u){let l=e.consts,h=wa(e,t,4,o||null,a||null);Bg(e,n,h,xs(l,u)),kl(e,h);let p=h.tView=jg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function c1(t,e,n,r,i,s,o,a,u,l){let h=n+Kt,p=e.firstCreatePass?a1(h,e,t,r,i,s,o,a,u):e.data[h];Ci(p,!1);let m=u1(e,t,p,n);Pl()&&Ll(e,t,m,p),Rr(m,t);let y=Xb(m,t,m,p);return t[h]=y,jl(t,y),Lk(y,p,t),Ml(p)&&Vg(e,t,p),u!=null&&Ug(t,p,l),p}function $l(t,e,n,r,i,s,o,a){let u=ge(),l=Qe(),h=xs(l.consts,s);return c1(u,l,t,e,n,r,i,h,o,a),$l}var u1=l1;function l1(t,e,n,r){return Ol(!0),e[Fe].createComment("")}var Es=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Es||{}),ET=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),gi=class gi{constructor(){this.ngZone=P(ye),this.scheduler=P(Ps),this.errorHandler=P(kn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of gi.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};gi.PHASES=[Es.EarlyRead,Es.Write,Es.MixedReadWrite,Es.Read],gi.\u0275prov=U({token:gi,providedIn:"root",factory:()=>new gi});var Zp=gi,Xp=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Qg(t,e){!e?.injector&&$x(Qg);let n=e?.injector??P(Ke);return oO(n)?(Or("NgAfterNextRender"),h1(t,n,e,!0)):f1}function d1(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function h1(t,e,n,r){let i=e.get(ET);i.impl??=e.get(Zp);let s=n?.phase??Es.MixedReadWrite,o=new Xp(i.impl,d1(t,s),r,e.get(Tg));return i.impl.register(o),o}var f1={destroy(){}};function Ea(t,e,n,r){let i=ge(),s=_a();if(Ln(i,s,e)){let o=Qe(),a=Eg();QO(a,i,t,e,n,r)}return Ea}function p1(t,e,n,r){return Ln(t,_a(),n)?e+Ts(n)+r:pn}function g1(t,e,n,r,i,s){let o=sP(),a=wT(t,o,n,i);return rb(2),a?e+Ts(n)+r+Ts(i)+s:pn}function qu(t,e){return t<<17|e<<2}function Ti(t){return t>>17&32767}function m1(t){return(t&2)==2}function y1(t,e){return t&131071|e<<17}function eg(t){return t|2}function Ls(t){return(t&131068)>>2}function cp(t,e){return t&-131069|e<<2}function v1(t){return(t&1)===1}function tg(t){return t|1}function _1(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ti(o),u=Ls(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||ma(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Ti(t[a+1]);t[r+1]=qu(m,a),m!==0&&(t[m+1]=cp(t[m+1],r)),t[a+1]=y1(t[a+1],r)}else t[r+1]=qu(a,0),a!==0&&(t[a+1]=cp(t[a+1],r)),a=r;else t[r+1]=qu(u,0),a===0?a=r:t[u+1]=cp(t[u+1],r),u=r;l&&(t[r+1]=eg(t[r+1])),sD(t,h,r,!0),sD(t,h,r,!1),I1(e,h,t,r,s),o=qu(a,u),s?e.classBindings=o:e.styleBindings=o}function I1(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ma(s,e)>=0&&(n[r+1]=tg(n[r+1]))}function sD(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ti(i):Ls(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];w1(u,e)&&(a=!0,t[o+1]=r?tg(l):eg(l)),o=r?Ti(l):Ls(l)}a&&(t[n+1]=r?eg(i):tg(i))}function w1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ma(t,e)>=0:!1}function Bs(t,e,n){let r=ge(),i=_a();if(Ln(r,i,e)){let s=Qe(),o=Eg();Yb(s,o,r,t,e,r[Fe],n,!1)}return Bs}function oD(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";$g(t,n,s[o],o,r)}function DT(t,e,n){return bT(t,e,n,!1),DT}function Hl(t,e){return bT(t,e,null,!0),Hl}function bT(t,e,n,r){let i=ge(),s=Qe(),o=rb(2);if(s.firstUpdatePass&&D1(s,t,o,r),e!==pn&&Ln(i,o,e)){let a=s.data[Ai()];S1(s,a,i,i[Fe],t,i[o+1]=R1(e,n),r,o)}}function E1(t,e){return e>=t.expandoStartIndex}function D1(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Ai()],o=E1(t,n);M1(s,r)&&e===null&&!o&&(e=!1),e=b1(i,s,e,r),_1(i,s,e,n,o,r)}}function b1(t,e,n,r){let i=lP(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=up(null,t,e,n,r),n=pa(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=up(i,t,e,n,r),s===null){let u=T1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=up(null,t,e,u[1],r),u=pa(u,e.attrs,r),C1(t,e,r,u))}else s=A1(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function T1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ls(r)!==0)return t[Ti(r)]}function C1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ti(i)]=r}function A1(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=pa(r,o,n)}return pa(r,e.attrs,n)}function up(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=pa(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function pa(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),px(t,o,n?!0:e[++s]))}return t===void 0?null:t}function S1(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=v1(l)?aD(u,e,n,i,Ls(l),o):void 0;if(!Il(h)){Il(s)||m1(l)&&(s=aD(u,null,n,i,a,o));let p=WD(Ai(),n);CO(r,o,p,i,s)}}function aD(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===pn&&(m=p?xt:void 0);let y=p?Xf(m,r):h===r?m:void 0;if(l&&!Il(y)&&(y=Xf(u,r)),Il(y)&&(a=y,o))return a;let C=t[i+1];i=o?Ti(C):Ls(C)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Xf(u,r))}return a}function Il(t){return t!==void 0}function R1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ft(Ia(t)))),t}function M1(t,e){return(t.flags&(e?8:16))!==0}function P6(t,e){Or("NgControlFlow");let n=ge(),r=_a(),i=n[r]!==pn?n[r]:-1,s=i!==-1?cD(n,Kt+i):void 0,o=0;if(Ln(n,r,t)){let a=he(null);try{if(s!==void 0&&rk(s,o),t!==-1){let u=Kt+t,l=cD(n,u),h=N1(n[ne],u),p=jp(l,h.tView.ssrId),m=sT(n,h,e,{dehydratedView:p});oT(l,m,o,Vp(h,p))}}finally{he(a)}}else if(s!==void 0){let a=nk(s,o);a!==void 0&&(a[Ot]=e)}}function cD(t,e){return t[e]}function N1(t,e){return mg(t,e)}function x1(t,e,n,r,i,s){let o=e.consts,a=xs(o,i),u=wa(e,t,2,r,a);return Bg(e,n,u,xs(o,s)),u.attrs!==null&&yl(u,u.attrs,!1),u.mergedAttrs!==null&&yl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Tt(t,e,n,r){let i=ge(),s=Qe(),o=Kt+t,a=i[Fe],u=s.firstCreatePass?x1(o,s,i,e,n,r):s.data[o],l=P1(s,i,u,a,e,t);i[o]=l;let h=Ml(u);return Ci(u,!0),Hb(a,l,u),!o1(u)&&Pl()&&Ll(s,i,l,u),Zx()===0&&Rr(l,i),Xx(),h&&(Vg(s,i,u),Lg(s,u,i)),r!==null&&Ug(i,u),Tt}function jt(){let t=Ye();vg()?eb():(t=t.parent,Ci(t,!1));let e=t;nP(e)&&rP(),eP();let n=Qe();return n.firstCreatePass&&(kl(n,t),gg(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&yP(e)&&oD(n,e,ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&vP(e)&&oD(n,e,ge(),e.stylesWithoutHost,!1),jt}function $s(t,e,n,r){return Tt(t,e,n,r),jt(),$s}var P1=(t,e,n,r,i,s)=>(Ol(!0),Fb(r,i,fP()));function O1(t,e,n,r,i){let s=e.consts,o=xs(s,r),a=wa(e,t,8,"ng-container",o);o!==null&&yl(a,o,!0);let u=xs(s,i);return Bg(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function k1(t,e,n){let r=ge(),i=Qe(),s=t+Kt,o=i.firstCreatePass?O1(s,i,r,e,n):i.data[s];Ci(o,!0);let a=L1(i,r,o,t);return r[s]=a,Pl()&&Ll(i,r,a,o),Rr(a,r),Ml(o)&&(Vg(i,r,o),Lg(i,o,r)),n!=null&&Ug(r,o),k1}function F1(){let t=Ye(),e=Qe();return vg()?eb():(t=t.parent,Ci(t,!1)),e.firstCreatePass&&(kl(e,t),gg(t)&&e.queries.elementEnd(t)),F1}var L1=(t,e,n,r)=>(Ol(!0),lO(e[Fe],""));function Yg(){return ge()}var wl="en-US";var V1=wl;function U1(t){typeof t=="string"&&(V1=t.toLowerCase().replace(/_/g,"-"))}var j1=(t,e,n)=>{};function It(t,e,n,r){let i=ge(),s=Qe(),o=Ye();return TT(s,i,i[Fe],o,t,e,r),It}function B1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[il],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function TT(t,e,n,r,i,s,o){let a=Ml(r),l=t.firstCreatePass&&nT(t),h=e[Ot],p=tT(e),m=!0;if(r.type&3||o){let N=Vt(r,e),R=o?o(N):N,x=p.length,B=o?G=>o(fn(G[r.index])):r.index,z=null;if(!o&&a&&(z=B1(t,e,i,r.index)),z!==null){let G=z.__ngLastListenerFn__||z;G.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1}else{s=lD(r,e,h,s),j1(N,i,s);let G=n.listen(R,i,s);p.push(s,G),l&&l.push(i,B,x,x+1)}}else s=lD(r,e,h,s);let y=r.outputs,C;if(m&&y!==null&&(C=y[i])){let N=C.length;if(N)for(let R=0;R<N;R+=2){let x=C[R],B=C[R+1],Ie=e[x][B].subscribe(s),K=p.length;p.push(s,Ie),l&&l.push(i,r.index,K,-(K+1))}}}function uD(t,e,n,r){let i=he(null);try{return cn(6,e,n),n(r)!==!1}catch(s){return rT(t,s),!1}finally{cn(7,e,n),he(i)}}function lD(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Nr(t.index,e):e;zg(o,5);let a=uD(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=uD(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function Si(t=1){return hP(t)}function CT(t,e,n,r){qk(t,e,n,r)}function AT(t){let e=ge(),n=Qe(),r=ib();_g(r+1);let i=Wg(n,r);if(t.dirty&&Kx(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=Qk(e,r);t.reset(s,UP),t.notifyOnChanges()}return!0}return!1}function ST(){return Hk(ge(),ib())}function Da(t,e=""){let n=ge(),r=Qe(),i=t+Kt,s=r.firstCreatePass?wa(r,i,1,e,null):r.data[i],o=$1(r,n,s,e,t);n[i]=o,Pl()&&Ll(r,n,o,s),Ci(s,!1)}var $1=(t,e,n,r,i)=>(Ol(!0),cO(e[Fe],r));function H1(t){return zl("",t,""),H1}function zl(t,e,n){let r=ge(),i=p1(r,t,e,n);return i!==pn&&iT(r,Ai(),i),zl}function Jg(t,e,n,r,i){let s=ge(),o=g1(s,t,e,n,r,i);return o!==pn&&iT(s,Ai(),o),Jg}function Zg(t,e,n){vT(e)&&(e=e());let r=ge(),i=_a();if(Ln(r,i,e)){let s=Qe(),o=Eg();Yb(s,o,r,t,e,r[Fe],n,!1)}return Zg}function RT(t,e){let n=vT(t);return n&&t.set(e),n}function Xg(t,e){let n=ge(),r=Qe(),i=Ye();return TT(r,n,n[Fe],i,t,e),Xg}function z1(t,e,n){let r=Qe();if(r.firstCreatePass){let i=Sr(t);ng(n,r.data,r.blueprint,i,!0),ng(e,r.data,r.blueprint,i,!1)}}function ng(t,e,n,r,i){if(t=ht(t),Array.isArray(t))for(let s=0;s<t.length;s++)ng(t[s],e,n,r,i);else{let s=Qe(),o=ge(),a=Ye(),u=Rs(t)?t:ht(t.provide),l=VD(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Rs(t)||!t.multi){let y=new wi(l,i,q),C=dp(u,e,i?h:h+m,p);C===-1?(Cp(ul(a,o),s,u),lp(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[C]=y,o[C]=y)}else{let y=dp(u,e,h+m,p),C=dp(u,e,h,h+m),N=y>=0&&n[y],R=C>=0&&n[C];if(i&&!R||!i&&!N){Cp(ul(a,o),s,u);let x=W1(i?G1:q1,n.length,i,r,l);!i&&R&&(n[C].providerFactory=x),lp(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(x),o.push(x)}else{let x=MT(n[i?C:y],l,!i&&r);lp(s,t,y>-1?y:C,x)}!i&&r&&R&&n[C].componentProviders++}}}function lp(t,e,n,r){let i=Rs(e),s=kx(e);if(i||s){let u=(s?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function MT(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function dp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function q1(t,e,n,r){return rg(this.multi,[])}function G1(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ei(n,n[ne],this.providerFactory.index,r);s=a.slice(0,o),rg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],rg(i,s);return s}function rg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function W1(t,e,n,r,i){let s=new wi(t,n,q);return s.multi=[],s.index=e,s.componentProviders=0,MT(s,i,r&&!n),s}function gn(t,e=[]){return n=>{n.providersResolver=(r,i)=>z1(r,i?i(t):t,e)}}var K1=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=kD(!1,r.type),s=i.length>0?Bl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=U({token:e,providedIn:"environment",factory:()=>new e($(pt))});let t=e;return t})();function ql(t){Or("NgStandalone"),t.getStandaloneInjector=e=>e.get(K1).getOrCreateStandaloneInjector(t)}function O6(t,e,n,r){return Q1(ge(),nb(),t,e,n,r)}function NT(t,e,n,r,i){return Y1(ge(),nb(),t,e,n,r,i)}function xT(t,e){let n=t[e];return n===pn?void 0:n}function Q1(t,e,n,r,i,s){let o=e+n;return Ln(t,o,i)?IT(t,o+1,s?r.call(s,i):r(i)):xT(t,o+1)}function Y1(t,e,n,r,i,s,o){let a=e+n;return wT(t,a,i,s)?IT(t,a+2,o?r.call(o,i,s):r(i,s)):xT(t,a+2)}var Vn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},PT=new Vn("18.2.2");var Gl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var OT=new L("");function Ri(t){return!!t&&typeof t.then=="function"}function kT(t){return!!t&&typeof t.subscribe=="function"}var Wl=new L(""),FT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=P(Wl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ri(o))r.push(o);else if(kT(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ba=new L("");function J1(){tE(()=>{throw new H(600,!1)})}function Z1(t){return t.isBoundToModule}var X1=10;function eF(t,e,n){try{let r=n();return Ri(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var kr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(LP),this.afterRenderManager=P(ET),this.zonelessEnabled=P(Gg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=P($n).hasPendingTasks.pipe(Y(r=>!r)),this._injector=P(pt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof ml;if(!this._injector.get(FT).done){let y=!s&&ND(r),C=!1;throw new H(405,C)}let a;s?a=r:a=this._injector.get(Os).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=Z1(a)?void 0:this._injector.get(Mr),l=i||a.selector,h=a.create(Ke.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(OT,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Ju(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new H(101,!1);let r=he(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,he(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(ks,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<X1;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)tF(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Nl(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ju(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ba,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ju(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new H(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ju(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function tF(t,e,n,r){if(!n&&!Nl(t))return;uT(t,e,n&&!r?0:1)}var ig=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Kl=(()=>{let e=class e{compileModuleSync(r){return new Jp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=xD(r),o=kb(s.declarations).reduce((a,u)=>{let l=Ar(u);return l&&a.push(new Fs(l)),a},[]);return new ig(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var nF=(()=>{let e=class e{constructor(){this.zone=P(ye),this.changeDetectionScheduler=P(Ps),this.applicationRef=P(kr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rF=new L("",{factory:()=>!1});function LT({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ye(ce(F({},VT()),{scheduleInRootZone:n})),[{provide:ye,useFactory:t},{provide:Ss,multi:!0,useFactory:()=>{let r=P(nF,{optional:!0});return()=>r.initialize()}},{provide:Ss,multi:!0,useFactory:()=>{let r=P(iF);return()=>{r.initialize()}}},e===!0?{provide:fT,useValue:!0}:[],{provide:pT,useValue:n??Eb}]}function k6(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=LT({ngZoneFactory:()=>{let i=VT(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Or("NgZone_CoalesceEvent"),new ye(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Ft([{provide:rF,useValue:!0},{provide:Gg,useValue:!1},r])}function VT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var iF=(()=>{let e=class e{constructor(){this.subscription=new Ne,this.initialized=!1,this.zone=P(ye),this.pendingTasks=P($n)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sF=(()=>{let e=class e{constructor(){this.appRef=P(kr),this.taskService=P($n),this.ngZone=P(ye),this.zonelessEnabled=P(Gg),this.disableScheduling=P(fT,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ne,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(pT,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Np||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?WE:Db;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,WE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oF(){return typeof $localize<"u"&&$localize.locale||wl}var em=new L("",{providedIn:"root",factory:()=>P(em,ae.Optional|ae.SkipSelf)||oF()});var UT=new L("");function Gu(t){return!!t.platformInjector}function aF(t){let e=Gu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ye);return n.run(()=>{Gu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(kn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Gu(t)){let s=()=>e.destroy(),o=t.platformInjector.get(UT);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{Ju(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return eF(r,n,()=>{let s=e.get(FT);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(em,wl);if(U1(o||wl),Gu(t)){let a=e.get(kr);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return cF(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function cF(t,e){let n=t.injector.get(kr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new H(-403,!1);e.push(t)}var Zu=null;function uF(t=[],e){return Ke.create({name:e,providers:[{provide:Al,useValue:"platform"},{provide:UT,useValue:new Set([()=>Zu=null])},...t]})}function lF(t=[]){if(Zu)return Zu;let e=uF(t);return Zu=e,J1(),dF(e),e}function dF(t){t.get(Rg,null)?.forEach(n=>n())}var Fr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hF;let t=e;return t})();function hF(t){return fF(Ye(),ge(),(t&16)===16)}function fF(t,e,n){if(Rl(t)&&!n){let r=Nr(t.index,e);return new Di(r,r)}else if(t.type&175){let r=e[hn];return new Di(r,e)}return null}var sg=class{constructor(){}supports(e){return _T(e)}create(e){return new og(e)}},pF=(t,e)=>e,og=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||pF}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<dD(r,i,s)?n:r,a=dD(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<s.length?s[m]:s[m]=0,C=y+m;h<=C&&C<l&&(s[m]=y+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!_T(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,i1(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new ag(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new El),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new El),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ag=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},El=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new cg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function hD(){return new tm([new sg])}var tm=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||hD()),deps:[[e,new lg,new st]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new H(901,!1)}};e.\u0275prov=U({token:e,providedIn:"root",factory:hD});let t=e;return t})();function jT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=lF(r),s=[LT({}),{provide:Ps,useExisting:sF},...n||[]],o=new _l({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return aF({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var BT=new L("");function Lr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Hs(t,e){Or("NgSignals");let n=Zw(t);return e?.equal&&(n[Nn].equal=e.equal),n}function mn(t){let e=he(null);try{return t()}finally{he(e)}}function $T(t){let e=Ar(t);if(!e)return null;let n=new Fs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var KT=null;function qn(){return KT}function QT(t){KT??=t}var Ql=class{};var Je=new L(""),cm=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>P(mF),providedIn:"platform"});let t=e;return t})(),YT=new L(""),mF=(()=>{let e=class e extends cm{constructor(){super(),this._doc=P(Je),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qn().getBaseHref(this._doc)}onPopState(r){let i=qn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=qn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function um(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function HT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function zn(t){return t&&t[0]!=="?"?"?"+t:t}var Gn=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>P(lm),providedIn:"root"});let t=e;return t})(),JT=new L(""),lm=(()=>{let e=class e extends Gn{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return um(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+zn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+zn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+zn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)($(cm),$(JT,8))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ZT=(()=>{let e=class e extends Gn{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=um(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+zn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+zn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)($(cm),$(JT,8))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),qs=(()=>{let e=class e{constructor(r){this._subject=new Ae,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=_F(HT(zT(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+zn(i))}normalize(r){return e.stripTrailingSlash(vF(this._basePath,zT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=zn,e.joinWithSlash=um,e.stripTrailingSlash=HT,e.\u0275fac=function(i){return new(i||e)($(Gn))},e.\u0275prov=U({token:e,factory:()=>yF(),providedIn:"root"});let t=e;return t})();function yF(){return new qs($(Gn))}function vF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function zT(t){return t.replace(/\/index.html$/,"")}function _F(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Yl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var rm=/\s+/,qT=[],XT=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=qT,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(rm):qT}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(rm):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(rm).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(q(gt),q(Xt))},e.\u0275dir=Te({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var im=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},eC=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new im(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),GT(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);GT(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(Pr),q(bi),q(tm))},e.\u0275dir=Te({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function GT(t,e){t.context.$implicit=e.item}var tC=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new sm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){WT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){WT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(Pr),q(bi))},e.\u0275dir=Te({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),sm=class{constructor(){this.$implicit=null,this.ngIf=null}};function WT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${ft(e)}'.`)}var dm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=Qt({});let t=e;return t})(),hm="browser",IF="server";function wF(t){return t===hm}function Jl(t){return t===IF}var nC=(()=>{let e=class e{};e.\u0275prov=U({token:e,providedIn:"root",factory:()=>wF(P(Ut))?new om(P(Je),window):new am});let t=e;return t})(),om=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=EF(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function EF(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var am=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},zs=class{};var Ca=class{},Xl=class{},Wn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var gm=class{encodeKey(e){return rC(e)}encodeValue(e){return rC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function DF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var bF=/%(\d[a-f0-9])/gi,TF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function rC(t){return encodeURIComponent(t).replace(bF,(e,n)=>TF[n]??e)}function Zl(t){return`${t}`}var Ur=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new gm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=DF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Zl):[Zl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Zl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Zl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var mm=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function CF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function iC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function sC(t){return typeof Blob<"u"&&t instanceof Blob}function oC(t){return typeof FormData<"u"&&t instanceof FormData}function AF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ta=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(CF(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Wn,this.context??=new mm,!this.params)this.params=new Ur,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||iC(this.body)||sC(this.body)||oC(this.body)||AF(this.body)?this.body:this.body instanceof Ur?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||oC(this.body)?null:sC(this.body)?this.body.type||null:iC(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ur?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,y)=>m.set(y,e.setHeaders[y]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,y)=>m.set(y,e.setParams[y]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},jr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(jr||{}),Aa=class{constructor(e,n=200,r="OK"){this.headers=e.headers||new Wn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ed=class t extends Aa{constructor(e={}){super(e),this.type=jr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Sa=class t extends Aa{constructor(e={}){super(e),this.type=jr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Vr=class extends Aa{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},dC=200,SF=204;function pm(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var RF=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Ta)o=r;else{let l;s.headers instanceof Wn?l=s.headers:l=new Wn(s.headers);let h;s.params&&(s.params instanceof Ur?h=s.params:h=new Ur({fromObject:s.params})),o=new Ta(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=Q(o).pipe(xn(l=>this.handler.handle(l)));if(r instanceof Ta||s.observe==="events")return a;let u=a.pipe(dt(l=>l instanceof Sa));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return u.pipe(Y(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return u.pipe(Y(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return u.pipe(Y(l=>l.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Ur().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,pm(s,i))}post(r,i,s={}){return this.request("POST",r,pm(s,i))}put(r,i,s={}){return this.request("PUT",r,pm(s,i))}};e.\u0275fac=function(i){return new(i||e)($(Ca))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),MF=/^\)\]\}',?\n/,NF="X-Request-URL";function aC(t){if(t.url)return t.url;let e=NF.toLocaleLowerCase();return t.headers.get(e)}var xF=(()=>{let e=class e{constructor(){this.fetchImpl=P(ym,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=P(ye)}handle(r){return new oe(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(vm,o=>i.error(new Vr({error:o}))),()=>s.abort()})}doRequest(r,i,s){return w(this,null,function*(){let o=this.createRequestInit(r),a;try{let C=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,F({signal:i},o)));PF(C),s.next({type:jr.Sent}),a=yield C}catch(C){s.error(new Vr({error:C,status:C.status??0,statusText:C.statusText,url:r.urlWithParams,headers:C.headers}));return}let u=new Wn(a.headers),l=a.statusText,h=aC(a)??r.urlWithParams,p=a.status,m=null;if(r.reportProgress&&s.next(new ed({headers:u,status:p,statusText:l,url:h})),a.body){let C=a.headers.get("content-length"),N=[],R=a.body.getReader(),x=0,B,z,G=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>w(this,null,function*(){for(;;){let{done:K,value:E}=yield R.read();if(K)break;if(N.push(E),x+=E.length,r.reportProgress){z=r.responseType==="text"?(z??"")+(B??=new TextDecoder).decode(E,{stream:!0}):void 0;let v=()=>s.next({type:jr.DownloadProgress,total:C?+C:void 0,loaded:x,partialText:z});G?G.run(v):v()}}}));let Ie=this.concatChunks(N,x);try{let K=a.headers.get("Content-Type")??"";m=this.parseBody(r,Ie,K)}catch(K){s.error(new Vr({error:K,headers:new Wn(a.headers),status:a.status,statusText:a.statusText,url:aC(a)??r.urlWithParams}));return}}p===0&&(p=m?dC:0),p>=200&&p<300?(s.next(new Sa({body:m,headers:u,status:p,statusText:l,url:h})),s.complete()):s.error(new Vr({error:m,headers:u,status:p,statusText:l,url:h}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(MF,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),ym=class{};function vm(){}function PF(t){t.then(vm,vm)}function hC(t,e){return e(t)}function OF(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function kF(t,e,n){return(r,i)=>Lt(n,()=>e(r,s=>t(s,i)))}var FF=new L(""),_m=new L(""),LF=new L(""),fC=new L("",{providedIn:"root",factory:()=>!0});function VF(){let t=null;return(e,n)=>{t===null&&(t=(P(FF,{optional:!0})??[]).reduceRight(OF,hC));let r=P($n);if(P(fC)){let s=r.add();return t(e,n).pipe(Er(()=>r.remove(s)))}else return t(e,n)}}var cC=(()=>{let e=class e extends Ca{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=P($n),this.contributeToStability=P(fC)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(_m),...this.injector.get(LF,[])]));this.chain=i.reduceRight((s,o)=>kF(s,o,this.injector),hC)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Er(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)($(Xl),$(pt))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();var UF=/^\)\]\}',?\n/;function jF(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var uC=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new H(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Ee(i.\u0275loadImpl()):Q(null)).pipe(yt(()=>new oe(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((R,x)=>a.setRequestHeader(R,x.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let R=r.detectContentTypeHeader();R!==null&&a.setRequestHeader("Content-Type",R)}if(r.responseType){let R=r.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let u=r.serializeBody(),l=null,h=()=>{if(l!==null)return l;let R=a.statusText||"OK",x=new Wn(a.getAllResponseHeaders()),B=jF(a)||r.url;return l=new ed({headers:x,status:a.status,statusText:R,url:B}),l},p=()=>{let{headers:R,status:x,statusText:B,url:z}=h(),G=null;x!==SF&&(G=typeof a.response>"u"?a.responseText:a.response),x===0&&(x=G?dC:0);let Ie=x>=200&&x<300;if(r.responseType==="json"&&typeof G=="string"){let K=G;G=G.replace(UF,"");try{G=G!==""?JSON.parse(G):null}catch(E){G=K,Ie&&(Ie=!1,G={error:E,text:G})}}Ie?(o.next(new Sa({body:G,headers:R,status:x,statusText:B,url:z||void 0})),o.complete()):o.error(new Vr({error:G,headers:R,status:x,statusText:B,url:z||void 0}))},m=R=>{let{url:x}=h(),B=new Vr({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:x||void 0});o.error(B)},y=!1,C=R=>{y||(o.next(h()),y=!0);let x={type:jr.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(x.total=R.total),r.responseType==="text"&&a.responseText&&(x.partialText=a.responseText),o.next(x)},N=R=>{let x={type:jr.UploadProgress,loaded:R.loaded};R.lengthComputable&&(x.total=R.total),o.next(x)};return a.addEventListener("load",p),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),r.reportProgress&&(a.addEventListener("progress",C),u!==null&&a.upload&&a.upload.addEventListener("progress",N)),a.send(u),o.next({type:jr.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",p),a.removeEventListener("timeout",m),r.reportProgress&&(a.removeEventListener("progress",C),u!==null&&a.upload&&a.upload.removeEventListener("progress",N)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)($(zs))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),pC=new L(""),BF="XSRF-TOKEN",$F=new L("",{providedIn:"root",factory:()=>BF}),HF="X-XSRF-TOKEN",zF=new L("",{providedIn:"root",factory:()=>HF}),td=class{},qF=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yl(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)($(Je),$(Ut),$($F))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function GF(t,e){let n=t.url.toLowerCase();if(!P(pC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=P(td).getToken(),i=P(zF);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var gC=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(gC||{});function WF(t,e){return{\u0275kind:t,\u0275providers:e}}function KF(...t){let e=[RF,uC,cC,{provide:Ca,useExisting:cC},{provide:Xl,useFactory:()=>P(xF,{optional:!0})??P(uC)},{provide:_m,useValue:GF,multi:!0},{provide:pC,useValue:!0},{provide:td,useClass:qF}];for(let n of t)e.push(...n.\u0275providers);return Ft(e)}var lC=new L("");function QF(){return WF(gC.LegacyInterceptors,[{provide:lC,useFactory:VF},{provide:_m,useExisting:lC,multi:!0}])}var _8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=Qt({providers:[KF(QF())]});let t=e;return t})();var Em=class extends Ql{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dm=class t extends Em{static makeCurrent(){QT(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=YF();return n==null?null:JF(n)}resetBaseElement(){Ra=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yl(document.cookie,e)}},Ra=null;function YF(){return Ra=Ra||document.querySelector("base"),Ra?Ra.getAttribute("href"):null}function JF(t){return new URL(t,document.baseURI).pathname}var ZF=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),nd=new L(""),_C=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new H(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)($(nd),$(ye))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Ma=class{constructor(e){this._doc=e}},Im="ng-app-id",IC=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Jl(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Im}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Im),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Im,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)($(Je),$(Sg),$(Mg,8),$(Ut))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),wm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Tm=/%COMP%/g,wC="%COMP%",XF=`_nghost-${wC}`,eL=`_ngcontent-${wC}`,tL=!0,nL=new L("",{providedIn:"root",factory:()=>tL});function rL(t){return eL.replace(Tm,t)}function iL(t){return XF.replace(Tm,t)}function EC(t,e){return e.map(n=>n.replace(Tm,t))}var mC=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Jl(u),this.defaultRenderer=new Na(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ln.ShadowDom&&(i=ce(F({},i),{encapsulation:ln.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof rd?s.applyToHost(r):s instanceof xa&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case ln.Emulated:o=new rd(l,h,i,this.appId,p,a,u,m);break;case ln.ShadowDom:return new bm(l,h,r,i,a,u,this.nonce,m);default:o=new xa(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)($(_C),$(IC),$(Sg),$(nL),$(Je),$(Ut),$(ye),$(Mg))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),Na=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(wm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(yC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(yC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=wm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=wm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Fn.DashCase|Fn.Important)?e.style.setProperty(n,r,i&Fn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Fn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function yC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var bm=class extends Na{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=EC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xa=class extends Na{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?EC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},rd=class extends xa{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=rL(l),this.hostAttr=iL(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},sL=(()=>{let e=class e extends Ma{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)($(Je))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),oL=(()=>{let e=class e extends Ma{constructor(r){super(r),this.delegate=P(BT,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)($(Je))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})(),vC=["alt","control","meta","shift"],aL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},uL=(()=>{let e=class e extends Ma{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),vC.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=aL[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),vC.forEach(a=>{if(a!==s){let u=cL[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)($(Je))},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function q8(t,e){return jT(F({rootComponent:t},lL(e)))}function lL(t){return{appProviders:[...gL,...t?.providers??[]],platformProviders:pL}}function dL(){Dm.makeCurrent()}function hL(){return new kn}function fL(){return Mb(document),document}var pL=[{provide:Ut,useValue:hm},{provide:Rg,useValue:dL,multi:!0},{provide:Je,useFactory:fL,deps:[]}];var gL=[{provide:Al,useValue:"root"},{provide:kn,useFactory:hL,deps:[]},{provide:nd,useClass:sL,multi:!0,deps:[Je,ye,Ut]},{provide:nd,useClass:uL,multi:!0,deps:[Je]},{provide:nd,useClass:oL,multi:!0},mC,IC,_C,{provide:ks,useExisting:mC},{provide:zs,useClass:ZF,deps:[]},[]];var DC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)($(Je))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ie="primary",Wa=Symbol("RouteTitle"),Mm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Js(t){return new Mm(t)}function yL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function vL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!yn(t[n],e[n]))return!1;return!0}function yn(t,e){let n=t?Nm(t):void 0,r=e?Nm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!kC(t[i],e[i]))return!1;return!0}function Nm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function kC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function FC(t){return t.length>0?t[t.length-1]:null}function Hr(t){return Kf(t)?t:Ri(t)?Ee(Promise.resolve(t)):Q(t)}var _L={exact:VC,subset:UC},LC={exact:IL,subset:wL,ignored:()=>!0};function bC(t,e,n){return _L[n.paths](t.root,e.root,n.matrixParams)&&LC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function IL(t,e){return yn(t,e)}function VC(t,e,n){if(!Ni(t.segments,e.segments)||!od(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!VC(t.children[r],e.children[r],n))return!1;return!0}function wL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>kC(t[n],e[n]))}function UC(t,e,n){return jC(t,e,e.segments,n)}function jC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ni(i,n)||e.hasChildren()||!od(i,n,r))}else if(t.segments.length===n.length){if(!Ni(t.segments,n)||!od(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!UC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ni(t.segments,i)||!od(t.segments,i,r)||!t.children[ie]?!1:jC(t.children[ie],e,s,r)}}function od(t,e,n){return e.every((r,i)=>LC[n](t[i].parameters,r.parameters))}var Qn=class{constructor(e=new _e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){return bL.serialize(this)}},_e=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ad(this)}},Mi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Js(this.parameters),this._parameterMap}toString(){return $C(this)}};function EL(t,e){return Ni(t,e)&&t.every((n,r)=>yn(n.parameters,e[r].parameters))}function Ni(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function DL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===ie&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==ie&&(n=n.concat(e(i,r)))}),n}var Ka=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>new Zs,providedIn:"root"});let t=e;return t})(),Zs=class{parse(e){let n=new Pm(e);return new Qn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Pa(e.root,!0)}`,r=AL(e.queryParams),i=typeof e.fragment=="string"?`#${TL(e.fragment)}`:"";return`${n}${r}${i}`}},bL=new Zs;function ad(t){return t.segments.map(e=>$C(e)).join("/")}function Pa(t,e){if(!t.hasChildren())return ad(t);if(e){let n=t.children[ie]?Pa(t.children[ie],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==ie&&r.push(`${i}:${Pa(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=DL(t,(r,i)=>i===ie?[Pa(t.children[ie],!1)]:[`${i}:${Pa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[ie]!=null?`${ad(t)}/${n[0]}`:`${ad(t)}/(${n.join("//")})`}}function BC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function id(t){return BC(t).replace(/%3B/gi,";")}function TL(t){return encodeURI(t)}function xm(t){return BC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cd(t){return decodeURIComponent(t)}function TC(t){return cd(t.replace(/\+/g,"%20"))}function $C(t){return`${xm(t.path)}${CL(t.parameters)}`}function CL(t){return Object.entries(t).map(([e,n])=>`;${xm(e)}=${xm(n)}`).join("")}function AL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${id(n)}=${id(i)}`).join("&"):`${id(n)}=${id(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var SL=/^[^\/()?;#]+/;function Cm(t){let e=t.match(SL);return e?e[0]:""}var RL=/^[^\/()?;=#]+/;function ML(t){let e=t.match(RL);return e?e[0]:""}var NL=/^[^=?&#]+/;function xL(t){let e=t.match(NL);return e?e[0]:""}var PL=/^[^&#]+/;function OL(t){let e=t.match(PL);return e?e[0]:""}var Pm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ie]=new _e(e,n)),r}parseSegment(){let e=Cm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Mi(cd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=ML(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Cm(this.remaining);i&&(r=i,this.capture(r))}e[cd(n)]=cd(r)}parseQueryParam(e){let n=xL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=OL(this.remaining);o&&(r=o,this.capture(r))}let i=TC(n),s=TC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ie);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ie]:new _e([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function HC(t){return t.segments.length>0?new _e([],{[ie]:t}):t}function zC(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=zC(i);if(r===ie&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new _e(t.segments,e);return kL(n)}function kL(t){if(t.numberOfChildren===1&&t.children[ie]){let e=t.children[ie];return new _e(t.segments.concat(e.segments),e.children)}return t}function xi(t){return t instanceof Qn}function FL(t,e,n=null,r=null){let i=qC(t);return GC(i,e,n,r)}function qC(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new _e(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=HC(r);return e??i}function GC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Am(i,i,i,n,r);let s=LL(e);if(s.toRoot())return Am(i,i,new _e([],{}),n,r);let o=VL(s,i,t),a=o.processChildren?Fa(o.segmentGroup,o.index,s.commands):KC(o.segmentGroup,o.index,s.commands);return Am(i,o.segmentGroup,a,n,r)}function ud(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ua(t){return typeof t=="object"&&t!=null&&t.outlets}function Am(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=WC(t,e,n);let a=HC(zC(o));return new Qn(a,s,i)}function WC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=WC(s,e,n)}),new _e(t.segments,r)}var ld=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ud(r[0]))throw new H(4003,!1);let i=r.find(Ua);if(i&&i!==FC(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function LL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ld(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new ld(n,e,r)}var Ks=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function VL(t,e,n){if(t.isAbsolute)return new Ks(e,!0,0);if(!n)return new Ks(e,!1,NaN);if(n.parent===null)return new Ks(n,!0,0);let r=ud(t.commands[0])?0:1,i=n.segments.length-1+r;return UL(n,i,t.numberOfDoubleDots)}function UL(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new Ks(r,!1,i-s)}function jL(t){return Ua(t[0])?t[0].outlets:{[ie]:t}}function KC(t,e,n){if(t??=new _e([],{}),t.segments.length===0&&t.hasChildren())return Fa(t,e,n);let r=BL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new _e(t.segments.slice(0,r.pathIndex),{});return s.children[ie]=new _e(t.segments.slice(r.pathIndex),t.children),Fa(s,0,i)}else return r.match&&i.length===0?new _e(t.segments,{}):r.match&&!t.hasChildren()?Om(t,e,n):r.match?Fa(t,0,i):Om(t,e,n)}function Fa(t,e,n){if(n.length===0)return new _e(t.segments,{});{let r=jL(n),i={};if(Object.keys(r).some(s=>s!==ie)&&t.children[ie]&&t.numberOfChildren===1&&t.children[ie].segments.length===0){let s=Fa(t.children[ie],e,n);return new _e(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=KC(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new _e(t.segments,i)}}function BL(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ua(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!AC(u,l,o))return s;r+=2}else{if(!AC(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Om(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ua(s)){let u=$L(s.outlets);return new _e(r,u)}if(i===0&&ud(n[0])){let u=t.segments[e];r.push(new Mi(u.path,CC(n[0]))),i++;continue}let o=Ua(s)?s.outlets[ie]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ud(a)?(r.push(new Mi(o,CC(a))),i+=2):(r.push(new Mi(o,{})),i++)}return new _e(r,{})}function $L(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Om(new _e([],{}),0,r))}),e}function CC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function AC(t,e,n){return t==n.path&&yn(e,n.parameters)}var La="imperative",He=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(He||{}),Bt=class{constructor(e,n){this.id=e,this.url=n}},Xs=class extends Bt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=He.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tn=class extends Bt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=He.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(At||{}),dd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(dd||{}),Kn=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Br=class extends Bt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationSkipped}},ja=class extends Bt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=He.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hd=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},km=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fm=class extends Bt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=He.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Lm=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vm=class extends Bt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Um=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jm=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Bm=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$m=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hm=class{constructor(e){this.snapshot=e,this.type=He.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zm=class{constructor(e){this.snapshot=e,this.type=He.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=He.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ba=class{},eo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function HL(t,e){return t.providers&&!t._injector&&(t._injector=Bl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function en(t){return t.outlet||ie}function zL(t,e){let n=t.filter(r=>en(r)===e);return n.push(...t.filter(r=>en(r)!==e)),n}function Qa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var qm=class{get injector(){return Qa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ya(this.rootInjector),this.attachRef=null}},Ya=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new qm(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)($(pt))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Gm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Gm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Wm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wm(e,this._root).map(n=>n.value)}};function Gm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Gm(t,n);if(r)return r}return null}function Wm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Wm(t,n);if(r.length)return r.unshift(e),r}return[]}var Ct=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ws(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var gd=class extends pd{constructor(e,n){super(e),this.snapshot=n,ny(this,e)}toString(){return this.snapshot.toString()}};function QC(t){let e=qL(t),n=new We([new Mi("",{})]),r=new We({}),i=new We({}),s=new We({}),o=new We(""),a=new $r(n,r,s,o,i,ie,t,e.root);return a.snapshot=e.root,new gd(new Ct(a,[]),e)}function qL(t){let e={},n={},r={},i="",s=new Qs([],e,r,i,n,ie,t,null,{});return new yd("",new Ct(s,[]))}var $r=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Y(l=>l[Wa]))??Q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Js(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Js(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function md(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&JC(i)&&(r.resolve[Wa]=i.title),r}var Qs=class{get title(){return this.data?.[Wa]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Js(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Js(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},yd=class extends pd{constructor(e,n){super(n),this.url=e,ny(this,n)}toString(){return YC(this._root)}};function ny(t,e){e.value._routerState=t,e.children.forEach(n=>ny(t,n))}function YC(t){let e=t.children.length>0?` { ${t.children.map(YC).join(", ")} } `:"";return`${t.value}${e}`}function Sm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,yn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),yn(e.params,n.params)||t.paramsSubject.next(n.params),vL(e.url,n.url)||t.urlSubject.next(n.url),yn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Km(t,e){let n=yn(t.params,e.params)&&EL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Km(t.parent,e.parent))}function JC(t){return typeof t.title=="string"||t.title===null}var GL=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ie,this.activateEvents=new Ae,this.deactivateEvents=new Ae,this.attachEvents=new Ae,this.detachEvents=new Ae,this.parentContexts=P(Ya),this.location=P(Pr),this.changeDetector=P(Fr),this.inputBinder=P(wd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Qm(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Te({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zt]});let t=e;return t})(),Qm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===$r?this.route:e===Ya?this.childContexts:this.parent.get(e,n)}},wd=new L(""),SC=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=oa([i.queryParams,i.params,i.data]).pipe(yt(([o,a,u],l)=>(u=F(F(F({},o),a),u),l===0?Q(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=$T(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function WL(t,e,n){let r=$a(t,e._root,n?n._root:void 0);return new gd(r,e)}function $a(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=KL(t,e,n);return new Ct(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>$a(t,a)),o}}let r=QL(e.value),i=e.children.map(s=>$a(t,s));return new Ct(r,i)}}function KL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return $a(t,r,i);return $a(t,r)})}function QL(t){return new $r(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var Ha=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},ZC="ngNavigationCancelingError";function vd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=xi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=XC(!1,At.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function XC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ZC]=!0,n.cancellationCode=e,n}function YL(t){return e0(t)&&xi(t.url)}function e0(t){return!!t&&t[ZC]}var JL=(t,e,n,r)=>Y(i=>(new Ym(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ym=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Sm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ws(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ws(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ws(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ws(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new zm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $m(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Sm(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Sm(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},_d=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ys=class{constructor(e,n){this.component=e,this.route=n}};function ZL(t,e,n){let r=t._root,i=e?e._root:null;return Oa(r,i,n,[r.value])}function XL(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function no(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!mD(t)?t:e.get(t):r}function Oa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ws(e);return t.children.forEach(o=>{eV(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Va(a,n.getContext(o),i)),i}function eV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=tV(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new _d(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Oa(t,e,a?a.children:null,r,i):Oa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ys(a.outlet.component,o))}else o&&Va(e,a,i),i.canActivateChecks.push(new _d(r)),s.component?Oa(t,null,a?a.children:null,r,i):Oa(t,null,n,r,i);return i}function tV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ni(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ni(t.url,e.url)||!yn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Km(t,e)||!yn(t.queryParams,e.queryParams);case"paramsChange":default:return!Km(t,e)}}function Va(t,e,n){let r=Ws(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Va(o,e.children.getContext(s),n):Va(o,null,n):Va(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ys(e.outlet.component,i)):n.canDeactivateChecks.push(new Ys(null,i)):n.canDeactivateChecks.push(new Ys(null,i))}function Ja(t){return typeof t=="function"}function nV(t){return typeof t=="boolean"}function rV(t){return t&&Ja(t.canLoad)}function iV(t){return t&&Ja(t.canActivate)}function sV(t){return t&&Ja(t.canActivateChild)}function oV(t){return t&&Ja(t.canDeactivate)}function aV(t){return t&&Ja(t.canMatch)}function t0(t){return t instanceof qt||t?.name==="EmptyError"}var sd=Symbol("INITIAL_VALUE");function to(){return yt(t=>oa(t.map(e=>e.pipe(Pn(1),Bu(sd)))).pipe(Y(e=>{for(let n of e)if(n!==!0){if(n===sd)return sd;if(n===!1||cV(n))return n}return!0}),dt(e=>e!==sd),Pn(1)))}function cV(t){return xi(t)||t instanceof Ha}function uV(t,e){return Oe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Q(ce(F({},n),{guardsResult:!0})):lV(o,r,i,t).pipe(Oe(a=>a&&nV(a)?dV(r,s,t,e):Q(a)),Y(a=>ce(F({},n),{guardsResult:a})))})}function lV(t,e,n,r){return Ee(t).pipe(Oe(i=>mV(i.component,i.route,n,e,r)),an(i=>i!==!0,!0))}function dV(t,e,n,r){return Ee(e).pipe(xn(i=>ys(fV(i.route.parent,r),hV(i.route,r),gV(t,i.path,n),pV(t,i.route,n))),an(i=>i!==!0,!0))}function hV(t,e){return t!==null&&e&&e(new Hm(t)),Q(!0)}function fV(t,e){return t!==null&&e&&e(new Bm(t)),Q(!0)}function pV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Q(!0);let i=r.map(s=>Vu(()=>{let o=Qa(e)??n,a=no(s,o),u=iV(a)?a.canActivate(e,t):Lt(o,()=>a(e,t));return Hr(u).pipe(an())}));return Q(i).pipe(to())}function gV(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>XL(o)).filter(o=>o!==null).map(o=>Vu(()=>{let a=o.guards.map(u=>{let l=Qa(o.node)??n,h=no(u,l),p=sV(h)?h.canActivateChild(r,t):Lt(l,()=>h(r,t));return Hr(p).pipe(an())});return Q(a).pipe(to())}));return Q(s).pipe(to())}function mV(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Q(!0);let o=s.map(a=>{let u=Qa(e)??i,l=no(a,u),h=oV(l)?l.canDeactivate(t,e,n,r):Lt(u,()=>l(t,e,n,r));return Hr(h).pipe(an())});return Q(o).pipe(to())}function yV(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Q(!0);let s=i.map(o=>{let a=no(o,t),u=rV(a)?a.canLoad(e,n):Lt(t,()=>a(e,n));return Hr(u)});return Q(s).pipe(to(),n0(r))}function n0(t){return _u(ke(e=>{if(typeof e!="boolean")throw vd(t,e)}),Y(e=>e===!0))}function vV(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Q(!0);let s=i.map(o=>{let a=no(o,t),u=aV(a)?a.canMatch(e,n):Lt(t,()=>a(e,n));return Hr(u)});return Q(s).pipe(to(),n0(r))}var za=class{constructor(e){this.segmentGroup=e||null}},qa=class extends Error{constructor(e){super(),this.urlTree=e}};function Gs(t){return ms(new za(t))}function _V(t){return ms(new H(4e3,!1))}function IV(t){return ms(XC(!1,At.GuardRejected))}var Jm=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Q(r);if(i.numberOfChildren>1||!i.children[ie])return _V(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:C,title:N}=i,R=Lt(s,()=>a({params:y,data:C,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Qn)throw new qa(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new qa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Qn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new _e(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Zm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wV(t,e,n,r,i){let s=r0(t,e,n);return s.matched?(r=HL(e,r),vV(r,e,n,i).pipe(Y(o=>o===!0?s:F({},Zm)))):Q(s)}function r0(t,e,n){if(e.path==="**")return EV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Zm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||yL)(n,t,e);if(!i)return F({},Zm);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function EV(t){return{matched:!0,parameters:t.length>0?FC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function RC(t,e,n,r){return n.length>0&&TV(t,n,r)?{segmentGroup:new _e(e,bV(r,new _e(n,t.children))),slicedSegments:[]}:n.length===0&&CV(t,n,r)?{segmentGroup:new _e(t.segments,DV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new _e(t.segments,t.children),slicedSegments:n}}function DV(t,e,n,r){let i={};for(let s of n)if(Ed(t,e,s)&&!r[en(s)]){let o=new _e([],{});i[en(s)]=o}return F(F({},r),i)}function bV(t,e){let n={};n[ie]=e;for(let r of t)if(r.path===""&&en(r)!==ie){let i=new _e([],{});n[en(r)]=i}return n}function TV(t,e,n){return n.some(r=>Ed(t,e,r)&&en(r)!==ie)}function CV(t,e,n){return n.some(r=>Ed(t,e,r))}function Ed(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function AV(t,e,n){return e.length===0&&!t.children[n]}var Xm=class{};function SV(t,e,n,r,i,s,o="emptyOnly"){return new ey(t,e,n,r,i,o,s).recognize()}var RV=31,ey=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Jm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=RC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:n,rootSnapshot:r})=>{let i=new Ct(r,n),s=new yd("",i),o=FL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Qs([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,n).pipe(Y(r=>({children:r,rootSnapshot:n})),Ir(r=>{if(r instanceof qa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof za?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Y(o=>o instanceof Ct?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ee(s).pipe(xn(o=>{let a=r.children[o],u=zL(n,o);return this.processSegmentGroup(e,u,a,o,i)}),ju((o,a)=>(o.push(...a),o)),wr(null),Jf(),Oe(o=>{if(o===null)return Gs(r);let a=i0(o);return MV(a),Q(a)}))}processSegment(e,n,r,i,s,o,a){return Ee(n).pipe(xn(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(Ir(l=>{if(l instanceof za)return Q(null);throw l}))),an(u=>!!u),Ir(u=>{if(t0(u))return AV(r,i,s)?Q(new Xm):Gs(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return en(r)!==o&&(o===ie||!Ed(i,s,r))?Gs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):Gs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=r0(n,i,s);if(!u)return Gs(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>RV&&(this.allowRedirects=!1));let y=new Qs(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,MC(i),en(i),i.component??i._loadedComponent??null,i,NC(i)),C=md(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Oe(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=wV(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(yt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(yt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,C=new Qs(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,MC(r),en(r),r.component??r._loadedComponent??null,r,NC(r)),N=md(C,o,this.paramsInheritanceStrategy);C.params=Object.freeze(N.params),C.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:x}=RC(n,m,y,l);if(x.length===0&&R.hasChildren())return this.processChildren(h,l,R,C).pipe(Y(z=>new Ct(C,z)));if(l.length===0&&x.length===0)return Q(new Ct(C,[]));let B=en(r)===s;return this.processSegment(h,l,R,x,B?ie:s,!0,C).pipe(Y(z=>new Ct(C,z instanceof Ct?[z]:[])))}))):Gs(n)))}getChildConfig(e,n,r){return n.children?Q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Q({routes:n._loadedRoutes,injector:n._loadedInjector}):yV(e,n,r,this.urlSerializer).pipe(Oe(i=>i?this.configLoader.loadChildren(e,n).pipe(ke(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):IV(n))):Q({routes:[],injector:e})}};function MV(t){t.sort((e,n)=>e.value.outlet===ie?-1:n.value.outlet===ie?1:e.value.outlet.localeCompare(n.value.outlet))}function NV(t){let e=t.value.routeConfig;return e&&e.path===""}function i0(t){let e=[],n=new Set;for(let r of t){if(!NV(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=i0(r.children);e.push(new Ct(r.value,i))}return e.filter(r=>!n.has(r))}function MC(t){return t.data||{}}function NC(t){return t.resolve||{}}function xV(t,e,n,r,i,s){return Oe(o=>SV(t,e,n,r,o.extractedUrl,i,s).pipe(Y(({state:a,tree:u})=>ce(F({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function PV(t,e){return Oe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Q(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of s0(u))o.add(l);let a=0;return Ee(o).pipe(xn(u=>s.has(u)?OV(u,r,t,e):(u.data=md(u,u.parent,t).resolve,Q(void 0))),ke(()=>a++),vs(1),Oe(u=>a===o.size?Q(n):bt))})}function s0(t){let e=t.children.map(n=>s0(n)).flat();return[t,...e]}function OV(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!JC(i)&&(s[Wa]=i.title),kV(s,t,e,r).pipe(Y(o=>(t._resolvedData=o,t.data=md(t,t.parent,n).resolve,null)))}function kV(t,e,n,r){let i=Nm(t);if(i.length===0)return Q({});let s={};return Ee(i).pipe(Oe(o=>FV(t[o],e,n,r).pipe(an(),ke(a=>{if(a instanceof Ha)throw vd(new Zs,a);s[o]=a}))),vs(1),Yf(s),Ir(o=>t0(o)?bt:ms(o)))}function FV(t,e,n,r){let i=Qa(e)??r,s=no(t,i),o=s.resolve?s.resolve(e,n):Lt(i,()=>s(e,n));return Hr(o)}function Rm(t){return yt(e=>{let n=t(e);return n?Ee(n).pipe(Y(()=>e)):Q(e)})}var o0=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ie);return i}getResolvedTitleForRoute(r){return r.data[Wa]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>P(LV),providedIn:"root"});let t=e;return t})(),LV=(()=>{let e=class e extends o0{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)($(DC))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Za=new L("",{providedIn:"root",factory:()=>({})}),VV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Cl({type:e,selectors:[["ng-component"]],standalone:!0,features:[ql],decls:1,vars:0,template:function(i,s){i&1&&$s(0,"router-outlet")},dependencies:[GL],encapsulation:2});let t=e;return t})();function ry(t){let e=t.children&&t.children.map(ry),n=e?ce(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ie&&(n.component=VV),n}var Ga=new L(""),iy=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(Kl)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Q(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Hr(r.loadComponent()).pipe(Y(a0),ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Er(()=>{this.componentLoaders.delete(r)})),s=new hs(i,()=>new $e).pipe(ds());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Q({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=UV(i,this.compiler,r,this.onLoadEndListener).pipe(Er(()=>{this.childrenLoaders.delete(i)})),a=new hs(o,()=>new $e).pipe(ds());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function UV(t,e,n,r){return Hr(t.loadChildren()).pipe(Y(a0),Oe(i=>i instanceof fa||Array.isArray(i)?Q(i):Ee(e.compileModuleAsync(i))),Y(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Ga,[],{optional:!0,self:!0}).flat()),{routes:o.map(ry),injector:s}}))}function jV(t){return t&&typeof t=="object"&&"default"in t}function a0(t){return jV(t)?t.default:t}var sy=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>P(BV),providedIn:"root"});let t=e;return t})(),BV=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),c0=new L(""),u0=new L("");function $V(t,e,n){let r=t.get(u0),i=t.get(Je);return t.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),HV(t))),{onViewTransitionCreated:u}=r;return u&&Lt(t,()=>u({transition:a,from:e,to:n})),o})}function HV(t){return new Promise(e=>{Qg({read:()=>setTimeout(e)},{injector:t})})}var zV=new L(""),oy=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=P(iy),this.environmentInjector=P(pt),this.urlSerializer=P(Ka),this.rootContexts=P(Ya),this.location=P(qs),this.inputBindingEnabled=P(wd,{optional:!0})!==null,this.titleStrategy=P(o0),this.options=P(Za,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(sy),this.createViewTransition=P(c0,{optional:!0}),this.navigationErrorHandler=P(zV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Q(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Um(s)),i=s=>this.events.next(new jm(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ce(F(F({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new We({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:La,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dt(o=>o.id!==0),Y(o=>ce(F({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),yt(o=>{let a=!1,u=!1;return Q(o).pipe(yt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),bt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ce(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new Br(l.id,this.urlSerializer.serialize(l.rawUrl),m,dd.IgnoredSameUrlNavigation)),l.resolve(!1),bt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Q(l).pipe(yt(m=>{let y=this.transitions?.getValue();return this.events.next(new Xs(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?bt:Promise.resolve(m)}),xV(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ke(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=ce(F({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let y=new hd(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:y,source:C,restoredState:N,extras:R}=l,x=new Xs(m,this.urlSerializer.serialize(y),C,N);this.events.next(x);let B=QC(this.rootComponentType).snapshot;return this.currentTransition=o=ce(F({},l),{targetSnapshot:B,urlAfterRedirects:y,extras:ce(F({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Q(o)}else{let m="";return this.events.next(new Br(l.id,this.urlSerializer.serialize(l.extractedUrl),m,dd.IgnoredByUrlHandlingStrategy)),l.resolve(!1),bt}}),ke(l=>{let h=new km(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Y(l=>(this.currentTransition=o=ce(F({},l),{guards:ZL(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),uV(this.environmentInjector,l=>this.events.next(l)),ke(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw vd(this.urlSerializer,l.guardsResult);let h=new Fm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),dt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",At.GuardRejected),!1)),Rm(l=>{if(l.guards.canActivateChecks.length)return Q(l).pipe(ke(h=>{let p=new Lm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),yt(h=>{let p=!1;return Q(h).pipe(PV(this.paramsInheritanceStrategy,this.environmentInjector),ke({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",At.NoDataFromResolver)}}))}),ke(h=>{let p=new Vm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Rm(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(ke(y=>{p.component=y}),Y(()=>{})));for(let y of p.children)m.push(...h(y));return m};return oa(h(l.targetSnapshot.root)).pipe(wr(null),Pn(1))}),Rm(()=>this.afterPreactivation()),yt(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ee(p).pipe(Y(()=>o)):Q(o)}),Y(l=>{let h=WL(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ce(F({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),ke(()=>{this.events.next(new Ba)}),JL(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Pn(1),ke({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Zf(this.transitionAbortSubject.pipe(ke(l=>{throw l}))),Er(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ir(l=>{if(u=!0,e0(l))this.events.next(new Kn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),YL(l)?this.events.next(new eo(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let h=new ja(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=Lt(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof Ha){let{message:m,cancellationCode:y}=vd(this.urlSerializer,p);this.events.next(new Kn(o.id,this.urlSerializer.serialize(o.extractedUrl),m,y)),this.events.next(new eo(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let m=r.errorHandler(l);o.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return bt}))}))}cancelNavigationTransition(r,i,s){let o=new Kn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qV(t){return t!==La}var GV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>P(WV),providedIn:"root"});let t=e;return t})(),ty=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},WV=(()=>{let e=class e extends ty{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),l0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:()=>P(KV),providedIn:"root"});let t=e;return t})(),KV=(()=>{let e=class e extends l0{constructor(){super(...arguments),this.location=P(qs),this.urlSerializer=P(Ka),this.options=P(Za,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(sy),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=QC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Xs)this.stateMemento=this.createStateMemento();else if(r instanceof Br)this.rawUrlTree=i.initialUrl;else if(r instanceof hd){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Ba?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Kn&&(r.code===At.GuardRejected||r.code===At.NoDataFromResolver)?this.restoreHistory(i):r instanceof ja?this.restoreHistory(i,!0):r instanceof tn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Qn?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=F(F({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=F(F({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ka=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ka||{});function d0(t,e){t.events.pipe(dt(n=>n instanceof tn||n instanceof Kn||n instanceof ja||n instanceof Br),Y(n=>n instanceof tn||n instanceof Br?ka.COMPLETE:(n instanceof Kn?n.code===At.Redirect||n.code===At.SupersededByNewNavigation:!1)?ka.REDIRECTING:ka.FAILED),dt(n=>n!==ka.REDIRECTING),Pn(1)).subscribe(()=>{e()})}function QV(t){throw t}var YV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(Gl),this.stateManager=P(l0),this.options=P(Za,{optional:!0})||{},this.pendingTasks=P($n),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(oy),this.urlSerializer=P(Ka),this.location=P(qs),this.urlHandlingStrategy=P(sy),this._events=new $e,this.errorHandler=this.options.errorHandler||QV,this.navigated=!1,this.routeReuseStrategy=P(GV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Ga,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(wd,{optional:!0}),this.eventsSubscription=new Ne,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Kn&&i.code!==At.Redirect&&i.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof tn)this.navigated=!0;else if(i instanceof eo){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=F({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||qV(s.source)},a);this.scheduleNavigation(u,La,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}XV(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),La,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=F({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(ry),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":p=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let y=s?s.snapshot:this.routerState.snapshot.root;m=qC(y)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),m=this.currentUrlTree.root}return GC(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=xi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,La,null,i)}navigate(r,i={skipLocationChange:!1}){return ZV(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=F({},YV):i===!1?s=F({},JV):s=i,xi(r))return bC(this.currentUrlTree,r,s);let o=this.parseUrl(r);return bC(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,y)=>{u=m,l=y});let p=this.pendingTasks.add();return d0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new H(4008,!1)}function XV(t){return!(t instanceof Ba)&&!(t instanceof eo)}var xC=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof tn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(xi(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Pb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.routerLinkInput===null?null:xi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(q(vn),q($r),bg("tabindex"),q(Xt),q(gt),q(Gn))},e.\u0275dir=Te({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&It("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Ea("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Lr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Lr],replaceUrl:[2,"replaceUrl","replaceUrl",Lr],routerLink:"routerLink"},standalone:!0,features:[Kg,Zt]});let t=e;return t})(),u5=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,s,o,a){this.router=r,this.element=i,this.renderer=s,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Ae,this.routerEventsSubscription=r.events.subscribe(u=>{u instanceof tn&&this.update()})}ngAfterContentInit(){Q(this.links.changes,Q(null)).pipe(_r()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Ee(r).pipe(_r()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.isActiveChange.emit(r))})}isLinkActive(r){let i=eU(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let o=s.urlTree;return o?r.isActive(o,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)(q(vn),q(gt),q(Xt),q(Fr),q(xC,8))},e.\u0275dir=Te({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,o){if(i&1&&CT(o,xC,5),i&2){let a;AT(a=ST())&&(s.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Zt]});let t=e;return t})();function eU(t){return!!t.paths}var Id=class{};var tU=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(dt(r=>r instanceof tn),xn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Bl(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Ee(s).pipe(_r())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=Q(null);let o=s.pipe(Oe(a=>a===null?Q(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Ee([o,a]).pipe(_r())}else return o})}};e.\u0275fac=function(i){return new(i||e)($(vn),$(Kl),$(pt),$(Id),$(iy))},e.\u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),h0=new L(""),nU=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof tn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Br&&r.code===dd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof fd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){qb()},e.\u0275prov=U({token:e,factory:e.\u0275fac});let t=e;return t})();function l5(t,...e){return Ft([{provide:Ga,multi:!0,useValue:t},[],{provide:$r,useFactory:f0,deps:[vn]},{provide:ba,multi:!0,useFactory:p0},e.map(n=>n.\u0275providers)])}function f0(t){return t.routerState.root}function Xa(t,e){return{\u0275kind:t,\u0275providers:e}}function p0(){let t=P(Ke);return e=>{let n=t.get(kr);if(e!==n.components[0])return;let r=t.get(vn),i=t.get(g0);t.get(ay)===1&&r.initialNavigation(),t.get(m0,null,ae.Optional)?.setUpPreloading(),t.get(h0,null,ae.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var g0=new L("",{factory:()=>new $e}),ay=new L("",{providedIn:"root",factory:()=>1});function rU(){return Xa(2,[{provide:ay,useValue:0},{provide:Wl,multi:!0,deps:[Ke],useFactory:e=>{let n=e.get(YT,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(vn),s=e.get(g0);d0(i,()=>{r(!0)}),e.get(oy).afterPreactivation=()=>(r(!0),s.closed?Q(void 0):s),i.initialNavigation()}))}}])}function iU(){return Xa(3,[{provide:Wl,multi:!0,useFactory:()=>{let e=P(vn);return()=>{e.setUpLocationChangeListener()}}},{provide:ay,useValue:2}])}var m0=new L("");function sU(t){return Xa(0,[{provide:m0,useExisting:tU},{provide:Id,useExisting:t}])}function oU(){return Xa(8,[SC,{provide:wd,useExisting:SC}])}function aU(t){let e=[{provide:c0,useValue:$V},{provide:u0,useValue:F({skipNextTransition:!!t?.skipInitialTransition},t)}];return Xa(9,e)}var PC=new L("ROUTER_FORROOT_GUARD"),cU=[qs,{provide:Ka,useClass:Zs},vn,Ya,{provide:$r,useFactory:f0,deps:[vn]},iy,[]],d5=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[cU,[],{provide:Ga,multi:!0,useValue:r},{provide:PC,useFactory:hU,deps:[[vn,new st,new lg]]},{provide:Za,useValue:i||{}},i?.useHash?lU():dU(),uU(),i?.preloadingStrategy?sU(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?fU(i):[],i?.bindToComponentInputs?oU().\u0275providers:[],i?.enableViewTransitions?aU().\u0275providers:[],pU()]}}static forChild(r){return{ngModule:e,providers:[{provide:Ga,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)($(PC,8))},e.\u0275mod=Yt({type:e}),e.\u0275inj=Qt({});let t=e;return t})();function uU(){return{provide:h0,useFactory:()=>{let t=P(nC),e=P(ye),n=P(Za),r=P(oy),i=P(Ka);return n.scrollOffset&&t.setOffset(n.scrollOffset),new nU(i,r,t,e,n)}}}function lU(){return{provide:Gn,useClass:ZT}}function dU(){return{provide:Gn,useClass:lm}}function hU(t){return"guarded"}function fU(t){return[t.initialNavigation==="disabled"?iU().\u0275providers:[],t.initialNavigation==="enabledBlocking"?rU().\u0275providers:[]]}var OC=new L("");function pU(){return[{provide:OC,useFactory:p0},{provide:ba,multi:!0,useExisting:OC}]}var v0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gU=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new uy;let m=s<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},uy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},mU=function(t){let e=v0(t);return _0.encodeByteArray(e,!0)},ec=function(t){return mU(t).replace(/\./g,"")},dy=function(t){try{return _0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function yU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var vU=()=>yU().__FIREBASE_DEFAULTS__,_U=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&dy(t[1]);return e&&JSON.parse(e)},bd=()=>{try{return vU()||_U()||IU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hy=t=>{var e,n;return(n=(e=bd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},I0=t=>{let e=hy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fy=()=>{var t;return(t=bd())===null||t===void 0?void 0:t.config},py=t=>{var e;return(e=bd())===null||e===void 0?void 0:e[`_${t}`]};var Dd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function w0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ec(JSON.stringify(n)),ec(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function wU(){var t;let e=(t=bd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function D0(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function b0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function T0(){let t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C0(){return!wU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gy(){try{return typeof indexedDB=="object"}catch{return!1}}function A0(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var EU="FirebaseError",St=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EU,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yn.prototype.create)}},Yn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?DU(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new St(i,a,r)}};function DU(t,e){return t.replace(bU,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var bU=/\{\$([^}]+)}/g;function S0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(y0(s)&&y0(o)){if(!Pi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function y0(t){return t!==null&&typeof t=="object"}function tc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ro(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function io(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function R0(t,e){let n=new ly(t,e);return n.subscribe.bind(n)}var ly=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=cy),i.error===void 0&&(i.error=cy),i.complete===void 0&&(i.complete=cy);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TU(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cy(){}var p5=4*60*60*1e3;function Ze(t){return t&&t._delegate?t._delegate:t}var $t=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Oi="[DEFAULT]";var my=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Dd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AU(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function CU(t){return t===Oi?void 0:t}function AU(t){return t.instantiationMode==="EAGER"}var Td=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new my(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var SU=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),RU={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},MU=le.INFO,NU={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},xU=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=NU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zr=class{constructor(e){this.name=e,this._logLevel=MU,this._logHandler=xU,this._userLogHandler=null,SU.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var PU=(t,e)=>e.some(n=>t instanceof n),M0,N0;function OU(){return M0||(M0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kU(){return N0||(N0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var x0=new WeakMap,vy=new WeakMap,P0=new WeakMap,yy=new WeakMap,Iy=new WeakMap;function FU(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(_n(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&x0.set(n,t)}).catch(()=>{}),Iy.set(e,t),e}function LU(t){if(vy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vy.set(t,e)}var _y={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||P0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _n(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function O0(t){_y=t(_y)}function VU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Cd(this),e,...n);return P0.set(r,e.sort?e.sort():[e]),_n(r)}:kU().includes(t)?function(...e){return t.apply(Cd(this),e),_n(x0.get(this))}:function(...e){return _n(t.apply(Cd(this),e))}}function UU(t){return typeof t=="function"?VU(t):(t instanceof IDBTransaction&&LU(t),PU(t,OU())?new Proxy(t,_y):t)}function _n(t){if(t instanceof IDBRequest)return FU(t);if(yy.has(t))return yy.get(t);let e=UU(t);return e!==t&&(yy.set(t,e),Iy.set(e,t)),e}var Cd=t=>Iy.get(t);function F0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=_n(o);return r&&o.addEventListener("upgradeneeded",u=>{r(_n(o.result),u.oldVersion,u.newVersion,_n(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var jU=["get","getKey","getAll","getAllKeys","count"],BU=["put","add","delete","clear"],wy=new Map;function k0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wy.get(e))return wy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=BU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jU.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return wy.set(e,s),s}O0(t=>ce(F({},t),{get:(e,n,r)=>k0(e,n)||t.get(e,n,r),has:(e,n)=>!!k0(e,n)||t.has(e,n)}));var Dy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($U(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function $U(t){let e=t.getComponent();return e?.type==="VERSION"}var by="@firebase/app",L0="0.10.10";var Jn=new zr("@firebase/app"),HU="@firebase/app-compat",zU="@firebase/analytics-compat",qU="@firebase/analytics",GU="@firebase/app-check-compat",WU="@firebase/app-check",KU="@firebase/auth",QU="@firebase/auth-compat",YU="@firebase/database",JU="@firebase/database-compat",ZU="@firebase/functions",XU="@firebase/functions-compat",ej="@firebase/installations",tj="@firebase/installations-compat",nj="@firebase/messaging",rj="@firebase/messaging-compat",ij="@firebase/performance",sj="@firebase/performance-compat",oj="@firebase/remote-config",aj="@firebase/remote-config-compat",cj="@firebase/storage",uj="@firebase/storage-compat",lj="@firebase/firestore",dj="@firebase/vertexai-preview",hj="@firebase/firestore-compat",fj="firebase",pj="10.13.1";var Ty="[DEFAULT]",gj={[by]:"fire-core",[HU]:"fire-core-compat",[qU]:"fire-analytics",[zU]:"fire-analytics-compat",[WU]:"fire-app-check",[GU]:"fire-app-check-compat",[KU]:"fire-auth",[QU]:"fire-auth-compat",[YU]:"fire-rtdb",[JU]:"fire-rtdb-compat",[ZU]:"fire-fn",[XU]:"fire-fn-compat",[ej]:"fire-iid",[tj]:"fire-iid-compat",[nj]:"fire-fcm",[rj]:"fire-fcm-compat",[ij]:"fire-perf",[sj]:"fire-perf-compat",[oj]:"fire-rc",[aj]:"fire-rc-compat",[cj]:"fire-gcs",[uj]:"fire-gcs-compat",[lj]:"fire-fst",[hj]:"fire-fst-compat",[dj]:"fire-vertex","fire-js":"fire-js",[fj]:"fire-js-all"};var nc=new Map,mj=new Map,Cy=new Map;function V0(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gr(t){let e=t.name;if(Cy.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;Cy.set(e,t);for(let n of nc.values())V0(n,t);for(let n of mj.values())V0(n,t);return!0}function ic(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t.settings!==void 0}var yj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new Yn("app","Firebase",yj);var Ay=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}};var Wr=pj;function My(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ty,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qr.create("bad-app-name",{appName:String(i)});if(n||(n=fy()),!n)throw qr.create("no-options");let s=nc.get(i);if(s){if(Pi(n,s.options)&&Pi(r,s.config))return s;throw qr.create("duplicate-app",{appName:i})}let o=new Td(i);for(let u of Cy.values())o.addComponent(u);let a=new Ay(n,r,o);return nc.set(i,a),a}function so(t=Ty){let e=nc.get(t);if(!e&&t===Ty&&fy())return My();if(!e)throw qr.create("no-app",{appName:t});return e}function Ad(){return Array.from(nc.values())}function Be(t,e,n){var r;let i=(r=gj[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(a.join(" "));return}Gr(new $t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var vj="firebase-heartbeat-database",_j=1,rc="firebase-heartbeat-store",Ey=null;function $0(){return Ey||(Ey=F0(vj,_j,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rc)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),Ey}function Ij(t){return w(this,null,function*(){try{let n=(yield $0()).transaction(rc),r=yield n.objectStore(rc).get(H0(t));return yield n.done,r}catch(e){if(e instanceof St)Jn.warn(e.message);else{let n=qr.create("idb-get",{originalErrorMessage:e?.message});Jn.warn(n.message)}}})}function U0(t,e){return w(this,null,function*(){try{let r=(yield $0()).transaction(rc,"readwrite");yield r.objectStore(rc).put(e,H0(t)),yield r.done}catch(n){if(n instanceof St)Jn.warn(n.message);else{let r=qr.create("idb-set",{originalErrorMessage:n?.message});Jn.warn(r.message)}}})}function H0(t){return`${t.name}!${t.options.appId}`}var wj=1024,Ej=30*24*60*60*1e3,Sy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ry(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=j0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Ej}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Jn.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=j0(),{heartbeatsToSend:r,unsentEntries:i}=Dj(this._heartbeatsCache.heartbeats),s=ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Jn.warn(n),""}})}};function j0(){return new Date().toISOString().substring(0,10)}function Dj(t,e=wj){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),B0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),B0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ry=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return gy()?A0().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Ij(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return U0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return U0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function B0(t){return ec(JSON.stringify({version:2,heartbeats:t})).length}function bj(t){Gr(new $t("platform-logger",e=>new Dy(e),"PRIVATE")),Gr(new $t("heartbeat",e=>new Sy(e),"PRIVATE")),Be(by,L0,t),Be(by,L0,"esm2017"),Be("fire-js","")}bj("");var Tj="firebase",Cj="10.13.1";Be(Tj,Cj,"app");var Fi=new Vn("ANGULARFIRE2_VERSION");function Rd(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var sc=(t,e)=>{let n=e?[e]:Ad(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ao=class{constructor(){return sc(Aj)}},Aj="app-check";function oo(){}var Sd=class{zone;delegate;constructor(e,n=Gf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Ny=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oo,{},oo,oo)),n.pipe(ke({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},co=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Sd(Zone.current)),this.insideAngular=n.run(()=>new Sd(Zone.current,qf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)($(ye))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Md(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Sj(t){return Md().ngZone.runOutsideAngular(()=>t())}function ki(t){return Md().ngZone.run(()=>t())}function Rj(t){return Mj(Md())(t)}function Mj(t){return function(n){return n=n.lift(new Ny(t.ngZone)),n.pipe(vr(t.outsideAngular),yr(t.insideAngular))}}var Nj=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ki(()=>t.apply(void 0,r))},wt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ki(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oo,{},oo,oo))),r[s]=Nj(r[s],n));let i=Sj(()=>t.apply(this,r));if(!e)if(i instanceof oe){let s=Md();return i.pipe(vr(s.outsideAngular),yr(s.insideAngular))}else return ki(()=>i);return i instanceof oe?i.pipe(Rj):i instanceof Promise?ki(()=>new Promise((s,o)=>i.then(a=>ki(()=>s(a)),a=>ki(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ki(()=>i)};var Zn=class{constructor(e){return e}},Li=class{constructor(){return Ad()}};function xj(t){return t&&t.length===1?t[0]:new Zn(so())}var xy=new L("angularfire2._apps"),Pj={provide:Zn,useFactory:xj,deps:[[new st,xy]]},Oj={provide:Li,deps:[[new st,xy]]};function kj(t){return(e,n)=>{let r=n.get(Ut);Be("angularfire",Fi.full,"core"),Be("angularfire",Fi.full,"app"),Be("angular",PT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Zn(i)}}function eK(t,...e){return Ft([Pj,Oj,{provide:xy,useFactory:kj(t),multi:!0,deps:[ye,Ke,co,...e]}])}var tK=wt(My,!0);function oA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var aA=oA,cA=new Yn("auth","Firebase",oA());var Fd=new zr("@firebase/auth");function Fj(t,...e){Fd.logLevel<=le.WARN&&Fd.warn(`Auth (${Wr}): ${t}`,...e)}function xd(t,...e){Fd.logLevel<=le.ERROR&&Fd.error(`Auth (${Wr}): ${t}`,...e)}function wn(t,...e){throw tv(t,...e)}function Vi(t,...e){return tv(t,...e)}function uA(t,e,n){let r=Object.assign(Object.assign({},aA()),{[e]:n});return new Yn("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return uA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cA.create(t,...e)}function J(t,e,...n){if(!t)throw tv(e,...n)}function Xn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw xd(e),new Error(e)}function Qr(t,e){t||Xn(e)}function Fy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Lj(){return z0()==="http:"||z0()==="https:"}function z0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Vj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lj()||D0()||"connection"in navigator)?navigator.onLine:!0}function Uj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ui=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qr(n>e,"Short delay should be less than long delay!"),this.isMobile=E0()||b0()}get(){return Vj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function nv(t,e){Qr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ld=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var jj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Bj=new Ui(3e4,6e4);function Yr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Jr(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return lA(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=tc(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),Ld.fetch()(dA(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function lA(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},jj),e);try{let i=new Ly(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Nd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Nd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Nd(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw uA(t,h,l);wn(t,h)}}catch(i){if(i instanceof St)throw i;wn(t,"network-request-failed",{message:String(i)})}})}function fc(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield Jr(t,e,n,r,i);return"mfaPendingCredential"in l&&wn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function dA(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?nv(t.config,i):`${t.config.apiScheme}://${i}`}function $j(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ly=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vi(this.auth,"network-request-failed")),Bj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Nd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Vi(t,e,r);return i.customData._tokenResponse=n,i}function q0(t){return t!==void 0&&t.enterprise!==void 0}var Vy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $j(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Hj(t,e){return w(this,null,function*(){return Jr(t,"GET","/v2/recaptchaConfig",Yr(t,e))})}function zj(t,e){return w(this,null,function*(){return Jr(t,"POST","/v1/accounts:delete",e)})}function hA(t,e){return w(this,null,function*(){return Jr(t,"POST","/v1/accounts:lookup",e)})}function oc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function rv(t,e=!1){return w(this,null,function*(){let n=Ze(t),r=yield n.getIdToken(e),i=iv(r);J(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:oc(Py(i.auth_time)),issuedAtTime:oc(Py(i.iat)),expirationTime:oc(Py(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Py(t){return Number(t)*1e3}function iv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xd("JWT malformed, contained fewer than 3 sections"),null;try{let i=dy(n);return i?JSON.parse(i):(xd("Failed to decode base64 JWT payload"),null)}catch(i){return xd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function G0(t){let e=iv(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function cc(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof St&&qj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function qj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Uy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var uc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oc(this.lastLoginAt),this.creationTime=oc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Vd(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield cc(t,hA(n,{idToken:r}));J(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fA(s.providerUserInfo):[],a=Gj(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new uc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function sv(t){return w(this,null,function*(){let e=Ze(t);yield Vd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Gj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fA(t){return t.map(e=>{var{providerId:n}=e,r=Wf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Wj(t,e){return w(this,null,function*(){let n=yield lA(t,{},()=>w(this,null,function*(){let r=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=dA(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ld.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Kj(t,e){return w(this,null,function*(){return Jr(t,"POST","/v2/accounts:revokeToken",Yr(t,e))})}var ac=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");let n=G0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Wj(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(J(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Xn("not implemented")}};function Kr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var uo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Wf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new uc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield cc(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return rv(this,e)}reload(){return sv(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Vd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(nn(this.auth.app))return Promise.reject(tr(this.auth));let e=yield this.getIdToken();return yield cc(this,zj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:G,isAnonymous:Ie,providerData:K,stsTokenManager:E}=n;J(z&&E,e,"internal-error");let v=ac.fromJSON(this.name,E);J(typeof z=="string",e,"internal-error"),Kr(p,e.name),Kr(m,e.name),J(typeof G=="boolean",e,"internal-error"),J(typeof Ie=="boolean",e,"internal-error"),Kr(y,e.name),Kr(C,e.name),Kr(N,e.name),Kr(R,e.name),Kr(x,e.name),Kr(B,e.name);let _=new t({uid:z,auth:e,email:m,emailVerified:G,displayName:p,isAnonymous:Ie,photoURL:C,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:x,lastLoginAt:B});return K&&Array.isArray(K)&&(_.providerData=K.map(D=>Object.assign({},D))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new ac;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Vd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];J(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?fA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ac;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new uc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var W0=new Map;function er(t){Qr(t instanceof Function,"Expected a class definition");let e=W0.get(t);return e?(Qr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W0.set(t,e),e)}var Qj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),jy=Qj;function Pd(t,e,n){return`firebase:${t}:${e}:${n}`}var Ud=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Pd(this.userKey,i.apiKey,s),this.fullPersistenceKey=Pd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?uo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(er(jy),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||er(jy),o=Pd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=uo._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function K0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_A(e))return"Blackberry";if(IA(e))return"Webos";if(gA(e))return"Safari";if((e.includes("chrome/")||mA(e))&&!e.includes("edge/"))return"Chrome";if(vA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function pA(t=ze()){return/firefox\//i.test(t)}function gA(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mA(t=ze()){return/crios\//i.test(t)}function yA(t=ze()){return/iemobile/i.test(t)}function vA(t=ze()){return/android/i.test(t)}function _A(t=ze()){return/blackberry/i.test(t)}function IA(t=ze()){return/webos/i.test(t)}function ov(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Yj(t=ze()){var e;return ov(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Jj(){return T0()&&document.documentMode===10}function wA(t=ze()){return ov(t)||vA(t)||IA(t)||_A(t)||/windows phone/i.test(t)||yA(t)}function EA(t,e=[]){let n;switch(t){case"Browser":n=K0(ze());break;case"Worker":n=`${K0(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${r}`}var By=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Zj(n){return w(this,arguments,function*(t,e={}){return Jr(t,"GET","/v2/passwordPolicy",Yr(t,e))})}var Xj=6,$y=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Xj,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Hy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jd(this),this.idTokenSubscription=new jd(this),this.beforeStateQueue=new By(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ud.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield hA(this,{idToken:e}),r=yield uo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(nn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield Vd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Uj()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(nn(this.app))return Promise.reject(tr(this));let n=e?Ze(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return nn(this.app)?Promise.reject(tr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return nn(this.app)?Promise.reject(tr(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(er(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield Zj(this),n=new $y(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Kj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&er(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=yield Ud.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Fj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Bi(t){return Ze(t)}var jd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=R0(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wd={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e2(t){Wd=t}function DA(t){return Wd.loadJS(t)}function t2(){return Wd.recaptchaEnterpriseScript}function n2(){return Wd.gapiScript}function bA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var r2="recaptcha-enterprise",i2="NO_RECAPTCHA",zy=class{constructor(e){this.type=r2,this.auth=Bi(e)}verify(e="verify",n=!1){return w(this,null,function*(){function r(s){return w(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>w(this,null,function*(){Hj(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Vy(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;q0(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(i2)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&q0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=t2();u.length!==0&&(u+=a),DA(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function Q0(t,e,n,r=!1){return w(this,null,function*(){let i=new zy(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function qy(t,e,n,r){return w(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Q0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>w(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Q0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function av(t,e){let n=ic(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Pi(s,e??{}))return i;wn(i,"already-initialized")}return n.initialize({options:e})}function s2(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(er);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function cv(t,e,n){let r=Bi(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=TA(e),{host:o,port:a}=o2(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||a2()}function TA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function o2(t){let e=TA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Y0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Y0(o)}}}function Y0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function a2(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var lc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}};function c2(t,e){return w(this,null,function*(){return Jr(t,"POST","/v1/accounts:signUp",e)})}function u2(t,e){return w(this,null,function*(){return fc(t,"POST","/v1/accounts:signInWithPassword",Yr(t,e))})}function l2(t,e){return w(this,null,function*(){return fc(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,e))})}function d2(t,e){return w(this,null,function*(){return fc(t,"POST","/v1/accounts:signInWithEmailLink",Yr(t,e))})}var dc=class t extends lc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return w(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qy(e,n,"signInWithPassword",u2);case"emailLink":return l2(e,{email:this._email,oobCode:this._password});default:wn(e,"internal-error")}})}_linkToIdToken(e,n){return w(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qy(e,r,"signUpPassword",c2);case"emailLink":return d2(e,{idToken:n,email:this._email,oobCode:this._password});default:wn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Oy(t,e){return w(this,null,function*(){return fc(t,"POST","/v1/accounts:signInWithIdp",Yr(t,e))})}function h2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f2(t){let e=ro(io(t)).link,n=e?ro(io(e)).deep_link_id:null,r=ro(io(t)).deep_link_id;return(r?ro(io(r)).link:null)||r||n||e||t}var Bd=class t{constructor(e){var n,r,i,s,o,a;let u=ro(io(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=h2((i=u.mode)!==null&&i!==void 0?i:null);J(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=f2(e);try{return new t(n)}catch{return null}}};var CA=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return dc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Bd.parseLink(r);return J(i,"argument-error"),dc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),$d=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Gy=class extends $d{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function p2(t,e){return w(this,null,function*(){return fc(t,"POST","/v1/accounts:signUp",Yr(t,e))})}var lo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield uo._fromIdTokenResponse(e,r,i),o=J0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=J0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function J0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Wy=class t extends St{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function AA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wy._fromErrorAndOperation(t,s,e,r):s})}function g2(t,e,n=!1){return w(this,null,function*(){let r=yield cc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return lo._forOperation(t,"link",r)})}function m2(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(nn(r.app))return Promise.reject(tr(r));let i="reauthenticate";try{let s=yield cc(t,AA(r,i,e,t),n);J(s.idToken,r,"internal-error");let o=iv(s.idToken);J(o,r,"internal-error");let{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),lo._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&wn(r,"user-mismatch"),s}})}function SA(t,e,n=!1){return w(this,null,function*(){if(nn(t.app))return Promise.reject(tr(t));let r="signIn",i=yield AA(t,r,e),s=yield lo._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function uv(t,e){return w(this,null,function*(){return SA(Bi(t),e)})}function RA(t){return w(this,null,function*(){let e=Bi(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function lv(t,e,n){return w(this,null,function*(){if(nn(t.app))return Promise.reject(tr(t));let r=Bi(t),o=yield qy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&RA(t),u}),a=yield lo._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function dv(t,e,n){return nn(t.app)?Promise.reject(tr(t)):uv(Ze(t),CA.credential(e,n)).catch(r=>w(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&RA(t),r}))}function hv(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function fv(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function pv(t){return Ze(t).signOut()}var Hd="__sak";var zd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var y2=1e3,v2=10,_2=(()=>{class t extends zd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Jj()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,v2):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},y2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield pr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield pr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield pr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),MA=_2;var I2=(()=>{class t extends zd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),gv=I2;function w2(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var E2=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield w2(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function NA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Ky=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=NA("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function In(){return window}function D2(t){In().location.href=t}function xA(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}function b2(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function T2(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function C2(){return xA()?self:null}var PA="firebaseLocalStorageDb",A2=1,qd="firebaseLocalStorage",OA="fbase_key",ji=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Kd(t,e){return t.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function S2(){let t=indexedDB.deleteDatabase(PA);return new ji(t).toPromise()}function Qy(){let t=indexedDB.open(PA,A2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(qd,{keyPath:OA})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(qd)?e(r):(r.close(),yield S2(),e(yield Qy()))}))})}function Z0(t,e,n){return w(this,null,function*(){let r=Kd(t,!0).put({[OA]:e,value:n});return new ji(r).toPromise()})}function R2(t,e){return w(this,null,function*(){let n=Kd(t,!1).get(e),r=yield new ji(n).toPromise();return r===void 0?null:r.value})}function X0(t,e){let n=Kd(t,!0).delete(e);return new ji(n).toPromise()}var M2=800,N2=3,x2=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield Qy(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>N2)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return xA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=E2._getInstance(C2()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield b2(),!this.activeServiceWorker)return;this.sender=new Ky(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||T2()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Qy();return yield Z0(n,Hd,"1"),yield X0(n,Hd),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>Z0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>R2(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>X0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=Kd(s,!1).getAll();return new ji(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),M2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),kA=x2;var uK=bA("rcb"),lK=new Ui(3e4,6e4);function P2(t,e){return e?er(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var hc=class extends lc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oy(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oy(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oy(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function O2(t){return SA(t.auth,new hc(t),t.bypassAuthState)}function k2(t){let{auth:e,user:n}=t;return J(n,e,"internal-error"),m2(n,new hc(t),t.bypassAuthState)}function F2(t){return w(this,null,function*(){let{auth:e,user:n}=t;return J(n,e,"internal-error"),g2(n,new hc(t),t.bypassAuthState)})}var Yy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O2;case"linkViaPopup":case"linkViaRedirect":return F2;case"reauthViaPopup":case"reauthViaRedirect":return k2;default:wn(this.auth,"internal-error")}}resolve(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var dK=new Ui(2e3,1e4);var L2="pendingRedirect",Od=new Map,Jy=class t extends Yy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=Od.get(this.auth._key());if(!e){try{let r=(yield V2(this.resolver,this.auth))?yield pr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return pr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,pr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function V2(t,e){return w(this,null,function*(){let n=B2(e),r=j2(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function U2(t,e){Od.set(t._key(),e)}function j2(t){return er(t._redirectPersistence)}function B2(t){return Pd(L2,t.config.apiKey,t.name)}function $2(t,e,n=!1){return w(this,null,function*(){if(nn(t.app))return Promise.reject(tr(t));let r=Bi(t),i=P2(r,e),o=yield new Jy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var H2=10*60*1e3,Zy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H2&&this.cachedEventUids.clear(),this.cachedEventUids.has(eA(e))}saveEventToCache(e){this.cachedEventUids.add(eA(e)),this.lastProcessedEventTime=Date.now()}};function eA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function z2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FA(t);default:return!1}}function q2(n){return w(this,arguments,function*(t,e={}){return Jr(t,"GET","/v1/projects",e)})}var G2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W2=/^https?/;function K2(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield q2(t);for(let n of e)try{if(Q2(n))return}catch{}wn(t,"unauthorized-domain")})}function Q2(t){let e=Fy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!W2.test(n))return!1;if(G2.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Y2=new Ui(3e4,6e4);function tA(){let t=In().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function J2(t){return new Promise((e,n)=>{var r,i,s;function o(){tA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tA(),n(Vi(t,"network-request-failed"))},timeout:Y2.get()})}if(!((i=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=In().gapi)===null||s===void 0)&&s.load)o();else{let a=bA("iframefcb");return In()[a]=()=>{gapi.load?o():n(Vi(t,"network-request-failed"))},DA(`${n2()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw kd=null,e})}var kd=null;function Z2(t){return kd=kd||J2(t),kd}var X2=new Ui(5e3,15e3),eB="__/auth/iframe",tB="emulator/auth/iframe",nB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iB(t){let e=t.config;J(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?nv(e,tB):`https://${t.config.authDomain}/${eB}`,r={apiKey:e.apiKey,appName:t.name,v:Wr},i=rB.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${tc(r).slice(1)}`}function sB(t){return w(this,null,function*(){let e=yield Z2(t),n=In().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:iB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nB,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Vi(t,"network-request-failed"),a=In().setTimeout(()=>{s(o)},X2.get());function u(){In().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var oB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aB=500,cB=600,uB="_blank",lB="http://localhost",Gd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function dB(t,e,n,r=aB,i=cB){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},oB),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ze().toLowerCase();n&&(a=mA(l)?uB:n),pA(l)&&(e=e||lB,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(Yj(l)&&a!=="_self")return hB(e||"",a),new Gd(null);let p=window.open(e||"",a,h);J(p,t,"popup-blocked");try{p.focus()}catch{}return new Gd(p)}function hB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var fB="__/auth/handler",pB="emulator/auth/handler",gB=encodeURIComponent("fac");function nA(t,e,n,r,i,s){return w(this,null,function*(){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wr,eventId:i};if(e instanceof $d){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",S0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Gy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${gB}=${encodeURIComponent(u)}`:"";return`${mB(t)}?${tc(a).slice(1)}${l}`})}function mB({config:t}){return t.emulator?nv(t,pB):`https://${t.authDomain}/${fB}`}var ky="webStorageSupport",Xy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gv,this._completeRedirectFn=$2,this._overrideRedirectResult=U2}_openPopup(e,n,r,i){return w(this,null,function*(){var s;Qr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield nA(e,n,r,Fy(),i);return dB(e,o,NA())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield nA(e,n,r,Fy(),i);return D2(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield sB(e),r=new Zy(e);return n.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ky,{type:ky},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[ky];o!==void 0&&n(!!o),wn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=K2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wA()||gA()||ov()}},LA=Xy;var rA="@firebase/auth",iA="1.7.8";var ev=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function yB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vB(t){Gr(new $t("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EA(t)},l=new Hy(r,i,s,u);return s2(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Gr(new $t("auth-internal",e=>{let n=Bi(e.getProvider("auth").getImmediate());return(r=>new ev(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(rA,iA,yB(t)),Be(rA,iA,"esm2017")}var _B=5*60,IB=py("authIdTokenMaxAge")||_B,sA=null,wB=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>IB)return;let i=n?.token;sA!==i&&(sA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function mv(t=so()){let e=ic(t,"auth");if(e.isInitialized())return e.getImmediate();let n=av(t,{popupRedirectResolver:LA,persistence:[kA,MA,gv]}),r=py("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=wB(s.toString());fv(n,o,()=>o(n.currentUser)),hv(n,a=>o(a))}}let i=hy("auth");return i&&cv(n,`http://${i}`),n}function EB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}e2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Vi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",EB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vB("Browser");var VA="auth",nr=class{constructor(e){return e}},pc=class{constructor(){return sc(VA)}};var yv=new L("angularfire2.auth-instances");function h$(t,e){let n=Rd(VA,t,e);return n&&new nr(n)}function f$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new nr(r)}}var p$={provide:pc,deps:[[new st,yv]]},g$={provide:nr,useFactory:h$,deps:[[new st,yv],Zn]};function KK(t,...e){return Be("angularfire",Fi.full,"auth"),Ft([g$,p$,{provide:yv,useFactory:f$(t),multi:!0,deps:[ye,Ke,co,Li,[new st,ao],...e]}])}var QK=wt(lv,!0);var YK=wt(mv,!0);var JK=wt(dv,!0);var ZK=wt(pv,!0);var jA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},BA={};var Zr,vv;(function(){var t;function e(E,v){function _(){}_.prototype=v.prototype,E.D=v.prototype,E.prototype=new _,E.prototype.constructor=E,E.C=function(D,b,A){for(var I=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)I[Sn-2]=arguments[Sn];return v.prototype[b].apply(D,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,_){_||(_=0);var D=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)D[b]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(b=0;16>b;++b)D[b]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=E.g[0],_=E.g[1],b=E.g[2];var A=E.g[3],I=v+(A^_&(b^A))+D[0]+3614090360&4294967295;v=_+(I<<7&4294967295|I>>>25),I=A+(b^v&(_^b))+D[1]+3905402710&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(_^A&(v^_))+D[2]+606105819&4294967295,b=A+(I<<17&4294967295|I>>>15),I=_+(v^b&(A^v))+D[3]+3250441966&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(A^_&(b^A))+D[4]+4118548399&4294967295,v=_+(I<<7&4294967295|I>>>25),I=A+(b^v&(_^b))+D[5]+1200080426&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(_^A&(v^_))+D[6]+2821735955&4294967295,b=A+(I<<17&4294967295|I>>>15),I=_+(v^b&(A^v))+D[7]+4249261313&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(A^_&(b^A))+D[8]+1770035416&4294967295,v=_+(I<<7&4294967295|I>>>25),I=A+(b^v&(_^b))+D[9]+2336552879&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(_^A&(v^_))+D[10]+4294925233&4294967295,b=A+(I<<17&4294967295|I>>>15),I=_+(v^b&(A^v))+D[11]+2304563134&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(A^_&(b^A))+D[12]+1804603682&4294967295,v=_+(I<<7&4294967295|I>>>25),I=A+(b^v&(_^b))+D[13]+4254626195&4294967295,A=v+(I<<12&4294967295|I>>>20),I=b+(_^A&(v^_))+D[14]+2792965006&4294967295,b=A+(I<<17&4294967295|I>>>15),I=_+(v^b&(A^v))+D[15]+1236535329&4294967295,_=b+(I<<22&4294967295|I>>>10),I=v+(b^A&(_^b))+D[1]+4129170786&4294967295,v=_+(I<<5&4294967295|I>>>27),I=A+(_^b&(v^_))+D[6]+3225465664&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(A^v))+D[11]+643717713&4294967295,b=A+(I<<14&4294967295|I>>>18),I=_+(A^v&(b^A))+D[0]+3921069994&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(_^b))+D[5]+3593408605&4294967295,v=_+(I<<5&4294967295|I>>>27),I=A+(_^b&(v^_))+D[10]+38016083&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(A^v))+D[15]+3634488961&4294967295,b=A+(I<<14&4294967295|I>>>18),I=_+(A^v&(b^A))+D[4]+3889429448&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(_^b))+D[9]+568446438&4294967295,v=_+(I<<5&4294967295|I>>>27),I=A+(_^b&(v^_))+D[14]+3275163606&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(A^v))+D[3]+4107603335&4294967295,b=A+(I<<14&4294967295|I>>>18),I=_+(A^v&(b^A))+D[8]+1163531501&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(b^A&(_^b))+D[13]+2850285829&4294967295,v=_+(I<<5&4294967295|I>>>27),I=A+(_^b&(v^_))+D[2]+4243563512&4294967295,A=v+(I<<9&4294967295|I>>>23),I=b+(v^_&(A^v))+D[7]+1735328473&4294967295,b=A+(I<<14&4294967295|I>>>18),I=_+(A^v&(b^A))+D[12]+2368359562&4294967295,_=b+(I<<20&4294967295|I>>>12),I=v+(_^b^A)+D[5]+4294588738&4294967295,v=_+(I<<4&4294967295|I>>>28),I=A+(v^_^b)+D[8]+2272392833&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^_)+D[11]+1839030562&4294967295,b=A+(I<<16&4294967295|I>>>16),I=_+(b^A^v)+D[14]+4259657740&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^A)+D[1]+2763975236&4294967295,v=_+(I<<4&4294967295|I>>>28),I=A+(v^_^b)+D[4]+1272893353&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^_)+D[7]+4139469664&4294967295,b=A+(I<<16&4294967295|I>>>16),I=_+(b^A^v)+D[10]+3200236656&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^A)+D[13]+681279174&4294967295,v=_+(I<<4&4294967295|I>>>28),I=A+(v^_^b)+D[0]+3936430074&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^_)+D[3]+3572445317&4294967295,b=A+(I<<16&4294967295|I>>>16),I=_+(b^A^v)+D[6]+76029189&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(_^b^A)+D[9]+3654602809&4294967295,v=_+(I<<4&4294967295|I>>>28),I=A+(v^_^b)+D[12]+3873151461&4294967295,A=v+(I<<11&4294967295|I>>>21),I=b+(A^v^_)+D[15]+530742520&4294967295,b=A+(I<<16&4294967295|I>>>16),I=_+(b^A^v)+D[2]+3299628645&4294967295,_=b+(I<<23&4294967295|I>>>9),I=v+(b^(_|~A))+D[0]+4096336452&4294967295,v=_+(I<<6&4294967295|I>>>26),I=A+(_^(v|~b))+D[7]+1126891415&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~_))+D[14]+2878612391&4294967295,b=A+(I<<15&4294967295|I>>>17),I=_+(A^(b|~v))+D[5]+4237533241&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~A))+D[12]+1700485571&4294967295,v=_+(I<<6&4294967295|I>>>26),I=A+(_^(v|~b))+D[3]+2399980690&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~_))+D[10]+4293915773&4294967295,b=A+(I<<15&4294967295|I>>>17),I=_+(A^(b|~v))+D[1]+2240044497&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~A))+D[8]+1873313359&4294967295,v=_+(I<<6&4294967295|I>>>26),I=A+(_^(v|~b))+D[15]+4264355552&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~_))+D[6]+2734768916&4294967295,b=A+(I<<15&4294967295|I>>>17),I=_+(A^(b|~v))+D[13]+1309151649&4294967295,_=b+(I<<21&4294967295|I>>>11),I=v+(b^(_|~A))+D[4]+4149444226&4294967295,v=_+(I<<6&4294967295|I>>>26),I=A+(_^(v|~b))+D[11]+3174756917&4294967295,A=v+(I<<10&4294967295|I>>>22),I=b+(v^(A|~_))+D[2]+718787259&4294967295,b=A+(I<<15&4294967295|I>>>17),I=_+(A^(b|~v))+D[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(b+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+b&4294967295,E.g[3]=E.g[3]+A&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var _=v-this.blockSize,D=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=_;)i(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<v;)if(D[b++]=E.charCodeAt(A++),b==this.blockSize){i(this,D),b=0;break}}else for(;A<v;)if(D[b++]=E[A++],b==this.blockSize){i(this,D),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var _=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=_&255,_/=256;for(this.u(E),E=Array(16),v=_=0;4>v;++v)for(var D=0;32>D;D+=8)E[_++]=this.g[v]>>>D&255;return E};function s(E,v){var _=a;return Object.prototype.hasOwnProperty.call(_,E)?_[E]:_[E]=v(E)}function o(E,v){this.h=v;for(var _=[],D=!0,b=E.length-1;0<=b;b--){var A=E[b]|0;D&&A==v||(_[b]=A,D=!1)}this.g=_}var a={};function u(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return R(l(-E));for(var v=[],_=1,D=0;E>=_;D++)v[D]=E/_|0,_*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return R(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),D=p,b=0;b<E.length;b+=8){var A=Math.min(8,E.length-b),I=parseInt(E.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),D=D.j(A).add(l(I))):(D=D.j(_),D=D.add(l(I)))}return D}var p=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var E=0,v=1,_=0;_<this.g.length;_++){var D=this.i(_);E+=(0<=D?D:4294967296+D)*v,v*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(N(this))return"-"+R(this).toString(E);for(var v=l(Math.pow(E,6)),_=this,D="";;){var b=G(_,v).g;_=x(_,b.j(v));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(E);if(_=b,C(_))return A+D;for(;6>A.length;)A="0"+A;D=A+D}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function N(E){return E.h==-1}t.l=function(E){return E=x(this,E),N(E)?-1:C(E)?0:1};function R(E){for(var v=E.g.length,_=[],D=0;D<v;D++)_[D]=~E.g[D];return new o(_,~E.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0,b=0;b<=v;b++){var A=D+(this.i(b)&65535)+(E.i(b)&65535),I=(A>>>16)+(this.i(b)>>>16)+(E.i(b)>>>16);D=I>>>16,A&=65535,I&=65535,_[b]=I<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function x(E,v){return E.add(R(v))}t.j=function(E){if(C(this)||C(E))return p;if(N(this))return N(E)?R(this).j(R(E)):R(R(this).j(E));if(N(E))return R(this.j(R(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,_=[],D=0;D<2*v;D++)_[D]=0;for(D=0;D<this.g.length;D++)for(var b=0;b<E.g.length;b++){var A=this.i(D)>>>16,I=this.i(D)&65535,Sn=E.i(b)>>>16,Lo=E.i(b)&65535;_[2*D+2*b]+=I*Lo,B(_,2*D+2*b),_[2*D+2*b+1]+=A*Lo,B(_,2*D+2*b+1),_[2*D+2*b+1]+=I*Sn,B(_,2*D+2*b+1),_[2*D+2*b+2]+=A*Sn,B(_,2*D+2*b+2)}for(D=0;D<v;D++)_[D]=_[2*D+1]<<16|_[2*D];for(D=v;D<2*v;D++)_[D]=0;return new o(_,0)};function B(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function z(E,v){this.g=E,this.h=v}function G(E,v){if(C(v))throw Error("division by zero");if(C(E))return new z(p,p);if(N(E))return v=G(R(E),v),new z(R(v.g),R(v.h));if(N(v))return v=G(E,R(v)),new z(R(v.g),v.h);if(30<E.g.length){if(N(E)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var _=m,D=v;0>=D.l(E);)_=Ie(_),D=Ie(D);var b=K(_,1),A=K(D,1);for(D=K(D,2),_=K(_,2);!C(D);){var I=A.add(D);0>=I.l(E)&&(b=b.add(_),A=I),D=K(D,1),_=K(_,1)}return v=x(E,b.j(v)),new z(b,v)}for(b=p;0<=E.l(v);){for(_=Math.max(1,Math.floor(E.m()/v.m())),D=Math.ceil(Math.log(_)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),A=l(_),I=A.j(v);N(I)||0<I.l(E);)_-=D,A=l(_),I=A.j(v);C(A)&&(A=m),b=b.add(A),E=x(E,I)}return new z(b,E)}t.A=function(E){return G(this,E).h},t.and=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)&E.i(D);return new o(_,this.h&E.h)},t.or=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)|E.i(D);return new o(_,this.h|E.h)},t.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),_=[],D=0;D<v;D++)_[D]=this.i(D)^E.i(D);return new o(_,this.h^E.h)};function Ie(E){for(var v=E.g.length+1,_=[],D=0;D<v;D++)_[D]=E.i(D)<<1|E.i(D-1)>>>31;return new o(_,E.h)}function K(E,v){var _=v>>5;v%=32;for(var D=E.g.length-_,b=[],A=0;A<D;A++)b[A]=0<v?E.i(A+_)>>>v|E.i(A+_+1)<<32-v:E.i(A+_);return new o(b,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vv=BA.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Zr=BA.Integer=o}).apply(typeof jA<"u"?jA:typeof self<"u"?self:typeof window<"u"?window:{});var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={};var _v,Iv,ho,wv,gc,Yd,Ev,Dv,bv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qd=="object"&&Qd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,S){for(var k=Array(arguments.length-2),we=2;we<arguments.length;we++)k[we-2]=arguments[we];return d.prototype[T].apply(g,k)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,S=g.length||0;c.length=T+S;for(let k=0;k<S;k++)c[T+k]=g[k]}else c.push(g)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var Ie=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function K(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let S=0;S<_.length;S++)f=_[S],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function A(c){a.setTimeout(()=>{throw c},0)}function I(){var c=rf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Sn{constructor(){this.h=this.g=null}add(d,f){let g=Lo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Lo=new x(()=>new MM,c=>c.reset());class MM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Vo,Uo=!1,rf=new Sn,BI=()=>{let c=a.Promise.resolve(void 0);Vo=()=>{c.then(NM)}};var NM=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){A(f)}var d=Lo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Uo=!1};function lr(){this.s=this.s,this.C=this.C}lr.prototype.s=!1,lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var xM=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function jo(c,d){if(et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ie){e:{try{G(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:PM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&jo.aa.h.call(this)}}C(jo,et);var PM={2:"touch",3:"pen",4:"mouse"};jo.prototype.h=function(){jo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Bo="closure_listenable_"+(1e6*Math.random()|0),OM=0;function kM(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++OM,this.da=this.fa=!1}function Gc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Wc(c){this.src=c,this.g={},this.h=0}Wc.prototype.add=function(c,d,f,g,T){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var k=of(c,d,g,T);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new kM(d,this.src,S,!!g,T),d.fa=f,c.push(d)),d};function sf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=T)&&Array.prototype.splice.call(g,T,1),S&&(Gc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function of(c,d,f,g){for(var T=0;T<c.length;++T){var S=c[T];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==g)return T}return-1}var af="closure_lm_"+(1e6*Math.random()|0),cf={};function $I(c,d,f,g,T){if(g&&g.once)return zI(c,d,f,g,T);if(Array.isArray(d)){for(var S=0;S<d.length;S++)$I(c,d[S],f,g,T);return null}return f=hf(f),c&&c[Bo]?c.K(d,f,l(g)?!!g.capture:!!g,T):HI(c,d,f,!1,g,T)}function HI(c,d,f,g,T,S){if(!d)throw Error("Invalid event type");var k=l(T)?!!T.capture:!!T,we=lf(c);if(we||(c[af]=we=new Wc(c)),f=we.add(d,f,g,k,S),f.proxy)return f;if(g=FM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)xM||(T=k),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(GI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function FM(){function c(f){return d.call(c.src,c.listener,f)}let d=LM;return c}function zI(c,d,f,g,T){if(Array.isArray(d)){for(var S=0;S<d.length;S++)zI(c,d[S],f,g,T);return null}return f=hf(f),c&&c[Bo]?c.L(d,f,l(g)?!!g.capture:!!g,T):HI(c,d,f,!0,g,T)}function qI(c,d,f,g,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)qI(c,d[S],f,g,T);else g=l(g)?!!g.capture:!!g,f=hf(f),c&&c[Bo]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=of(S,f,g,T),-1<f&&(Gc(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=lf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=of(d,f,g,T)),(f=-1<c?d[c]:null)&&uf(f))}function uf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Bo])sf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(GI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=lf(d))?(sf(f,c),f.h==0&&(f.src=null,d[af]=null)):Gc(c)}}}function GI(c){return c in cf?cf[c]:cf[c]="on"+c}function LM(c,d){if(c.da)c=!0;else{d=new jo(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&uf(c),c=f.call(g,d)}return c}function lf(c){return c=c[af],c instanceof Wc?c:null}var df="__closure_events_fn_"+(1e9*Math.random()>>>0);function hf(c){return typeof c=="function"?c:(c[df]||(c[df]=function(d){return c.handleEvent(d)}),c[df])}function tt(){lr.call(this),this.i=new Wc(this),this.M=this,this.F=null}C(tt,lr),tt.prototype[Bo]=!0,tt.prototype.removeEventListener=function(c,d,f,g){qI(this,c,d,f,g)};function ut(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new et(d,c);else if(d instanceof et)d.target=d.target||c;else{var T=d;d=new et(g,c),D(d,T)}if(T=!0,f)for(var S=f.length-1;0<=S;S--){var k=d.g=f[S];T=Kc(k,g,!0,d)&&T}if(k=d.g=c,T=Kc(k,g,!0,d)&&T,T=Kc(k,g,!1,d)&&T,f)for(S=0;S<f.length;S++)k=d.g=f[S],T=Kc(k,g,!1,d)&&T}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Gc(f[g]);delete c.g[d],c.h--}}this.F=null},tt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},tt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Kc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,S=0;S<d.length;++S){var k=d[S];if(k&&!k.da&&k.capture==f){var we=k.listener,Ge=k.ha||k.src;k.fa&&sf(c.i,k),T=we.call(Ge,g)!==!1&&T}}return T&&!g.defaultPrevented}function WI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function KI(c){c.g=WI(()=>{c.g=null,c.i&&(c.i=!1,KI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class VM extends lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:KI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $o(c){lr.call(this),this.h=c,this.g={}}C($o,lr);var QI=[];function YI(c){K(c.g,function(d,f){this.g.hasOwnProperty(f)&&uf(d)},c),c.g={}}$o.prototype.N=function(){$o.aa.N.call(this),YI(this)},$o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ff=a.JSON.stringify,UM=a.JSON.parse,jM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function pf(){}pf.prototype.h=null;function JI(c){return c.h||(c.h=c.i())}function ZI(){}var Ho={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gf(){et.call(this,"d")}C(gf,et);function mf(){et.call(this,"c")}C(mf,et);var oi={},XI=null;function Qc(){return XI=XI||new tt}oi.La="serverreachability";function ew(c){et.call(this,oi.La,c)}C(ew,et);function zo(c){let d=Qc();ut(d,new ew(d))}oi.STAT_EVENT="statevent";function tw(c,d){et.call(this,oi.STAT_EVENT,c),this.stat=d}C(tw,et);function lt(c){let d=Qc();ut(d,new tw(d,c))}oi.Ma="timingevent";function nw(c,d){et.call(this,oi.Ma,c),this.size=d}C(nw,et);function qo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Go(){this.g=!0}Go.prototype.xa=function(){this.g=!1};function BM(c,d,f,g,T,S){c.info(function(){if(c.g)if(S)for(var k="",we=S.split("&"),Ge=0;Ge<we.length;Ge++){var me=we[Ge].split("=");if(1<me.length){var nt=me[0];me=me[1];var rt=nt.split("_");k=2<=rt.length&&rt[1]=="type"?k+(nt+"="+me+"&"):k+(nt+"=redacted&")}}else k=null;else k=S;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+k})}function $M(c,d,f,g,T,S,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+S+" "+k})}function rs(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+zM(c,f)+(g?" "+g:"")})}function HM(c,d){c.info(function(){return"TIMEOUT: "+d})}Go.prototype.info=function(){};function zM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return ff(f)}catch{return d}}var Yc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yf;function Jc(){}C(Jc,pf),Jc.prototype.g=function(){return new XMLHttpRequest},Jc.prototype.i=function(){return{}},yf=new Jc;function dr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new $o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iw}function iw(){this.i=null,this.g="",this.h=!1}var sw={},vf={};function _f(c,d,f){c.L=1,c.v=tu(Rn(d)),c.m=f,c.P=!0,ow(c,null)}function ow(c,d){c.F=Date.now(),Zc(c),c.A=Rn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Iw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new iw,c.g=Vw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new VM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(QI[0]=T.toString()),T=QI);for(var S=0;S<T.length;S++){var k=$I(f,T[S],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),zo(),BM(c.i,c.u,c.A,c.l,c.R,c.m)}dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Mn(c)==3?d.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{let rt=Mn(this.g);var d=this.g.Ba();let os=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||Aw(this.g)))){this.J||rt!=4||d==7||(d==8||0>=os?zo(3):zo(2)),If(this);var f=this.g.Z();this.X=f;t:if(aw(this)){var g=Aw(this.g);c="";var T=g.length,S=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),Wo(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,$M(this.i,this.u,this.A,this.l,this.R,rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Ge=this.g;if((we=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(we)){var me=we;break t}}me=null}if(f=me)rs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wf(this,f);else{this.o=!1,this.s=3,lt(12),ai(this),Wo(this);break e}}if(this.P){f=!0;let Ht;for(;!this.J&&this.C<k.length;)if(Ht=qM(this,k),Ht==vf){rt==4&&(this.s=4,lt(14),f=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==sw){this.s=4,lt(15),rs(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else rs(this.i,this.l,Ht,null),wf(this,Ht);if(aw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||k.length!=0||this.h.h||(this.s=1,lt(16),f=!1),this.o=this.o&&f,!f)rs(this.i,this.l,k,"[Invalid Chunked Response]"),ai(this),Wo(this);else if(0<k.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Af(nt),nt.M=!0,lt(11))}}else rs(this.i,this.l,k,null),wf(this,k);rt==4&&ai(this),this.o&&!this.J&&(rt==4?Ow(this.j,this):(this.o=!1,Zc(this)))}else cN(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),ai(this),Wo(this)}}}catch{}finally{}};function aw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function qM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?vf:(f=Number(d.substring(f,g)),isNaN(f)?sw:(g+=1,g+f>d.length?vf:(d=d.slice(g,g+f),c.C=g+f,d)))}dr.prototype.cancel=function(){this.J=!0,ai(this)};function Zc(c){c.S=Date.now()+c.I,cw(c,c.I)}function cw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=qo(m(c.ba,c),d)}function If(c){c.B&&(a.clearTimeout(c.B),c.B=null)}dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(HM(this.i,this.A),this.L!=2&&(zo(),lt(17)),ai(this),this.s=2,Wo(this)):cw(this,this.S-c)};function Wo(c){c.j.G==0||c.J||Ow(c.j,c)}function ai(c){If(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,YI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function wf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Ef(f.h,c))){if(!c.K&&Ef(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ou(f),iu(f);else break e;Cf(f),lt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=qo(m(f.Za,f),6e3));if(1>=dw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ui(f,11)}else if((c.K||f.g==c)&&ou(f),!B(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let me=T[d];if(f.T=me[0],me=me[1],f.G==2)if(me[0]=="c"){f.K=me[1],f.ia=me[2];let nt=me[3];nt!=null&&(f.la=nt,f.j.info("VER="+f.la));let rt=me[4];rt!=null&&(f.Aa=rt,f.j.info("SVER="+f.Aa));let os=me[5];os!=null&&typeof os=="number"&&0<os&&(g=1.5*os,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ht=c.g;if(Ht){let cu=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cu){var S=g.h;S.g||cu.indexOf("spdy")==-1&&cu.indexOf("quic")==-1&&cu.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Df(S,S.h),S.h=null))}if(g.D){let Sf=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Sf&&(g.ya=Sf,Ce(g.I,g.D,Sf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=Lw(g,g.J?g.ia:null,g.W),k.K){hw(g.h,k);var we=k,Ge=g.L;Ge&&(we.I=Ge),we.B&&(If(we),Zc(we)),g.g=k}else xw(g);0<f.i.length&&su(f)}else me[0]!="stop"&&me[0]!="close"||ui(f,7);else f.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?ui(f,7):Tf(f):me[0]!="noop"&&f.l&&f.l.ta(me),f.v=0)}}zo(4)}catch{}}var GM=class{constructor(c,d){this.g=c,this.map=d}};function uw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function dw(c){return c.h?1:c.g?c.g.size:0}function Ef(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Df(c,d){c.g?c.g.add(d):c.h=d}function hw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}uw.prototype.cancel=function(){if(this.i=fw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function fw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function WM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function KM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function pw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=KM(c),g=WM(c),T=g.length,S=0;S<T;S++)d.call(void 0,g[S],f&&f[S],c)}var gw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function QM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var S=c[f].substring(0,g);T=c[f].substring(g+1)}else S=c[f];d(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ci(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ci){this.h=c.h,Xc(this,c.j),this.o=c.o,this.g=c.g,eu(this,c.s),this.l=c.l;var d=c.i,f=new Yo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),mw(this,f),this.m=c.m}else c&&(d=String(c).match(gw))?(this.h=!1,Xc(this,d[1]||"",!0),this.o=Ko(d[2]||""),this.g=Ko(d[3]||"",!0),eu(this,d[4]),this.l=Ko(d[5]||"",!0),mw(this,d[6]||"",!0),this.m=Ko(d[7]||"")):(this.h=!1,this.i=new Yo(null,this.h))}ci.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Qo(d,yw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Qo(d,yw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Qo(f,f.charAt(0)=="/"?ZM:JM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Qo(f,eN)),c.join("")};function Rn(c){return new ci(c)}function Xc(c,d,f){c.j=f?Ko(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function eu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function mw(c,d,f){d instanceof Yo?(c.i=d,tN(c.i,c.h)):(f||(d=Qo(d,XM)),c.i=new Yo(d,c.h))}function Ce(c,d,f){c.i.set(d,f)}function tu(c){return Ce(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ko(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,YM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function YM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yw=/[#\/\?@]/g,JM=/[#\?:]/g,ZM=/[#\?]/g,XM=/[#\?@]/g,eN=/#/g;function Yo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function hr(c){c.g||(c.g=new Map,c.h=0,c.i&&QM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Yo.prototype,t.add=function(c,d){hr(this),this.i=null,c=is(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function vw(c,d){hr(c),d=is(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function _w(c,d){return hr(c),d=is(c,d),c.g.has(d)}t.forEach=function(c,d){hr(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},t.na=function(){hr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let S=0;S<T.length;S++)f.push(d[g])}return f},t.V=function(c){hr(this);let d=[];if(typeof c=="string")_w(this,c)&&(d=d.concat(this.g.get(is(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return hr(this),this.i=null,c=is(this,c),_w(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Iw(c,d,f){vw(c,d),0<f.length&&(c.i=null,c.g.set(is(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let S=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var T=S;k[g]!==""&&(T+="="+encodeURIComponent(String(k[g]))),c.push(T)}}return this.i=c.join("&")};function is(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function tN(c,d){d&&!c.j&&(hr(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(vw(this,g),Iw(this,T,f))},c)),c.j=d}function nN(c,d){let f=new Go;if(a.Image){let g=new Image;g.onload=y(fr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(fr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(fr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(fr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function rN(c,d){let f=new Go,g=new AbortController,T=setTimeout(()=>{g.abort(),fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(T),S.ok?fr(f,"TestPingServer: ok",!0,d):fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),fr(f,"TestPingServer: error",!1,d)})}function fr(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function iN(){this.g=new jM}function sN(c,d,f){let g=f||"";try{pw(c,function(T,S){let k=T;l(T)&&(k=ff(T)),d.push(g+S+"="+encodeURIComponent(k))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Jo(c){this.l=c.Ub||null,this.j=c.eb||!1}C(Jo,pf),Jo.prototype.g=function(){return new nu(this.l,this.j)},Jo.prototype.i=function(c){return function(){return c}}({});function nu(c,d){tt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(nu,tt),t=nu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Xo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xo(this)),this.g&&(this.readyState=3,Xo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ww(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ww(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Zo(this):Xo(this),this.readyState==3&&ww(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Zo(this))},t.Qa=function(c){this.g&&(this.response=c,Zo(this))},t.ga=function(){this.g&&Zo(this)};function Zo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Xo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Xo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(nu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Ew(c){let d="";return K(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function bf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Ew(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ce(c,d,f))}function Me(c){tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Me,tt);var oN=/^https?$/i,aN=["POST","PUT"];t=Me.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yf.g(),this.v=this.o?JI(this.o):JI(yf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){Dw(this,S);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())f.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(aN,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,k]of f)this.g.setRequestHeader(S,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cw(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){Dw(this,S)}};function Dw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,bw(c),ru(c)}function bw(c){c.A||(c.A=!0,ut(c,"complete"),ut(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ut(this,"complete"),ut(this,"abort"),ru(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ru(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Tw(this):this.bb())},t.bb=function(){Tw(this)};function Tw(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Mn(c)!=4||c.Z()!=2)){if(c.u&&Mn(c)==4)WI(c.Ea,0,c);else if(ut(c,"readystatechange"),Mn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var T=String(c.D).match(gw)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!oN.test(T?T.toLowerCase():"")}f=g}if(f)ut(c,"complete"),ut(c,"success");else{c.m=6;try{var S=2<Mn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",bw(c)}}finally{ru(c)}}}}function ru(c,d){if(c.g){Cw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ut(c,"ready");try{f.onreadystatechange=g}catch{}}}function Cw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Mn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),UM(d)}};function Aw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function cN(c){let d={};c=(c.g&&2<=Mn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(B(c[g]))continue;var f=b(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[T]||[];d[T]=S,S.push(f)}E(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Sw(c){this.Aa=0,this.i=[],this.j=new Go,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,c),this.cb=ea("retryDelaySeedMs",1e4,c),this.Wa=ea("forwardChannelMaxRetries",2,c),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new uw(c&&c.concurrentRequestLimit),this.Da=new iN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){lt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Lw(this,null,this.W),su(this)};function Tf(c){if(Rw(c),c.G==3){var d=c.U++,f=Rn(c.I);if(Ce(f,"SID",c.K),Ce(f,"RID",d),Ce(f,"TYPE","terminate"),ta(c,f),d=new dr(c,c.j,d),d.L=2,d.v=tu(Rn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Vw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zc(d)}Fw(c)}function iu(c){c.g&&(Af(c),c.g.cancel(),c.g=null)}function Rw(c){iu(c),c.u&&(a.clearTimeout(c.u),c.u=null),ou(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function su(c){if(!lw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Vo||BI(),Uo||(Vo(),Uo=!0),rf.add(d,c),c.B=0}}function uN(c,d){return dw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=qo(m(c.Ga,c,d),kw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new dr(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),D(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Nw(this,T,d),f=Rn(this.I),Ce(f,"RID",c),Ce(f,"CVER",22),this.D&&Ce(f,"X-HTTP-Session-Id",this.D),ta(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(Ew(S)))+"&"+d:this.m&&bf(f,this.m,S)),Df(this.h,T),this.Ua&&Ce(f,"TYPE","init"),this.P?(Ce(f,"$req",d),Ce(f,"SID","null"),T.T=!0,_f(T,f,null)):_f(T,f,d),this.G=2}}else this.G==3&&(c?Mw(this,c):this.i.length==0||lw(this.h)||Mw(this))};function Mw(c,d){var f;d?f=d.l:f=c.U++;let g=Rn(c.I);Ce(g,"SID",c.K),Ce(g,"RID",f),Ce(g,"AID",c.T),ta(c,g),c.m&&c.o&&bf(g,c.m,c.o),f=new dr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Nw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Df(c.h,f),_f(f,g,d)}function ta(c,d){c.H&&K(c.H,function(f,g){Ce(d,g,f)}),c.l&&pw({},function(f,g){Ce(d,g,f)})}function Nw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let S=-1;for(;;){let k=["count="+f];S==-1?0<f?(S=T[0].g,k.push("ofs="+S)):S=0:k.push("ofs="+S);let we=!0;for(let Ge=0;Ge<f;Ge++){let me=T[Ge].g,nt=T[Ge].map;if(me-=S,0>me)S=Math.max(0,T[Ge].g-100),we=!1;else try{sN(nt,k,"req"+me+"_")}catch{g&&g(nt)}}if(we){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function xw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Vo||BI(),Uo||(Vo(),Uo=!0),rf.add(d,c),c.v=0}}function Cf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=qo(m(c.Fa,c),kw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Pw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=qo(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),iu(this),Pw(this))};function Af(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Pw(c){c.g=new dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Rn(c.qa);Ce(d,"RID","rpc"),Ce(d,"SID",c.K),Ce(d,"AID",c.T),Ce(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ce(d,"TO",c.ja),Ce(d,"TYPE","xmlhttp"),ta(c,d),c.m&&c.o&&bf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=tu(Rn(d)),f.m=null,f.P=!0,ow(f,c)}t.Za=function(){this.C!=null&&(this.C=null,iu(this),Cf(this),lt(19))};function ou(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Ow(c,d){var f=null;if(c.g==d){ou(c),Af(c),c.g=null;var g=2}else if(Ef(c.h,d))f=d.D,hw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=Qc(),ut(g,new nw(g,f)),su(c)}else xw(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&uN(c,d)||g==2&&Cf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:ui(c,5);break;case 4:ui(c,10);break;case 3:ui(c,6);break;default:ui(c,2)}}}function kw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ui(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new ci(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xc(g,"https"),tu(g),T?nN(g.toString(),f):rN(g.toString(),f)}else lt(2);c.G=0,c.l&&c.l.sa(d),Fw(c),Rw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function Fw(c){if(c.G=0,c.ka=[],c.l){let d=fw(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Lw(c,d,f){var g=f instanceof ci?Rn(f):new ci(f);if(g.g!="")d&&(g.g=d+"."+g.g),eu(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var S=new ci(null);g&&Xc(S,g),d&&(S.g=d),T&&eu(S,T),f&&(S.l=f),g=S}return f=c.D,d=c.ya,f&&d&&Ce(g,f,d),Ce(g,"VER",c.la),ta(c,g),g}function Vw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Me(new Jo({eb:f})):new Me(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uw(){}t=Uw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function au(){}au.prototype.g=function(c,d){return new Et(c,d)};function Et(c,d){tt.call(this),this.g=new Sw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!B(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ss(this)}C(Et,tt),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){Tf(this.g)},Et.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=ff(c),c=f);d.i.push(new GM(d.Ya++,c)),d.G==3&&su(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,Tf(this.g),delete this.g,Et.aa.N.call(this)};function jw(c){gf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(jw,gf);function Bw(){mf.call(this),this.status=1}C(Bw,mf);function ss(c){this.g=c}C(ss,Uw),ss.prototype.ua=function(){ut(this.g,"a")},ss.prototype.ta=function(c){ut(this.g,new jw(c))},ss.prototype.sa=function(c){ut(this.g,new Bw)},ss.prototype.ra=function(){ut(this.g,"b")},au.prototype.createWebChannel=au.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,bv=rr.createWebChannelTransport=function(){return new au},Dv=rr.getStatEventTarget=function(){return Qc()},Ev=rr.Event=oi,Yd=rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yc.NO_ERROR=0,Yc.TIMEOUT=8,Yc.HTTP_ERROR=6,gc=rr.ErrorCode=Yc,rw.COMPLETE="complete",wv=rr.EventType=rw,ZI.EventType=Ho,Ho.OPEN="a",Ho.CLOSE="b",Ho.ERROR="c",Ho.MESSAGE="d",tt.prototype.listen=tt.prototype.K,ho=rr.WebChannel=ZI,Iv=rr.FetchXmlHttpFactory=Jo,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,_v=rr.XhrIo=Me}).apply(typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{});var $A="@firebase/firestore";var qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qe.UNAUTHENTICATED=new qe(null),qe.GOOGLE_CREDENTIALS=new qe("google-credentials-uid"),qe.FIRST_PARTY=new qe("first-party-uid"),qe.MOCK_USER=new qe("mock-user");var No="10.13.1";var Gi=new zr("@firebase/firestore");function mc(){return Gi.logLevel}function j(t,...e){if(Gi.logLevel<=le.DEBUG){let n=e.map(dI);Gi.debug(`Firestore (${No}): ${t}`,...n)}}function sr(t,...e){if(Gi.logLevel<=le.ERROR){let n=e.map(dI);Gi.error(`Firestore (${No}): ${t}`,...n)}}function _o(t,...e){if(Gi.logLevel<=le.WARN){let n=e.map(dI);Gi.warn(`Firestore (${No}): ${t}`,...n)}}function dI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Z(t="Unexpected state"){let e=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: `+t;throw sr(e),new Error(e)}function be(t,e){t||Z()}function ee(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends St{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ir=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var th=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Rv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qe.UNAUTHENTICATED))}shutdown(){}},Mv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Nv=class{constructor(e){this.t=e,this.currentUser=qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ir,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ir)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string"),new th(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new qe(e)}},xv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Pv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ov=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new Ov(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function m$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var nh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=m$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ve(t,e){return t<e?-1:t>e?1:0}function Io(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Xe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var rh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Re=class t extends rh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},y$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rt=class t extends rh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return y$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var W=class t{constructor(e){this.path=e}static fromPath(e){return new t(Re.fromString(e))}static fromName(e){return new t(Re.fromString(e).popFirst(5))}static empty(){return new t(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Re(e.slice()))}};var Fv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Fv.UNKNOWN_ID=-1;function v$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Wi(i,W.empty(),e)}function _$(t){return new Wi(t.readTime,t.key,-1)}var Wi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(re.min(),W.empty(),-1)}static max(){return new t(re.max(),W.empty(),-1)}};function I$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}var w$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function kc(t){return w(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==w$)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function E$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fc(t){return t.name==="IndexedDbTransactionError"}var DS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function xh(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function D$(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var b$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],d7=[...b$,"documentOverlays"],T$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],C$=T$,A$=[...C$,"indexConfiguration","indexState","indexEntries"];var h7=[...A$,"globals"];function HA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mo(this.root,e,this.comparator,!1)}getReverseIterator(){return new mo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mo(this.root,e,this.comparator,!0)}},mo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},bn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();let e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}};bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var at=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ih(this.data.getIterator())}getIteratorFrom(e){return new ih(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ih=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Dn=class t{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new t([])}unionWith(e){let n=new at(Rt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var sh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ct=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sh("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ct.EMPTY_BYTE_STRING=new ct("");var S$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(t){if(be(!!t),typeof t=="string"){let e=0,n=S$.exec(t);if(be(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ei(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}function hI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function fI(t){let e=t.mapValue.fields.__previous_value__;return hI(e)?fI(e):e}function bc(t){let e=or(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}var Vv=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},oh=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Jd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hI(t)?4:CS(t)?9007199254740991:TS(t)?10:11:Z()}function An(t,e){if(t===e)return!0;let n=Ki(t);if(n!==Ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bc(t).isEqual(bc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=or(i.timestampValue),a=or(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ei(i.bytesValue).isEqual(ei(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Se(i.doubleValue),a=Se(s.doubleValue);return o===a?Dc(o)===Dc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Io(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(HA(o)!==HA(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!An(o[u],a[u])))return!1;return!0}(t,e);default:return Z()}}function Tc(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function wo(t,e){if(t===e)return 0;let n=Ki(t),r=Ki(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Se(s.integerValue||s.doubleValue),u=Se(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return zA(t.timestampValue,e.timestampValue);case 4:return zA(bc(t),bc(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(s,o){let a=ei(s),u=ei(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ve(a[l],u[l]);if(h!==0)return h}return ve(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ve(Se(s.latitude),Se(o.latitude));return a!==0?a:ve(Se(s.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qA(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ve(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:qA(y,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Jd.mapValue&&o===Jd.mapValue)return 0;if(s===Jd.mapValue)return 1;if(o===Jd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ve(u[p],h[p]);if(m!==0)return m;let y=wo(a[u[p]],l[h[p]]);if(y!==0)return y}return ve(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function zA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);let n=or(t),r=or(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function qA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=wo(n[i],r[i]);if(s)return s}return ve(n.length,r.length)}function Eo(t){return Uv(t)}function Uv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ei(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Uv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Uv(n.fields[o])}`;return i+"}"}(t.mapValue):Z()}function GA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jv(t){return!!t&&"integerValue"in t}function pI(t){return!!t&&"arrayValue"in t}function WA(t){return!!t&&"nullValue"in t}function KA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xd(t){return!!t&&"mapValue"in t}function TS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return xo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var rn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(n)}setAll(e){let n=Rt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=vc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){xo(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(vc(this.value))}};function AS(t){let e=[];return xo(t.fields,(n,r)=>{let i=new Rt([n]);if(Xd(r)){let s=AS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Dn(e)}var sn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,re.min(),re.min(),re.min(),rn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,re.min(),re.min(),rn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,re.min(),re.min(),rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Do=class{constructor(e,n){this.position=e,this.inclusive=n}};function QA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=wo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function YA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}var Qi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function R$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var ah=class{},Ue=class t extends ah{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $v(e,n,r):n==="array-contains"?new qv(e,r):n==="in"?new Gv(e,r):n==="not-in"?new Wv(e,r):n==="array-contains-any"?new Kv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Hv(e,r):new zv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wo(n,this.value)):n!==null&&Ki(this.value)===Ki(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},on=class t extends ah{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return SS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function SS(t){return t.op==="and"}function RS(t){return M$(t)&&SS(t)}function M$(t){for(let e of t.filters)if(e instanceof on)return!1;return!0}function Bv(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Eo(t.value);if(RS(t))return t.filters.map(e=>Bv(e)).join(",");{let e=t.filters.map(n=>Bv(n)).join(",");return`${t.op}(${e})`}}function MS(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)}(t,e):t instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&MS(o,i.filters[a]),!0):!1}(t,e):void Z()}function NS(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Eo(n.value)}`}(t):t instanceof on?function(n){return n.op.toString()+" {"+n.getFilters().map(NS).join(" ,")+"}"}(t):"Filter"}var $v=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){let n=W.comparator(e.key,this.key);return this.matchesComparison(n)}},Hv=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=xS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},zv=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=xS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function xS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}var qv=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return pI(n)&&Tc(n.arrayValue,this.value)}},Gv=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Tc(this.value.arrayValue,n)}},Wv=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Tc(this.value.arrayValue,n)}},Kv=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!pI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Tc(this.value.arrayValue,r))}};var Qv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function JA(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Qv(t,e,n,r,i,s,o)}function gI(t){let e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Eo(r)).join(",")),e.ue=n}return e.ue}function mI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YA(t.startAt,e.startAt)&&YA(t.endAt,e.endAt)}function Yv(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ti=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function N$(t,e,n,r,i,s,o,a){return new ti(t,e,n,r,i,s,o,a)}function yI(t){return new ti(t)}function ZA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PS(t){return t.collectionGroup!==null}function _c(t){let e=ee(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new at(Rt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Qi(s,r))}),n.has(Rt.keyField().canonicalString())||e.ce.push(new Qi(Rt.keyField(),r))}return e.ce}function Tn(t){let e=ee(t);return e.le||(e.le=x$(e,_c(t))),e.le}function x$(t,e){if(t.limitType==="F")return JA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Qi(i.field,s)});let n=t.endAt?new Do(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Do(t.startAt.position,t.startAt.inclusive):null;return JA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jv(t,e){let n=t.filters.concat([e]);return new ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Zv(t,e,n){return new ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ph(t,e){return mI(Tn(t),Tn(e))&&t.limitType===e.limitType}function OS(t){return`${gI(Tn(t))}|lt:${t.limitType}`}function fo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>NS(i)).join(", ")}]`),xh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Eo(i)).join(",")),`Target(${r})`}(Tn(t))}; limitType=${t.limitType})`}function Oh(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of _c(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=QA(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,_c(r),i)||r.endAt&&!function(o,a,u){let l=QA(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,_c(r),i))}(t,e)}function P$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kS(t){return(e,n)=>{let r=!1;for(let i of _c(t)){let s=O$(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function O$(t,e,n){let r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?wo(u,l):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}var ni=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return bS(this.inner)}size(){return this.innerSize}};var k$=new xe(W.comparator);function ar(){return k$}var FS=new xe(W.comparator);function yc(...t){let e=FS;for(let n of t)e=e.insert(n.key,n);return e}function LS(t){let e=FS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $i(){return Ic()}function VS(){return Ic()}function Ic(){return new ni(t=>t.toString(),(t,e)=>t.isEqual(e))}var F$=new xe(W.comparator),L$=new at(W.comparator);function de(...t){let e=L$;for(let n of t)e=e.add(n);return e}var V$=new at(ve);function U$(){return V$}function vI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function US(t){return{integerValue:""+t}}function j$(t,e){return D$(e)?US(e):vI(t,e)}var bo=class{constructor(){this._=void 0}};function B$(t,e,n){return t instanceof To?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&hI(s)&&(s=fI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Yi?BS(t,e):t instanceof Ji?$S(t,e):function(i,s){let o=jS(i,s),a=XA(o)+XA(i.Pe);return jv(o)&&jv(i.Pe)?US(a):vI(i.serializer,a)}(t,e)}function $$(t,e,n){return t instanceof Yi?BS(t,e):t instanceof Ji?$S(t,e):n}function jS(t,e){return t instanceof Co?function(r){return jv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var To=class extends bo{},Yi=class extends bo{constructor(e){super(),this.elements=e}};function BS(t,e){let n=HS(e);for(let r of t.elements)n.some(i=>An(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ji=class extends bo{constructor(e){super(),this.elements=e}};function $S(t,e){let n=HS(e);for(let r of t.elements)n=n.filter(i=>!An(i,r));return{arrayValue:{values:n}}}var Co=class extends bo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function XA(t){return Se(t.integerValue||t.doubleValue)}function HS(t){return pI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function H$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Yi&&i instanceof Yi||r instanceof Ji&&i instanceof Ji?Io(r.elements,i.elements,An):r instanceof Co&&i instanceof Co?An(r.Pe,i.Pe):r instanceof To&&i instanceof To}(t.transform,e.transform)}var Xv=class{constructor(e,n){this.version=e,this.transformResults=n}},qi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function eh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ao=class{};function zS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ch(t.key,qi.none()):new Zi(t.key,t.data,qi.none());{let n=t.data,r=rn.empty(),i=new at(Rt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new cr(t.key,r,new Dn(i.toArray()),qi.none())}}function z$(t,e,n){t instanceof Zi?function(i,s,o){let a=i.value.clone(),u=tS(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof cr?function(i,s,o){if(!eh(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=tS(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(qS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wc(t,e,n,r){return t instanceof Zi?function(s,o,a,u){if(!eh(s.precondition,o))return a;let l=s.value.clone(),h=nS(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof cr?function(s,o,a,u){if(!eh(s.precondition,o))return a;let l=nS(s.fieldTransforms,u,o),h=o.data;return h.setAll(qS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return eh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function q$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=jS(r.transform,i||null);s!=null&&(n===null&&(n=rn.empty()),n.set(r.field,s))}return n||null}function eS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Io(r,i,(s,o)=>H$(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Zi=class extends Ao{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},cr=class extends Ao{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function qS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function tS(t,e,n){let r=new Map;be(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,$$(o,a,n[i]))}return r}function nS(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,B$(s,o,e))}return r}var ch=class extends Ao{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},e_=class extends Ao{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var t_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&z$(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=wc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=VS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=zS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,(n,r)=>eS(n,r))&&Io(this.baseMutations,e.baseMutations,(n,r)=>eS(n,r))}},n_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){be(e.mutations.length===r.length);let i=function(){return F$}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var r_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var i_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Le,pe;function G$(t){switch(t){default:return Z();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function GS(t){if(t===void 0)return sr("GRPC error has no .code"),M.UNKNOWN;switch(t){case Le.OK:return M.OK;case Le.CANCELLED:return M.CANCELLED;case Le.UNKNOWN:return M.UNKNOWN;case Le.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Le.INTERNAL:return M.INTERNAL;case Le.UNAVAILABLE:return M.UNAVAILABLE;case Le.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Le.NOT_FOUND:return M.NOT_FOUND;case Le.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Le.ABORTED:return M.ABORTED;case Le.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Le.DATA_LOSS:return M.DATA_LOSS;default:return Z()}}(pe=Le||(Le={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var rS=null;function W$(){return new TextEncoder}var K$=new Zr([4294967295,4294967295],0);function iS(t){let e=W$().encode(t),n=new vv;return n.update(e),new Uint8Array(n.digest())}function sS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([i,s],0)]}var s_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hi(`Invalid padding: ${n}`);if(r<0)throw new Hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Zr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Zr.fromNumber(r)));return i.compare(K$)===1&&(i=new Zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=iS(e),[r,i]=sS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=iS(e),[r,i]=sS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Hi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var uh=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(re.min(),i,new xe(ve),ar(),de())}},Cc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var yo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},lh=class{constructor(e,n){this.targetId=e,this.me=n}},dh=class{constructor(e,n,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},hh=class{constructor(){this.fe=0,this.ge=aS(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new Cc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=aS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},o_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=oS(),this.Qe=new xe(ve)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Yv(s))if(r===0){let o=new W(s.path);this.Ue(n,o,sn.newNoDocument(o,re.min()))}else be(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}rS?.et(function(h,p,m,y,C){var N,R,x,B,z,G;let Ie={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},K=p.unchangedNames;return K&&(Ie.bloomFilter={applied:C===0,hashCount:(N=K?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(x=(R=K?.bits)===null||R===void 0?void 0:R.bitmap)===null||x===void 0?void 0:x.length)!==null&&B!==void 0?B:0,padding:(G=(z=K?.bits)===null||z===void 0?void 0:z.padding)!==null&&G!==void 0?G:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),Ie}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=ei(r).toUint8Array()}catch(u){if(u instanceof sh)return _o("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new s_(o,i,s)}catch(u){return _o(u instanceof Hi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Yv(a.target)){let u=new W(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,sn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new uh(e,n,this.Qe,this.ke,r);return this.ke=ar(),this.qe=oS(),this.Qe=new xe(ve),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new hh,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new at(ve),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hh),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function oS(){return new xe(W.comparator)}function aS(){return new xe(W.comparator)}var Q$={asc:"ASCENDING",desc:"DESCENDING"},Y$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},J$={and:"AND",or:"OR"},a_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function c_(t,e){return t.useProto3Json||xh(e)?e:{value:e}}function fh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Z$(t,e){return fh(t,e.toTimestamp())}function Cn(t){return be(!!t),re.fromTimestamp(function(n){let r=or(n);return new Xe(r.seconds,r.nanos)}(t))}function _I(t,e){return u_(t,e).canonicalString()}function u_(t,e){let n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KS(t){let e=Re.fromString(t);return be(XS(e)),e}function l_(t,e){return _I(t.databaseId,e.path)}function Tv(t,e){let n=KS(e);if(n.get(1)!==t.databaseId.projectId)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(YS(n))}function QS(t,e){return _I(t.databaseId,e)}function X$(t){let e=KS(t);return e.length===4?Re.emptyPath():YS(e)}function d_(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YS(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cS(t,e,n){return{name:l_(t,e),fields:n.value.mapValue.fields}}function eH(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(be(h===void 0||typeof h=="string"),ct.fromBase64String(h||"")):(be(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:GS(l.code);return new V(h,l.message||"")}(o);n=new dh(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Tv(t,r.document.name),s=Cn(r.document.updateTime),o=r.document.createTime?Cn(r.document.createTime):re.min(),a=new rn({mapValue:{fields:r.document.fields}}),u=sn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new yo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Tv(t,r.document),s=r.readTime?Cn(r.readTime):re.min(),o=sn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new yo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Tv(t,r.document),s=r.removedTargetIds||[];n=new yo([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new i_(i,s),a=r.targetId;n=new lh(a,o)}}return n}function tH(t,e){let n;if(e instanceof Zi)n={update:cS(t,e.key,e.value)};else if(e instanceof ch)n={delete:l_(t,e.key)};else if(e instanceof cr)n={update:cS(t,e.key,e.data),updateMask:lH(e.fieldMask)};else{if(!(e instanceof e_))return Z();n={verify:l_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof To)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Yi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Co)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Z$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function nH(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Cn(i.updateTime):Cn(s);return o.isEqual(re.min())&&(o=Cn(s)),new Xv(o,i.transformResults||[])}(n,e))):[]}function rH(t,e){return{documents:[QS(t,e.path)]}}function iH(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QS(t,i);let s=function(l){if(l.length!==0)return ZS(on.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:po(m.field),direction:aH(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=c_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function sH(t){let e=X$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){be(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=JS(p);return m instanceof on&&RS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(C){return new Qi(go(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,xh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new Do(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new Do(y,m)}(n.endAt)),N$(e,i,o,s,a,"F",u,l)}function oH(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=go(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=go(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=go(n.unaryFilter.field);return Ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=go(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(go(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return on.create(n.compositeFilter.filters.map(r=>JS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function aH(t){return Q$[t]}function cH(t){return Y$[t]}function uH(t){return J$[t]}function po(t){return{fieldPath:t.canonicalString()}}function go(t){return Rt.fromServerFormat(t.fieldPath)}function ZS(t){return t instanceof Ue?function(n){if(n.op==="=="){if(KA(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(WA(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(KA(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(WA(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:cH(n.op),value:n.value}}}(t):t instanceof on?function(n){let r=n.getFilters().map(i=>ZS(i));return r.length===1?r[0]:{compositeFilter:{op:uH(n.op),filters:r}}}(t):Z()}function lH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ac=class t{constructor(e,n,r,i,s=re.min(),o=re.min(),a=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var h_=class{constructor(e){this.ct=e}};function dH(t){let e=sH({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Zv(e,e.limit,"L"):e}var ph=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Se(e.integerValue));else if("doubleValue"in e){let r=Se(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Dc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=or(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ei(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?CS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):TS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Z()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Se(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),W.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};ph.vt=new ph;var f_=class{constructor(){this.un=new p_}addToCollectionParentIndex(e,n){return this.un.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Wi.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Wi.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},p_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(Re.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Re.comparator)).toArray()}};var p7=new Uint8Array(0);var En=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(41943040,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);var Sc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var g_=class{constructor(){this.changes=new ni(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var m_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var y_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wc(r.mutation,i,Dn.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=$i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=yc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=$i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ar(),o=Ic(),a=function(){return Ic()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof cr)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),wc(h.mutation,l,h.mutation.getFieldMask(),Xe.now())):o.set(l.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new m_(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Ic(),i=new xe((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Dn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=VS();h.forEach(m=>{if(!s.has(m)){let y=zS(n.get(m),r.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve($i()),a=-1,u=s;return o.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:LS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=yc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=yc();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{let l=function(p,m){return new ti(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,sn.newInvalidDocument(h)))});let a=yc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&wc(h.mutation,l,Dn.empty(),Xe.now()),Oh(n,l)&&(a=a.insert(u,l))}),a})}};var v_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return O.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Cn(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:dH(i.bundledQuery),readTime:Cn(i.readTime)}}(n)),O.resolve()}};var __=class{constructor(){this.overlays=new xe(W.comparator),this.Ir=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=$i();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=$i(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=$i(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=$i(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new r_(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var I_=class{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var Rc=class{constructor(){this.Tr=new at(Ve.Er),this.dr=new at(Ve.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Ve(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ve(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new W(new Re([])),r=new Ve(n,e),i=new Ve(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new W(new Re([])),r=new Ve(n,e),i=new Ve(n,e+1),s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ve(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ve=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||ve(e.wr,n.wr)}static Ar(e,n){return ve(e.wr,n.wr)||W.comparator(e.key,n.key)}};var w_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new at(Ve.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new t_(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ve(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ve(n,0),i=new Ve(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(ve);return n.forEach(i=>{let s=new Ve(i,0),o=new Ve(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;W.isDocumentKey(s)||(s=s.child(""));let o=new Ve(new W(s),0),a=new at(ve);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(n.mutations,i=>{let s=new Ve(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Ve(n,0),i=this.br.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var E_=class{constructor(e){this.Mr=e,this.docs=function(){return new xe(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ar(),o=n.path,a=new W(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||I$(_$(h),r)<=0||(i.has(h.key)||Oh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Or(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new D_(this)}getSize(e){return O.resolve(this.size)}},D_=class extends g_{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var b_=class{constructor(e){this.persistence=e,this.Nr=new ni(n=>gI(n),mI),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rc,this.targetCount=0,this.kr=Sc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),O.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new Sc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Kn(n),O.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Br.containsKey(n))}};var T_=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new DS(0),this.Kr=!1,this.Kr=!0,this.$r=new I_,this.referenceDelegate=e(this),this.Ur=new b_(this),this.indexManager=new f_,this.remoteDocumentCache=function(i){return new E_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new h_(n),this.Gr=new v_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new __,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new w_(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new C_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},C_=class extends Lv{constructor(e){super(),this.currentSequenceNumber=e}},A_=class t{constructor(e){this.persistence=e,this.Jr=new Rc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),O.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return O.or([()=>O.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var S_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var R_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var M_=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return C0()?8:E$(ze())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new R_;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(mc()<=le.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(mc()<=le.DEBUG&&j("QueryEngine","Query:",fo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(mc()<=le.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(n))):O.resolve())}Yi(e,n){if(ZA(n))return O.resolve(null);let r=Tn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Zv(n,null,"F"),r=Tn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,Zv(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return ZA(n)||i.isEqual(re.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?O.resolve(null):(mc()<=le.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fo(n)),this.rs(e,o,n,v$(i,-1)).next(a=>a))})}ts(e,n){let r=new at(kS(e));return n.forEach((i,s)=>{Oh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return mc()<=le.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",fo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Wi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var N_=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new xe(ve),this._s=new ni(s=>gI(s),mI),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new y_(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function hH(t,e,n,r){return new N_(t,e,n,r)}function eR(t,e){return w(this,null,function*(){let n=ee(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=de();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function fH(t,e){let n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=O.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(N=>{let R=l.docVersions.get(C);be(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tR(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function pH(t,e){let n=ee(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ct.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(N,R,x){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let u=ar(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(gH(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(re.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function gH(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ar();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function mH(t,e){let n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yH(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ac(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function x_(t,e,n){return w(this,null,function*(){let r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Fc(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function uS(t,e,n){let r=ee(t),i=re.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=ee(u),m=p._s.get(h);return m!==void 0?O.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Tn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:re.min(),n?s:de())).next(a=>(vH(r,P$(e),a),{documents:a,Ts:s})))}function vH(t,e,n){let r=t.us.get(e)||re.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var gh=class{constructor(){this.activeTargetIds=U$()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var P_=class{constructor(){this.so=new gh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var O_=class{_o(e){}shutdown(){}};var mh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Zd=null;function Cv(){return Zd===null?Zd=function(){return 268435456+Math.round(2147483648*Math.random())}():Zd++,"0x"+Zd.toString(16)}var _H={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var k_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ot="WebChannelConnection",F_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Cv(),u=this.xo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(j("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw _o("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+No}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=_H[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Cv();return new Promise((o,a)=>{let u=new _v;u.setWithCredentials(!0),u.listenOnce(wv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gc.NO_ERROR:let h=u.getResponseJson();j(ot,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case gc.TIMEOUT:j(ot,`RPC '${e}' ${s} timed out`),a(new V(M.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:let p=u.getStatus();if(j(ot,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let C=function(R){let x=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(x)>=0?x:M.UNKNOWN}(y.status);a(new V(C,y.message))}else a(new V(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new V(M.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{j(ot,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(ot,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Cv(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bv(),a=Dv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Iv({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");j(ot,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,y=!1,C=new k_({Io:R=>{y?j(ot,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(j(ot,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(ot,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,x,B)=>{R.listen(x,z=>{try{B(z)}catch(G){setTimeout(()=>{throw G},0)}})};return N(p,ho.EventType.OPEN,()=>{y||(j(ot,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),N(p,ho.EventType.CLOSE,()=>{y||(y=!0,j(ot,`RPC '${e}' stream ${i} transport closed`),C.So())}),N(p,ho.EventType.ERROR,R=>{y||(y=!0,_o(ot,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new V(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,ho.EventType.MESSAGE,R=>{var x;if(!y){let B=R.data[0];be(!!B);let z=B,G=z.error||((x=z[0])===null||x===void 0?void 0:x.error);if(G){j(ot,`RPC '${e}' stream ${i} received error:`,G);let Ie=G.status,K=function(_){let D=Le[_];if(D!==void 0)return GS(D)}(Ie),E=G.message;K===void 0&&(K=M.INTERNAL,E="Unknown error status: "+Ie+" with message "+G.message),y=!0,C.So(new V(K,E)),p.close()}else j(ot,`RPC '${e}' stream ${i} received:`,B),C.bo(B)}}),N(a,Ev.STAT_EVENT,R=>{R.stat===Yd.PROXY?j(ot,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Yd.NOPROXY&&j(ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}};function Av(){return typeof document<"u"?document:null}function kh(t){return new a_(t,!0)}var yh=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var vh=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new yh(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new V(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},L_=class extends vh{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=eH(this.serializer,e),r=function(s){if(!("targetChange"in s))return re.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?Cn(o.readTime):re.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=d_(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Yv(u)?{documents:rH(s,u)}:{query:iH(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WS(s,o.resumeToken);let l=c_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=fh(s,o.snapshotVersion.toTimestamp());let l=c_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=oH(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=d_(this.serializer),n.removeTarget=e,this.a_(n)}},V_=class extends vh{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=nH(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=d_(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>tH(this.serializer,r))};this.a_(n)}};var U_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,u_(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,u_(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},j_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(n),this.D_=!1):j("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var B_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){es(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=ee(u);l.L_.add(4),yield Lc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Fh(l)})}(this))}))}),this.q_=new j_(r,i)}};function Fh(t){return w(this,null,function*(){if(es(t))for(let e of t.B_)yield e(!0)})}function Lc(t){return w(this,null,function*(){for(let e of t.B_)yield e(!1)})}function nR(t,e){let n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),DI(n)?EI(n):Po(n).r_()&&wI(n,e))}function II(t,e){let n=ee(t),r=Po(n);n.N_.delete(e),r.r_()&&rR(n,e),n.N_.size===0&&(r.r_()?r.o_():es(n)&&n.q_.set("Unknown"))}function wI(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Po(t).A_(e)}function rR(t,e){t.Q_.xe(e),Po(t).R_(e)}function EI(t){t.Q_=new o_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Po(t).start(),t.q_.v_()}function DI(t){return es(t)&&!Po(t).n_()&&t.N_.size>0}function es(t){return ee(t).L_.size===0}function iR(t){t.Q_=void 0}function IH(t){return w(this,null,function*(){t.q_.set("Online")})}function wH(t){return w(this,null,function*(){t.N_.forEach((e,n)=>{wI(t,e)})})}function EH(t,e){return w(this,null,function*(){iR(t),DI(t)?(t.q_.M_(e),EI(t)):t.q_.set("Unknown")})}function DH(t,e,n){return w(this,null,function*(){if(t.q_.set("Online"),e instanceof dh&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _h(t,r)}else if(e instanceof yo?t.Q_.Ke(e):e instanceof lh?t.Q_.He(e):t.Q_.We(e),!n.isEqual(re.min()))try{let r=yield tR(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(ct.EMPTY_BYTE_STRING,h.snapshotVersion)),rR(s,u);let p=new Ac(h.target,u,l,h.sequenceNumber);wI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield _h(t,r)}})}function _h(t,e,n){return w(this,null,function*(){if(!Fc(e))throw e;t.L_.add(1),yield Lc(t),t.q_.set("Offline"),n||(n=()=>tR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Fh(t)}))})}function sR(t,e){return e().catch(n=>_h(t,n,e))}function Lh(t){return w(this,null,function*(){let e=ee(t),n=ri(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;bH(e);)try{let i=yield mH(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,TH(e,i)}catch(i){yield _h(e,i)}oR(e)&&aR(e)})}function bH(t){return es(t)&&t.O_.length<10}function TH(t,e){t.O_.push(e);let n=ri(t);n.r_()&&n.V_&&n.m_(e.mutations)}function oR(t){return es(t)&&!ri(t).n_()&&t.O_.length>0}function aR(t){ri(t).start()}function CH(t){return w(this,null,function*(){ri(t).p_()})}function AH(t){return w(this,null,function*(){let e=ri(t);for(let n of t.O_)e.m_(n.mutations)})}function SH(t,e,n){return w(this,null,function*(){let r=t.O_.shift(),i=n_.from(r,e,n);yield sR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Lh(t)})}function RH(t,e){return w(this,null,function*(){e&&ri(t).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return G$(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();ri(r).s_(),yield sR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Lh(r)}})}(t,e)),oR(t)&&aR(t)})}function lS(t,e){return w(this,null,function*(){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=es(n);n.L_.add(3),yield Lc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Fh(n)})}function MH(t,e){return w(this,null,function*(){let n=ee(t);e?(n.L_.delete(2),yield Fh(n)):e||(n.L_.add(2),yield Lc(n),n.q_.set("Unknown"))})}function Po(t){return t.K_||(t.K_=function(n,r,i){let s=ee(n);return s.w_(),new L_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:IH.bind(null,t),Ro:wH.bind(null,t),mo:EH.bind(null,t),d_:DH.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.K_.s_(),DI(t)?EI(t):t.q_.set("Unknown")):(yield t.K_.stop(),iR(t))}))),t.K_}function ri(t){return t.U_||(t.U_=function(n,r,i){let s=ee(n);return s.w_(),new V_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:CH.bind(null,t),mo:RH.bind(null,t),f_:AH.bind(null,t),g_:SH.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.U_.s_(),yield Lh(t)):(yield t.U_.stop(),t.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var $_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function bI(t,e){if(sr("AsyncQueue",`${e}: ${t}`),Fc(t))return new V(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Ih=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=yc(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var wh=class{constructor(){this.W_=new xe(W.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},So=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Ih.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var H_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},z_=class{constructor(){this.queries=dS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=ee(n),s=i.queries;i.queries=dS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new V(M.ABORTED,"Firestore shutting down"))}};function dS(){return new ni(t=>OS(t),Ph)}function NH(t,e){return w(this,null,function*(){let n=ee(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new H_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=bI(o,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&TI(n)})}function xH(t,e){return w(this,null,function*(){let n=ee(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function PH(t,e){let n=ee(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&TI(n)}function OH(t,e,n){let r=ee(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function TI(t){t.Y_.forEach(e=>{e.next()})}var q_,hS;(hS=q_||(q_={})).ea="default",hS.Cache="cache";var G_=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new So(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==q_.Cache}};var Eh=class{constructor(e){this.key=e}},Dh=class{constructor(e){this.key=e}},W_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=kS(e),this.Ra=new Ih(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new wh,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Oh(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?C!==N&&(r.track({type:3,doc:y}),R=!0):this.ga(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(o=o.add(y),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(y,C){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return N(y)-N(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new So(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Dh(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Eh(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return So.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},K_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Q_=class{constructor(e){this.key=e,this.va=!1}},Y_=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ni(a=>OS(a),Ph),this.Ma=new Map,this.xa=new Set,this.Oa=new xe(W.comparator),this.Na=new Map,this.La=new Rc,this.Ba={},this.ka=new Map,this.qa=Sc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function kH(t,e,n=!0){return w(this,null,function*(){let r=fR(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield cR(r,e,n,!0),i})}function FH(t,e){return w(this,null,function*(){let n=fR(t);yield cR(n,e,!0,!1)})}function cR(t,e,n,r){return w(this,null,function*(){let i=yield yH(t.localStore,Tn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield LH(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&nR(t.remoteStore,i),a})}function LH(t,e,n,r,i){return w(this,null,function*(){t.Ka=(p,m,y)=>function(N,R,x,B){return w(this,null,function*(){let z=R.view.ma(x);z.ns&&(z=yield uS(N.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,z)));let G=B&&B.targetChanges.get(R.targetId),Ie=B&&B.targetMismatches.get(R.targetId)!=null,K=R.view.applyChanges(z,N.isPrimaryClient,G,Ie);return pS(N,R.targetId,K.wa),K.snapshot})}(t,p,m,y);let s=yield uS(t.localStore,e,!0),o=new W_(e,s.Ts),a=o.ma(s.documents),u=Cc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);pS(t,n,l.wa);let h=new K_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function VH(t,e,n){return w(this,null,function*(){let r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ph(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield x_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&II(r.remoteStore,i.targetId),J_(r,i.targetId)}).catch(kc))):(J_(r,i.targetId),yield x_(r.localStore,i.targetId,!0))})}function UH(t,e){return w(this,null,function*(){let n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),II(n.remoteStore,r.targetId))})}function jH(t,e,n){return w(this,null,function*(){let r=WH(t);try{let i=yield function(o,a){let u=ee(o),l=Xe.now(),h=a.reduce((y,C)=>y.add(C.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=ar(),N=de();return u.cs.getEntries(y,h).next(R=>{C=R,C.forEach((x,B)=>{B.isValidDocument()||(N=N.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(R=>{p=R;let x=[];for(let B of a){let z=q$(B,p.get(B.key).overlayedDocument);z!=null&&x.push(new cr(B.key,z,AS(z.value.mapValue),qi.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,x,a)}).next(R=>{m=R;let x=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,x)})}).then(()=>({batchId:m.batchId,changes:LS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new xe(ve)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Vc(r,i.changes),yield Lh(r.remoteStore)}catch(i){let s=bI(i,"Failed to persist write");n.reject(s)}})}function uR(t,e){return w(this,null,function*(){let n=ee(t);try{let r=yield pH(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(be(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?be(o.va):i.removedDocuments.size>0&&(be(o.va),o.va=!1))}),yield Vc(n,r,e)}catch(r){yield kc(r)}})}function fS(t,e,n){let r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=ee(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&TI(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BH(t,e,n){return w(this,null,function*(){let r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new xe(W.comparator);o=o.insert(s,sn.newNoDocument(s,re.min()));let a=de().add(s),u=new uh(re.min(),new Map,new xe(ve),o,a);yield uR(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),CI(r)}else yield x_(r.localStore,e,!1).then(()=>J_(r,e,n)).catch(kc)})}function $H(t,e){return w(this,null,function*(){let n=ee(t),r=e.batch.batchId;try{let i=yield fH(n.localStore,e);dR(n,r,null),lR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Vc(n,i)}catch(i){yield kc(i)}})}function HH(t,e,n){return w(this,null,function*(){let r=ee(t);try{let i=yield function(o,a){let u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(be(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);dR(r,e,n),lR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Vc(r,i)}catch(i){yield kc(i)}})}function lR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function dR(t,e,n){let r=ee(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function J_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||hR(t,r)})}function hR(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(II(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),CI(t))}function pS(t,e,n){for(let r of n)r instanceof Eh?(t.La.addReference(r.key,e),zH(t,r)):r instanceof Dh?(j("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||hR(t,r.key)):Z()}function zH(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(j("SyncEngine","New document in limbo: "+n),t.xa.add(r),CI(t))}function CI(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new W(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new Q_(n)),t.Oa=t.Oa.insert(n,r),nR(t.remoteStore,new Ac(Tn(yI(n.path)),r,"TargetPurposeLimboResolution",DS.oe))}}function Vc(t,e,n){return w(this,null,function*(){let r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=S_.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return w(this,null,function*(){let h=ee(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>O.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Fc(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),C=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function qH(t,e){return w(this,null,function*(){let n=ee(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield eR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new V(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vc(n,r.hs)}})}function GH(t,e){let n=ee(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function fR(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=uR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BH.bind(null,e),e.Ca.d_=PH.bind(null,e.eventManager),e.Ca.$a=OH.bind(null,e.eventManager),e}function WH(t){let e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$H.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HH.bind(null,e),e}var bh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return hH(this.persistence,new M_,e.initialUser,this.serializer)}createPersistence(e){return new T_(A_.Zr,this.serializer)}createSharedClientState(e){return new P_}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Z_=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qH.bind(null,this.syncEngine),yield MH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new z_}()}createDatastore(e){let n=kh(e.databaseInfo.databaseId),r=function(s){return new F_(s)}(e.databaseInfo);return function(s,o,a,u){return new U_(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new B_(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>fS(this.syncEngine,n,0),function(){return mh.D()?new mh:new O_}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new Y_(i,s,o,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e,n;yield function(i){return w(this,null,function*(){let s=ee(i);j("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Lc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var X_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var eI=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qe.UNAUTHENTICATED,this.clientId=nh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=bI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Sv(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield eR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function gS(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield QH(t);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>lS(e.remoteStore,i)),t._onlineComponents=e})}function KH(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function QH(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Sv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!KH(n))throw n;_o("Error using user provided cache. Falling back to memory cache: "+n),yield Sv(t,new bh)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Sv(t,new bh);return t._offlineComponents})}function pR(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield gS(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield gS(t,new Z_))),t._onlineComponents})}function YH(t){return pR(t).then(e=>e.syncEngine)}function mS(t){return w(this,null,function*(){let e=yield pR(t),n=e.eventManager;return n.onListen=kH.bind(null,e.syncEngine),n.onUnlisten=VH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UH.bind(null,e.syncEngine),n})}function gR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var yS=new Map;function mR(t,e,n){if(!n)throw new V(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JH(t,e,n,r){if(e===!0&&r===!0)throw new V(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function vS(t){if(!W.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _S(t){if(W.isDocumentKey(t))throw new V(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Ec(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Vh(t);throw new V(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Th=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ro=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Th({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Th(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Rv;switch(r.type){case"firstParty":return new Pv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=yS.get(n);r&&(j("ComponentProvider","Removing Datastore"),yS.delete(n),r.terminate())}(this),Promise.resolve()}};function yR(t,e,n,r={}){var i;let s=(t=Ec(t,Ro))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=qe.MOCK_USER;else{a=w0(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new qe(l)}t._authCredentials=new Mv(new th(a,u))}}var Xi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Mt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Xr=class t extends Xi{constructor(e,n,r){super(e,n,yI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new W(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function vR(t,e,...n){if(t=Ze(t),mR("collection","path",e),t instanceof Ro){let r=Re.fromString(e,...n);return _S(r),new Xr(t,null,r)}{if(!(t instanceof Mt||t instanceof Xr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return _S(r),new Xr(t.firestore,null,r)}}function _R(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=nh.newId()),mR("doc","path",e),t instanceof Ro){let r=Re.fromString(e,...n);return vS(r),new Mt(t,null,new W(r))}{if(!(t instanceof Mt||t instanceof Xr))throw new V(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Re.fromString(e,...n));return vS(r),new Mt(t.firestore,t instanceof Xr?t.converter:null,new W(r))}}var tI=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new yh(this,"async_queue_retry"),this.Eu=()=>{let n=Av();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Av();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Av();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new ir;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return w(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Fc(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw sr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=$_.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&Z()}verifyOperationInProgress(){}mu(){return w(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function IS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Mo=class extends Ro{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new tI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ER(this),this._firestoreClient.terminate()}};function IR(t,e){let n=typeof t=="object"?t:so(),r=typeof t=="string"?t:e||"(default)",i=ic(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=I0("firestore");s&&yR(i,...s)}return i}function wR(t){return t._firestoreClient||ER(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ER(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new Vv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,gR(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new eI(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Mc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ct.fromBase64String(e))}catch(n){throw new V(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Nc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ch=class{constructor(e){this._methodName=e}};var xc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}};var Pc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var ZH=/^__.*__$/,nI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new cr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zi(e,this.data,n,this.fieldTransforms)}};function DR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}var rI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Ah(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(DR(this.wu)&&ZH.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},iI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kh(e)}Nu(e,n,r,i=!1){return new rI({wu:e,methodName:n,Ou:r,path:Rt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bR(t){let e=t._freezeSettings(),n=kh(t._databaseId);return new iI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XH(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);AR("Data must be an object, but it was:",o,r);let a=TR(r,o),u,l;if(s.merge)u=new Dn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=tz(e,p,n);if(!o.contains(m))throw new V(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rz(h,m)||h.push(m)}u=new Dn(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new nI(new rn(a),u,l)}function ez(t,e,n,r=!1){return AI(n,t.Nu(r?4:3,e))}function AI(t,e){if(CR(t=Ze(t)))return AR("Unsupported field value:",e,t),TR(t,e);if(t instanceof Ch)return function(r,i){if(!DR(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=AI(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return j$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Xe.fromDate(r);return{timestampValue:fh(i.serializer,s)}}if(r instanceof Xe){let s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fh(i.serializer,s)}}if(r instanceof xc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mc)return{bytesValue:WS(i.serializer,r._byteString)};if(r instanceof Mt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:_I(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pc)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return vI(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Vh(r)}`)}(t,e)}function TR(t,e){let n={};return bS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(t,(r,i)=>{let s=AI(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function CR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof xc||t instanceof Mc||t instanceof Mt||t instanceof Ch||t instanceof Pc)}function AR(t,e,n){if(!CR(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Vh(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function tz(t,e,n){if((e=Ze(e))instanceof Nc)return e._internalPath;if(typeof e=="string")return SR(t,e);throw Ah("Field path arguments must be of type string or ",t,!1,void 0,n)}var nz=new RegExp("[~\\*/\\[\\]]");function SR(t,e,n){if(e.search(nz)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Nc(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ah(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new V(M.INVALID_ARGUMENT,a+t+u)}function rz(t,e){return t.some(n=>n.isEqual(e))}var Sh=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new sI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(SI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},sI=class extends Sh{data(){return super.data()}};function SI(t,e){return typeof e=="string"?SR(t,e):e instanceof Nc?e._internalPath:e._delegate._internalPath}function iz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Oc=class{},Rh=class extends Oc{};function RR(t,e,...n){let r=[];e instanceof Oc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof aI).length,a=s.filter(u=>u instanceof oI).length;if(o>1||o>0&&a>0)throw new V(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var oI=class t extends Rh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return NR(e._query,n),new Xi(e.firestore,e.converter,Jv(e._query,n))}_parse(e){let n=bR(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new V(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ES(p,h);let y=[];for(let C of p)y.push(wS(u,s,C));m={arrayValue:{values:y}}}else m=wS(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ES(p,h),m=ez(a,o,p,h==="in"||h==="not-in");return Ue.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var aI=class t extends Oc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:on.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)NR(o,u),o=Jv(o,u)}(e._query,n),new Xi(e.firestore,e.converter,Jv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var cI=class t extends Rh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new V(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qi(s,o)}(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new ti(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function MR(t,e="asc"){let n=e,r=SI("orderBy",t);return cI._create(r,n)}function wS(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new V(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PS(e)&&n.indexOf("/")!==-1)throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Re.fromString(n));if(!W.isDocumentKey(r))throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return GA(t,new W(r))}if(n instanceof Mt)return GA(t,n._key);throw new V(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vh(n)}.`)}function ES(t,e){if(!Array.isArray(t)||t.length===0)throw new V(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NR(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new V(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var uI=class{convertValue(e,n="none"){switch(Ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return xo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Se(o.doubleValue));return new Pc(s)}convertGeoPoint(e){return new xc(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=fI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bc(e));default:return null}}convertTimestamp(e){let n=or(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Re.fromString(e);be(XS(r));let i=new oh(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||sr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function sz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var zi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mh=class extends Sh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new vo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(SI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},vo=class extends Mh{data(e={}){return super.data(e)}},lI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new zi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vo(this._firestore,this._userDataWriter,r.key,r,new zi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new vo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new vo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:oz(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function oz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}var Nh=class extends uI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}};function xR(t,e){let n=Ec(t.firestore,Mo),r=_R(t),i=sz(t.converter,e);return az(n,[XH(bR(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,qi.exists(!1))]).then(()=>r)}function RI(t,...e){var n,r,i;t=Ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||IS(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(IS(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof Mt)l=Ec(t.firestore,Mo),h=yI(t._key.path),u={next:p=>{e[o]&&e[o](cz(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=Ec(t,Xi);l=Ec(p.firestore,Mo),h=p._query;let m=new Nh(l);u={next:y=>{e[o]&&e[o](new lI(l,m,p,y))},error:e[o+1],complete:e[o+2]},iz(t._query)}return function(m,y,C,N){let R=new X_(N),x=new G_(y,R,C);return m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return NH(yield mS(m),x)})),()=>{R.za(),m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return xH(yield mS(m),x)}))}}(wR(l),h,a,u)}function az(t,e){return function(r,i){let s=new ir;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return jH(yield YH(r),i,s)})),s.promise}(wR(t),e)}function cz(t,e,n){let r=n.docs.get(e._key),i=new Nh(t);return new Mh(t,i,e._key,r,new zi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){No=i})(Wr),Gr(new $t("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Mo(new Nv(r.getProvider("auth-internal")),new kv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oh(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Be($A,"4.7.1",e),Be($A,"4.7.1","esm2017")})();var Uh=function(){return Uh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Uh.apply(this,arguments)};var dz={includeMetadataChanges:!1};function PR(t,e){return e===void 0&&(e=dz),new oe(function(n){var r=RI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function OR(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Uh(Uh({},r),(n={},n[e.idField]=t.id,n))}function kR(t){return PR(t,{includeMetadataChanges:!0}).pipe(Y(function(e){return e.docs}))}function FR(t,e){return e===void 0&&(e={}),kR(t).pipe(Y(function(n){return n.map(function(r){return OR(r,e)})}))}var ts=class{constructor(e){return e}},LR="firestore",MI=class{constructor(){return sc(LR)}};var NI=new L("angularfire2.firestore-instances");function hz(t,e){let n=Rd(LR,t,e);return n&&new ts(n)}function fz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ts(r)}}var pz={provide:MI,deps:[[new st,NI]]},gz={provide:ts,useFactory:hz,deps:[[new st,NI],Zn]};function GQ(t,...e){return Be("angularfire",Fi.full,"fst"),Ft([gz,pz,{provide:NI,useFactory:fz(t),multi:!0,deps:[ye,Ke,co,Li,[new st,pc],[new st,ao],...e]}])}var VR=wt(FR,!0);var UR=wt(xR,!0);var jR=wt(vR,!0);var WQ=wt(IR,!0);var BR=wt(MR,!0);var $R=wt(RR,!0);var ZR=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(q(Xt),q(gt))},e.\u0275dir=Te({type:e});let t=e;return t})(),Jh=(()=>{let e=class e extends ZR{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275dir=Te({type:e,features:[_t]});let t=e;return t})(),Fo=new L("");var yz={provide:Fo,useExisting:kt(()=>Zh),multi:!0};function vz(){let t=qn()?qn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var _z=new L(""),Zh=(()=>{let e=class e extends ZR{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!vz())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(q(Xt),q(gt),q(_z,8))},e.\u0275dir=Te({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&It("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[gn([yz]),_t]});let t=e;return t})();function ii(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function XR(t){return t!=null&&typeof t.length=="number"}var zc=new L(""),Xh=new L(""),Iz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,HR=class{static min(e){return wz(e)}static max(e){return Ez(e)}static required(e){return eM(e)}static requiredTrue(e){return Dz(e)}static email(e){return bz(e)}static minLength(e){return Tz(e)}static maxLength(e){return Cz(e)}static pattern(e){return Az(e)}static nullValidator(e){return Bh(e)}static compose(e){return oM(e)}static composeAsync(e){return aM(e)}};function wz(t){return e=>{if(ii(e.value)||ii(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function Ez(t){return e=>{if(ii(e.value)||ii(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function eM(t){return ii(t.value)?{required:!0}:null}function Dz(t){return t.value===!0?null:{required:!0}}function bz(t){return ii(t.value)||Iz.test(t.value)?null:{email:!0}}function Tz(t){return e=>ii(e.value)||!XR(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Cz(t){return e=>XR(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function Az(t){if(!t)return Bh;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(ii(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function Bh(t){return null}function tM(t){return t!=null}function nM(t){return Ri(t)?Ee(t):t}function rM(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function iM(t,e){return e.map(n=>n(t))}function Sz(t){return!t.validate}function sM(t){return t.map(e=>Sz(e)?e:n=>e.validate(n))}function oM(t){if(!t)return null;let e=t.filter(tM);return e.length==0?null:function(n){return rM(iM(n,e))}}function kI(t){return t!=null?oM(sM(t)):null}function aM(t){if(!t)return null;let e=t.filter(tM);return e.length==0?null:function(n){let r=iM(n,e).map(nM);return Qf(r).pipe(Y(rM))}}function FI(t){return t!=null?aM(sM(t)):null}function zR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function cM(t){return t._rawValidators}function uM(t){return t._rawAsyncValidators}function xI(t){return t?Array.isArray(t)?t:[t]:[]}function $h(t,e){return Array.isArray(t)?t.includes(e):t===e}function qR(t,e){let n=xI(e);return xI(t).forEach(i=>{$h(n,i)||n.push(i)}),n}function GR(t,e){return xI(e).filter(n=>!$h(t,n))}var Hh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ur=class extends Hh{get formDirective(){return null}get path(){return null}},ns=class extends Hh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},zh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Rz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},lY=ce(F({},Rz),{"[class.ng-submitted]":"isSubmitted"}),lM=(()=>{let e=class e extends zh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(ns,2))},e.\u0275dir=Te({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Hl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[_t]});let t=e;return t})(),dM=(()=>{let e=class e extends zh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(ur,10))},e.\u0275dir=Te({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Hl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[_t]});let t=e;return t})();var Uc="VALID",jh="INVALID",Oo="PENDING",jc="DISABLED",si=class{},qh=class extends si{constructor(e,n){super(),this.value=e,this.source=n}},$c=class extends si{constructor(e,n){super(),this.pristine=e,this.source=n}},Hc=class extends si{constructor(e,n){super(),this.touched=e,this.source=n}},ko=class extends si{constructor(e,n){super(),this.status=e,this.source=n}},PI=class extends si{constructor(e){super(),this.source=e}},OI=class extends si{constructor(e){super(),this.source=e}};function hM(t){return(ef(t)?t.validators:t)||null}function Mz(t){return Array.isArray(t)?kI(t):t||null}function fM(t,e){return(ef(e)?e.asyncValidators:t)||null}function Nz(t){return Array.isArray(t)?FI(t):t||null}function ef(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function xz(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[n])throw new H(1001,"")}function Pz(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new H(1002,"")})}var Gh=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Hs(()=>this.statusReactive()),this.statusReactive=js(void 0),this._pristine=Hs(()=>this.pristineReactive()),this.pristineReactive=js(!0),this._touched=Hs(()=>this.touchedReactive()),this.touchedReactive=js(!1),this._events=new $e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mn(this.statusReactive)}set status(e){mn(()=>this.statusReactive.set(e))}get valid(){return this.status===Uc}get invalid(){return this.status===jh}get pending(){return this.status==Oo}get disabled(){return this.status===jc}get enabled(){return this.status!==jc}get pristine(){return mn(this.pristineReactive)}set pristine(e){mn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return mn(this.touchedReactive)}set touched(e){mn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(GR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(GR(e,this._rawAsyncValidators))}hasValidator(e){return $h(this._rawValidators,e)}hasAsyncValidator(e){return $h(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Hc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Hc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new $c(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new $c(!0,r))}markAsPending(e={}){this.status=Oo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ko(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=jc,this.errors=null,this._forEachChild(i=>{i.disable(ce(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qh(this.value,r)),this._events.next(new ko(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Uc,this._forEachChild(r=>{r.enable(ce(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Uc||this.status===Oo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qh(this.value,n)),this._events.next(new ko(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jc:Uc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Oo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=nM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ko(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Ae,this.statusChanges=new Ae}_calculateStatus(){return this._allControlsDisabled()?jc:this.errors?jh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oo)?Oo:this._anyControlsHaveStatus(jh)?jh:Uc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new $c(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Hc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ef(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Mz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Nz(this._rawAsyncValidators)}},Wh=class extends Gh{constructor(e,n,r){super(hM(n),fM(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Pz(this,!0,e),Object.keys(e).forEach(r=>{xz(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var qc=new L("CallSetDisabledState",{providedIn:"root",factory:()=>tf}),tf="always";function pM(t,e){return[...e.path,t]}function Kh(t,e,n=tf){LI(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),kz(t,e),Lz(t,e),Fz(t,e),Oz(t,e)}function WR(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Yh(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Qh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Oz(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function LI(t,e){let n=cM(t);e.validator!==null?t.setValidators(zR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=uM(t);e.asyncValidator!==null?t.setAsyncValidators(zR(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Qh(e._rawValidators,i),Qh(e._rawAsyncValidators,i)}function Yh(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=cM(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=uM(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Qh(e._rawValidators,r),Qh(e._rawAsyncValidators,r),n}function kz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&gM(t,e)})}function Fz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&gM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function gM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Lz(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function mM(t,e){t==null,LI(t,e)}function Vz(t,e){return Yh(t,e)}function yM(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Uz(t){return Object.getPrototypeOf(t.constructor)===Jh}function vM(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function _M(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Zh?n=s:Uz(s)?r=s:i=s}),i||r||n||null}function jz(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Bz={provide:ur,useExisting:kt(()=>VI)},Bc=Promise.resolve(),VI=(()=>{let e=class e extends ur{get submitted(){return mn(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Hs(()=>this.submittedReactive()),this.submittedReactive=js(!1),this._directives=new Set,this.ngSubmit=new Ae,this.form=new Wh({},kI(r),FI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Bc.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Kh(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Bc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Bc.then(()=>{let i=this._findContainer(r.path),s=new Wh({});mM(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Bc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Bc.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),vM(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(q(zc,10),q(Xh,10),q(qc,8))},e.\u0275dir=Te({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&It("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([Bz]),_t]});let t=e;return t})();function KR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function QR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var IM=class extends Gh{constructor(e=null,n,r){super(hM(n),fM(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ef(n)&&(n.nonNullable||n.initialValueIsDefault)&&(QR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){QR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $z=t=>t instanceof IM;var Hz={provide:ns,useExisting:kt(()=>UI)},YR=Promise.resolve(),UI=(()=>{let e=class e extends ns{constructor(r,i,s,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new IM,this._registered=!1,this.name="",this.update=new Ae,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=_M(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),yM(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Kh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){YR.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Lr(i);YR.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?pM(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(q(ur,9),q(zc,10),q(Xh,10),q(Fo,10),q(Fr,8),q(qc,8))},e.\u0275dir=Te({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gn([Hz]),_t,Zt]});let t=e;return t})(),wM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Te({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),zz={provide:Fo,useExisting:kt(()=>qz),multi:!0},qz=(()=>{let e=class e extends Jh{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275dir=Te({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&It("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[gn([zz]),_t]});let t=e;return t})();var EM=new L("");var Gz={provide:ur,useExisting:kt(()=>Wz)},Wz=(()=>{let e=class e extends ur{get submitted(){return mn(this._submittedReactive)}set submitted(r){this._submittedReactive.set(r)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Hs(()=>this._submittedReactive()),this._submittedReactive=js(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ae,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return Kh(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){WR(r.control||null,r,!1),jz(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this._submittedReactive.set(!0),vM(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new PI(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this._submittedReactive.set(!1),this.form._events.next(new OI(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(WR(i||null,r),$z(s)&&(Kh(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);mM(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&Vz(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){LI(this.form,this),this._oldForm&&Yh(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(q(zc,10),q(Xh,10),q(qc,8))},e.\u0275dir=Te({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&It("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[gn([Gz]),_t,Zt]});let t=e;return t})();var Kz={provide:ns,useExisting:kt(()=>Qz)},Qz=(()=>{let e=class e extends ns{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ae,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=_M(this,o)}ngOnChanges(r){this._added||this._setUpControl(),yM(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return pM(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(q(ur,13),q(zc,10),q(Xh,10),q(Fo,10),q(EM,8))},e.\u0275dir=Te({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[gn([Kz]),_t,Zt]});let t=e;return t})(),Yz={provide:Fo,useExisting:kt(()=>bM),multi:!0};function DM(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Jz(t){return t.split(":")[0]}var bM=(()=>{let e=class e extends Jh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=DM(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=Jz(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275dir=Te({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&It("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[gn([Yz]),_t]});let t=e;return t})(),hY=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(DM(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(q(gt),q(Xt),q(bM,9))},e.\u0275dir=Te({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Zz={provide:Fo,useExisting:kt(()=>TM),multi:!0};function JR(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Xz(t){return t.split(":")[0]}var TM=(()=>{let e=class e extends Jh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let u=0;u<a.length;u++){let l=a[u],h=this._getOptionValue(l.value);s.push(h)}}else{let a=i.options;for(let u=0;u<a.length;u++){let l=a[u];if(l.selected){let h=this._getOptionValue(l.value);s.push(h)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=Xz(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275dir=Te({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&It("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[gn([Zz]),_t]});let t=e;return t})(),fY=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(JR(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(JR(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(q(gt),q(Xt),q(TM,9))},e.\u0275dir=Te({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var eq=(()=>{let e=class e{constructor(){this._validator=Bh}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Bh,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Te({type:e,features:[Zt]});let t=e;return t})();var tq={provide:zc,useExisting:kt(()=>jI),multi:!0};var jI=(()=>{let e=class e extends eq{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Lr,this.createValidator=r=>eM}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bn(e)))(s||e)}})(),e.\u0275dir=Te({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Ea("required",s._enabled?"":null)},inputs:{required:"required"},features:[gn([tq]),_t]});let t=e;return t})();var CM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=Qt({});let t=e;return t})();var AM=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:qc,useValue:r.callSetDisabledState??tf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=Qt({imports:[CM]});let t=e;return t})(),pY=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:EM,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:qc,useValue:r.callSetDisabledState??tf}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Yt({type:e}),e.\u0275inj=Qt({imports:[CM]});let t=e;return t})();var nf=class t{constructor(e){this.firestore=e;this.messagesCollection=jR(this.firestore,"messages");let n=$R(this.messagesCollection,BR("time","asc"));this.messages=VR(n,{idField:"id"})}messagesCollection;messages;sendMessage(e,n){let i={user:e,message:n,time:new Date};return UR(this.messagesCollection,i).then(()=>{}).catch(s=>{console.error("Error al enviar mensaje: ",s)})}getMessages(){return this.messages.pipe(Y(e=>e.map(n=>{let r=n.time.toDate();return ce(F({},n),{time:r})})))}static \u0275fac=function(n){return new(n||t)($(ts))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};var iq=(t,e)=>({"bg-primary text-white ms-auto text-end own-msg":t,"bg-success text-white text-start":e});function sq(t,e){if(t&1){let n=Yg();Tt(0,"button",3),It("click",function(){ya(n);let i=Si();return va(i.toggleChat())}),$s(1,"i",4),jt()}}function oq(t,e){if(t&1&&(Tt(0,"div")(1,"small",16),Da(2),jt(),Tt(3,"div",17),Da(4),jt()()),t&2){let n=e.$implicit,r=Si(2);xr(2),Jg("",n.user," - ",n.time.toLocaleString(),""),xr(),Bs("ngClass",NT(4,iq,n.user===r.currentUser,n.user!==r.currentUser)),xr(),zl(" ",n.message," ")}}function aq(t,e){if(t&1){let n=Yg();Tt(0,"div",5)(1,"div",6)(2,"h3",7),Da(3,"Chat Mini"),jt(),Tt(4,"button",8),It("click",function(){ya(n);let i=Si();return va(i.toggleChat())}),$s(5,"i",9),jt()(),Tt(6,"div",10),$l(7,oq,5,7,"div",11),jt(),Tt(8,"form",12),It("submit",function(){ya(n);let i=Si();return va(i.sendMessage())}),Tt(9,"div",13)(10,"input",14),Xg("ngModelChange",function(i){ya(n);let s=Si();return RT(s.newMessage,i)||(s.newMessage=i),va(i)}),jt(),Tt(11,"button",15),Da(12,"Enviar"),jt()()()()}if(t&2){let n=Si();xr(7),Bs("ngForOf",n.messages),xr(3),Zg("ngModel",n.newMessage)}}var SM=class t{constructor(e,n){this.chatService=e;this.auth=n;this.currentUser=this.auth.currentUser?.email||"Anonimo"}messages=[];newMessage="";currentUser;messagesSubscription;isOpen=!1;toggleChat(){this.isOpen=!this.isOpen}ngOnInit(){this.messagesSubscription=this.chatService.getMessages().subscribe(e=>{this.messages=e})}ngOnDestroy(){this.messagesSubscription&&this.messagesSubscription.unsubscribe()}sendMessage(){this.newMessage.trim()!==""&&(this.chatService.sendMessage(this.currentUser,this.newMessage),this.newMessage="")}static \u0275fac=function(n){return new(n||t)(q(nf),q(nr))};static \u0275cmp=Cl({type:t,selectors:[["app-chat"]],standalone:!0,features:[ql],decls:3,vars:2,consts:[[1,"chat-btn-container"],["class","btn btn-primary rounded-circle p-0 chat-closed-icon",3,"click",4,"ngIf"],["class","bg-white border rounded shadow-lg d-flex flex-column chat-open",4,"ngIf"],[1,"btn","btn-primary","rounded-circle","p-0","chat-closed-icon",3,"click"],[1,"bi","bi-chat-dots-fill"],[1,"bg-white","border","rounded","shadow-lg","d-flex","flex-column","chat-open"],[1,"d-flex","justify-content-between","align-items-center","p-2","border-bottom"],[1,"fw-semibold"],[1,"btn","btn-link",3,"click"],[1,"bi","bi-x"],[1,"flex-grow-1","p-2","overflow-auto"],[4,"ngFor","ngForOf"],[1,"p-2","border-top",3,"submit"],[1,"input-group"],["type","text","placeholder","Escribe un mensaje...","name","message","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"text-muted"],[1,"mb-2","p-2","rounded","message-bubble",3,"ngClass"]],template:function(n,r){n&1&&(Tt(0,"div",0),$l(1,sq,2,0,"button",1)(2,aq,13,2,"div",2),jt()),n&2&&(xr(),Bs("ngIf",!r.isOpen),xr(),Bs("ngIf",r.isOpen))},dependencies:[AM,wM,Zh,lM,dM,jI,UI,VI,dm,XT,eC,tC],styles:[".chat-btn-container[_ngcontent-%COMP%]{position:fixed;right:32px;bottom:10vh}.chat-closed-icon[_ngcontent-%COMP%]{width:48px;height:48px}.chat-open[_ngcontent-%COMP%]{width:320px;max-height:80vh}.message-bubble[_ngcontent-%COMP%]{max-width:80%}.own-msg[_ngcontent-%COMP%]{color:#fff}"]})};var RM=class t{constructor(e){this.auth=e}get currentUser(){return this.auth.currentUser}get userEmail(){return this.auth.currentUser?.email}static \u0275fac=function(n){return new(n||t)($(nr))};static \u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})};export{w as a,kN as b,U as c,Qt as d,$ as e,P as f,Cl as g,Yt as h,ya as i,va as j,R6 as k,Ae as l,XP as m,xr as n,q as o,$l as p,Bs as q,DT as r,P6 as s,Tt as t,jt as u,$s as v,k1 as w,F1 as x,Yg as y,It as z,Si as A,Da as B,H1 as C,zl as D,Jg as E,Zg as F,RT as G,Xg as H,ql as I,O6 as J,NT as K,k6 as L,XT as M,eC as N,tC as O,dm as P,RF as Q,KF as R,_8 as S,q8 as T,GL as U,vn as V,xC as W,u5 as X,l5 as Y,d5 as Z,Zh as _,HR as $,lM as aa,dM as ba,Wh as ca,VI as da,IM as ea,UI as fa,wM as ga,qz as ha,Wz as ia,Qz as ja,bM as ka,hY as la,TM as ma,fY as na,jI as oa,AM as pa,pY as qa,eK as ra,tK as sa,nr as ta,KK as ua,QK as va,YK as wa,JK as xa,ZK as ya,ts as za,GQ as Aa,UR as Ba,jR as Ca,WQ as Da,SM as Ea,RM as Fa};
