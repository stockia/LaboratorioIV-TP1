var tM=Object.defineProperty,nM=Object.defineProperties;var rM=Object.getOwnPropertyDescriptors;var dw=Object.getOwnPropertySymbols,iM=Object.getPrototypeOf,sM=Object.prototype.hasOwnProperty,oM=Object.prototype.propertyIsEnumerable,aM=Reflect.get;var hw=(t,e,n)=>e in t?tM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k=(t,e)=>{for(var n in e||={})sM.call(e,n)&&hw(t,n,e[n]);if(dw)for(var n of dw(e))oM.call(e,n)&&hw(t,n,e[n]);return t},oe=(t,e)=>nM(t,rM(e));var nr=(t,e,n)=>aM(iM(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});function fw(t,e){return Object.is(t,e)}var Ve=null,Qc=!1,Yc=1,En=Symbol("SIGNAL");function he(t){let e=Ve;return Ve=t,e}function pw(){return Ve}var zo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sf(t){if(Qc)throw new Error("");if(Ve===null)return;Ve.consumerOnSignalRead(t);let e=Ve.nextProducerIndex++;if(eu(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==t&&qo(Ve)){let n=Ve.producerNode[e];Xc(n,Ve.producerIndexOfThis[e])}Ve.producerNode[e]!==t&&(Ve.producerNode[e]=t,Ve.producerIndexOfThis[e]=qo(Ve)?vw(t,Ve,e):0),Ve.producerLastReadVersion[e]=t.version}function cM(){Yc++}function gw(t){if(!(qo(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Yc)){if(!t.producerMustRecompute(t)&&!af(t)){t.dirty=!1,t.lastCleanEpoch=Yc;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Yc}}function mw(t){if(t.liveConsumerNode===void 0)return;let e=Qc;Qc=!0;try{for(let n of t.liveConsumerNode)n.dirty||uM(n)}finally{Qc=e}}function yw(){return Ve?.consumerAllowSignalWrites!==!1}function uM(t){t.dirty=!0,mw(t),t.consumerMarkedDirty?.(t)}function Jc(t){return t&&(t.nextProducerIndex=0),he(t)}function of(t,e){if(he(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(qo(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Xc(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function af(t){eu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(gw(n),r!==n.version))return!0}return!1}function cf(t){if(eu(t),qo(t))for(let e=0;e<t.producerNode.length;e++)Xc(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function vw(t,e,n){if(_w(t),t.liveConsumerNode.length===0&&Iw(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=vw(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Xc(t,e){if(_w(t),t.liveConsumerNode.length===1&&Iw(t))for(let r=0;r<t.producerNode.length;r++)Xc(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];eu(i),i.producerIndexOfThis[r]=e}}function qo(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function eu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function _w(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Iw(t){return t.producerNode!==void 0}function ww(t){let e=Object.create(lM);e.computation=t;let n=()=>{if(gw(e),sf(e),e.value===Zc)throw e.error;return e.value};return n[En]=e,n}var nf=Symbol("UNSET"),rf=Symbol("COMPUTING"),Zc=Symbol("ERRORED"),lM=oe(k({},zo),{value:nf,dirty:!0,error:null,equal:fw,producerMustRecompute(t){return t.value===nf||t.value===rf},producerRecomputeValue(t){if(t.value===rf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=rf;let n=Jc(t),r;try{r=t.computation()}catch(i){r=Zc,t.error=i}finally{of(t,n)}if(e!==nf&&e!==Zc&&r!==Zc&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function dM(){throw new Error}var Ew=dM;function Dw(){Ew()}function Cw(t){Ew=t}var hM=null;function bw(t){let e=Object.create(Sw);e.value=t;let n=()=>(sf(e),e.value);return n[En]=e,n}function uf(t,e){yw()||Dw(),t.equal(t.value,e)||(t.value=e,fM(t))}function Tw(t,e){yw()||Dw(),uf(t,e(t.value))}var Sw=oe(k({},zo),{equal:fw,value:void 0});function fM(t){t.version++,cM(),mw(t),hM?.()}function J(t){return typeof t=="function"}function Ki(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var tu=Ki(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Gr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Re=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(s){e=s instanceof tu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Aw(s)}catch(o){e=e??[],o instanceof tu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new tu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Aw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Gr(n,e)}remove(e){let{_finalizers:n}=this;n&&Gr(n,e),e instanceof t&&e._removeParent(this)}};Re.EMPTY=(()=>{let t=new Re;return t.closed=!0,t})();var lf=Re.EMPTY;function nu(t){return t instanceof Re||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function Aw(t){J(t)?t():t.unsubscribe()}var Vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qi={setTimeout(t,e,...n){let{delegate:r}=Qi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Qi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ru(t){Qi.setTimeout(()=>{let{onUnhandledError:e}=Vt;if(e)e(t);else throw t})}function Go(){}var Rw=df("C",void 0,void 0);function Mw(t){return df("E",void 0,t)}function Nw(t){return df("N",t,void 0)}function df(t,e,n){return{kind:t,value:e,error:n}}var Wr=null;function Yi(t){if(Vt.useDeprecatedSynchronousErrorHandling){let e=!Wr;if(e&&(Wr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Wr;if(Wr=null,n)throw r}}else t()}function xw(t){Vt.useDeprecatedSynchronousErrorHandling&&Wr&&(Wr.errorThrown=!0,Wr.error=t)}var Kr=class extends Re{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nu(e)&&e.add(this)):this.destination=mM}static create(e,n,r){return new Zi(e,n,r)}next(e){this.isStopped?ff(Nw(e),this):this._next(e)}error(e){this.isStopped?ff(Mw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ff(Rw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pM=Function.prototype.bind;function hf(t,e){return pM.call(t,e)}var pf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){iu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){iu(r)}else iu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){iu(n)}}},Zi=class extends Kr{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Vt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hf(e.next,s),error:e.error&&hf(e.error,s),complete:e.complete&&hf(e.complete,s)}):i=e}this.destination=new pf(i)}};function iu(t){Vt.useDeprecatedSynchronousErrorHandling?xw(t):ru(t)}function gM(t){throw t}function ff(t,e){let{onStoppedNotification:n}=Vt;n&&Qi.setTimeout(()=>n(t,e))}var mM={closed:!0,next:Go,error:gM,complete:Go};var Ji=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yt(t){return t}function su(...t){return gf(t)}function gf(t){return t.length===0?yt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ce=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=vM(n)?n:new Zi(n,r,i);return Yi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Pw(r),new r((i,s)=>{let o=new Zi({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ji](){return this}pipe(...n){return gf(n)(this)}toPromise(n){return n=Pw(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Pw(t){var e;return(e=t??Vt.Promise)!==null&&e!==void 0?e:Promise}function yM(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function vM(t){return t&&t instanceof Kr||yM(t)&&nu(t)}function mf(t){return J(t?.lift)}function fe(t){return e=>{if(mf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new yf(t,e,n,r,i)}var yf=class extends Kr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Xi(){return fe((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var es=class extends ce{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,mf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Re;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Re.EMPTY)}return e}refCount(){return Xi()(this)}};var Ow=Ki(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class t extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ou(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ow}next(n){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?lf:(this.currentObservers=null,s.push(n),new Re(()=>{this.currentObservers=null,Gr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ce;return n.source=this,n}}return t.create=(e,n)=>new ou(e,n),t})(),ou=class extends $e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:lf}};var We=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var vf={now(){return(vf.delegate||Date).now()},delegate:void 0};var au=class extends Re{constructor(e,n){super()}schedule(e,n=0){return this}};var Wo={setInterval(t,e,...n){let{delegate:r}=Wo;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Wo;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ts=class extends au{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Wo.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Wo.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Gr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ns=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ns.now=vf.now;var rs=class extends ns{constructor(e,n=ns.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var _f=new rs(ts);var cu=class extends ts{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var uu=class extends rs{};var If=new uu(cu);var vt=new ce(t=>t.complete());function kw(t){return t&&J(t.schedule)}function Fw(t){return t[t.length-1]}function lu(t){return J(Fw(t))?t.pop():void 0}function rr(t){return kw(Fw(t))?t.pop():void 0}function wf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Vw(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Lw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qr(t){return this instanceof Qr?(this.v=t,this):new Qr(t)}function Uw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(S){return Promise.resolve(S).then(v,p)}}function a(v,S){r[v]&&(i[v]=function(N){return new Promise(function(R,F){s.push([v,N,R,F])>1||u(v,N)})},S&&(i[v]=S(i[v])))}function u(v,S){try{l(r[v](S))}catch(N){m(s[0][3],N)}}function l(v){v.value instanceof Qr?Promise.resolve(v.value.v).then(h,p):m(s[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function m(v,S){v(S),s.shift(),s.length&&u(s[0][0],s[0][1])}}function jw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Lw=="function"?Lw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var du=t=>t&&typeof t.length=="number"&&typeof t!="function";function hu(t){return J(t?.then)}function fu(t){return J(t[Ji])}function pu(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function gu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _M(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mu=_M();function yu(t){return J(t?.[mu])}function vu(t){return Uw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Qr(n.read());if(i)return yield Qr(void 0);yield yield Qr(r)}}finally{n.releaseLock()}})}function _u(t){return J(t?.getReader)}function xe(t){if(t instanceof ce)return t;if(t!=null){if(fu(t))return IM(t);if(du(t))return wM(t);if(hu(t))return EM(t);if(pu(t))return Bw(t);if(yu(t))return DM(t);if(_u(t))return CM(t)}throw gu(t)}function IM(t){return new ce(e=>{let n=t[Ji]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function wM(t){return new ce(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function EM(t){return new ce(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ru)})}function DM(t){return new ce(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Bw(t){return new ce(e=>{bM(t,e).catch(n=>e.error(n))})}function CM(t){return Bw(vu(t))}function bM(t,e){var n,r,i,s;return Vw(this,void 0,void 0,function*(){try{for(n=jw(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ft(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ir(t,e=0){return fe((n,r)=>{n.subscribe(ue(r,i=>ft(r,t,()=>r.next(i),e),()=>ft(r,t,()=>r.complete(),e),i=>ft(r,t,()=>r.error(i),e)))})}function sr(t,e=0){return fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function $w(t,e){return xe(t).pipe(sr(e),ir(e))}function Hw(t,e){return xe(t).pipe(sr(e),ir(e))}function qw(t,e){return new ce(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function zw(t,e){return new ce(n=>{let r;return ft(n,e,()=>{r=t[mu](),ft(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Iu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ce(n=>{ft(n,e,()=>{let r=t[Symbol.asyncIterator]();ft(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Gw(t,e){return Iu(vu(t),e)}function Ww(t,e){if(t!=null){if(fu(t))return $w(t,e);if(du(t))return qw(t,e);if(hu(t))return Hw(t,e);if(pu(t))return Iu(t,e);if(yu(t))return zw(t,e);if(_u(t))return Gw(t,e)}throw gu(t)}function Ce(t,e){return e?Ww(t,e):xe(t)}function z(...t){let e=rr(t);return Ce(t,e)}function is(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new ce(e?i=>e.schedule(r,0,i):r)}function Ef(t){return!!t&&(t instanceof ce||J(t.lift)&&J(t.subscribe))}var Dn=Ki(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function X(t,e){return fe((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:TM}=Array;function SM(t,e){return TM(e)?t(...e):t(e)}function wu(t){return X(e=>SM(t,e))}var{isArray:AM}=Array,{getPrototypeOf:RM,prototype:MM,keys:NM}=Object;function Eu(t){if(t.length===1){let e=t[0];if(AM(e))return{args:e,keys:null};if(xM(e)){let n=NM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function xM(t){return t&&typeof t=="object"&&RM(t)===MM}function Du(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ko(...t){let e=rr(t),n=lu(t),{args:r,keys:i}=Eu(t);if(r.length===0)return Ce([],e);let s=new ce(PM(r,e,i?o=>Du(i,o):yt));return n?s.pipe(wu(n)):s}function PM(t,e,n=yt){return r=>{Kw(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)Kw(e,()=>{let l=Ce(t[u],e),h=!1;l.subscribe(ue(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Kw(t,e,n){t?ft(n,t,e):e()}function Qw(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?S(N):u.push(N),S=N=>{s&&e.next(N),l++;let R=!1;xe(n(N,h++)).subscribe(ue(e,F=>{i?.(F),s?v(F):e.next(F)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let F=u.shift();o?ft(e,o,()=>S(F)):S(F)}m()}catch(F){e.error(F)}}))};return t.subscribe(ue(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Pe(t,e,n=1/0){return J(e)?Pe((r,i)=>X((s,o)=>e(r,s,i,o))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),fe((r,i)=>Qw(r,i,t,n)))}function or(t=1/0){return Pe(yt,t)}function Yw(){return or(1)}function ss(...t){return Yw()(Ce(t,rr(t)))}function Cu(t){return new ce(e=>{xe(t()).subscribe(e)})}function Df(...t){let e=lu(t),{args:n,keys:r}=Eu(t),i=new ce(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;xe(n[h]).subscribe(ue(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Du(r,a):a),s.complete())}))}});return e?i.pipe(wu(e)):i}function _t(t,e){return fe((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function ar(t){return fe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=xe(t(o,ar(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function Zw(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(ue(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Yr(t,e){return J(e)?Pe(t,e,1):Pe(t,1)}function cr(t){return fe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Cn(t){return t<=0?()=>vt:fe((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Cf(t){return X(()=>t)}function bu(t=OM){return fe((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function OM(){return new Dn}function Qo(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,s)=>t(i,s,r)):yt,Cn(1),n?cr(e):bu(()=>new Dn))}function os(t){return t<=0?()=>vt:fe((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function bf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?_t((i,s)=>t(i,s,r)):yt,os(1),n?cr(e):bu(()=>new Dn))}function Tu(t,e){return fe(Zw(t,e,arguments.length>=2,!0))}function Su(...t){let e=rr(t);return fe((n,r)=>{(e?ss(t,n,e):ss(t,n)).subscribe(r)})}function At(t,e){return fe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=s++;xe(t(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Tf(t){return fe((e,n)=>{xe(t).subscribe(ue(n,()=>n.complete(),Go)),!n.closed&&e.subscribe(n)})}function Ue(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?fe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):yt}var FE="https://g.co/ng/security#xss",j=class extends Error{constructor(e,n){super(Lp(e,n)),this.code=e}};function Lp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ia(t){return{toString:t}.toString()}var Au="__parameters__";function kM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function LE(t,e,n){return ia(()=>{let r=kM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Au)?u[Au]:Object.defineProperty(u,Au,{value:[]})[Au];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var jf=globalThis;function we(t){for(let e in t)if(t[e]===we)return e;throw Error("Could not find renamed property on target object.")}function FM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(dt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Jw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var LM=we({__forward_ref__:we});function ui(t){return t.__forward_ref__=ui,t.toString=function(){return dt(this())},t}function lt(t){return VE(t)?t():t}function VE(t){return typeof t=="function"&&t.hasOwnProperty(LM)&&t.__forward_ref__===ui}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vr(t){return{providers:t.providers||[],imports:t.imports||[]}}function ul(t){return Xw(t,jE)||Xw(t,BE)}function UE(t){return ul(t)!==null}function Xw(t,e){return t.hasOwnProperty(e)?t[e]:null}function VM(t){let e=t&&(t[jE]||t[BE]);return e||null}function eE(t){return t&&(t.hasOwnProperty(tE)||t.hasOwnProperty(UM))?t[tE]:null}var jE=we({\u0275prov:we}),tE=we({\u0275inj:we}),BE=we({ngInjectableDef:we}),UM=we({ngInjectorDef:we}),U=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function $E(t){return t&&!!t.\u0275providers}var jM=we({\u0275cmp:we}),BM=we({\u0275dir:we}),$M=we({\u0275pipe:we}),HM=we({\u0275mod:we}),Uu=we({\u0275fac:we}),Zo=we({__NG_ELEMENT_ID__:we}),nE=we({__NG_ENV_ID__:we});function fs(t){return typeof t=="string"?t:t==null?"":String(t)}function qM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():fs(t)}function zM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,t)}function Vp(t,e){throw new j(-201,!1)}var se=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(se||{}),Bf;function HE(){return Bf}function Rt(t){let e=Bf;return Bf=t,e}function qE(t,e,n){let r=ul(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&se.Optional)return null;if(e!==void 0)return e;Vp(t,"Injector")}var GM={},Jo=GM,$f="__NG_DI_FLAG__",ju="ngTempTokenPath",WM="ngTokenPath",KM=/\n/gm,QM="\u0275",rE="__source",ds;function YM(){return ds}function ur(t){let e=ds;return ds=t,e}function ZM(t,e=se.Default){if(ds===void 0)throw new j(-203,!1);return ds===null?qE(t,void 0,e):ds.get(t,e&se.Optional?null:void 0,e)}function G(t,e=se.Default){return(HE()||ZM)(lt(t),e)}function P(t,e=se.Default){return G(t,ll(e))}function ll(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Hf(t){let e=[];for(let n=0;n<t.length;n++){let r=lt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=se.Default;for(let o=0;o<r.length;o++){let a=r[o],u=JM(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(G(i,s))}else e.push(G(r))}return e}function zE(t,e){return t[$f]=e,t.prototype[$f]=e,t}function JM(t){return t[$f]}function XM(t,e,n,r){let i=t[ju];throw e[rE]&&i.unshift(e[rE]),t.message=eN(`
`+t.message,i,n,r),t[WM]=i,t[ju]=null,t}function eN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==QM?t.slice(2):t;let i=dt(e);if(Array.isArray(e))i=e.map(dt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):dt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(KM,`
  `)}`}var it=zE(LE("Optional"),8);var Up=zE(LE("SkipSelf"),4);function ps(t,e){let n=t.hasOwnProperty(Uu);return n?t[Uu]:null}function tN(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function nN(t){return t.flat(Number.POSITIVE_INFINITY)}function jp(t,e){t.forEach(n=>Array.isArray(n)?jp(n,e):e(n))}function GE(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Bu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function rN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function iN(t,e,n){let r=sa(t,e);return r>=0?t[r|1]=n:(r=~r,rN(t,r,e,n)),r}function Sf(t,e){let n=sa(t,e);if(n>=0)return t[n|1]}function sa(t,e){return sN(t,e,1)}function sN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var gs={},Mt=[],ms=new U(""),WE=new U("",-1),KE=new U(""),$u=class{get(e,n=Jo){if(n===Jo){let r=new Error(`NullInjectorError: No provider for ${dt(e)}!`);throw r.name="NullInjectorError",r}return n}},QE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(QE||{}),Jt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Jt||{}),hr=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(hr||{});function oN(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function qf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];aN(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function YE(t){return t===3||t===4||t===6}function aN(t){return t.charCodeAt(0)===64}function Xo(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?iE(t,n,i,null,e[++r]):iE(t,n,i,null,null))}}return t}function iE(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var ZE="ng-template";function cN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&oN(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Bp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Bp(t){return t.type===4&&t.value!==ZE}function uN(t,e,n){let r=t.type===4&&!n?ZE:t.value;return e===r}function lN(t,e,n){let r=4,i=t.attrs,s=i!==null?fN(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Ut(r)&&!Ut(u))return!1;if(o&&Ut(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!uN(t,u,n)||u===""&&e.length===1){if(Ut(r))return!1;o=!0}}else if(r&8){if(i===null||!cN(t,i,u,n)){if(Ut(r))return!1;o=!0}}else{let l=e[++a],h=dN(u,i,Bp(t),n);if(h===-1){if(Ut(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Ut(r))return!1;o=!0}}}}return Ut(r)||o}function Ut(t){return(t&1)===0}function dN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return pN(e,t)}function hN(t,e,n=!1){for(let r=0;r<e.length;r++)if(lN(t,e[r],n))return!0;return!1}function fN(t){for(let e=0;e<t.length;e++){let n=t[e];if(YE(n))return e}return t.length}function pN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function sE(t,e){return t?":not("+e.trim()+")":e}function gN(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Ut(o)&&(e+=sE(s,i),i=""),r=o,s=s||!Ut(r);n++}return i!==""&&(e+=sE(s,i)),e}function mN(t){return t.map(gN).join(",")}function yN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Ut(i))break;i=s}r++}return{attrs:e,classes:n}}function dl(t){return ia(()=>{let e=nD(t),n=oe(k({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===QE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Jt.Emulated,styles:t.styles||Mt,_:null,schemas:t.schemas||null,tView:null,id:""});rD(n);let r=t.dependencies;return n.directiveDefs=aE(r,!1),n.pipeDefs=aE(r,!0),n.id=IN(n),n})}function vN(t){return fr(t)||JE(t)}function _N(t){return t!==null}function _r(t){return ia(()=>({type:t.type,bootstrap:t.bootstrap||Mt,declarations:t.declarations||Mt,imports:t.imports||Mt,exports:t.exports||Mt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function oE(t,e){if(t==null)return gs;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=hr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==hr.None?[r,a]:r,e[s]=o):n[s]=r}return n}function je(t){return ia(()=>{let e=nD(t);return rD(e),e})}function fr(t){return t[jM]||null}function JE(t){return t[BM]||null}function XE(t){return t[$M]||null}function eD(t){let e=fr(t)||JE(t)||XE(t);return e!==null?e.standalone:!1}function tD(t,e){let n=t[HM]||null;if(!n&&e===!0)throw new Error(`Type ${dt(t)} does not have '\u0275mod' property.`);return n}function nD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||gs,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Mt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oE(t.inputs,e),outputs:oE(t.outputs),debugInfo:null}}function rD(t){t.features?.forEach(e=>e(t))}function aE(t,e){if(!t)return null;let n=e?XE:vN;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(_N)}function IN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nn(t){return{\u0275providers:t}}function wN(...t){return{\u0275providers:iD(!0,t),\u0275fromNgModule:!0}}function iD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return jp(e,o=>{let a=o;zf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&sD(i,s),n}function sD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];$p(i,s=>{e(s,r)})}}function zf(t,e,n,r){if(t=lt(t),!t)return!1;let i=null,s=eE(t),o=!s&&fr(t);if(!s&&!o){let u=t.ngModule;if(s=eE(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)zf(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{jp(s.imports,h=>{zf(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&sD(l,e)}if(!a){let l=ps(i)||(()=>new i);e({provide:i,useFactory:l,deps:Mt},i),e({provide:KE,useValue:i,multi:!0},i),e({provide:ms,useValue:()=>G(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;$p(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function $p(t,e){for(let n of t)$E(n)&&(n=n.\u0275providers),Array.isArray(n)?$p(n,e):e(n)}var EN=we({provide:String,useValue:we});function oD(t){return t!==null&&typeof t=="object"&&EN in t}function DN(t){return!!(t&&t.useExisting)}function CN(t){return!!(t&&t.useFactory)}function ys(t){return typeof t=="function"}function bN(t){return!!t.useClass}var hl=new U(""),Pu={},TN={},Af;function Hp(){return Af===void 0&&(Af=new $u),Af}var It=class{},ea=class extends It{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wf(e,o=>this.processProvider(o)),this.records.set(WE,as(void 0,this)),i.has("environment")&&this.records.set(It,as(void 0,this));let s=this.records.get(hl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(KE,Mt,se.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=he(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),he(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ur(this),r=Rt(void 0),i;try{return e()}finally{ur(n),Rt(r)}}get(e,n=Jo,r=se.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(nE))return e[nE](this);r=ll(r);let i,s=ur(this),o=Rt(void 0);try{if(!(r&se.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=NN(e)&&ul(e);l&&this.injectableDefInScope(l)?u=as(Gf(e),Pu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&se.Self?Hp():this.parent;return n=r&se.Optional&&n===Jo?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ju]=a[ju]||[]).unshift(dt(e)),s)throw a;return XM(a,e,"R3InjectorError",this.source)}else throw a}finally{Rt(o),ur(s)}}resolveInjectorInitializers(){let e=he(null),n=ur(this),r=Rt(void 0),i;try{let s=this.get(ms,Mt,se.Self);for(let o of s)o()}finally{ur(n),Rt(r),he(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=lt(e);let n=ys(e)?e:lt(e&&e.provide),r=AN(e);if(!ys(e)&&e.multi===!0){let i=this.records.get(n);i||(i=as(void 0,Pu,!0),i.factory=()=>Hf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=he(null);try{return n.value===Pu&&(n.value=TN,n.value=n.factory()),typeof n.value=="object"&&n.value&&MN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{he(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=lt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Gf(t){let e=ul(t),n=e!==null?e.factory:ps(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return SN(t);throw new j(204,!1)}function SN(t){if(t.length>0)throw new j(204,!1);let n=VM(t);return n!==null?()=>n.factory(t):()=>new t}function AN(t){if(oD(t))return as(void 0,t.useValue);{let e=aD(t);return as(e,Pu)}}function aD(t,e,n){let r;if(ys(t)){let i=lt(t);return ps(i)||Gf(i)}else if(oD(t))r=()=>lt(t.useValue);else if(CN(t))r=()=>t.useFactory(...Hf(t.deps||[]));else if(DN(t))r=()=>G(lt(t.useExisting));else{let i=lt(t&&(t.useClass||t.provide));if(RN(t))r=()=>new i(...Hf(t.deps));else return ps(i)||Gf(i)}return r}function as(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function RN(t){return!!t.deps}function MN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function NN(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function Wf(t,e){for(let n of t)Array.isArray(n)?Wf(n,e):n&&$E(n)?Wf(n.\u0275providers,e):e(n)}function rn(t,e){t instanceof ea&&t.assertNotDestroyed();let n,r=ur(t),i=Rt(void 0);try{return e()}finally{ur(r),Rt(i)}}function cD(){return HE()!==void 0||YM()!=null}function xN(t){if(!cD())throw new j(-203,!1)}function PN(t){return typeof t=="function"}var Rn=0,ee=1,Q=2,rt=3,jt=4,$t=5,Hu=6,qu=7,xt=8,vs=9,Xt=10,Oe=11,ta=12,cE=13,Ts=14,en=15,ei=16,cs=17,bn=18,fl=19,uD=20,lr=21,Rf=22,Nt=23,Bt=25,lD=1;var ti=7,zu=8,_s=9,pt=10,Gu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gu||{});function dr(t){return Array.isArray(t)&&typeof t[lD]=="object"}function Mn(t){return Array.isArray(t)&&t[lD]===!0}function qp(t){return(t.flags&4)!==0}function pl(t){return t.componentOffset>-1}function gl(t){return(t.flags&1)===1}function pr(t){return!!t.template}function Kf(t){return(t[Q]&512)!==0}var Qf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function dD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Nn(){return hD}function hD(t){return t.type.prototype.ngOnChanges&&(t.setInput=kN),ON}Nn.ngInherit=!0;function ON(){let t=pD(this),e=t?.current;if(e){let n=t.previous;if(n===gs)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function kN(t,e,n,r,i){let s=this.declaredInputs[r],o=pD(t)||FN(t,{previous:gs,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Qf(l&&l.currentValue,n,u===gs),dD(t,e,i,n)}var fD="__ngSimpleChanges__";function pD(t){return t[fD]||null}function FN(t,e){return t[fD]=e}var uE=null;var Yt=function(t,e,n){uE?.(t,e,n)},gD="svg",LN="math";function tn(t){for(;Array.isArray(t);)t=t[Rn];return t}function mD(t,e){return tn(e[t])}function Pt(t,e){return tn(e[t.index])}function zp(t,e){return t.data[e]}function Ir(t,e){let n=e[t];return dr(n)?n:n[Rn]}function VN(t){return(t[Q]&4)===4}function Gp(t){return(t[Q]&128)===128}function UN(t){return Mn(t[rt])}function Is(t,e){return e==null?null:t[e]}function yD(t){t[cs]=0}function vD(t){t[Q]&1024||(t[Q]|=1024,Gp(t)&&yl(t))}function jN(t,e){for(;t>0;)e=e[Ts],t--;return e}function ml(t){return!!(t[Q]&9216||t[Nt]?.dirty)}function Yf(t){t[Xt].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),ml(t)&&yl(t)}function yl(t){t[Xt].changeDetectionScheduler?.notify(0);let e=ni(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Gp(e)));)e=ni(e)}function _D(t,e){if((t[Q]&256)===256)throw new j(911,!1);t[lr]===null&&(t[lr]=[]),t[lr].push(e)}function BN(t,e){if(t[lr]===null)return;let n=t[lr].indexOf(e);n!==-1&&t[lr].splice(n,1)}function ni(t){let e=t[rt];return Mn(e)?e[rt]:e}var ie={lFrame:RD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ID=!1;function $N(){return ie.lFrame.elementDepthCount}function HN(){ie.lFrame.elementDepthCount++}function qN(){ie.lFrame.elementDepthCount--}function wD(){return ie.bindingsEnabled}function zN(){return ie.skipHydrationRootTNode!==null}function GN(t){return ie.skipHydrationRootTNode===t}function WN(){ie.skipHydrationRootTNode=null}function me(){return ie.lFrame.lView}function Qe(){return ie.lFrame.tView}function oa(t){return ie.lFrame.contextLView=t,t[xt]}function aa(t){return ie.lFrame.contextLView=null,t}function Ye(){let t=ED();for(;t!==null&&t.type===64;)t=t.parent;return t}function ED(){return ie.lFrame.currentTNode}function KN(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function li(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function Wp(){return ie.lFrame.isParent}function DD(){ie.lFrame.isParent=!1}function CD(){return ID}function lE(t){ID=t}function QN(){let t=ie.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function YN(){return ie.lFrame.bindingIndex}function ZN(t){return ie.lFrame.bindingIndex=t}function ca(){return ie.lFrame.bindingIndex++}function bD(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function JN(){return ie.lFrame.inI18n}function XN(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,Zf(e)}function ex(){return ie.lFrame.currentDirectiveIndex}function Zf(t){ie.lFrame.currentDirectiveIndex=t}function tx(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function TD(){return ie.lFrame.currentQueryIndex}function Kp(t){ie.lFrame.currentQueryIndex=t}function nx(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[$t]:null}function SD(t,e,n){if(n&se.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&se.Host);)if(i=nx(s),i===null||(s=s[Ts],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ie.lFrame=AD();return r.currentTNode=e,r.lView=t,!0}function Qp(t){let e=AD(),n=t[ee];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function AD(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?RD(t):e}function RD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function MD(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ND=MD;function Yp(){let t=MD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function rx(t){return(ie.lFrame.contextLView=jN(t,ie.lFrame.contextLView))[xt]}function di(){return ie.lFrame.selectedIndex}function ri(t){ie.lFrame.selectedIndex=t}function Zp(){let t=ie.lFrame;return zp(t.tView,t.selectedIndex)}function V9(){ie.lFrame.currentNamespace=gD}function ix(){return ie.lFrame.currentNamespace}var xD=!0;function vl(){return xD}function _l(t){xD=t}function sx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=hD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Il(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Ou(t,e,n){PD(t,e,3,n)}function ku(t,e,n,r){(t[Q]&3)===n&&PD(t,e,n,r)}function Mf(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function PD(t,e,n,r){let i=r!==void 0?t[cs]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[cs]+=65536),(a<s||s==-1)&&(ox(t,n,e,u),t[cs]=(t[cs]&4294901760)+u+2),u++}function dE(t,e){Yt(4,t,e);let n=he(null);try{e.call(t)}finally{he(n),Yt(5,t,e)}}function ox(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[Q]>>14<t[cs]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,dE(a,s)):dE(a,s)}var hs=-1,ii=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function ax(t){return t instanceof ii}function cx(t){return(t.flags&8)!==0}function ux(t){return(t.flags&16)!==0}var Nf={},Jf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ll(r);let i=this.injector.get(e,Nf,r);return i!==Nf||n===Nf?i:this.parentInjector.get(e,n,r)}};function OD(t){return t!==hs}function Wu(t){return t&32767}function lx(t){return t>>16}function Ku(t,e){let n=lx(t),r=e;for(;n>0;)r=r[Ts],n--;return r}var Xf=!0;function hE(t){let e=Xf;return Xf=t,e}var dx=256,kD=dx-1,FD=5,hx=0,Zt={};function fx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Zo)&&(r=n[Zo]),r==null&&(r=n[Zo]=hx++);let i=r&kD,s=1<<i;e.data[t+(i>>FD)]|=s}function Qu(t,e){let n=LD(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,xf(r.data,t),xf(e,null),xf(r.blueprint,null));let i=Jp(t,e),s=t.injectorIndex;if(OD(i)){let o=Wu(i),a=Ku(i,e),u=a[ee].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function xf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Jp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=$D(i),r===null)return hs;if(n++,i=i[Ts],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return hs}function ep(t,e,n){fx(t,e,n)}function px(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(YE(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function VD(t,e,n){if(n&se.Optional||t!==void 0)return t;Vp(e,"NodeInjector")}function UD(t,e,n,r){if(n&se.Optional&&r===void 0&&(r=null),!(n&(se.Self|se.Host))){let i=t[vs],s=Rt(void 0);try{return i?i.get(e,r,n&se.Optional):qE(e,r,n&se.Optional)}finally{Rt(s)}}return VD(r,e,n)}function jD(t,e,n,r=se.Default,i){if(t!==null){if(e[Q]&2048&&!(r&se.Self)){let o=vx(t,e,n,r,Zt);if(o!==Zt)return o}let s=BD(t,e,n,r,Zt);if(s!==Zt)return s}return UD(e,n,r,i)}function BD(t,e,n,r,i){let s=mx(n);if(typeof s=="function"){if(!SD(e,t,r))return r&se.Host?VD(i,n,r):UD(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&se.Optional))Vp(n);else return o}finally{ND()}}else if(typeof s=="number"){let o=null,a=LD(t,e),u=hs,l=r&se.Host?e[en][$t]:null;for((a===-1||r&se.SkipSelf)&&(u=a===-1?Jp(t,e):e[a+8],u===hs||!pE(r,!1)?a=-1:(o=e[ee],a=Wu(u),e=Ku(u,e)));a!==-1;){let h=e[ee];if(fE(s,a,h.data)){let p=gx(a,e,n,o,r,l);if(p!==Zt)return p}u=e[a+8],u!==hs&&pE(r,e[ee].data[a+8]===l)&&fE(s,a,e)?(o=h,a=Wu(u),e=Ku(u,e)):a=-1}}return i}function gx(t,e,n,r,i,s){let o=e[ee],a=o.data[t+8],u=r==null?pl(a)&&Xf:r!=o&&(a.type&3)!==0,l=i&se.Host&&s===a,h=Fu(a,o,n,u,l);return h!==null?si(e,o,h,a):Zt}function Fu(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let S=o[v];if(v<u&&n===S||v>=u&&S.type===n)return v}if(i){let v=o[u];if(v&&pr(v)&&v.type===n)return u}return null}function si(t,e,n,r){let i=t[n],s=e.data;if(ax(i)){let o=i;o.resolving&&zM(qM(s[n]));let a=hE(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Rt(o.injectImpl):null,h=SD(t,r,se.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&sx(n,s[n],e)}finally{l!==null&&Rt(l),hE(a),o.resolving=!1,ND()}}return i}function mx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Zo)?t[Zo]:void 0;return typeof e=="number"?e>=0?e&kD:yx:e}function fE(t,e,n){let r=1<<t;return!!(n[e+(t>>FD)]&r)}function pE(t,e){return!(t&se.Self)&&!(t&se.Host&&e)}var Xr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return jD(this._tNode,this._lView,e,ll(r),n)}};function yx(){return new Xr(Ye(),me())}function Ss(t){return ia(()=>{let e=t.prototype.constructor,n=e[Uu]||tp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Uu]||tp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function tp(t){return VE(t)?()=>{let e=tp(lt(t));return e&&e()}:ps(t)}function vx(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[Q]&2048&&!(o[Q]&512);){let a=BD(s,o,n,r|se.Self,Zt);if(a!==Zt)return a;let u=s.parent;if(!u){let l=o[uD];if(l){let h=l.get(n,Zt,r);if(h!==Zt)return h}u=$D(o),o=o[Ts]}s=u}return i}function $D(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[$t]:null}function Xp(t){return px(Ye(),t)}function gE(t,e=null,n=null,r){let i=HD(t,e,n,r);return i.resolveInjectorInitializers(),i}function HD(t,e=null,n=null,r,i=new Set){let s=[n||Mt,wN(t)];return r=r||(typeof t=="object"?void 0:dt(t)),new ea(s,e||Hp(),r||null,i)}var Zr=class Zr{static create(e,n){if(Array.isArray(e))return gE({name:""},n,e,"");{let r=e.name??"";return gE({name:r},e.parent,e.providers,r)}}};Zr.THROW_IF_NOT_FOUND=Jo,Zr.NULL=new $u,Zr.\u0275prov=B({token:Zr,providedIn:"any",factory:()=>G(WE)}),Zr.__NG_ELEMENT_ID__=-1;var Ke=Zr;var _x=new U("");_x.__NG_ELEMENT_ID__=t=>{let e=Ye();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&se.Optional)return null;throw new j(204,!1)};var Ix="ngOriginalError";function Pf(t){return t[Ix]}var qD=!0,eg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wx,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),np=class extends eg{constructor(e){super(),this._lView=e}onDestroy(e){return _D(this._lView,e),()=>BN(this._lView,e)}};function wx(){return new np(me())}var As=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var rp=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,cD()&&(this.destroyRef=P(eg,{optional:!0})??void 0,this.pendingTasks=P(As,{optional:!0})??void 0)}emit(e){let n=he(null);try{super.next(e)}finally{he(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Re&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Me=rp;function Yu(...t){}function zD(t){let e,n;function r(){t=Yu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function mE(t){return queueMicrotask(()=>t()),()=>{t=Yu}}var tg="isAngularZone",Zu=tg+"_ID",Ex=0,ve=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Me(!1),this.onMicrotaskEmpty=new Me(!1),this.onStable=new Me(!1),this.onError=new Me(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=qD}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,bx(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Dx,Yu,Yu);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Dx={};function ng(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Cx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){zD(()=>{t.callbackScheduled=!1,ip(t),t.isCheckStableRunning=!0,ng(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),ip(t)}function bx(t){let e=()=>{Cx(t)},n=Ex++;t._inner=t._inner.fork({name:"angular",properties:{[tg]:!0,[Zu]:n,[Zu+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(Tx(u))return r.invokeTask(s,o,a,u);try{return yE(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),vE(t)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return yE(t),r.invoke(s,o,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Sx(u)&&e(),vE(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,ip(t),ng(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function ip(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function yE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function vE(t){t._nesting--,ng(t)}var sp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Me,this.onMicrotaskEmpty=new Me,this.onStable=new Me,this.onError=new Me}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Tx(t){return GD(t,"__ignore_ng_zone__")}function Sx(t){return GD(t,"__scheduler_tick__")}function GD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Tn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Pf(e);for(;n&&Pf(n);)n=Pf(n);return n||null}},Ax=new U("",{providedIn:"root",factory:()=>{let t=P(ve),e=P(Tn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function Rx(){return Rs(Ye(),me())}function Rs(t,e){return new wt(Pt(t,e))}var wt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=Rx;let t=e;return t})();function Mx(t){return t instanceof wt?t.nativeElement:t}function Nx(){return this._results[Symbol.iterator]()}var op=class t{get changes(){return this._changes??=new Me}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Nx)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=nN(e);(this._changesDetected=!tN(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function WD(t){return(t.flags&128)===128}var KD=new Map,xx=0;function Px(){return xx++}function Ox(t){KD.set(t[fl],t)}function ap(t){KD.delete(t[fl])}var _E="__ngContext__";function gr(t,e){dr(e)?(t[_E]=e[fl],Ox(e)):t[_E]=e}function QD(t){return ZD(t[ta])}function YD(t){return ZD(t[jt])}function ZD(t){for(;t!==null&&!Mn(t);)t=t[jt];return t}var cp;function JD(t){cp=t}function kx(){if(cp!==void 0)return cp;if(typeof document<"u")return document;throw new j(210,!1)}var rg=new U("",{providedIn:"root",factory:()=>Fx}),Fx="ng",ig=new U(""),sn=new U("",{providedIn:"platform",factory:()=>"unknown"});var sg=new U("",{providedIn:"root",factory:()=>kx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Lx="h",Vx="b";var Ux=()=>null;function og(t,e,n=!1){return Ux(t,e,n)}var XD=!1,jx=new U("",{providedIn:"root",factory:()=>XD});var Ru;function Bx(){if(Ru===void 0&&(Ru=null,jf.trustedTypes))try{Ru=jf.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ru}function IE(t){return Bx()?.createScriptURL(t)||t}var Ju=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FE})`}};function ua(t){return t instanceof Ju?t.changingThisBreaksApplicationSecurity:t}function ag(t,e){let n=$x(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${FE})`)}return n===e}function $x(t){return t instanceof Ju&&t.getTypeName()||null}var Hx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function eC(t){return t=String(t),t.match(Hx)?t:"unsafe:"+t}var wl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(wl||{});function qx(t){let e=nC();return e?e.sanitize(wl.URL,t)||"":ag(t,"URL")?ua(t):eC(fs(t))}function zx(t){let e=nC();if(e)return IE(e.sanitize(wl.RESOURCE_URL,t)||"");if(ag(t,"ResourceURL"))return IE(ua(t));throw new j(904,!1)}function Gx(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?zx:qx}function tC(t,e,n){return Gx(e,n)(t)}function nC(){let t=me();return t&&t[Xt].sanitizer}var Wx=/^>|^->|<!--|-->|--!>|<!-$/g,Kx=/(<|>)/g,Qx="\u200B$1\u200B";function Yx(t){return t.replace(Wx,e=>e.replace(Kx,Qx))}function rC(t){return t instanceof Function?t():t}function Zx(t){return(t??P(Ke)).get(sn)==="browser"}var Sn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Sn||{}),Jx;function cg(t,e){return Jx(t,e)}function us(t,e,n,r,i){if(r!=null){let s,o=!1;Mn(r)?s=r:dr(r)&&(o=!0,r=r[Rn]);let a=tn(r);t===0&&n!==null?i==null?aC(e,n,a):el(e,n,a,i||null,!0):t===1&&n!==null?el(e,n,a,i||null,!0):t===2?pP(e,a,o):t===3&&e.destroyNode(a),s!=null&&mP(e,t,s,n,i)}}function Xx(t,e){return t.createText(e)}function eP(t,e,n){t.setValue(e,n)}function tP(t,e){return t.createComment(Yx(e))}function iC(t,e,n){return t.createElement(e,n)}function nP(t,e){sC(t,e),e[Rn]=null,e[$t]=null}function rP(t,e,n,r,i,s){r[Rn]=i,r[$t]=e,Dl(t,r,n,1,i,s)}function sC(t,e){e[Xt].changeDetectionScheduler?.notify(9),Dl(t,e,e[Oe],2,null,null)}function iP(t){let e=t[ta];if(!e)return Of(t[ee],t);for(;e;){let n=null;if(dr(e))n=e[ta];else{let r=e[pt];r&&(n=r)}if(!n){for(;e&&!e[jt]&&e!==t;)dr(e)&&Of(e[ee],e),e=e[rt];e===null&&(e=t),dr(e)&&Of(e[ee],e),n=e&&e[jt]}e=n}}function sP(t,e,n,r){let i=pt+r,s=n.length;r>0&&(n[i-1][jt]=e),r<s-pt?(e[jt]=n[i],GE(n,pt+r,e)):(n.push(e),e[jt]=null),e[rt]=n;let o=e[ei];o!==null&&n!==o&&oC(o,e);let a=e[bn];a!==null&&a.insertView(t),Yf(e),e[Q]|=128}function oC(t,e){let n=t[_s],r=e[rt];if(dr(r))t[Q]|=Gu.HasTransplantedViews;else{let i=r[rt][en];e[en]!==i&&(t[Q]|=Gu.HasTransplantedViews)}n===null?t[_s]=[e]:n.push(e)}function ug(t,e){let n=t[_s],r=n.indexOf(e);n.splice(r,1)}function Xu(t,e){if(t.length<=pt)return;let n=pt+e,r=t[n];if(r){let i=r[ei];i!==null&&i!==t&&ug(i,r),e>0&&(t[n-1][jt]=r[jt]);let s=Bu(t,pt+e);nP(r[ee],r);let o=s[bn];o!==null&&o.detachView(s[ee]),r[rt]=null,r[jt]=null,r[Q]&=-129}return r}function lg(t,e){if(!(e[Q]&256)){let n=e[Oe];n.destroyNode&&Dl(t,e,n,3,null,null),iP(e)}}function Of(t,e){if(e[Q]&256)return;let n=he(null);try{e[Q]&=-129,e[Q]|=256,e[Nt]&&cf(e[Nt]),aP(t,e),oP(t,e),e[ee].type===1&&e[Oe].destroy();let r=e[ei];if(r!==null&&Mn(e[rt])){r!==e[rt]&&ug(r,e);let i=e[bn];i!==null&&i.detachView(t)}ap(e)}finally{he(n)}}function oP(t,e){let n=t.cleanup,r=e[qu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[qu]=null);let i=e[lr];if(i!==null){e[lr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function aP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ii)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Yt(4,a,u);try{u.call(a)}finally{Yt(5,a,u)}}else{Yt(4,i,s);try{s.call(i)}finally{Yt(5,i,s)}}}}}function cP(t,e,n){return uP(t,e.parent,n)}function uP(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Rn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Jt.None||s===Jt.Emulated)return null}return Pt(r,n)}}function el(t,e,n,r,i){t.insertBefore(e,n,r,i)}function aC(t,e,n){t.appendChild(e,n)}function wE(t,e,n,r,i){r!==null?el(t,e,n,r,i):aC(t,e,n)}function cC(t,e){return t.parentNode(e)}function lP(t,e){return t.nextSibling(e)}function dP(t,e,n){return fP(t,e,n)}function hP(t,e,n){return t.type&40?Pt(t,n):null}var fP=hP,EE;function El(t,e,n,r){let i=cP(t,r,e),s=e[Oe],o=r.parent||e[$t],a=dP(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)wE(s,i,n[u],a,!1);else wE(s,i,n,a,!1);EE!==void 0&&EE(s,r,e,n,i)}function Yo(t,e){if(e!==null){let n=e.type;if(n&3)return Pt(e,t);if(n&4)return up(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Yo(t,r);{let i=t[e.index];return Mn(i)?up(-1,i):tn(i)}}else{if(n&128)return Yo(t,e.next);if(n&32)return cg(e,t)()||tn(t[e.index]);{let r=uC(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ni(t[en]);return Yo(i,r)}else return Yo(t,e.next)}}}return null}function uC(t,e){if(e!==null){let r=t[en][$t],i=e.projection;return r.projection[i]}return null}function up(t,e){let n=pt+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return Yo(r,i)}return e[ti]}function pP(t,e,n){t.removeChild(null,e,n)}function dg(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(o&&e===0&&(a&&gr(tn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)dg(t,e,n.child,r,i,s,!1),us(e,t,i,a,s);else if(u&32){let l=cg(n,r),h;for(;h=l();)us(e,t,i,h,s);us(e,t,i,a,s)}else u&16?gP(t,e,r,n,i,s):us(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Dl(t,e,n,r,i,s){dg(n,r,t.firstChild,e,i,s,!1)}function gP(t,e,n,r,i,s){let o=n[en],u=o[$t].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];us(e,t,i,h,s)}else{let l=u,h=o[rt];WD(r)&&(l.flags|=128),dg(t,e,l,h,i,s,!0)}}function mP(t,e,n,r,i){let s=n[ti],o=tn(n);s!==o&&us(e,t,r,s,i);for(let a=pt;a<n.length;a++){let u=n[a];Dl(u[ee],u,t,e,r,s)}}function yP(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Sn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Sn.Important),t.setStyle(n,r,i,s))}}function vP(t,e,n){t.setAttribute(e,"style",n)}function lC(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function dC(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&qf(t,e,r),i!==null&&lC(t,e,i),s!==null&&vP(t,e,s)}var on={};function wr(t=1){hC(Qe(),me(),di()+t,!1)}function hC(t,e,n,r){if(!r)if((e[Q]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Ou(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ku(e,s,0,n)}ri(n)}function te(t,e=se.Default){let n=me();if(n===null)return G(t,e);let r=Ye();return jD(r,n,lt(t),e)}function fC(){let t="invalid";throw new Error(t)}function pC(t,e,n,r,i,s){let o=he(null);try{let a=null;i&hr.SignalBased&&(a=e[r][En]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&hr.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):dD(e,a,r,s)}finally{he(o)}}function _P(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ri(~i);else{let s=i,o=n[++r],a=n[++r];XN(o,s);let u=e[s];a(2,u)}}}finally{ri(-1)}}function Cl(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Rn]=i,p[Q]=r|4|128|8|64,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),yD(p),p[rt]=p[Ts]=t,p[xt]=n,p[Xt]=o||t&&t[Xt],p[Oe]=a||t&&t[Oe],p[vs]=u||t&&t[vs]||null,p[$t]=s,p[fl]=Px(),p[Hu]=h,p[uD]=l,p[en]=e.type==2?t[en]:p,p}function la(t,e,n,r,i){let s=t.data[e];if(s===null)s=IP(t,e,n,r,i),JN()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=KN();s.injectorIndex=o===null?-1:o.injectorIndex}return li(s,!0),s}function IP(t,e,n,r,i){let s=ED(),o=Wp(),a=o?s:s&&s.parent,u=t.data[e]=TP(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function gC(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function mC(t,e,n,r,i){let s=di(),o=r&2;try{ri(-1),o&&e.length>Bt&&hC(t,e,Bt,!1),Yt(o?2:0,i),n(r,i)}finally{ri(s),Yt(o?3:1,i)}}function hg(t,e,n){if(qp(e)){let r=he(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{he(r)}}}function fg(t,e,n){wD()&&(xP(t,e,n,Pt(n,e)),(n.flags&64)===64&&IC(t,e,n))}function pg(t,e,n=Pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function yC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=gg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gg(t,e,n,r,i,s,o,a,u,l,h){let p=Bt+r,m=p+i,v=wP(p,m),S=typeof l=="function"?l():l;return v[ee]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function wP(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:on);return n}function EP(t,e,n,r){let s=r.get(jx,XD)||n===Jt.ShadowDom,o=t.selectRootElement(e,s);return DP(o),o}function DP(t){CP(t)}var CP=()=>null;function bP(t,e,n,r){let i=DC(e);i.push(n),t.firstCreatePass&&CC(t).push(r,i.length-1)}function TP(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return zN()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function DE(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=hr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?CE(r,n,l,a,u):CE(r,n,l,a)}return r}function CE(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function SP(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,S=m?m.outputs:null;u=DE(0,p.inputs,h,u,v),l=DE(1,p.outputs,h,l,S);let N=u!==null&&o!==null&&!Bp(e)?HP(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function AP(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function vC(t,e,n,r,i,s,o,a){let u=Pt(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(yg(t,n,h,r,i),pl(e)&&RP(n,e.index)):e.type&3?(r=AP(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function RP(t,e){let n=Ir(e,t);n[Q]&16||(n[Q]|=64)}function mg(t,e,n,r){if(wD()){let i=r===null?null:{"":-1},s=OP(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&_C(t,e,n,o,i,a),i&&kP(n,r,i)}n.mergedAttrs=Xo(n.mergedAttrs,n.attrs)}function _C(t,e,n,r,i,s){for(let l=0;l<r.length;l++)ep(Qu(n,e),t,r[l].type);LP(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=gC(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Xo(n.mergedAttrs,h.hostAttrs),VP(t,n,e,u,h),FP(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}SP(t,n,s)}function MP(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;NP(o)!=a&&o.push(a),o.push(n,r,s)}}function NP(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function xP(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;pl(n)&&UP(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Qu(n,e),gr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=si(e,t,a,n);if(gr(l,e),o!==null&&$P(e,a-i,l,u,n,o),pr(u)){let h=Ir(n.index,e);h[xt]=si(e,t,a,n)}}}function IC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=ex();try{ri(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Zf(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&PP(u,l)}}finally{ri(-1),Zf(o)}}function PP(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function OP(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(hN(e,o.selectors,!1))if(r||(r=[]),pr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;lp(t,e,u)}else r.unshift(o),lp(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function lp(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function kP(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function FP(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;pr(e)&&(n[""]=t)}}function LP(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function VP(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ps(i.type,!0)),o=new ii(s,pr(i),te);t.blueprint[r]=o,n[r]=o,MP(t,e,r,gC(t,n,i.hostVars,on),i)}function UP(t,e,n){let r=Pt(e,t),i=yC(n),s=t[Xt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=bl(t,Cl(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function jP(t,e,n,r,i,s){let o=Pt(t,e);BP(e[Oe],o,s,t.value,n,r,i)}function BP(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?fs(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function $P(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];pC(r,n,u,l,h,p)}}function HP(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function wC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function EC(t,e){let n=t.contentQueries;if(n!==null){let r=he(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Kp(s),a.contentQueries(2,e[o],o)}}}finally{he(r)}}}function bl(t,e){return t[ta]?t[cE][jt]=e:t[ta]=e,t[cE]=e,e}function dp(t,e,n){Kp(0);let r=he(null);try{e(t,n)}finally{he(r)}}function DC(t){return t[qu]??=[]}function CC(t){return t.cleanup??=[]}function bC(t,e){let n=t[vs],r=n?n.get(Tn,null):null;r&&r.handleError(e)}function yg(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];pC(h,l,r,a,u,i)}}function TC(t,e,n){let r=mD(e,t);eP(t[Oe],r,n)}function qP(t,e){let n=Ir(e,t),r=n[ee];zP(r,n);let i=n[Rn];i!==null&&n[Hu]===null&&(n[Hu]=og(i,n[vs])),vg(r,n,n[xt])}function zP(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function vg(t,e,n){Qp(e);try{let r=t.viewQuery;r!==null&&dp(1,r,n);let i=t.template;i!==null&&mC(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[bn]?.finishViewCreation(t),t.staticContentQueries&&EC(t,e),t.staticViewQueries&&dp(2,t.viewQuery,n);let s=t.components;s!==null&&GP(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,Yp()}}function GP(t,e){for(let n=0;n<e.length;n++)qP(t,e[n])}function SC(t,e,n,r){let i=he(null);try{let s=e.tView,a=t[Q]&4096?4096:16,u=Cl(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ei]=l;let h=t[bn];return h!==null&&(u[bn]=h.createEmbeddedView(s)),vg(s,u,n),u}finally{he(i)}}function WP(t,e){let n=pt+e;if(n<t.length)return t[n]}function hp(t,e){return!e||e.firstChild===null||WD(t)}function AC(t,e,n,r=!0){let i=e[ee];if(sP(i,e,t,n),r){let o=up(n,t),a=e[Oe],u=cC(a,t[ti]);u!==null&&rP(i,t[$t],a,e,u,o)}let s=e[Hu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function KP(t,e){let n=Xu(t,e);return n!==void 0&&lg(n[ee],n),n}function tl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(tn(s)),Mn(s)&&QP(s,r);let o=n.type;if(o&8)tl(t,e,n.child,r);else if(o&32){let a=cg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=uC(e,n);if(Array.isArray(a))r.push(...a);else{let u=ni(e[en]);tl(u[ee],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function QP(t,e){for(let n=pt;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&tl(r[ee],r,i,e)}t[ti]!==t[Rn]&&e.push(t[ti])}var RC=[];function YP(t){return t[Nt]??ZP(t)}function ZP(t){let e=RC.pop()??Object.create(XP);return e.lView=t,e}function JP(t){t.lView[Nt]!==t&&(t.lView=null,RC.push(t))}var XP=oe(k({},zo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{yl(t.lView)},consumerOnSignalRead(){this.lView[Nt]=this}});function eO(t){let e=t[Nt]??Object.create(tO);return e.lView=t,e}var tO=oe(k({},zo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ni(t.lView);for(;e&&!MC(e[ee]);)e=ni(e);e&&vD(e)},consumerOnSignalRead(){this.lView[Nt]=this}});function MC(t){return t.type!==2}var nO=100;function NC(t,e=!0,n=0){let r=t[Xt],i=r.rendererFactory,s=!1;s||i.begin?.();try{rO(t,n)}catch(o){throw e&&bC(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function rO(t,e){let n=CD();try{lE(!0),fp(t,e);let r=0;for(;ml(t);){if(r===nO)throw new j(103,!1);r++,fp(t,1)}}finally{lE(n)}}function iO(t,e,n,r){let i=e[Q];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Xt].inlineEffectRunner?.flush(),Qp(e);let a=!0,u=null,l=null;s||(MC(t)?(l=YP(e),u=Jc(l)):pw()===null?(a=!1,l=eO(e),u=Jc(l)):e[Nt]&&(cf(e[Nt]),e[Nt]=null));try{yD(e),ZN(t.bindingStartIndex),n!==null&&mC(t,e,n,2,r);let h=(i&3)===3;if(!s)if(h){let v=t.preOrderCheckHooks;v!==null&&Ou(e,v,null)}else{let v=t.preOrderHooks;v!==null&&ku(e,v,0,null),Mf(e,0)}if(o||sO(e),xC(e,0),t.contentQueries!==null&&EC(t,e),!s)if(h){let v=t.contentCheckHooks;v!==null&&Ou(e,v)}else{let v=t.contentHooks;v!==null&&ku(e,v,1),Mf(e,1)}_P(t,e);let p=t.components;p!==null&&OC(e,p,0);let m=t.viewQuery;if(m!==null&&dp(2,m,r),!s)if(h){let v=t.viewCheckHooks;v!==null&&Ou(e,v)}else{let v=t.viewHooks;v!==null&&ku(e,v,2),Mf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Rf]){for(let v of e[Rf])v();e[Rf]=null}s||(e[Q]&=-73)}catch(h){throw s||yl(e),h}finally{l!==null&&(of(l,u),a&&JP(l)),Yp()}}function xC(t,e){for(let n=QD(t);n!==null;n=YD(n))for(let r=pt;r<n.length;r++){let i=n[r];PC(i,e)}}function sO(t){for(let e=QD(t);e!==null;e=YD(e)){if(!(e[Q]&Gu.HasTransplantedViews))continue;let n=e[_s];for(let r=0;r<n.length;r++){let i=n[r];vD(i)}}}function oO(t,e,n){let r=Ir(e,t);PC(r,n)}function PC(t,e){Gp(t)&&fp(t,e)}function fp(t,e){let r=t[ee],i=t[Q],s=t[Nt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&af(s)),o||=!1,s&&(s.dirty=!1),t[Q]&=-9217,o)iO(r,t,r.template,t[xt]);else if(i&8192){xC(t,1);let a=r.components;a!==null&&OC(t,a,1)}}function OC(t,e,n){for(let r=0;r<e.length;r++)oO(t,e[r],n)}function _g(t,e){let n=CD()?64:1088;for(t[Xt].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=ni(t);if(Kf(t)&&!r)return t;t=r}return null}var oi=class{get rootNodes(){let e=this._lView,n=e[ee];return tl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xt]}set context(e){this._lView[xt]=e}get destroyed(){return(this._lView[Q]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rt];if(Mn(e)){let n=e[zu],r=n?n.indexOf(this):-1;r>-1&&(Xu(e,r),Bu(n,r))}this._attachedToViewContainer=!1}lg(this._lView[ee],this._lView)}onDestroy(e){_D(this._lView,e)}markForCheck(){_g(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){Yf(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,NC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Kf(this._lView),n=this._lView[ei];n!==null&&!e&&ug(n,this._lView),sC(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=Kf(this._lView),r=this._lView[ei];r!==null&&!n&&oC(r,this._lView),Yf(this._lView)}},ai=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uO;let t=e;return t})(),aO=ai,cO=class extends aO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=SC(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new oi(i)}};function uO(){return Ig(Ye(),me())}function Ig(t,e){return t.type&4?new cO(e,t,Rs(t,e)):null}var j9=new RegExp(`^(\\d+)*(${Vx}|${Lx})*(.*)`);var lO=()=>null;function pp(t,e){return lO(t,e)}var ws=class{},wg=new U("",{providedIn:"root",factory:()=>!1});var kC=new U(""),FC=new U(""),gp=class{},nl=class{};function dO(t){let e=Error(`No component factory found for ${dt(t)}.`);return e[hO]=t,e}var hO="ngComponent";var mp=class{resolveComponentFactory(e){throw dO(e)}},Ng=class Ng{};Ng.NULL=new mp;var Es=Ng,Ds=class{},xn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>fO();let t=e;return t})();function fO(){let t=me(),e=Ye(),n=Ir(e.index,t);return(dr(n)?n:t)[Oe]}var pO=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function rl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Jw(i,a);else if(s==2){let u=a,l=e[++o];r=Jw(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var il=class extends Es{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=fr(e);return new Cs(n,this.ngModule)}};function bE(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:hr.None;e?n.push({propName:o,templateName:r,isSignal:(a&hr.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function gO(t){let e=t.toLowerCase();return e==="svg"?gD:e==="math"?LN:null}var Cs=class extends nl{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=bE(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return bE(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=mN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=he(null);try{i=i||this.ngModule;let o=i instanceof It?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Jf(e,o):e,u=a.get(Ds,null);if(u===null)throw new j(407,!1);let l=a.get(pO,null),h=a.get(ws,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",S=r?EP(m,r,this.componentDef.encapsulation,a):iC(m,v,gO(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;S!==null&&(R=og(S,a,!0));let F=gg(0,null,null,1,0,null,null,null,null,null,null),$=Cl(null,F,null,N,null,null,p,m,a,null,R);Qp($);let q,ae,Se=null;try{let Z=this.componentDef,D,y=null;Z.findHostDirectiveDefs?(D=[],y=new Map,Z.findHostDirectiveDefs(Z,D,y),D.push(Z)):D=[Z];let _=mO($,S);Se=yO(_,S,Z,D,$,p,m),ae=zp(F,Bt),S&&IO(m,Z,S,r),n!==void 0&&wO(ae,this.ngContentSelectors,n),q=_O(Se,Z,D,y,$,[EO]),vg(F,$,null)}catch(Z){throw Se!==null&&ap(Se),ap($),Z}finally{Yp()}return new yp(this.componentType,q,Rs(ae,$),$,ae)}finally{he(s)}}},yp=class extends gp{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new oi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;yg(s[ee],s,i,e,n),this.previousInputValues.set(e,n);let o=Ir(this._tNode.index,s);_g(o,1)}}get injector(){return new Xr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function mO(t,e){let n=t[ee],r=Bt;return t[r]=e,la(n,r,2,"#host",null)}function yO(t,e,n,r,i,s,o){let a=i[ee];vO(r,t,e,o);let u=null;e!==null&&(u=og(e,i[vs]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Cl(i,yC(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&lp(a,t,r.length-1),bl(i,p),i[t.index]=p}function vO(t,e,n,r){for(let i of t)e.mergedAttrs=Xo(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(rl(e,e.mergedAttrs,!0),n!==null&&dC(r,n,e))}function _O(t,e,n,r,i,s){let o=Ye(),a=i[ee],u=Pt(o,i);_C(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=si(i,a,p,o);gr(m,i)}IC(a,i,o),u&&gr(u,i);let l=si(i,a,o.directiveStart+o.componentOffset,o);if(t[xt]=i[xt]=l,s!==null)for(let h of s)h(l,e);return hg(a,o,i),l}function IO(t,e,n,r){if(r)qf(t,n,["ng-version","18.2.2"]);else{let{attrs:i,classes:s}=yN(e.selectors[0]);i&&qf(t,n,i),s&&s.length>0&&lC(t,n,s.join(" "))}}function wO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function EO(){let t=Ye();Il(me()[ee],t)}var Er=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DO;let t=e;return t})();function DO(){let t=Ye();return VC(t,me())}var CO=Er,LC=class extends CO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Rs(this._hostTNode,this._hostLView)}get injector(){return new Xr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jp(this._hostTNode,this._hostLView);if(OD(e)){let n=Ku(e,this._hostLView),r=Wu(e),i=n[ee].data[r+8];return new Xr(i,n)}else return new Xr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=TE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-pt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=pp(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,hp(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!PN(e),a;if(o)a=n;else{let S=n||{};a=S.index,r=S.injector,i=S.projectableNodes,s=S.environmentInjector||S.ngModuleRef}let u=o?e:new Cs(fr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(It,null);N&&(s=N)}let h=fr(u.componentType??{}),p=pp(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,a,hp(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(UN(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[rt],l=new LC(u,u[$t],u[rt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return AC(o,i,s,r),e.attachToViewContainerRef(),GE(kf(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=TE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Xu(this._lContainer,n);r&&(Bu(kf(this._lContainer),n),lg(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=Xu(this._lContainer,n);return r&&Bu(kf(this._lContainer),n)!=null?new oi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function TE(t){return t[zu]}function kf(t){return t[zu]||(t[zu]=[])}function VC(t,e){let n,r=e[t.index];return Mn(r)?n=r:(n=wC(r,e,null,t),e[t.index]=n,bl(e,n)),TO(n,e,t,r),new LC(n,t,e)}function bO(t,e){let n=t[Oe],r=n.createComment(""),i=Pt(e,t),s=cC(n,i);return el(n,s,r,lP(n,i),!1),r}var TO=RO,SO=()=>!1;function AO(t,e,n){return SO(t,e,n)}function RO(t,e,n,r){if(t[ti])return;let i;n.type&8?i=tn(r):i=bO(e,n),t[ti]=i}var vp=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},_p=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Eg(e,n).matches!==null&&this.queries[n].setDirty()}},Ip=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=LO(e):this.predicate=e}},wp=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ep=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,MO(n,s)),this.matchTNodeWithReadOption(e,n,Fu(n,e,s,!1,!1))}else r===ai?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Fu(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===wt||i===Er||i===ai&&n.type&4)this.addMatch(n.index,-2);else{let s=Fu(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function MO(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function NO(t,e){return t.type&11?Rs(t,e):t.type&4?Ig(t,e):null}function xO(t,e,n,r){return n===-1?NO(e,t):n===-2?PO(t,e,r):si(t,t[ee],n,e)}function PO(t,e,n){if(n===wt)return Rs(e,t);if(n===ai)return Ig(e,t);if(n===Er)return VC(e,t)}function UC(t,e,n,r){let i=e[bn].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)a.push(null);else{let h=s[l];a.push(xO(e,h,o[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Dp(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=UC(t,e,i,n);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-u];for(let p=pt;p<h.length;p++){let m=h[p];m[ei]===m[rt]&&Dp(m[ee],m,l,r)}if(h[_s]!==null){let p=h[_s];for(let m=0;m<p.length;m++){let v=p[m];Dp(v[ee],v,l,r)}}}}}return r}function OO(t,e){return t[bn].queries[e].queryList}function kO(t,e,n){let r=new op((n&4)===4);return bP(t,e,r,r.destroy),(e[bn]??=new _p).queries.push(new vp(r))-1}function FO(t,e,n,r){let i=Qe();if(i.firstCreatePass){let s=Ye();VO(i,new Ip(e,n,r),s.index),UO(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return kO(i,me(),n)}function LO(t){return t.split(",").map(e=>e.trim())}function VO(t,e,n){t.queries===null&&(t.queries=new wp),t.queries.track(new Ep(e,n))}function UO(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Eg(t,e){return t.queries.getByIndex(e)}function jO(t,e){let n=t[ee],r=Eg(n,e);return r.crossesNgTemplate?Dp(n,t,e,[]):UC(n,t,r,e)}var SE=new Set;function hi(t){SE.has(t)||(SE.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function BO(t){return typeof t=="function"&&t[En]!==void 0}function da(t,e){hi("NgSignals");let n=bw(t),r=n[En];return e?.equal&&(r.equal=e.equal),n.set=i=>uf(r,i),n.update=i=>Tw(r,i),n.asReadonly=$O.bind(n),n}function $O(){let t=this[En];if(t.readonlyFn===void 0){let e=()=>this();e[En]=t,t.readonlyFn=e}return t.readonlyFn}function jC(t){return BO(t)&&typeof t.set=="function"}function HO(t){return Object.getPrototypeOf(t.prototype).constructor}function Pn(t){let e=HO(t.type),n=!0,r=[t];for(;e;){let i;if(pr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Mu(t.inputs),o.inputTransforms=Mu(t.inputTransforms),o.declaredInputs=Mu(t.declaredInputs),o.outputs=Mu(t.outputs);let a=i.hostBindings;a&&KO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&GO(t,u),l&&WO(t,l),qO(t,i),FM(t.outputs,i.outputs),pr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Pn&&(n=!1)}}e=Object.getPrototypeOf(e)}zO(r)}function qO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function zO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xo(i.hostAttrs,n=Xo(n,i.hostAttrs))}}function Mu(t){return t===gs?{}:t===Mt?[]:t}function GO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function WO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function KO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Dg(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var mr=class{},na=class{};var Cp=class extends mr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new il(this);let s=tD(e);this._bootstrapComponents=rC(s.bootstrap),this._r3Injector=HD(e,n,[{provide:mr,useValue:this},{provide:Es,useValue:this.componentFactoryResolver},...r],dt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},bp=class extends na{constructor(e){super(),this.moduleType=e}create(e){return new Cp(this.moduleType,e,[])}};var sl=class extends mr{constructor(e){super(),this.componentFactoryResolver=new il(this),this.instance=null;let n=new ea([...e.providers,{provide:mr,useValue:this},{provide:Es,useValue:this.componentFactoryResolver}],e.parent||Hp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tl(t,e,n=null){return new sl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function BC(t){return YO(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function QO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function YO(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function ZO(t,e,n){return t[e]=n}function yr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function $C(t,e,n,r){let i=yr(t,e,n);return yr(t,e+1,r)||i}function JO(t){return(t.flags&32)===32}function XO(t,e,n,r,i,s,o,a,u){let l=e.consts,h=la(e,t,4,o||null,a||null);mg(e,n,h,Is(l,u)),Il(e,h);let p=h.tView=gg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function ek(t,e,n,r,i,s,o,a,u,l){let h=n+Bt,p=e.firstCreatePass?XO(h,e,t,r,i,s,o,a,u):e.data[h];li(p,!1);let m=tk(e,t,p,n);vl()&&El(e,t,m,p),gr(m,t);let v=wC(m,t,m,p);return t[h]=v,bl(t,v),AO(v,p,t),gl(p)&&fg(e,t,p),u!=null&&pg(t,p,l),p}function Sl(t,e,n,r,i,s,o,a){let u=me(),l=Qe(),h=Is(l.consts,s);return ek(u,l,t,e,n,r,i,h,o,a),Sl}var tk=nk;function nk(t,e,n,r){return _l(!0),e[Oe].createComment("")}var ls=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ls||{}),HC=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),Jr=class Jr{constructor(){this.ngZone=P(ve),this.scheduler=P(ws),this.errorHandler=P(Tn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Jr.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Jr.PHASES=[ls.EarlyRead,ls.Write,ls.MixedReadWrite,ls.Read],Jr.\u0275prov=B({token:Jr,providedIn:"root",factory:()=>new Jr});var Tp=Jr,Sp=class{constructor(e,n,r,i){this.impl=e,this.hooks=n,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Cg(t,e){!e?.injector&&xN(Cg);let n=e?.injector??P(Ke);return Zx(n)?(hi("NgAfterNextRender"),ik(t,n,e,!0)):sk}function rk(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function ik(t,e,n,r){let i=e.get(HC);i.impl??=e.get(Tp);let s=n?.phase??ls.MixedReadWrite,o=new Sp(i.impl,rk(t,s),r,e.get(eg));return i.impl.register(o),o}var sk={destroy(){}};function ha(t,e,n,r){let i=me(),s=ca();if(yr(i,s,e)){let o=Qe(),a=Zp();jP(a,i,t,e,n,r)}return ha}function ok(t,e,n,r){return yr(t,ca(),n)?e+fs(n)+r:on}function ak(t,e,n,r,i,s){let o=YN(),a=$C(t,o,n,i);return bD(2),a?e+fs(n)+r+fs(i)+s:on}function Nu(t,e){return t<<17|e<<2}function ci(t){return t>>17&32767}function ck(t){return(t&2)==2}function uk(t,e){return t&131071|e<<17}function Ap(t){return t|2}function bs(t){return(t&131068)>>2}function Ff(t,e){return t&-131069|e<<2}function lk(t){return(t&1)===1}function Rp(t){return t|1}function dk(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ci(o),u=bs(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||sa(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=ci(t[a+1]);t[r+1]=Nu(m,a),m!==0&&(t[m+1]=Ff(t[m+1],r)),t[a+1]=uk(t[a+1],r)}else t[r+1]=Nu(a,0),a!==0&&(t[a+1]=Ff(t[a+1],r)),a=r;else t[r+1]=Nu(u,0),a===0?a=r:t[u+1]=Ff(t[u+1],r),u=r;l&&(t[r+1]=Ap(t[r+1])),AE(t,h,r,!0),AE(t,h,r,!1),hk(e,h,t,r,s),o=Nu(a,u),s?e.classBindings=o:e.styleBindings=o}function hk(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&sa(s,e)>=0&&(n[r+1]=Rp(n[r+1]))}function AE(t,e,n,r){let i=t[n+1],s=e===null,o=r?ci(i):bs(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];fk(u,e)&&(a=!0,t[o+1]=r?Rp(l):Ap(l)),o=r?ci(l):bs(l)}a&&(t[n+1]=r?Ap(i):Rp(i))}function fk(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?sa(t,e)>=0:!1}function Ms(t,e,n){let r=me(),i=ca();if(yr(r,i,e)){let s=Qe(),o=Zp();vC(s,o,r,t,e,r[Oe],n,!1)}return Ms}function RE(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";yg(t,n,s[o],o,r)}function Al(t,e){return pk(t,e,null,!0),Al}function pk(t,e,n,r){let i=me(),s=Qe(),o=bD(2);if(s.firstUpdatePass&&mk(s,t,o,r),e!==on&&yr(i,o,e)){let a=s.data[di()];wk(s,a,i,i[Oe],t,i[o+1]=Ek(e,n),r,o)}}function gk(t,e){return e>=t.expandoStartIndex}function mk(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[di()],o=gk(t,n);Dk(s,r)&&e===null&&!o&&(e=!1),e=yk(i,s,e,r),dk(i,s,e,n,o,r)}}function yk(t,e,n,r){let i=tx(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Lf(null,t,e,n,r),n=ra(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Lf(i,t,e,n,r),s===null){let u=vk(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Lf(null,t,e,u[1],r),u=ra(u,e.attrs,r),_k(t,e,r,u))}else s=Ik(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function vk(t,e,n){let r=n?e.classBindings:e.styleBindings;if(bs(r)!==0)return t[ci(r)]}function _k(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[ci(i)]=r}function Ik(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ra(r,o,n)}return ra(r,e.attrs,n)}function Lf(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ra(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ra(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),iN(t,o,n?!0:e[++s]))}return t===void 0?null:t}function wk(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=lk(l)?ME(u,e,n,i,bs(l),o):void 0;if(!ol(h)){ol(s)||ck(l)&&(s=ME(u,null,n,i,a,o));let p=mD(di(),n);yP(r,o,p,i,s)}}function ME(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===on&&(m=p?Mt:void 0);let v=p?Sf(m,r):h===r?m:void 0;if(l&&!ol(v)&&(v=Sf(u,r)),ol(v)&&(a=v,o))return a;let S=t[i+1];i=o?ci(S):bs(S)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Sf(u,r))}return a}function ol(t){return t!==void 0}function Ek(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=dt(ua(t)))),t}function Dk(t,e){return(t.flags&(e?8:16))!==0}function $9(t,e){hi("NgControlFlow");let n=me(),r=ca(),i=n[r]!==on?n[r]:-1,s=i!==-1?NE(n,Bt+i):void 0,o=0;if(yr(n,r,t)){let a=he(null);try{if(s!==void 0&&KP(s,o),t!==-1){let u=Bt+t,l=NE(n,u),h=Ck(n[ee],u),p=pp(l,h.tView.ssrId),m=SC(n,h,e,{dehydratedView:p});AC(l,m,o,hp(h,p))}}finally{he(a)}}else if(s!==void 0){let a=WP(s,o);a!==void 0&&(a[xt]=e)}}function NE(t,e){return t[e]}function Ck(t,e){return zp(t,e)}function bk(t,e,n,r,i,s){let o=e.consts,a=Is(o,i),u=la(e,t,2,r,a);return mg(e,n,u,Is(o,s)),u.attrs!==null&&rl(u,u.attrs,!1),u.mergedAttrs!==null&&rl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Et(t,e,n,r){let i=me(),s=Qe(),o=Bt+t,a=i[Oe],u=s.firstCreatePass?bk(o,s,i,e,n,r):s.data[o],l=Tk(s,i,u,a,e,t);i[o]=l;let h=gl(u);return li(u,!0),dC(a,l,u),!JO(u)&&vl()&&El(s,i,l,u),$N()===0&&gr(l,i),HN(),h&&(fg(s,i,u),hg(s,u,i)),r!==null&&pg(i,u),Et}function Ot(){let t=Ye();Wp()?DD():(t=t.parent,li(t,!1));let e=t;GN(e)&&WN(),qN();let n=Qe();return n.firstCreatePass&&(Il(n,t),qp(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&cx(e)&&RE(n,e,me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ux(e)&&RE(n,e,me(),e.stylesWithoutHost,!1),Ot}function Ns(t,e,n,r){return Et(t,e,n,r),Ot(),Ns}var Tk=(t,e,n,r,i,s)=>(_l(!0),iC(r,i,ix()));function Sk(t,e,n,r,i){let s=e.consts,o=Is(s,r),a=la(e,t,8,"ng-container",o);o!==null&&rl(a,o,!0);let u=Is(s,i);return mg(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function Ak(t,e,n){let r=me(),i=Qe(),s=t+Bt,o=i.firstCreatePass?Sk(s,i,r,e,n):i.data[s];li(o,!0);let a=Mk(i,r,o,t);return r[s]=a,vl()&&El(i,r,a,o),gr(a,r),gl(o)&&(fg(i,r,o),hg(i,o,r)),n!=null&&pg(r,o),Ak}function Rk(){let t=Ye(),e=Qe();return Wp()?DD():(t=t.parent,li(t,!1)),e.firstCreatePass&&(Il(e,t),qp(t)&&e.queries.elementEnd(t)),Rk}var Mk=(t,e,n,r)=>(_l(!0),tP(e[Oe],""));function bg(){return me()}var al="en-US";var Nk=al;function xk(t){typeof t=="string"&&(Nk=t.toLowerCase().replace(/_/g,"-"))}var Pk=(t,e,n)=>{};function an(t,e,n,r){let i=me(),s=Qe(),o=Ye();return qC(s,i,i[Oe],o,t,e,r),an}function Ok(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[qu],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function qC(t,e,n,r,i,s,o){let a=gl(r),l=t.firstCreatePass&&CC(t),h=e[xt],p=DC(e),m=!0;if(r.type&3||o){let N=Pt(r,e),R=o?o(N):N,F=p.length,$=o?ae=>o(tn(ae[r.index])):r.index,q=null;if(!o&&a&&(q=Ok(t,e,i,r.index)),q!==null){let ae=q.__ngLastListenerFn__||q;ae.__ngNextListenerFn__=s,q.__ngLastListenerFn__=s,m=!1}else{s=PE(r,e,h,s),Pk(N,i,s);let ae=n.listen(R,i,s);p.push(s,ae),l&&l.push(i,$,F,F+1)}}else s=PE(r,e,h,s);let v=r.outputs,S;if(m&&v!==null&&(S=v[i])){let N=S.length;if(N)for(let R=0;R<N;R+=2){let F=S[R],$=S[R+1],Se=e[F][$].subscribe(s),Z=p.length;p.push(s,Se),l&&l.push(i,r.index,Z,-(Z+1))}}}function xE(t,e,n,r){let i=he(null);try{return Yt(6,e,n),n(r)!==!1}catch(s){return bC(t,s),!1}finally{Yt(7,e,n),he(i)}}function PE(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Ir(t.index,e):e;_g(o,5);let a=xE(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=xE(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function fi(t=1){return rx(t)}function zC(t,e,n,r){FO(t,e,n,r)}function GC(t){let e=me(),n=Qe(),r=TD();Kp(r+1);let i=Eg(n,r);if(t.dirty&&VN(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=jO(e,r);t.reset(s,Mx),t.notifyOnChanges()}return!0}return!1}function WC(){return OO(me(),TD())}function fa(t,e=""){let n=me(),r=Qe(),i=t+Bt,s=r.firstCreatePass?la(r,i,1,e,null):r.data[i],o=kk(r,n,s,e,t);n[i]=o,vl()&&El(r,n,o,s),li(s,!1)}var kk=(t,e,n,r,i)=>(_l(!0),Xx(e[Oe],r));function Fk(t){return Rl("",t,""),Fk}function Rl(t,e,n){let r=me(),i=ok(r,t,e,n);return i!==on&&TC(r,di(),i),Rl}function Tg(t,e,n,r,i){let s=me(),o=ak(s,t,e,n,r,i);return o!==on&&TC(s,di(),o),Tg}function Sg(t,e,n){jC(e)&&(e=e());let r=me(),i=ca();if(yr(r,i,e)){let s=Qe(),o=Zp();vC(s,o,r,t,e,r[Oe],n,!1)}return Sg}function KC(t,e){let n=jC(t);return n&&t.set(e),n}function Ag(t,e){let n=me(),r=Qe(),i=Ye();return qC(r,n,n[Oe],i,t,e),Ag}function Lk(t,e,n){let r=Qe();if(r.firstCreatePass){let i=pr(t);Mp(n,r.data,r.blueprint,i,!0),Mp(e,r.data,r.blueprint,i,!1)}}function Mp(t,e,n,r,i){if(t=lt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Mp(t[s],e,n,r,i);else{let s=Qe(),o=me(),a=Ye(),u=ys(t)?t:lt(t.provide),l=aD(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(ys(t)||!t.multi){let v=new ii(l,i,te),S=Uf(u,e,i?h:h+m,p);S===-1?(ep(Qu(a,o),s,u),Vf(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[S]=v,o[S]=v)}else{let v=Uf(u,e,h+m,p),S=Uf(u,e,h,h+m),N=v>=0&&n[v],R=S>=0&&n[S];if(i&&!R||!i&&!N){ep(Qu(a,o),s,u);let F=jk(i?Uk:Vk,n.length,i,r,l);!i&&R&&(n[S].providerFactory=F),Vf(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(F),o.push(F)}else{let F=QC(n[i?S:v],l,!i&&r);Vf(s,t,v>-1?v:S,F)}!i&&r&&R&&n[S].componentProviders++}}}function Vf(t,e,n,r){let i=ys(e),s=bN(e);if(i||s){let u=(s?lt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function QC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Uf(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Vk(t,e,n,r){return Np(this.multi,[])}function Uk(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=si(n,n[ee],this.providerFactory.index,r);s=a.slice(0,o),Np(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],Np(i,s);return s}function Np(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function jk(t,e,n,r,i){let s=new ii(t,n,te);return s.multi=[],s.index=e,s.componentProviders=0,QC(s,i,r&&!n),s}function pa(t,e=[]){return n=>{n.providersResolver=(r,i)=>Lk(r,i?i(t):t,e)}}var Bk=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=iD(!1,r.type),s=i.length>0?Tl([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=B({token:e,providedIn:"environment",factory:()=>new e(G(It))});let t=e;return t})();function Ml(t){hi("NgStandalone"),t.getStandaloneInjector=e=>e.get(Bk).getOrCreateStandaloneInjector(t)}function YC(t,e,n,r,i){return Hk(me(),QN(),t,e,n,r,i)}function $k(t,e){let n=t[e];return n===on?void 0:n}function Hk(t,e,n,r,i,s,o){let a=e+n;return $C(t,a,i,s)?ZO(t,a+2,o?r.call(o,i,s):r(i,s)):$k(t,a+2)}var An=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},ZC=new An("18.2.2");var Nl=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var JC=new U("");function pi(t){return!!t&&typeof t.then=="function"}function XC(t){return!!t&&typeof t.subscribe=="function"}var xl=new U(""),eb=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=P(xl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(pi(o))r.push(o);else if(XC(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pl=new U("");function qk(){Cw(()=>{throw new j(600,!1)})}function zk(t){return t.isBoundToModule}var Gk=10;function Wk(t,e,n){try{let r=n();return pi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var gi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(Ax),this.afterRenderManager=P(HC),this.zonelessEnabled=P(wg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=P(As).hasPendingTasks.pipe(X(r=>!r)),this._injector=P(It)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof nl;if(!this._injector.get(eb).done){let v=!s&&eD(r),S=!1;throw new j(405,S)}let a;s?a=r:a=this._injector.get(Es).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=zk(a)?void 0:this._injector.get(mr),l=i||a.selector,h=a.create(Ke.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(JC,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Lu(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new j(101,!1);let r=he(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,he(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Ds,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<Gk;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)Kk(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>ml(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Lu(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Pl,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Lu(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new j(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Lu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Kk(t,e,n,r){if(!n&&!ml(t))return;NC(t,e,n&&!r?0:1)}var xp=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ol=(()=>{let e=class e{compileModuleSync(r){return new bp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=tD(r),o=rC(s.declarations).reduce((a,u)=>{let l=fr(u);return l&&a.push(new Cs(l)),a},[]);return new xp(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qk=(()=>{let e=class e{constructor(){this.zone=P(ve),this.changeDetectionScheduler=P(ws),this.applicationRef=P(gi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yk=new U("",{factory:()=>!1});function tb({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ve(oe(k({},nb()),{scheduleInRootZone:n})),[{provide:ve,useFactory:t},{provide:ms,multi:!0,useFactory:()=>{let r=P(Qk,{optional:!0});return()=>r.initialize()}},{provide:ms,multi:!0,useFactory:()=>{let r=P(Zk);return()=>{r.initialize()}}},e===!0?{provide:kC,useValue:!0}:[],{provide:FC,useValue:n??qD}]}function H9(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=tb({ngZoneFactory:()=>{let i=nb(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&hi("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return nn([{provide:Yk,useValue:!0},{provide:wg,useValue:!1},r])}function nb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Zk=(()=>{let e=class e{constructor(){this.subscription=new Re,this.initialized=!1,this.zone=P(ve),this.pendingTasks=P(As)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Jk=(()=>{let e=class e{constructor(){this.appRef=P(gi),this.taskService=P(As),this.ngZone=P(ve),this.zonelessEnabled=P(wg),this.disableScheduling=P(kC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Re,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Zu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(FC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof sp||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?mE:zD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Zu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,mE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Xk(){return typeof $localize<"u"&&$localize.locale||al}var Rg=new U("",{providedIn:"root",factory:()=>P(Rg,se.Optional|se.SkipSelf)||Xk()});var rb=new U("");function xu(t){return!!t.platformInjector}function e1(t){let e=xu(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ve);return n.run(()=>{xu(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Tn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),xu(t)){let s=()=>e.destroy(),o=t.platformInjector.get(rb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{Lu(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return Wk(r,n,()=>{let s=e.get(eb);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Rg,al);if(xk(o||al),xu(t)){let a=e.get(gi);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return t1(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function t1(t,e){let n=t.injector.get(gi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new j(-403,!1);e.push(t)}var Vu=null;function n1(t=[],e){return Ke.create({name:e,providers:[{provide:hl,useValue:"platform"},{provide:rb,useValue:new Set([()=>Vu=null])},...t]})}function r1(t=[]){if(Vu)return Vu;let e=n1(t);return Vu=e,qk(),i1(e),e}function i1(t){t.get(ig,null)?.forEach(n=>n())}var Dr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=s1;let t=e;return t})();function s1(t){return o1(Ye(),me(),(t&16)===16)}function o1(t,e,n){if(pl(t)&&!n){let r=Ir(t.index,e);return new oi(r,r)}else if(t.type&175){let r=e[en];return new oi(r,e)}return null}var Pp=class{constructor(){}supports(e){return BC(e)}create(e){return new Op(e)}},a1=(t,e)=>e,Op=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||a1}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<OE(r,i,s)?n:r,a=OE(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,S=v+m;h<=S&&S<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!BC(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,QO(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new kp(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new cl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new cl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},kp=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Fp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},cl=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Fp,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function OE(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function kE(){return new Mg([new Pp])}var Mg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||kE()),deps:[[e,new Up,new it]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new j(901,!1)}};e.\u0275prov=B({token:e,providedIn:"root",factory:kE});let t=e;return t})();function ib(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=r1(r),s=[tb({}),{provide:ws,useExisting:Jk},...n||[]],o=new sl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return e1({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var sb=new U("");function Cr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ga(t,e){hi("NgSignals");let n=ww(t);return e?.equal&&(n[En].equal=e.equal),n}function On(t){let e=he(null);try{return t()}finally{he(e)}}function ob(t){let e=fr(t);if(!e)return null;let n=new Cs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var hb=null;function Fn(){return hb}function fb(t){hb??=t}var kl=class{};var ht=new U(""),Lg=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(c1),providedIn:"platform"});let t=e;return t})(),pb=new U(""),c1=(()=>{let e=class e extends Lg{constructor(){super(),this._doc=P(ht),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fn().getBaseHref(this._doc)}onPopState(r){let i=Fn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Fn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Vg(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function ab(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function kn(t){return t&&t[0]!=="?"?"?"+t:t}var Ln=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(Ug),providedIn:"root"});let t=e;return t})(),gb=new U(""),Ug=(()=>{let e=class e extends Ln{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(ht).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Vg(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+kn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+kn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+kn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(G(Lg),G(gb,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mb=(()=>{let e=class e extends Ln{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Vg(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+kn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+kn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(G(Lg),G(gb,8))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),xs=(()=>{let e=class e{constructor(r){this._subject=new Me,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=d1(ab(cb(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+kn(i))}normalize(r){return e.stripTrailingSlash(l1(this._basePath,cb(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+kn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+kn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=kn,e.joinWithSlash=Vg,e.stripTrailingSlash=ab,e.\u0275fac=function(i){return new(i||e)(G(Ln))},e.\u0275prov=B({token:e,factory:()=>u1(),providedIn:"root"});let t=e;return t})();function u1(){return new xs(G(Ln))}function l1(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function cb(t){return t.replace(/\/index.html$/,"")}function d1(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function yb(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var xg=/\s+/,ub=[],vb=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=ub,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(xg):ub}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(xg):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(xg).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(te(wt),te(xn))},e.\u0275dir=je({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Pg=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},_b=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Pg(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),lb(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);lb(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(te(Er),te(ai),te(Mg))},e.\u0275dir=je({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function lb(t,e){t.context.$implicit=e.item}var Ib=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Og,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){db("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){db("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(te(Er),te(ai))},e.\u0275dir=je({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Og=class{constructor(){this.$implicit=null,this.ngIf=null}};function db(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${dt(e)}'.`)}var jg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_r({type:e}),e.\u0275inj=vr({});let t=e;return t})(),Bg="browser",h1="server";function f1(t){return t===Bg}function $g(t){return t===h1}var wb=(()=>{let e=class e{};e.\u0275prov=B({token:e,providedIn:"root",factory:()=>f1(P(sn))?new kg(P(ht),window):new Fg});let t=e;return t})(),kg=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=p1(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function p1(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Fg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Fl=class{};var zg=class extends kl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Gg=class t extends zg{static makeCurrent(){fb(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=g1();return n==null?null:m1(n)}resetBaseElement(){ma=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return yb(document.cookie,e)}},ma=null;function g1(){return ma=ma||document.querySelector("base"),ma?ma.getAttribute("href"):null}function m1(t){return new URL(t,document.baseURI).pathname}var y1=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),Ll=new U(""),Tb=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(G(Ll),G(ve))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),ya=class{constructor(e){this._doc=e}},Hg="ng-app-id",Sb=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$g(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Hg}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Hg),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Hg,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(G(ht),G(rg),G(sg,8),G(sn))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),qg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Kg=/%COMP%/g,Ab="%COMP%",v1=`_nghost-${Ab}`,_1=`_ngcontent-${Ab}`,I1=!0,w1=new U("",{providedIn:"root",factory:()=>I1});function E1(t){return _1.replace(Kg,t)}function D1(t){return v1.replace(Kg,t)}function Rb(t,e){return e.map(n=>n.replace(Kg,t))}var Db=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=$g(u),this.defaultRenderer=new va(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jt.ShadowDom&&(i=oe(k({},i),{encapsulation:Jt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Vl?s.applyToHost(r):s instanceof _a&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Jt.Emulated:o=new Vl(l,h,i,this.appId,p,a,u,m);break;case Jt.ShadowDom:return new Wg(l,h,r,i,a,u,this.nonce,m);default:o=new _a(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(G(Tb),G(Sb),G(rg),G(w1),G(ht),G(sn),G(ve),G(sg))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),va=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(qg[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Cb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Cb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=qg[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=qg[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Sn.DashCase|Sn.Important)?e.style.setProperty(n,r,i&Sn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Sn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Fn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Cb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Wg=class extends va{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Rb(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_a=class extends va{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Rb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Vl=class extends _a{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=E1(l),this.hostAttr=D1(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},C1=(()=>{let e=class e extends ya{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(G(ht))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),b1=(()=>{let e=class e extends ya{constructor(r){super(r),this.delegate=P(sb,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(G(ht))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})(),bb=["alt","control","meta","shift"],T1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},S1={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},A1=(()=>{let e=class e extends ya{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),bb.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=T1[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),bb.forEach(a=>{if(a!==s){let u=S1[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(G(ht))},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function j3(t,e){return ib(k({rootComponent:t},R1(e)))}function R1(t){return{appProviders:[...O1,...t?.providers??[]],platformProviders:P1}}function M1(){Gg.makeCurrent()}function N1(){return new Tn}function x1(){return JD(document),document}var P1=[{provide:sn,useValue:Bg},{provide:ig,useValue:M1,multi:!0},{provide:ht,useFactory:x1,deps:[]}];var O1=[{provide:hl,useValue:"root"},{provide:Tn,useFactory:N1,deps:[]},{provide:Ll,useClass:C1,multi:!0,deps:[ht,ve,sn]},{provide:Ll,useClass:A1,multi:!0,deps:[ht]},{provide:Ll,useClass:b1,multi:!0},Db,Sb,Tb,{provide:Ds,useExisting:Db},{provide:Fl,useClass:y1,deps:[]},[]];var Mb=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(G(ht))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var re="primary",Oa=Symbol("RouteTitle"),Xg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Vs(t){return new Xg(t)}function F1(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function L1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!cn(t[n],e[n]))return!1;return!0}function cn(t,e){let n=t?em(t):void 0,r=e?em(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!$b(t[i],e[i]))return!1;return!0}function em(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function $b(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Hb(t){return t.length>0?t[t.length-1]:null}function Sr(t){return Ef(t)?t:pi(t)?Ce(Promise.resolve(t)):z(t)}var V1={exact:zb,subset:Gb},qb={exact:U1,subset:j1,ignored:()=>!0};function Nb(t,e,n){return V1[n.paths](t.root,e.root,n.matrixParams)&&qb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function U1(t,e){return cn(t,e)}function zb(t,e,n){if(!vi(t.segments,e.segments)||!Bl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!zb(t.children[r],e.children[r],n))return!1;return!0}function j1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>$b(t[n],e[n]))}function Gb(t,e,n){return Wb(t,e,e.segments,n)}function Wb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!vi(i,n)||e.hasChildren()||!Bl(i,n,r))}else if(t.segments.length===n.length){if(!vi(t.segments,n)||!Bl(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Gb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!vi(t.segments,i)||!Bl(t.segments,i,r)||!t.children[re]?!1:Wb(t.children[re],e,s,r)}}function Bl(t,e,n){return e.every((r,i)=>qb[n](t[i].parameters,r.parameters))}var Un=class{constructor(e=new _e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vs(this.queryParams),this._queryParamMap}toString(){return H1.serialize(this)}},_e=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $l(this)}},yi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Vs(this.parameters),this._parameterMap}toString(){return Qb(this)}};function B1(t,e){return vi(t,e)&&t.every((n,r)=>cn(n.parameters,e[r].parameters))}function vi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function $1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===re&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==re&&(n=n.concat(e(i,r)))}),n}var ka=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>new Us,providedIn:"root"});let t=e;return t})(),Us=class{parse(e){let n=new nm(e);return new Un(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ia(e.root,!0)}`,r=G1(e.queryParams),i=typeof e.fragment=="string"?`#${q1(e.fragment)}`:"";return`${n}${r}${i}`}},H1=new Us;function $l(t){return t.segments.map(e=>Qb(e)).join("/")}function Ia(t,e){if(!t.hasChildren())return $l(t);if(e){let n=t.children[re]?Ia(t.children[re],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==re&&r.push(`${i}:${Ia(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=$1(t,(r,i)=>i===re?[Ia(t.children[re],!1)]:[`${i}:${Ia(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[re]!=null?`${$l(t)}/${n[0]}`:`${$l(t)}/(${n.join("//")})`}}function Kb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ul(t){return Kb(t).replace(/%3B/gi,";")}function q1(t){return encodeURI(t)}function tm(t){return Kb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hl(t){return decodeURIComponent(t)}function xb(t){return Hl(t.replace(/\+/g,"%20"))}function Qb(t){return`${tm(t.path)}${z1(t.parameters)}`}function z1(t){return Object.entries(t).map(([e,n])=>`;${tm(e)}=${tm(n)}`).join("")}function G1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ul(n)}=${Ul(i)}`).join("&"):`${Ul(n)}=${Ul(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var W1=/^[^\/()?;#]+/;function Qg(t){let e=t.match(W1);return e?e[0]:""}var K1=/^[^\/()?;=#]+/;function Q1(t){let e=t.match(K1);return e?e[0]:""}var Y1=/^[^=?&#]+/;function Z1(t){let e=t.match(Y1);return e?e[0]:""}var J1=/^[^&#]+/;function X1(t){let e=t.match(J1);return e?e[0]:""}var nm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[re]=new _e(e,n)),r}parseSegment(){let e=Qg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new yi(Hl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Q1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Qg(this.remaining);i&&(r=i,this.capture(r))}e[Hl(n)]=Hl(r)}parseQueryParam(e){let n=Z1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=X1(this.remaining);o&&(r=o,this.capture(r))}let i=xb(n),s=xb(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[re]:new _e([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function Yb(t){return t.segments.length>0?new _e([],{[re]:t}):t}function Zb(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=Zb(i);if(r===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new _e(t.segments,e);return eF(n)}function eF(t){if(t.numberOfChildren===1&&t.children[re]){let e=t.children[re];return new _e(t.segments.concat(e.segments),e.children)}return t}function _i(t){return t instanceof Un}function tF(t,e,n=null,r=null){let i=Jb(t);return Xb(i,e,n,r)}function Jb(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new _e(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Yb(r);return e??i}function Xb(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Yg(i,i,i,n,r);let s=nF(e);if(s.toRoot())return Yg(i,i,new _e([],{}),n,r);let o=rF(s,i,t),a=o.processChildren?Da(o.segmentGroup,o.index,s.commands):tT(o.segmentGroup,o.index,s.commands);return Yg(i,o.segmentGroup,a,n,r)}function ql(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ta(t){return typeof t=="object"&&t!=null&&t.outlets}function Yg(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=eT(t,e,n);let a=Yb(Zb(o));return new Un(a,s,i)}function eT(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=eT(s,e,n)}),new _e(t.segments,r)}var zl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ql(r[0]))throw new j(4003,!1);let i=r.find(Ta);if(i&&i!==Hb(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function nF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new zl(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new zl(n,e,r)}var ks=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function rF(t,e,n){if(t.isAbsolute)return new ks(e,!0,0);if(!n)return new ks(e,!1,NaN);if(n.parent===null)return new ks(n,!0,0);let r=ql(t.commands[0])?0:1,i=n.segments.length-1+r;return iF(n,i,t.numberOfDoubleDots)}function iF(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new ks(r,!1,i-s)}function sF(t){return Ta(t[0])?t[0].outlets:{[re]:t}}function tT(t,e,n){if(t??=new _e([],{}),t.segments.length===0&&t.hasChildren())return Da(t,e,n);let r=oF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new _e(t.segments.slice(0,r.pathIndex),{});return s.children[re]=new _e(t.segments.slice(r.pathIndex),t.children),Da(s,0,i)}else return r.match&&i.length===0?new _e(t.segments,{}):r.match&&!t.hasChildren()?rm(t,e,n):r.match?Da(t,0,i):rm(t,e,n)}function Da(t,e,n){if(n.length===0)return new _e(t.segments,{});{let r=sF(n),i={};if(Object.keys(r).some(s=>s!==re)&&t.children[re]&&t.numberOfChildren===1&&t.children[re].segments.length===0){let s=Da(t.children[re],e,n);return new _e(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=tT(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new _e(t.segments,i)}}function oF(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ta(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!Ob(u,l,o))return s;r+=2}else{if(!Ob(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function rm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ta(s)){let u=aF(s.outlets);return new _e(r,u)}if(i===0&&ql(n[0])){let u=t.segments[e];r.push(new yi(u.path,Pb(n[0]))),i++;continue}let o=Ta(s)?s.outlets[re]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ql(a)?(r.push(new yi(o,Pb(a))),i+=2):(r.push(new yi(o,{})),i++)}return new _e(r,{})}function aF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=rm(new _e([],{}),0,r))}),e}function Pb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Ob(t,e,n){return t==n.path&&cn(e,n.parameters)}var Ca="imperative",He=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(He||{}),kt=class{constructor(e,n){this.id=e,this.url=n}},js=class extends kt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=He.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qt=class extends kt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=He.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ct=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ct||{}),Gl=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Gl||{}),Vn=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},br=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=He.NavigationSkipped}},Sa=class extends kt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=He.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Wl=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},im=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sm=class extends kt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=He.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},om=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},am=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=He.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},um=class{constructor(e){this.route=e,this.type=He.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lm=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dm=class{constructor(e){this.snapshot=e,this.type=He.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hm=class{constructor(e){this.snapshot=e,this.type=He.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fm=class{constructor(e){this.snapshot=e,this.type=He.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=He.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Aa=class{},Bs=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function cF(t,e){return t.providers&&!t._injector&&(t._injector=Tl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ht(t){return t.outlet||re}function uF(t,e){let n=t.filter(r=>Ht(r)===e);return n.push(...t.filter(r=>Ht(r)!==e)),n}function Fa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var pm=class{get injector(){return Fa(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new La(this.rootInjector),this.attachRef=null}},La=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new pm(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(G(It))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ql=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=gm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=gm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=mm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mm(e,this._root).map(n=>n.value)}};function gm(t,e){if(t===e.value)return e;for(let n of e.children){let r=gm(t,n);if(r)return r}return null}function mm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=mm(t,n);if(r.length)return r.unshift(e),r}return[]}var Dt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Os(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Yl=class extends Ql{constructor(e,n){super(e),this.snapshot=n,bm(this,e)}toString(){return this.snapshot.toString()}};function nT(t){let e=lF(t),n=new We([new yi("",{})]),r=new We({}),i=new We({}),s=new We({}),o=new We(""),a=new Tr(n,r,s,o,i,re,t,e.root);return a.snapshot=e.root,new Yl(new Dt(a,[]),e)}function lF(t){let e={},n={},r={},i="",s=new Fs([],e,r,i,n,re,t,null,{});return new Jl("",new Dt(s,[]))}var Tr=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[Oa]))??z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>Vs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>Vs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zl(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),t.params),data:k(k({},e.data),t.data),resolve:k(k(k(k({},t.data),e.data),i?.data),t._resolvedData)}:r={params:k({},t.params),data:k({},t.data),resolve:k(k({},t.data),t._resolvedData??{})},i&&iT(i)&&(r.resolve[Oa]=i.title),r}var Fs=class{get title(){return this.data?.[Oa]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Jl=class extends Ql{constructor(e,n){super(n),this.url=e,bm(this,n)}toString(){return rT(this._root)}};function bm(t,e){e.value._routerState=t,e.children.forEach(n=>bm(t,n))}function rT(t){let e=t.children.length>0?` { ${t.children.map(rT).join(", ")} } `:"";return`${t.value}${e}`}function Zg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,cn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),cn(e.params,n.params)||t.paramsSubject.next(n.params),L1(e.url,n.url)||t.urlSubject.next(n.url),cn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ym(t,e){let n=cn(t.params,e.params)&&B1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||ym(t.parent,e.parent))}function iT(t){return typeof t.title=="string"||t.title===null}var dF=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new Me,this.deactivateEvents=new Me,this.attachEvents=new Me,this.detachEvents=new Me,this.parentContexts=P(La),this.location=P(Er),this.changeDetector=P(Dr),this.inputBinder=P(nd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new vm(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Nn]});let t=e;return t})(),vm=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Tr?this.route:e===La?this.childContexts:this.parent.get(e,n)}},nd=new U(""),kb=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Ko([i.queryParams,i.params,i.data]).pipe(At(([o,a,u],l)=>(u=k(k(k({},o),a),u),l===0?z(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=ob(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function hF(t,e,n){let r=Ra(t,e._root,n?n._root:void 0);return new Yl(r,e)}function Ra(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=fF(t,e,n);return new Dt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ra(t,a)),o}}let r=pF(e.value),i=e.children.map(s=>Ra(t,s));return new Dt(r,i)}}function fF(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ra(t,r,i);return Ra(t,r)})}function pF(t){return new Tr(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var Ma=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},sT="ngNavigationCancelingError";function Xl(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=_i(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=oT(!1,Ct.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function oT(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[sT]=!0,n.cancellationCode=e,n}function gF(t){return aT(t)&&_i(t.url)}function aT(t){return!!t&&t[sT]}var mF=(t,e,n,r)=>X(i=>(new _m(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),_m=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Zg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Os(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Os(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Os(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Os(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new fm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new dm(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Zg(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Zg(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},ed=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ls=class{constructor(e,n){this.component=e,this.route=n}};function yF(t,e,n){let r=t._root,i=e?e._root:null;return wa(r,i,n,[r.value])}function vF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Hs(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!UE(t)?t:e.get(t):r}function wa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Os(e);return t.children.forEach(o=>{_F(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ba(a,n.getContext(o),i)),i}function _F(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=IF(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ed(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?wa(t,e,a?a.children:null,r,i):wa(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ls(a.outlet.component,o))}else o&&ba(e,a,i),i.canActivateChecks.push(new ed(r)),s.component?wa(t,null,a?a.children:null,r,i):wa(t,null,n,r,i);return i}function IF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!vi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vi(t.url,e.url)||!cn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ym(t,e)||!cn(t.queryParams,e.queryParams);case"paramsChange":default:return!ym(t,e)}}function ba(t,e,n){let r=Os(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ba(o,e.children.getContext(s),n):ba(o,null,n):ba(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ls(e.outlet.component,i)):n.canDeactivateChecks.push(new Ls(null,i)):n.canDeactivateChecks.push(new Ls(null,i))}function Va(t){return typeof t=="function"}function wF(t){return typeof t=="boolean"}function EF(t){return t&&Va(t.canLoad)}function DF(t){return t&&Va(t.canActivate)}function CF(t){return t&&Va(t.canActivateChild)}function bF(t){return t&&Va(t.canDeactivate)}function TF(t){return t&&Va(t.canMatch)}function cT(t){return t instanceof Dn||t?.name==="EmptyError"}var jl=Symbol("INITIAL_VALUE");function $s(){return At(t=>Ko(t.map(e=>e.pipe(Cn(1),Su(jl)))).pipe(X(e=>{for(let n of e)if(n!==!0){if(n===jl)return jl;if(n===!1||SF(n))return n}return!0}),_t(e=>e!==jl),Cn(1)))}function SF(t){return _i(t)||t instanceof Ma}function AF(t,e){return Pe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?z(oe(k({},n),{guardsResult:!0})):RF(o,r,i,t).pipe(Pe(a=>a&&wF(a)?MF(r,s,t,e):z(a)),X(a=>oe(k({},n),{guardsResult:a})))})}function RF(t,e,n,r){return Ce(t).pipe(Pe(i=>kF(i.component,i.route,n,e,r)),Qt(i=>i!==!0,!0))}function MF(t,e,n,r){return Ce(e).pipe(Yr(i=>ss(xF(i.route.parent,r),NF(i.route,r),OF(t,i.path,n),PF(t,i.route,n))),Qt(i=>i!==!0,!0))}function NF(t,e){return t!==null&&e&&e(new hm(t)),z(!0)}function xF(t,e){return t!==null&&e&&e(new lm(t)),z(!0)}function PF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return z(!0);let i=r.map(s=>Cu(()=>{let o=Fa(e)??n,a=Hs(s,o),u=DF(a)?a.canActivate(e,t):rn(o,()=>a(e,t));return Sr(u).pipe(Qt())}));return z(i).pipe($s())}function OF(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>vF(o)).filter(o=>o!==null).map(o=>Cu(()=>{let a=o.guards.map(u=>{let l=Fa(o.node)??n,h=Hs(u,l),p=CF(h)?h.canActivateChild(r,t):rn(l,()=>h(r,t));return Sr(p).pipe(Qt())});return z(a).pipe($s())}));return z(s).pipe($s())}function kF(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return z(!0);let o=s.map(a=>{let u=Fa(e)??i,l=Hs(a,u),h=bF(l)?l.canDeactivate(t,e,n,r):rn(u,()=>l(t,e,n,r));return Sr(h).pipe(Qt())});return z(o).pipe($s())}function FF(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return z(!0);let s=i.map(o=>{let a=Hs(o,t),u=EF(a)?a.canLoad(e,n):rn(t,()=>a(e,n));return Sr(u)});return z(s).pipe($s(),uT(r))}function uT(t){return su(Ue(e=>{if(typeof e!="boolean")throw Xl(t,e)}),X(e=>e===!0))}function LF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return z(!0);let s=i.map(o=>{let a=Hs(o,t),u=TF(a)?a.canMatch(e,n):rn(t,()=>a(e,n));return Sr(u)});return z(s).pipe($s(),uT(r))}var Na=class{constructor(e){this.segmentGroup=e||null}},xa=class extends Error{constructor(e){super(),this.urlTree=e}};function Ps(t){return is(new Na(t))}function VF(t){return is(new j(4e3,!1))}function UF(t){return is(oT(!1,Ct.GuardRejected))}var Im=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return z(r);if(i.numberOfChildren>1||!i.children[re])return VF(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:S,title:N}=i,R=rn(s,()=>a({params:v,data:S,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(R instanceof Un)throw new xa(R);n=R}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new xa(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Un(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new _e(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},wm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jF(t,e,n,r,i){let s=lT(t,e,n);return s.matched?(r=cF(e,r),LF(r,e,n,i).pipe(X(o=>o===!0?s:k({},wm)))):z(s)}function lT(t,e,n){if(e.path==="**")return BF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?k({},wm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||F1)(n,t,e);if(!i)return k({},wm);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?k(k({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function BF(t){return{matched:!0,parameters:t.length>0?Hb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Fb(t,e,n,r){return n.length>0&&qF(t,n,r)?{segmentGroup:new _e(e,HF(r,new _e(n,t.children))),slicedSegments:[]}:n.length===0&&zF(t,n,r)?{segmentGroup:new _e(t.segments,$F(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new _e(t.segments,t.children),slicedSegments:n}}function $F(t,e,n,r){let i={};for(let s of n)if(rd(t,e,s)&&!r[Ht(s)]){let o=new _e([],{});i[Ht(s)]=o}return k(k({},r),i)}function HF(t,e){let n={};n[re]=e;for(let r of t)if(r.path===""&&Ht(r)!==re){let i=new _e([],{});n[Ht(r)]=i}return n}function qF(t,e,n){return n.some(r=>rd(t,e,r)&&Ht(r)!==re)}function zF(t,e,n){return n.some(r=>rd(t,e,r))}function rd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function GF(t,e,n){return e.length===0&&!t.children[n]}var Em=class{};function WF(t,e,n,r,i,s,o="emptyOnly"){return new Dm(t,e,n,r,i,o,s).recognize()}var KF=31,Dm=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Im(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=Fb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:n,rootSnapshot:r})=>{let i=new Dt(r,n),s=new Jl("",i),o=tF(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Fs([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,n).pipe(X(r=>({children:r,rootSnapshot:n})),ar(r=>{if(r instanceof xa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Na?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(X(o=>o instanceof Dt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ce(s).pipe(Yr(o=>{let a=r.children[o],u=uF(n,o);return this.processSegmentGroup(e,u,a,o,i)}),Tu((o,a)=>(o.push(...a),o)),cr(null),bf(),Pe(o=>{if(o===null)return Ps(r);let a=dT(o);return QF(a),z(a)}))}processSegment(e,n,r,i,s,o,a){return Ce(n).pipe(Yr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(ar(l=>{if(l instanceof Na)return z(null);throw l}))),Qt(u=>!!u),ar(u=>{if(cT(u))return GF(r,i,s)?z(new Em):Ps(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return Ht(r)!==o&&(o===re||!rd(i,s,r))?Ps(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):Ps(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=lT(n,i,s);if(!u)return Ps(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KF&&(this.allowRedirects=!1));let v=new Fs(s,l,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Lb(i),Ht(i),i.component??i._loadedComponent??null,i,Vb(i)),S=Zl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Pe(R=>this.processSegment(e,r,n,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=jF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(At(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(At(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,S=new Fs(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Lb(r),Ht(r),r.component??r._loadedComponent??null,r,Vb(r)),N=Zl(S,o,this.paramsInheritanceStrategy);S.params=Object.freeze(N.params),S.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:F}=Fb(n,m,v,l);if(F.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(X(q=>new Dt(S,q)));if(l.length===0&&F.length===0)return z(new Dt(S,[]));let $=Ht(r)===s;return this.processSegment(h,l,R,F,$?re:s,!0,S).pipe(X(q=>new Dt(S,q instanceof Dt?[q]:[])))}))):Ps(n)))}getChildConfig(e,n,r){return n.children?z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?z({routes:n._loadedRoutes,injector:n._loadedInjector}):FF(e,n,r,this.urlSerializer).pipe(Pe(i=>i?this.configLoader.loadChildren(e,n).pipe(Ue(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):UF(n))):z({routes:[],injector:e})}};function QF(t){t.sort((e,n)=>e.value.outlet===re?-1:n.value.outlet===re?1:e.value.outlet.localeCompare(n.value.outlet))}function YF(t){let e=t.value.routeConfig;return e&&e.path===""}function dT(t){let e=[],n=new Set;for(let r of t){if(!YF(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=dT(r.children);e.push(new Dt(r.value,i))}return e.filter(r=>!n.has(r))}function Lb(t){return t.data||{}}function Vb(t){return t.resolve||{}}function ZF(t,e,n,r,i,s){return Pe(o=>WF(t,e,n,r,o.extractedUrl,i,s).pipe(X(({state:a,tree:u})=>oe(k({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function JF(t,e){return Pe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return z(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of hT(u))o.add(l);let a=0;return Ce(o).pipe(Yr(u=>s.has(u)?XF(u,r,t,e):(u.data=Zl(u,u.parent,t).resolve,z(void 0))),Ue(()=>a++),os(1),Pe(u=>a===o.size?z(n):vt))})}function hT(t){let e=t.children.map(n=>hT(n)).flat();return[t,...e]}function XF(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!iT(i)&&(s[Oa]=i.title),eL(s,t,e,r).pipe(X(o=>(t._resolvedData=o,t.data=Zl(t,t.parent,n).resolve,null)))}function eL(t,e,n,r){let i=em(t);if(i.length===0)return z({});let s={};return Ce(i).pipe(Pe(o=>tL(t[o],e,n,r).pipe(Qt(),Ue(a=>{if(a instanceof Ma)throw Xl(new Us,a);s[o]=a}))),os(1),Cf(s),ar(o=>cT(o)?vt:is(o)))}function tL(t,e,n,r){let i=Fa(e)??r,s=Hs(t,i),o=s.resolve?s.resolve(e,n):rn(i,()=>s(e,n));return Sr(o)}function Jg(t){return At(e=>{let n=t(e);return n?Ce(n).pipe(X(()=>e)):z(e)})}var fT=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===re);return i}getResolvedTitleForRoute(r){return r.data[Oa]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(nL),providedIn:"root"});let t=e;return t})(),nL=(()=>{let e=class e extends fT{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(G(Mb))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ua=new U("",{providedIn:"root",factory:()=>({})}),rL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=dl({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ml],decls:1,vars:0,template:function(i,s){i&1&&Ns(0,"router-outlet")},dependencies:[dF],encapsulation:2});let t=e;return t})();function Tm(t){let e=t.children&&t.children.map(Tm),n=e?oe(k({},t),{children:e}):k({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==re&&(n.component=rL),n}var Pa=new U(""),Sm=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=P(Ol)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Sr(r.loadComponent()).pipe(X(pT),Ue(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Qo(()=>{this.componentLoaders.delete(r)})),s=new es(i,()=>new $e).pipe(Xi());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return z({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=iL(i,this.compiler,r,this.onLoadEndListener).pipe(Qo(()=>{this.childrenLoaders.delete(i)})),a=new es(o,()=>new $e).pipe(Xi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iL(t,e,n,r){return Sr(t.loadChildren()).pipe(X(pT),Pe(i=>i instanceof na||Array.isArray(i)?z(i):Ce(e.compileModuleAsync(i))),X(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Pa,[],{optional:!0,self:!0}).flat()),{routes:o.map(Tm),injector:s}}))}function sL(t){return t&&typeof t=="object"&&"default"in t}function pT(t){return sL(t)?t.default:t}var Am=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(oL),providedIn:"root"});let t=e;return t})(),oL=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gT=new U(""),mT=new U("");function aL(t,e,n){let r=t.get(mT),i=t.get(ht);return t.get(ve).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),cL(t))),{onViewTransitionCreated:u}=r;return u&&rn(t,()=>u({transition:a,from:e,to:n})),o})}function cL(t){return new Promise(e=>{Cg({read:()=>setTimeout(e)},{injector:t})})}var uL=new U(""),Rm=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=P(Sm),this.environmentInjector=P(It),this.urlSerializer=P(ka),this.rootContexts=P(La),this.location=P(xs),this.inputBindingEnabled=P(nd,{optional:!0})!==null,this.titleStrategy=P(fT),this.options=P(Ua,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=P(Am),this.createViewTransition=P(gT,{optional:!0}),this.navigationErrorHandler=P(uL,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>z(void 0),this.rootComponentType=null;let r=s=>this.events.next(new cm(s)),i=s=>this.events.next(new um(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(oe(k(k({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new We({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ca,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(o=>o.id!==0),X(o=>oe(k({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),At(o=>{let a=!1,u=!1;return z(o).pipe(At(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ct.SupersededByNewNavigation),vt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?oe(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new br(l.id,this.urlSerializer.serialize(l.rawUrl),m,Gl.IgnoredSameUrlNavigation)),l.resolve(!1),vt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return z(l).pipe(At(m=>{let v=this.transitions?.getValue();return this.events.next(new js(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?vt:Promise.resolve(m)}),ZF(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ue(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=oe(k({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let v=new Wl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:v,source:S,restoredState:N,extras:R}=l,F=new js(m,this.urlSerializer.serialize(v),S,N);this.events.next(F);let $=nT(this.rootComponentType).snapshot;return this.currentTransition=o=oe(k({},l),{targetSnapshot:$,urlAfterRedirects:v,extras:oe(k({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,z(o)}else{let m="";return this.events.next(new br(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Gl.IgnoredByUrlHandlingStrategy)),l.resolve(!1),vt}}),Ue(l=>{let h=new im(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),X(l=>(this.currentTransition=o=oe(k({},l),{guards:yF(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),AF(this.environmentInjector,l=>this.events.next(l)),Ue(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Xl(this.urlSerializer,l.guardsResult);let h=new sm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),_t(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ct.GuardRejected),!1)),Jg(l=>{if(l.guards.canActivateChecks.length)return z(l).pipe(Ue(h=>{let p=new om(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),At(h=>{let p=!1;return z(h).pipe(JF(this.paramsInheritanceStrategy,this.environmentInjector),Ue({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Ct.NoDataFromResolver)}}))}),Ue(h=>{let p=new am(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Jg(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ue(v=>{p.component=v}),X(()=>{})));for(let v of p.children)m.push(...h(v));return m};return Ko(h(l.targetSnapshot.root)).pipe(cr(null),Cn(1))}),Jg(()=>this.afterPreactivation()),At(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Ce(p).pipe(X(()=>o)):z(o)}),X(l=>{let h=hF(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=oe(k({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Ue(()=>{this.events.next(new Aa)}),mF(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Cn(1),Ue({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qt(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Tf(this.transitionAbortSubject.pipe(Ue(l=>{throw l}))),Qo(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Ct.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ar(l=>{if(u=!0,aT(l))this.events.next(new Vn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),gF(l)?this.events.next(new Bs(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let h=new Sa(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let p=rn(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(p instanceof Ma){let{message:m,cancellationCode:v}=Xl(this.urlSerializer,p);this.events.next(new Vn(o.id,this.urlSerializer.serialize(o.extractedUrl),m,v)),this.events.next(new Bs(p.redirectTo,p.navigationBehaviorOptions))}else{this.events.next(h);let m=r.errorHandler(l);o.resolve(!!m)}}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return vt}))}))}cancelNavigationTransition(r,i,s){let o=new Vn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lL(t){return t!==Ca}var dL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(hL),providedIn:"root"});let t=e;return t})(),Cm=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hL=(()=>{let e=class e extends Cm{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ss(e)))(s||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yT=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:()=>P(fL),providedIn:"root"});let t=e;return t})(),fL=(()=>{let e=class e extends yT{constructor(){super(...arguments),this.location=P(xs),this.urlSerializer=P(ka),this.options=P(Ua,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=P(Am),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Un,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=nT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof js)this.stateMemento=this.createStateMemento();else if(r instanceof br)this.rawUrlTree=i.initialUrl;else if(r instanceof Wl){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Aa?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Vn&&(r.code===Ct.GuardRejected||r.code===Ct.NoDataFromResolver)?this.restoreHistory(i):r instanceof Sa?this.restoreHistory(i,!0):r instanceof qt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Un?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=k(k({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=k(k({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ss(e)))(s||e)}})(),e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ea=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ea||{});function vT(t,e){t.events.pipe(_t(n=>n instanceof qt||n instanceof Vn||n instanceof Sa||n instanceof br),X(n=>n instanceof qt||n instanceof br?Ea.COMPLETE:(n instanceof Vn?n.code===Ct.Redirect||n.code===Ct.SupersededByNewNavigation:!1)?Ea.REDIRECTING:Ea.FAILED),_t(n=>n!==Ea.REDIRECTING),Cn(1)).subscribe(()=>{e()})}function pL(t){throw t}var gL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},un=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=P(Nl),this.stateManager=P(yT),this.options=P(Ua,{optional:!0})||{},this.pendingTasks=P(As),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=P(Rm),this.urlSerializer=P(ka),this.location=P(xs),this.urlHandlingStrategy=P(Am),this._events=new $e,this.errorHandler=this.options.errorHandler||pL,this.navigated=!1,this.routeReuseStrategy=P(dL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=P(Pa,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!P(nd,{optional:!0}),this.eventsSubscription=new Re,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Vn&&i.code!==Ct.Redirect&&i.code!==Ct.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qt)this.navigated=!0;else if(i instanceof Bs){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=k({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lL(s.source)},a);this.scheduleNavigation(u,Ca,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}vL(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ca,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=k({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Tm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":p=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let v=s?s.snapshot:this.routerState.snapshot.root;m=Jb(v)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),m=this.currentUrlTree.root}return Xb(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=_i(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ca,null,i)}navigate(r,i={skipLocationChange:!1}){return yL(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=k({},gL):i===!1?s=k({},mL):s=i,_i(r))return Nb(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Nb(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,v)=>{u=m,l=v});let p=this.pendingTasks.add();return vT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yL(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function vL(t){return!(t instanceof Aa)&&!(t instanceof Bs)}var Ub=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof qt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(_i(r)?this.routerLinkInput=r:this.routerLinkInput=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0"))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:tC(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.routerLinkInput===null?null:_i(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(te(un),te(Tr),Xp("tabindex"),te(xn),te(wt),te(Ln))},e.\u0275dir=je({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&an("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&ha("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Cr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Cr],replaceUrl:[2,"replaceUrl","replaceUrl",Cr],routerLink:"routerLink"},standalone:!0,features:[Dg,Nn]});let t=e;return t})(),i6=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,s,o,a){this.router=r,this.element=i,this.renderer=s,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Me,this.routerEventsSubscription=r.events.subscribe(u=>{u instanceof qt&&this.update()})}ngAfterContentInit(){z(this.links.changes,z(null)).pipe(or()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=Ce(r).pipe(or()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(s=>!!s)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.isActiveChange.emit(r))})}isLinkActive(r){let i=_L(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let o=s.urlTree;return o?r.isActive(o,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)(te(un),te(wt),te(xn),te(Dr),te(Ub,8))},e.\u0275dir=je({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,s,o){if(i&1&&zC(o,Ub,5),i&2){let a;GC(a=WC())&&(s.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Nn]});let t=e;return t})();function _L(t){return!!t.paths}var td=class{};var IL=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(_t(r=>r instanceof qt),Yr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Tl(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Ce(s).pipe(or())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=z(null);let o=s.pipe(Pe(a=>a===null?z(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Ce([o,a]).pipe(or())}else return o})}};e.\u0275fac=function(i){return new(i||e)(G(un),G(Ol),G(It),G(td),G(Sm))},e.\u0275prov=B({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_T=new U(""),wL=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof js?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof qt?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof br&&r.code===Gl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Kl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Kl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){fC()},e.\u0275prov=B({token:e,factory:e.\u0275fac});let t=e;return t})();function s6(t,...e){return nn([{provide:Pa,multi:!0,useValue:t},[],{provide:Tr,useFactory:IT,deps:[un]},{provide:Pl,multi:!0,useFactory:wT},e.map(n=>n.\u0275providers)])}function IT(t){return t.routerState.root}function ja(t,e){return{\u0275kind:t,\u0275providers:e}}function wT(){let t=P(Ke);return e=>{let n=t.get(gi);if(e!==n.components[0])return;let r=t.get(un),i=t.get(ET);t.get(Mm)===1&&r.initialNavigation(),t.get(DT,null,se.Optional)?.setUpPreloading(),t.get(_T,null,se.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ET=new U("",{factory:()=>new $e}),Mm=new U("",{providedIn:"root",factory:()=>1});function EL(){return ja(2,[{provide:Mm,useValue:0},{provide:xl,multi:!0,deps:[Ke],useFactory:e=>{let n=e.get(pb,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(un),s=e.get(ET);vT(i,()=>{r(!0)}),e.get(Rm).afterPreactivation=()=>(r(!0),s.closed?z(void 0):s),i.initialNavigation()}))}}])}function DL(){return ja(3,[{provide:xl,multi:!0,useFactory:()=>{let e=P(un);return()=>{e.setUpLocationChangeListener()}}},{provide:Mm,useValue:2}])}var DT=new U("");function CL(t){return ja(0,[{provide:DT,useExisting:IL},{provide:td,useExisting:t}])}function bL(){return ja(8,[kb,{provide:nd,useExisting:kb}])}function TL(t){let e=[{provide:gT,useValue:aL},{provide:mT,useValue:k({skipNextTransition:!!t?.skipInitialTransition},t)}];return ja(9,e)}var jb=new U("ROUTER_FORROOT_GUARD"),SL=[xs,{provide:ka,useClass:Us},un,La,{provide:Tr,useFactory:IT,deps:[un]},Sm,[]],o6=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[SL,[],{provide:Pa,multi:!0,useValue:r},{provide:jb,useFactory:NL,deps:[[un,new it,new Up]]},{provide:Ua,useValue:i||{}},i?.useHash?RL():ML(),AL(),i?.preloadingStrategy?CL(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?xL(i):[],i?.bindToComponentInputs?bL().\u0275providers:[],i?.enableViewTransitions?TL().\u0275providers:[],PL()]}}static forChild(r){return{ngModule:e,providers:[{provide:Pa,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(G(jb,8))},e.\u0275mod=_r({type:e}),e.\u0275inj=vr({});let t=e;return t})();function AL(){return{provide:_T,useFactory:()=>{let t=P(wb),e=P(ve),n=P(Ua),r=P(Rm),i=P(ka);return n.scrollOffset&&t.setOffset(n.scrollOffset),new wL(i,r,t,e,n)}}}function RL(){return{provide:Ln,useClass:mb}}function ML(){return{provide:Ln,useClass:Ug}}function NL(t){return"guarded"}function xL(t){return[t.initialNavigation==="disabled"?DL().\u0275providers:[],t.initialNavigation==="enabledBlocking"?EL().\u0275providers:[]]}var Bb=new U("");function PL(){return[{provide:Bb,useFactory:wT},{provide:Pl,multi:!0,useExisting:Bb}]}var bT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},OL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},TT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new xm;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},xm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},kL=function(t){let e=bT(t);return TT.encodeByteArray(e,!0)},Ba=function(t){return kL(t).replace(/\./g,"")},Om=function(t){try{return TT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function FL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var LL=()=>FL().__FIREBASE_DEFAULTS__,VL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Om(t[1]);return e&&JSON.parse(e)},sd=()=>{try{return LL()||VL()||UL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},km=t=>{var e,n;return(n=(e=sd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ST=t=>{let e=km(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Fm=()=>{var t;return(t=sd())===null||t===void 0?void 0:t.config},Lm=t=>{var e;return(e=sd())===null||e===void 0?void 0:e[`_${t}`]};var id=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function AT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ba(JSON.stringify(n)),Ba(JSON.stringify(o)),""].join(".")}function qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function jL(){var t;let e=(t=sd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xT(){let t=qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PT(){return!jL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vm(){try{return typeof indexedDB=="object"}catch{return!1}}function OT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var BL="FirebaseError",bt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jn.prototype.create)}},jn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$L(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new bt(i,a,r)}};function $L(t,e){return t.replace(HL,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var HL=/\{\$([^}]+)}/g;function kT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ii(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(CT(s)&&CT(o)){if(!Ii(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function CT(t){return t!==null&&typeof t=="object"}function $a(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function zs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FT(t,e){let n=new Pm(t,e);return n.subscribe.bind(n)}var Pm=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qL(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Nm),i.error===void 0&&(i.error=Nm),i.complete===void 0&&(i.complete=Nm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function qL(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Nm(){}var u6=4*60*60*1e3;function Ze(t){return t&&t._delegate?t._delegate:t}var Ft=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var wi="[DEFAULT]";var Um=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new id;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GL(e))try{this.getOrInitializeService({instanceIdentifier:wi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=wi){return this.instances.has(e)}getOptions(e=wi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:zL(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wi){return this.component?this.component.multipleInstances?e:wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zL(t){return t===wi?void 0:t}function GL(t){return t.instantiationMode==="EAGER"}var od=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Um(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var WL=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),KL={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},QL=le.INFO,YL={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},ZL=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=YL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ar=class{constructor(e){this.name=e,this._logLevel=QL,this._logHandler=ZL,this._userLogHandler=null,WL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var JL=(t,e)=>e.some(n=>t instanceof n),LT,VT;function XL(){return LT||(LT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eV(){return VT||(VT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var UT=new WeakMap,Bm=new WeakMap,jT=new WeakMap,jm=new WeakMap,Hm=new WeakMap;function tV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ln(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&UT.set(n,t)}).catch(()=>{}),Hm.set(e,t),e}function nV(t){if(Bm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Bm.set(t,e)}var $m={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ln(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BT(t){$m=t($m)}function rV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ad(this),e,...n);return jT.set(r,e.sort?e.sort():[e]),ln(r)}:eV().includes(t)?function(...e){return t.apply(ad(this),e),ln(UT.get(this))}:function(...e){return ln(t.apply(ad(this),e))}}function iV(t){return typeof t=="function"?rV(t):(t instanceof IDBTransaction&&nV(t),JL(t,XL())?new Proxy(t,$m):t)}function ln(t){if(t instanceof IDBRequest)return tV(t);if(jm.has(t))return jm.get(t);let e=iV(t);return e!==t&&(jm.set(t,e),Hm.set(e,t)),e}var ad=t=>Hm.get(t);function HT(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=ln(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ln(o.result),u.oldVersion,u.newVersion,ln(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var sV=["get","getKey","getAll","getAllKeys","count"],oV=["put","add","delete","clear"],qm=new Map;function $T(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qm.get(e))return qm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=oV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sV.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return qm.set(e,s),s}BT(t=>oe(k({},t),{get:(e,n,r)=>$T(e,n)||t.get(e,n,r),has:(e,n)=>!!$T(e,n)||t.has(e,n)}));var Gm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(aV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function aV(t){let e=t.getComponent();return e?.type==="VERSION"}var Wm="@firebase/app",qT="0.10.10";var Bn=new Ar("@firebase/app"),cV="@firebase/app-compat",uV="@firebase/analytics-compat",lV="@firebase/analytics",dV="@firebase/app-check-compat",hV="@firebase/app-check",fV="@firebase/auth",pV="@firebase/auth-compat",gV="@firebase/database",mV="@firebase/database-compat",yV="@firebase/functions",vV="@firebase/functions-compat",_V="@firebase/installations",IV="@firebase/installations-compat",wV="@firebase/messaging",EV="@firebase/messaging-compat",DV="@firebase/performance",CV="@firebase/performance-compat",bV="@firebase/remote-config",TV="@firebase/remote-config-compat",SV="@firebase/storage",AV="@firebase/storage-compat",RV="@firebase/firestore",MV="@firebase/vertexai-preview",NV="@firebase/firestore-compat",xV="firebase",PV="10.13.1";var Km="[DEFAULT]",OV={[Wm]:"fire-core",[cV]:"fire-core-compat",[lV]:"fire-analytics",[uV]:"fire-analytics-compat",[hV]:"fire-app-check",[dV]:"fire-app-check-compat",[fV]:"fire-auth",[pV]:"fire-auth-compat",[gV]:"fire-rtdb",[mV]:"fire-rtdb-compat",[yV]:"fire-fn",[vV]:"fire-fn-compat",[_V]:"fire-iid",[IV]:"fire-iid-compat",[wV]:"fire-fcm",[EV]:"fire-fcm-compat",[DV]:"fire-perf",[CV]:"fire-perf-compat",[bV]:"fire-rc",[TV]:"fire-rc-compat",[SV]:"fire-gcs",[AV]:"fire-gcs-compat",[RV]:"fire-fst",[NV]:"fire-fst-compat",[MV]:"fire-vertex","fire-js":"fire-js",[xV]:"fire-js-all"};var Ha=new Map,kV=new Map,Qm=new Map;function zT(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mr(t){let e=t.name;if(Qm.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;Qm.set(e,t);for(let n of Ha.values())zT(n,t);for(let n of kV.values())zT(n,t);return!0}function za(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zt(t){return t.settings!==void 0}var FV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rr=new jn("app","Firebase",FV);var Ym=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rr.create("app-deleted",{appName:this._name})}};var Nr=PV;function Xm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Km,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Rr.create("bad-app-name",{appName:String(i)});if(n||(n=Fm()),!n)throw Rr.create("no-options");let s=Ha.get(i);if(s){if(Ii(n,s.options)&&Ii(r,s.config))return s;throw Rr.create("duplicate-app",{appName:i})}let o=new od(i);for(let u of Qm.values())o.addComponent(u);let a=new Ym(n,r,o);return Ha.set(i,a),a}function Gs(t=Km){let e=Ha.get(t);if(!e&&t===Km&&Fm())return Xm();if(!e)throw Rr.create("no-app",{appName:t});return e}function cd(){return Array.from(Ha.values())}function Be(t,e,n){var r;let i=(r=OV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(a.join(" "));return}Mr(new Ft(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var LV="firebase-heartbeat-database",VV=1,qa="firebase-heartbeat-store",zm=null;function QT(){return zm||(zm=HT(LV,VV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rr.create("idb-open",{originalErrorMessage:t.message})})),zm}function UV(t){return w(this,null,function*(){try{let n=(yield QT()).transaction(qa),r=yield n.objectStore(qa).get(YT(t));return yield n.done,r}catch(e){if(e instanceof bt)Bn.warn(e.message);else{let n=Rr.create("idb-get",{originalErrorMessage:e?.message});Bn.warn(n.message)}}})}function GT(t,e){return w(this,null,function*(){try{let r=(yield QT()).transaction(qa,"readwrite");yield r.objectStore(qa).put(e,YT(t)),yield r.done}catch(n){if(n instanceof bt)Bn.warn(n.message);else{let r=Rr.create("idb-set",{originalErrorMessage:n?.message});Bn.warn(r.message)}}})}function YT(t){return`${t.name}!${t.options.appId}`}var jV=1024,BV=30*24*60*60*1e3,Zm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Jm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=WT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=BV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Bn.warn(r)}})}getHeartbeatsHeader(){return w(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=WT(),{heartbeatsToSend:r,unsentEntries:i}=$V(this._heartbeatsCache.heartbeats),s=Ba(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Bn.warn(n),""}})}};function WT(){return new Date().toISOString().substring(0,10)}function $V(t,e=jV){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),KT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),KT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Jm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return Vm()?OT().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield UV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return GT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function KT(t){return Ba(JSON.stringify({version:2,heartbeats:t})).length}function HV(t){Mr(new Ft("platform-logger",e=>new Gm(e),"PRIVATE")),Mr(new Ft("heartbeat",e=>new Zm(e),"PRIVATE")),Be(Wm,qT,t),Be(Wm,qT,"esm2017"),Be("fire-js","")}HV("");var qV="firebase",zV="10.13.1";Be(qV,zV,"app");var Di=new An("ANGULARFIRE2_VERSION");function ld(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ga=(t,e)=>{let n=e?[e]:cd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ks=class{constructor(){return Ga(GV)}},GV="app-check";function Ws(){}var ud=class{zone;delegate;constructor(e,n=If){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},ey=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ws,{},Ws,Ws)),n.pipe(Ue({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Qs=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ud(Zone.current)),this.insideAngular=n.run(()=>new ud(Zone.current,_f)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(G(ve))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function WV(t){return dd().ngZone.runOutsideAngular(()=>t())}function Ei(t){return dd().ngZone.run(()=>t())}function KV(t){return QV(dd())(t)}function QV(t){return function(n){return n=n.lift(new ey(t.ngZone)),n.pipe(sr(t.outsideAngular),ir(t.insideAngular))}}var YV=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ei(()=>t.apply(void 0,r))},gt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Ei(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ws,{},Ws,Ws))),r[s]=YV(r[s],n));let i=WV(()=>t.apply(this,r));if(!e)if(i instanceof ce){let s=dd();return i.pipe(sr(s.outsideAngular),ir(s.insideAngular))}else return Ei(()=>i);return i instanceof ce?i.pipe(KV):i instanceof Promise?Ei(()=>new Promise((s,o)=>i.then(a=>Ei(()=>s(a)),a=>Ei(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ei(()=>i)};var $n=class{constructor(e){return e}},Ci=class{constructor(){return cd()}};function ZV(t){return t&&t.length===1?t[0]:new $n(Gs())}var ty=new U("angularfire2._apps"),JV={provide:$n,useFactory:ZV,deps:[[new it,ty]]},XV={provide:Ci,deps:[[new it,ty]]};function eU(t){return(e,n)=>{let r=n.get(sn);Be("angularfire",Di.full,"core"),Be("angularfire",Di.full,"app"),Be("angular",ZC.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new $n(i)}}function Q6(t,...e){return nn([JV,XV,{provide:ty,useFactory:eU(t),multi:!0,deps:[ve,Ke,Qs,...e]}])}var Y6=gt(Xm,!0);function f0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var p0=f0,g0=new jn("auth","Firebase",f0());var yd=new Ar("@firebase/auth");function tU(t,...e){yd.logLevel<=le.WARN&&yd.warn(`Auth (${Nr}): ${t}`,...e)}function fd(t,...e){yd.logLevel<=le.ERROR&&yd.error(`Auth (${Nr}): ${t}`,...e)}function hn(t,...e){throw Cy(t,...e)}function bi(t,...e){return Cy(t,...e)}function m0(t,e,n){let r=Object.assign(Object.assign({},p0()),{[e]:n});return new jn("auth","Firebase",r).create(e,{appName:t.name})}function zn(t){return m0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return g0.create(t,...e)}function W(t,e,...n){if(!t)throw Cy(e,...n)}function Hn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw fd(e),new Error(e)}function Pr(t,e){t||Hn(e)}function sy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nU(){return ZT()==="http:"||ZT()==="https:"}function ZT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function rU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nU()||MT()||"connection"in navigator)?navigator.onLine:!0}function iU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ti=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pr(n>e,"Short delay should be less than long delay!"),this.isMobile=RT()||NT()}get(){return rU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function by(t,e){Pr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var vd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oU=new Ti(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function kr(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return y0(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=$a(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),vd.fetch()(v0(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function y0(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sU),e);try{let i=new oy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw hd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw hd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw hd(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw m0(t,h,l);hn(t,h)}}catch(i){if(i instanceof bt)throw i;hn(t,"network-request-failed",{message:String(i)})}})}function ec(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield kr(t,e,n,r,i);return"mfaPendingCredential"in l&&hn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function v0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?by(t.config,i):`${t.config.apiScheme}://${i}`}function aU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var oy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(bi(this.auth,"network-request-failed")),oU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function hd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=bi(t,e,r);return i.customData._tokenResponse=n,i}function JT(t){return t!==void 0&&t.enterprise!==void 0}var ay=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function cU(t,e){return w(this,null,function*(){return kr(t,"GET","/v2/recaptchaConfig",Or(t,e))})}function uU(t,e){return w(this,null,function*(){return kr(t,"POST","/v1/accounts:delete",e)})}function _0(t,e){return w(this,null,function*(){return kr(t,"POST","/v1/accounts:lookup",e)})}function Wa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ty(t,e=!1){return w(this,null,function*(){let n=Ze(t),r=yield n.getIdToken(e),i=Sy(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Wa(ny(i.auth_time)),issuedAtTime:Wa(ny(i.iat)),expirationTime:Wa(ny(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ny(t){return Number(t)*1e3}function Sy(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Om(n);return i?JSON.parse(i):(fd("Failed to decode base64 JWT payload"),null)}catch(i){return fd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function XT(t){let e=Sy(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qa(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof bt&&lU(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function lU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var cy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ya=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wa(this.lastLoginAt),this.creationTime=Wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function _d(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Qa(t,_0(n,{idToken:r}));W(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?I0(s.providerUserInfo):[],a=dU(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ya(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function Ay(t){return w(this,null,function*(){let e=Ze(t);yield _d(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function dU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function I0(t){return t.map(e=>{var{providerId:n}=e,r=wf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hU(t,e){return w(this,null,function*(){let n=yield y0(t,{},()=>w(this,null,function*(){let r=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=v0(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function fU(t,e){return w(this,null,function*(){return kr(t,"POST","/v2/accounts:revokeToken",Or(t,e))})}var Ka=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=XT(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield hU(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Hn("not implemented")}};function xr(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ys=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=wf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ya(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield Qa(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Ty(this,e)}reload(){return Ay(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield _d(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(zt(this.auth.app))return Promise.reject(zn(this.auth));let e=yield this.getIdToken();return yield Qa(this,uU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,F=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:q,emailVerified:ae,isAnonymous:Se,providerData:Z,stsTokenManager:D}=n;W(q&&D,e,"internal-error");let y=Ka.fromJSON(this.name,D);W(typeof q=="string",e,"internal-error"),xr(p,e.name),xr(m,e.name),W(typeof ae=="boolean",e,"internal-error"),W(typeof Se=="boolean",e,"internal-error"),xr(v,e.name),xr(S,e.name),xr(N,e.name),xr(R,e.name),xr(F,e.name),xr($,e.name);let _=new t({uid:q,auth:e,email:m,emailVerified:ae,displayName:p,isAnonymous:Se,photoURL:S,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:F,lastLoginAt:$});return Z&&Array.isArray(Z)&&(_.providerData=Z.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new Ka;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield _d(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?I0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ka;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ya(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var e0=new Map;function qn(t){Pr(t instanceof Function,"Expected a class definition");let e=e0.get(t);return e?(Pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,e0.set(t,e),e)}var pU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),uy=pU;function pd(t,e,n){return`firebase:${t}:${e}:${n}`}var Id=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=pd(this.userKey,i.apiKey,s),this.fullPersistenceKey=pd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ys._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(qn(uy),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||qn(uy),o=pd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Ys._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function t0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T0(e))return"Blackberry";if(S0(e))return"Webos";if(E0(e))return"Safari";if((e.includes("chrome/")||D0(e))&&!e.includes("edge/"))return"Chrome";if(b0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function w0(t=qe()){return/firefox\//i.test(t)}function E0(t=qe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D0(t=qe()){return/crios\//i.test(t)}function C0(t=qe()){return/iemobile/i.test(t)}function b0(t=qe()){return/android/i.test(t)}function T0(t=qe()){return/blackberry/i.test(t)}function S0(t=qe()){return/webos/i.test(t)}function Ry(t=qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gU(t=qe()){var e;return Ry(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mU(){return xT()&&document.documentMode===10}function A0(t=qe()){return Ry(t)||b0(t)||S0(t)||T0(t)||/windows phone/i.test(t)||C0(t)}function R0(t,e=[]){let n;switch(t){case"Browser":n=t0(qe());break;case"Worker":n=`${t0(qe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Nr}/${r}`}var ly=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function yU(n){return w(this,arguments,function*(t,e={}){return kr(t,"GET","/v2/passwordPolicy",Or(t,e))})}var vU=6,dy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var hy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wd(this),this.idTokenSubscription=new wd(this),this.beforeStateQueue=new ly(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Id.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield _0(this,{idToken:e}),r=yield Ys._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(zt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield _d(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=iU()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(zt(this.app))return Promise.reject(zn(this));let n=e?Ze(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return zt(this.app)?Promise.reject(zn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zt(this.app)?Promise.reject(zn(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(qn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield yU(this),n=new dy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield fU(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&qn(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield Id.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=R0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&tU(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Ai(t){return Ze(t)}var wd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=FT(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ad={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _U(t){Ad=t}function M0(t){return Ad.loadJS(t)}function IU(){return Ad.recaptchaEnterpriseScript}function wU(){return Ad.gapiScript}function N0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var EU="recaptcha-enterprise",DU="NO_RECAPTCHA",fy=class{constructor(e){this.type=EU,this.auth=Ai(e)}verify(e="verify",n=!1){return w(this,null,function*(){function r(s){return w(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>w(this,null,function*(){cU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new ay(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;JT(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(DU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&JT(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=IU();u.length!==0&&(u+=a),M0(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function n0(t,e,n,r=!1){return w(this,null,function*(){let i=new fy(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function py(t,e,n,r){return w(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield n0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>w(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield n0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function My(t,e){let n=za(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Ii(s,e??{}))return i;hn(i,"already-initialized")}return n.initialize({options:e})}function CU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(qn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ny(t,e,n){let r=Ai(t);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=x0(e),{host:o,port:a}=bU(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||TU()}function x0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bU(t){let e=x0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:r0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:r0(o)}}}function r0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function TU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Za=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hn("not implemented")}_getIdTokenResponse(e){return Hn("not implemented")}_linkToIdToken(e,n){return Hn("not implemented")}_getReauthenticationResolver(e){return Hn("not implemented")}};function SU(t,e){return w(this,null,function*(){return kr(t,"POST","/v1/accounts:signUp",e)})}function AU(t,e){return w(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithPassword",Or(t,e))})}function RU(t,e){return w(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))})}function MU(t,e){return w(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))})}var Ja=class t extends Za{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return w(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return py(e,n,"signInWithPassword",AU);case"emailLink":return RU(e,{email:this._email,oobCode:this._password});default:hn(e,"internal-error")}})}_linkToIdToken(e,n){return w(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return py(e,r,"signUpPassword",SU);case"emailLink":return MU(e,{idToken:n,email:this._email,oobCode:this._password});default:hn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function ry(t,e){return w(this,null,function*(){return ec(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))})}function NU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xU(t){let e=qs(zs(t)).link,n=e?qs(zs(e)).deep_link_id:null,r=qs(zs(t)).deep_link_id;return(r?qs(zs(r)).link:null)||r||n||e||t}var Ed=class t{constructor(e){var n,r,i,s,o,a;let u=qs(zs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=NU((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=xU(e);try{return new t(n)}catch{return null}}};var P0=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ja._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Ed.parseLink(r);return W(i,"argument-error"),Ja._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Dd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var gy=class extends Dd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function PU(t,e){return w(this,null,function*(){return ec(t,"POST","/v1/accounts:signUp",Or(t,e))})}var Zs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield Ys._fromIdTokenResponse(e,r,i),o=i0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=i0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function i0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var my=class t extends bt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function O0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?my._fromErrorAndOperation(t,s,e,r):s})}function OU(t,e,n=!1){return w(this,null,function*(){let r=yield Qa(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Zs._forOperation(t,"link",r)})}function kU(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(zt(r.app))return Promise.reject(zn(r));let i="reauthenticate";try{let s=yield Qa(t,O0(r,i,e,t),n);W(s.idToken,r,"internal-error");let o=Sy(s.idToken);W(o,r,"internal-error");let{sub:a}=o;return W(t.uid===a,r,"user-mismatch"),Zs._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&hn(r,"user-mismatch"),s}})}function k0(t,e,n=!1){return w(this,null,function*(){if(zt(t.app))return Promise.reject(zn(t));let r="signIn",i=yield O0(t,r,e),s=yield Zs._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function xy(t,e){return w(this,null,function*(){return k0(Ai(t),e)})}function F0(t){return w(this,null,function*(){let e=Ai(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Py(t,e,n){return w(this,null,function*(){if(zt(t.app))return Promise.reject(zn(t));let r=Ai(t),o=yield py(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PU).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&F0(t),u}),a=yield Zs._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function Oy(t,e,n){return zt(t.app)?Promise.reject(zn(t)):xy(Ze(t),P0.credential(e,n)).catch(r=>w(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&F0(t),r}))}function ky(t,e,n,r){return Ze(t).onIdTokenChanged(e,n,r)}function Fy(t,e,n){return Ze(t).beforeAuthStateChanged(e,n)}function Ly(t){return Ze(t).signOut()}var Cd="__sak";var bd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var FU=1e3,LU=10,VU=(()=>{class t extends bd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);mU()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,LU):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},FU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield nr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield nr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield nr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),L0=VU;var UU=(()=>{class t extends bd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Vy=UU;function jU(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var BU=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield jU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function V0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var yy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=V0("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function dn(){return window}function $U(t){dn().location.href=t}function U0(){return typeof dn().WorkerGlobalScope<"u"&&typeof dn().importScripts=="function"}function HU(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function qU(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zU(){return U0()?self:null}var j0="firebaseLocalStorageDb",GU=1,Td="firebaseLocalStorage",B0="fbase_key",Si=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Rd(t,e){return t.transaction([Td],e?"readwrite":"readonly").objectStore(Td)}function WU(){let t=indexedDB.deleteDatabase(j0);return new Si(t).toPromise()}function vy(){let t=indexedDB.open(j0,GU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Td,{keyPath:B0})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Td)?e(r):(r.close(),yield WU(),e(yield vy()))}))})}function s0(t,e,n){return w(this,null,function*(){let r=Rd(t,!0).put({[B0]:e,value:n});return new Si(r).toPromise()})}function KU(t,e){return w(this,null,function*(){let n=Rd(t,!1).get(e),r=yield new Si(n).toPromise();return r===void 0?null:r.value})}function o0(t,e){let n=Rd(t,!0).delete(e);return new Si(n).toPromise()}var QU=800,YU=3,ZU=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield vy(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>YU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return U0()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=BU._getInstance(zU()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield HU(),!this.activeServiceWorker)return;this.sender=new yy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||qU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield vy();return yield s0(n,Cd,"1"),yield o0(n,Cd),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>s0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>KU(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>o0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=Rd(s,!1).getAll();return new Si(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),QU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),$0=ZU;var i8=N0("rcb"),s8=new Ti(3e4,6e4);function JU(t,e){return e?qn(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Xa=class extends Za{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ry(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ry(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ry(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function XU(t){return k0(t.auth,new Xa(t),t.bypassAuthState)}function ej(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),kU(n,new Xa(t),t.bypassAuthState)}function tj(t){return w(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),OU(n,new Xa(t),t.bypassAuthState)})}var _y=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XU;case"linkViaPopup":case"linkViaRedirect":return tj;case"reauthViaPopup":case"reauthViaRedirect":return ej;default:hn(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var o8=new Ti(2e3,1e4);var nj="pendingRedirect",gd=new Map,Iy=class t extends _y{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=gd.get(this.auth._key());if(!e){try{let r=(yield rj(this.resolver,this.auth))?yield nr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gd.set(this.auth._key(),e)}return this.bypassAuthState||gd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return nr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,nr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function rj(t,e){return w(this,null,function*(){let n=oj(e),r=sj(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function ij(t,e){gd.set(t._key(),e)}function sj(t){return qn(t._redirectPersistence)}function oj(t){return pd(nj,t.config.apiKey,t.name)}function aj(t,e,n=!1){return w(this,null,function*(){if(zt(t.app))return Promise.reject(zn(t));let r=Ai(t),i=JU(r,e),o=yield new Iy(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var cj=10*60*1e3,wy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!H0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(bi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cj&&this.cachedEventUids.clear(),this.cachedEventUids.has(a0(e))}saveEventToCache(e){this.cachedEventUids.add(a0(e)),this.lastProcessedEventTime=Date.now()}};function a0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function H0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function uj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H0(t);default:return!1}}function lj(n){return w(this,arguments,function*(t,e={}){return kr(t,"GET","/v1/projects",e)})}var dj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hj=/^https?/;function fj(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield lj(t);for(let n of e)try{if(pj(n))return}catch{}hn(t,"unauthorized-domain")})}function pj(t){let e=sy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!hj.test(n))return!1;if(dj.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var gj=new Ti(3e4,6e4);function c0(){let t=dn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mj(t){return new Promise((e,n)=>{var r,i,s;function o(){c0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c0(),n(bi(t,"network-request-failed"))},timeout:gj.get()})}if(!((i=(r=dn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=dn().gapi)===null||s===void 0)&&s.load)o();else{let a=N0("iframefcb");return dn()[a]=()=>{gapi.load?o():n(bi(t,"network-request-failed"))},M0(`${wU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw md=null,e})}var md=null;function yj(t){return md=md||mj(t),md}var vj=new Ti(5e3,15e3),_j="__/auth/iframe",Ij="emulator/auth/iframe",wj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ej=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dj(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?by(e,Ij):`https://${t.config.authDomain}/${_j}`,r={apiKey:e.apiKey,appName:t.name,v:Nr},i=Ej.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${$a(r).slice(1)}`}function Cj(t){return w(this,null,function*(){let e=yield yj(t),n=dn().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:Dj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wj,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=bi(t,"network-request-failed"),a=dn().setTimeout(()=>{s(o)},vj.get());function u(){dn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var bj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tj=500,Sj=600,Aj="_blank",Rj="http://localhost",Sd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Mj(t,e,n,r=Tj,i=Sj){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},bj),{width:r.toString(),height:i.toString(),top:s,left:o}),l=qe().toLowerCase();n&&(a=D0(l)?Aj:n),w0(l)&&(e=e||Rj,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,S])=>`${m}${v}=${S},`,"");if(gU(l)&&a!=="_self")return Nj(e||"",a),new Sd(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new Sd(p)}function Nj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var xj="__/auth/handler",Pj="emulator/auth/handler",Oj=encodeURIComponent("fac");function u0(t,e,n,r,i,s){return w(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Nr,eventId:i};if(e instanceof Dd){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof gy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${Oj}=${encodeURIComponent(u)}`:"";return`${kj(t)}?${$a(a).slice(1)}${l}`})}function kj({config:t}){return t.emulator?by(t,Pj):`https://${t.authDomain}/${xj}`}var iy="webStorageSupport",Ey=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vy,this._completeRedirectFn=aj,this._overrideRedirectResult=ij}_openPopup(e,n,r,i){return w(this,null,function*(){var s;Pr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield u0(e,n,r,sy(),i);return Mj(e,o,V0())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield u0(e,n,r,sy(),i);return $U(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Pr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield Cj(e),r=new wy(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(iy,{type:iy},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[iy];o!==void 0&&n(!!o),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return A0()||E0()||Ry()}},q0=Ey;var l0="@firebase/auth",d0="1.7.8";var Dy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Fj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lj(t){Mr(new Ft("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R0(t)},l=new hy(r,i,s,u);return CU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mr(new Ft("auth-internal",e=>{let n=Ai(e.getProvider("auth").getImmediate());return(r=>new Dy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Be(l0,d0,Fj(t)),Be(l0,d0,"esm2017")}var Vj=5*60,Uj=Lm("authIdTokenMaxAge")||Vj,h0=null,jj=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Uj)return;let i=n?.token;h0!==i&&(h0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Uy(t=Gs()){let e=za(t,"auth");if(e.isInitialized())return e.getImmediate();let n=My(t,{popupRedirectResolver:q0,persistence:[$0,L0,Vy]}),r=Lm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=jj(s.toString());Fy(n,o,()=>o(n.currentUser)),ky(n,a=>o(a))}}let i=km("auth");return i&&Ny(n,`http://${i}`),n}function Bj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_U({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=bi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Bj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lj("Browser");var z0="auth",Ri=class{constructor(e){return e}},tc=class{constructor(){return Ga(z0)}};var jy=new U("angularfire2.auth-instances");function N2(t,e){let n=ld(z0,t,e);return n&&new Ri(n)}function x2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ri(r)}}var P2={provide:tc,deps:[[new it,jy]]},O2={provide:Ri,useFactory:N2,deps:[[new it,jy],$n]};function H8(t,...e){return Be("angularfire",Di.full,"auth"),nn([O2,P2,{provide:jy,useFactory:x2(t),multi:!0,deps:[ve,Ke,Qs,Ci,[new it,Ks],...e]}])}var q8=gt(Py,!0);var z8=gt(Uy,!0);var G8=gt(Oy,!0);var W8=gt(Ly,!0);var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W0={};var Fr,By;(function(){var t;function e(D,y){function _(){}_.prototype=y.prototype,D.D=y.prototype,D.prototype=new _,D.prototype.constructor=D,D.C=function(E,C,T){for(var I=Array(arguments.length-2),_n=2;_n<arguments.length;_n++)I[_n-2]=arguments[_n];return y.prototype[C].apply(E,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)E[C]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(C=0;16>C;++C)E[C]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=D.g[0],_=D.g[1],C=D.g[2];var T=D.g[3],I=y+(T^_&(C^T))+E[0]+3614090360&4294967295;y=_+(I<<7&4294967295|I>>>25),I=T+(C^y&(_^C))+E[1]+3905402710&4294967295,T=y+(I<<12&4294967295|I>>>20),I=C+(_^T&(y^_))+E[2]+606105819&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(y^C&(T^y))+E[3]+3250441966&4294967295,_=C+(I<<22&4294967295|I>>>10),I=y+(T^_&(C^T))+E[4]+4118548399&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(C^y&(_^C))+E[5]+1200080426&4294967295,T=y+(I<<12&4294967295|I>>>20),I=C+(_^T&(y^_))+E[6]+2821735955&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(y^C&(T^y))+E[7]+4249261313&4294967295,_=C+(I<<22&4294967295|I>>>10),I=y+(T^_&(C^T))+E[8]+1770035416&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(C^y&(_^C))+E[9]+2336552879&4294967295,T=y+(I<<12&4294967295|I>>>20),I=C+(_^T&(y^_))+E[10]+4294925233&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(y^C&(T^y))+E[11]+2304563134&4294967295,_=C+(I<<22&4294967295|I>>>10),I=y+(T^_&(C^T))+E[12]+1804603682&4294967295,y=_+(I<<7&4294967295|I>>>25),I=T+(C^y&(_^C))+E[13]+4254626195&4294967295,T=y+(I<<12&4294967295|I>>>20),I=C+(_^T&(y^_))+E[14]+2792965006&4294967295,C=T+(I<<17&4294967295|I>>>15),I=_+(y^C&(T^y))+E[15]+1236535329&4294967295,_=C+(I<<22&4294967295|I>>>10),I=y+(C^T&(_^C))+E[1]+4129170786&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(y^_))+E[6]+3225465664&4294967295,T=y+(I<<9&4294967295|I>>>23),I=C+(y^_&(T^y))+E[11]+643717713&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(C^T))+E[0]+3921069994&4294967295,_=C+(I<<20&4294967295|I>>>12),I=y+(C^T&(_^C))+E[5]+3593408605&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(y^_))+E[10]+38016083&4294967295,T=y+(I<<9&4294967295|I>>>23),I=C+(y^_&(T^y))+E[15]+3634488961&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(C^T))+E[4]+3889429448&4294967295,_=C+(I<<20&4294967295|I>>>12),I=y+(C^T&(_^C))+E[9]+568446438&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(y^_))+E[14]+3275163606&4294967295,T=y+(I<<9&4294967295|I>>>23),I=C+(y^_&(T^y))+E[3]+4107603335&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(C^T))+E[8]+1163531501&4294967295,_=C+(I<<20&4294967295|I>>>12),I=y+(C^T&(_^C))+E[13]+2850285829&4294967295,y=_+(I<<5&4294967295|I>>>27),I=T+(_^C&(y^_))+E[2]+4243563512&4294967295,T=y+(I<<9&4294967295|I>>>23),I=C+(y^_&(T^y))+E[7]+1735328473&4294967295,C=T+(I<<14&4294967295|I>>>18),I=_+(T^y&(C^T))+E[12]+2368359562&4294967295,_=C+(I<<20&4294967295|I>>>12),I=y+(_^C^T)+E[5]+4294588738&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^C)+E[8]+2272392833&4294967295,T=y+(I<<11&4294967295|I>>>21),I=C+(T^y^_)+E[11]+1839030562&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^y)+E[14]+4259657740&4294967295,_=C+(I<<23&4294967295|I>>>9),I=y+(_^C^T)+E[1]+2763975236&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^C)+E[4]+1272893353&4294967295,T=y+(I<<11&4294967295|I>>>21),I=C+(T^y^_)+E[7]+4139469664&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^y)+E[10]+3200236656&4294967295,_=C+(I<<23&4294967295|I>>>9),I=y+(_^C^T)+E[13]+681279174&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^C)+E[0]+3936430074&4294967295,T=y+(I<<11&4294967295|I>>>21),I=C+(T^y^_)+E[3]+3572445317&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^y)+E[6]+76029189&4294967295,_=C+(I<<23&4294967295|I>>>9),I=y+(_^C^T)+E[9]+3654602809&4294967295,y=_+(I<<4&4294967295|I>>>28),I=T+(y^_^C)+E[12]+3873151461&4294967295,T=y+(I<<11&4294967295|I>>>21),I=C+(T^y^_)+E[15]+530742520&4294967295,C=T+(I<<16&4294967295|I>>>16),I=_+(C^T^y)+E[2]+3299628645&4294967295,_=C+(I<<23&4294967295|I>>>9),I=y+(C^(_|~T))+E[0]+4096336452&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~C))+E[7]+1126891415&4294967295,T=y+(I<<10&4294967295|I>>>22),I=C+(y^(T|~_))+E[14]+2878612391&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~y))+E[5]+4237533241&4294967295,_=C+(I<<21&4294967295|I>>>11),I=y+(C^(_|~T))+E[12]+1700485571&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~C))+E[3]+2399980690&4294967295,T=y+(I<<10&4294967295|I>>>22),I=C+(y^(T|~_))+E[10]+4293915773&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~y))+E[1]+2240044497&4294967295,_=C+(I<<21&4294967295|I>>>11),I=y+(C^(_|~T))+E[8]+1873313359&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~C))+E[15]+4264355552&4294967295,T=y+(I<<10&4294967295|I>>>22),I=C+(y^(T|~_))+E[6]+2734768916&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~y))+E[13]+1309151649&4294967295,_=C+(I<<21&4294967295|I>>>11),I=y+(C^(_|~T))+E[4]+4149444226&4294967295,y=_+(I<<6&4294967295|I>>>26),I=T+(_^(y|~C))+E[11]+3174756917&4294967295,T=y+(I<<10&4294967295|I>>>22),I=C+(y^(T|~_))+E[2]+718787259&4294967295,C=T+(I<<15&4294967295|I>>>17),I=_+(T^(C|~y))+E[9]+3951481745&4294967295,D.g[0]=D.g[0]+y&4294967295,D.g[1]=D.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+C&4294967295,D.g[3]=D.g[3]+T&4294967295}r.prototype.u=function(D,y){y===void 0&&(y=D.length);for(var _=y-this.blockSize,E=this.B,C=this.h,T=0;T<y;){if(C==0)for(;T<=_;)i(this,D,T),T+=this.blockSize;if(typeof D=="string"){for(;T<y;)if(E[C++]=D.charCodeAt(T++),C==this.blockSize){i(this,E),C=0;break}}else for(;T<y;)if(E[C++]=D[T++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var y=1;y<D.length-8;++y)D[y]=0;var _=8*this.o;for(y=D.length-8;y<D.length;++y)D[y]=_&255,_/=256;for(this.u(D),D=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)D[_++]=this.g[y]>>>E&255;return D};function s(D,y){var _=a;return Object.prototype.hasOwnProperty.call(_,D)?_[D]:_[D]=y(D)}function o(D,y){this.h=y;for(var _=[],E=!0,C=D.length-1;0<=C;C--){var T=D[C]|0;E&&T==y||(_[C]=T,E=!1)}this.g=_}var a={};function u(D){return-128<=D&&128>D?s(D,function(y){return new o([y|0],0>y?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return R(l(-D));for(var y=[],_=1,E=0;D>=_;E++)y[E]=D/_|0,_*=4294967296;return new o(y,0)}function h(D,y){if(D.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(D.charAt(0)=="-")return R(h(D.substring(1),y));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,C=0;C<D.length;C+=8){var T=Math.min(8,D.length-C),I=parseInt(D.substring(C,C+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(I))):(E=E.j(_),E=E.add(l(I)))}return E}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var D=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);D+=(0<=E?E:4294967296+E)*y,y*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(S(this))return"0";if(N(this))return"-"+R(this).toString(D);for(var y=l(Math.pow(D,6)),_=this,E="";;){var C=ae(_,y).g;_=F(_,C.j(y));var T=((0<_.g.length?_.g[0]:_.h)>>>0).toString(D);if(_=C,S(_))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function S(D){if(D.h!=0)return!1;for(var y=0;y<D.g.length;y++)if(D.g[y]!=0)return!1;return!0}function N(D){return D.h==-1}t.l=function(D){return D=F(this,D),N(D)?-1:S(D)?0:1};function R(D){for(var y=D.g.length,_=[],E=0;E<y;E++)_[E]=~D.g[E];return new o(_,~D.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0,C=0;C<=y;C++){var T=E+(this.i(C)&65535)+(D.i(C)&65535),I=(T>>>16)+(this.i(C)>>>16)+(D.i(C)>>>16);E=I>>>16,T&=65535,I&=65535,_[C]=I<<16|T}return new o(_,_[_.length-1]&-2147483648?-1:0)};function F(D,y){return D.add(R(y))}t.j=function(D){if(S(this)||S(D))return p;if(N(this))return N(D)?R(this).j(R(D)):R(R(this).j(D));if(N(D))return R(this.j(R(D)));if(0>this.l(v)&&0>D.l(v))return l(this.m()*D.m());for(var y=this.g.length+D.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<D.g.length;C++){var T=this.i(E)>>>16,I=this.i(E)&65535,_n=D.i(C)>>>16,bo=D.i(C)&65535;_[2*E+2*C]+=I*bo,$(_,2*E+2*C),_[2*E+2*C+1]+=T*bo,$(_,2*E+2*C+1),_[2*E+2*C+1]+=I*_n,$(_,2*E+2*C+1),_[2*E+2*C+2]+=T*_n,$(_,2*E+2*C+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function $(D,y){for(;(D[y]&65535)!=D[y];)D[y+1]+=D[y]>>>16,D[y]&=65535,y++}function q(D,y){this.g=D,this.h=y}function ae(D,y){if(S(y))throw Error("division by zero");if(S(D))return new q(p,p);if(N(D))return y=ae(R(D),y),new q(R(y.g),R(y.h));if(N(y))return y=ae(D,R(y)),new q(R(y.g),y.h);if(30<D.g.length){if(N(D)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(D);)_=Se(_),E=Se(E);var C=Z(_,1),T=Z(E,1);for(E=Z(E,2),_=Z(_,2);!S(E);){var I=T.add(E);0>=I.l(D)&&(C=C.add(_),T=I),E=Z(E,1),_=Z(_,1)}return y=F(D,C.j(y)),new q(C,y)}for(C=p;0<=D.l(y);){for(_=Math.max(1,Math.floor(D.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(_),I=T.j(y);N(I)||0<I.l(D);)_-=E,T=l(_),I=T.j(y);S(T)&&(T=m),C=C.add(T),D=F(D,I)}return new q(C,D)}t.A=function(D){return ae(this,D).h},t.and=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&D.i(E);return new o(_,this.h&D.h)},t.or=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|D.i(E);return new o(_,this.h|D.h)},t.xor=function(D){for(var y=Math.max(this.g.length,D.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^D.i(E);return new o(_,this.h^D.h)};function Se(D){for(var y=D.g.length+1,_=[],E=0;E<y;E++)_[E]=D.i(E)<<1|D.i(E-1)>>>31;return new o(_,D.h)}function Z(D,y){var _=y>>5;y%=32;for(var E=D.g.length-_,C=[],T=0;T<E;T++)C[T]=0<y?D.i(T+_)>>>y|D.i(T+_+1)<<32-y:D.i(T+_);return new o(C,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,By=W0.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Fr=W0.Integer=o}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gn={};var $y,Hy,Js,qy,nc,Nd,zy,Gy,Wy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var O=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)O[Ie-2]=arguments[Ie];return d.prototype[b].apply(g,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let O=0;O<A;O++)c[b+O]=g[O]}else c.push(g)}}class F{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function q(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ae(c){return ae[" "](c),c}ae[" "]=function(){};var Se=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function Z(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function C(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function I(){var c=Nh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class _n{constructor(){this.h=this.g=null}add(d,f){let g=bo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var bo=new F(()=>new wR,c=>c.reset());class wR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let To,So=!1,Nh=new _n,lI=()=>{let c=a.Promise.resolve(void 0);To=()=>{c.then(ER)}};var ER=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(f){T(f)}var d=bo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}So=!1};function Jn(){this.s=this.s,this.C=this.C}Jn.prototype.s=!1,Jn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Jn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xe(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Xe.prototype.h=function(){this.defaultPrevented=!0};var DR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ao(c,d){if(Xe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Se){e:{try{ae(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:CR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ao.aa.h.call(this)}}S(Ao,Xe);var CR={2:"touch",3:"pen",4:"mouse"};Ao.prototype.h=function(){Ao.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ro="closure_listenable_"+(1e6*Math.random()|0),bR=0;function TR(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++bR,this.da=this.fa=!1}function xc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pc(c){this.src=c,this.g={},this.h=0}Pc.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=Ph(c,d,g,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new TR(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function xh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(xc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Ph(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var Oh="closure_lm_"+(1e6*Math.random()|0),kh={};function dI(c,d,f,g,b){if(g&&g.once)return fI(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)dI(c,d[A],f,g,b);return null}return f=Uh(f),c&&c[Ro]?c.K(d,f,l(g)?!!g.capture:!!g,b):hI(c,d,f,!1,g,b)}function hI(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,Ie=Lh(c);if(Ie||(c[Oh]=Ie=new Pc(c)),f=Ie.add(d,f,g,O,A),f.proxy)return f;if(g=SR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)DR||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(gI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function SR(){function c(f){return d.call(c.src,c.listener,f)}let d=AR;return c}function fI(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)fI(c,d[A],f,g,b);return null}return f=Uh(f),c&&c[Ro]?c.L(d,f,l(g)?!!g.capture:!!g,b):hI(c,d,f,!0,g,b)}function pI(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)pI(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=Uh(f),c&&c[Ro]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Ph(A,f,g,b),-1<f&&(xc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Lh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Ph(d,f,g,b)),(f=-1<c?d[c]:null)&&Fh(f))}function Fh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ro])xh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(gI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Lh(d))?(xh(f,c),f.h==0&&(f.src=null,d[Oh]=null)):xc(c)}}}function gI(c){return c in kh?kh[c]:kh[c]="on"+c}function AR(c,d){if(c.da)c=!0;else{d=new Ao(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Fh(c),c=f.call(g,d)}return c}function Lh(c){return c=c[Oh],c instanceof Pc?c:null}var Vh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uh(c){return typeof c=="function"?c:(c[Vh]||(c[Vh]=function(d){return c.handleEvent(d)}),c[Vh])}function et(){Jn.call(this),this.i=new Pc(this),this.M=this,this.F=null}S(et,Jn),et.prototype[Ro]=!0,et.prototype.removeEventListener=function(c,d,f,g){pI(this,c,d,f,g)};function ct(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Xe(d,c);else if(d instanceof Xe)d.target=d.target||c;else{var b=d;d=new Xe(g,c),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];b=Oc(O,g,!0,d)&&b}if(O=d.g=c,b=Oc(O,g,!0,d)&&b,b=Oc(O,g,!1,d)&&b,f)for(A=0;A<f.length;A++)O=d.g=f[A],b=Oc(O,g,!1,d)&&b}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)xc(f[g]);delete c.g[d],c.h--}}this.F=null},et.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},et.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Oc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ie=O.listener,Ge=O.ha||O.src;O.fa&&xh(c.i,O),b=Ie.call(Ge,g)!==!1&&b}}return b&&!g.defaultPrevented}function mI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function yI(c){c.g=mI(()=>{c.g=null,c.i&&(c.i=!1,yI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class RR extends Jn{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:yI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mo(c){Jn.call(this),this.h=c,this.g={}}S(Mo,Jn);var vI=[];function _I(c){Z(c.g,function(d,f){this.g.hasOwnProperty(f)&&Fh(d)},c),c.g={}}Mo.prototype.N=function(){Mo.aa.N.call(this),_I(this)},Mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jh=a.JSON.stringify,MR=a.JSON.parse,NR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Bh(){}Bh.prototype.h=null;function II(c){return c.h||(c.h=c.i())}function wI(){}var No={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $h(){Xe.call(this,"d")}S($h,Xe);function Hh(){Xe.call(this,"c")}S(Hh,Xe);var $r={},EI=null;function kc(){return EI=EI||new et}$r.La="serverreachability";function DI(c){Xe.call(this,$r.La,c)}S(DI,Xe);function xo(c){let d=kc();ct(d,new DI(d))}$r.STAT_EVENT="statevent";function CI(c,d){Xe.call(this,$r.STAT_EVENT,c),this.stat=d}S(CI,Xe);function ut(c){let d=kc();ct(d,new CI(d,c))}$r.Ma="timingevent";function bI(c,d){Xe.call(this,$r.Ma,c),this.size=d}S(bI,Xe);function Po(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Oo(){this.g=!0}Oo.prototype.xa=function(){this.g=!1};function xR(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var O="",Ie=A.split("&"),Ge=0;Ge<Ie.length;Ge++){var ge=Ie[Ge].split("=");if(1<ge.length){var tt=ge[0];ge=ge[1];var nt=tt.split("_");O=2<=nt.length&&nt[1]=="type"?O+(tt+"="+ge+"&"):O+(tt+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function PR(c,d,f,g,b,A,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+O})}function qi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+kR(c,f)+(g?" "+g:"")})}function OR(c,d){c.info(function(){return"TIMEOUT: "+d})}Oo.prototype.info=function(){};function kR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return jh(f)}catch{return d}}var Fc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},TI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qh;function Lc(){}S(Lc,Bh),Lc.prototype.g=function(){return new XMLHttpRequest},Lc.prototype.i=function(){return{}},qh=new Lc;function Xn(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Mo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new SI}function SI(){this.i=null,this.g="",this.h=!1}var AI={},zh={};function Gh(c,d,f){c.L=1,c.v=Bc(In(d)),c.m=f,c.P=!0,RI(c,null)}function RI(c,d){c.F=Date.now(),Vc(c),c.A=In(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),HI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new SI,c.g=aw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new RR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(vI[0]=b.toString()),b=vI);for(var A=0;A<b.length;A++){var O=dI(f,b[A],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),xo(),xR(c.i,c.u,c.A,c.l,c.R,c.m)}Xn.prototype.ca=function(c){c=c.target;let d=this.M;d&&wn(c)==3?d.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{let nt=wn(this.g);var d=this.g.Ba();let Wi=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||YI(this.g)))){this.J||nt!=4||d==7||(d==8||0>=Wi?xo(3):xo(2)),Wh(this);var f=this.g.Z();this.X=f;t:if(MI(this)){var g=YI(this.g);c="";var b=g.length,A=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),ko(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,PR(this.i,this.u,this.A,this.l,this.R,nt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,Ge=this.g;if((Ie=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ie)){var ge=Ie;break t}}ge=null}if(f=ge)qi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kh(this,f);else{this.o=!1,this.s=3,ut(12),Hr(this),ko(this);break e}}if(this.P){f=!0;let Lt;for(;!this.J&&this.C<O.length;)if(Lt=FR(this,O),Lt==zh){nt==4&&(this.s=4,ut(14),f=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==AI){this.s=4,ut(15),qi(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else qi(this.i,this.l,Lt,null),Kh(this,Lt);if(MI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||O.length!=0||this.h.h||(this.s=1,ut(16),f=!1),this.o=this.o&&f,!f)qi(this.i,this.l,O,"[Invalid Chunked Response]"),Hr(this),ko(this);else if(0<O.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),ef(tt),tt.M=!0,ut(11))}}else qi(this.i,this.l,O,null),Kh(this,O);nt==4&&Hr(this),this.o&&!this.J&&(nt==4?rw(this.j,this):(this.o=!1,Vc(this)))}else XR(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Hr(this),ko(this)}}}catch{}finally{}};function MI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function FR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?zh:(f=Number(d.substring(f,g)),isNaN(f)?AI:(g+=1,g+f>d.length?zh:(d=d.slice(g,g+f),c.C=g+f,d)))}Xn.prototype.cancel=function(){this.J=!0,Hr(this)};function Vc(c){c.S=Date.now()+c.I,NI(c,c.I)}function NI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Po(m(c.ba,c),d)}function Wh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Xn.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(OR(this.i,this.A),this.L!=2&&(xo(),ut(17)),Hr(this),this.s=2,ko(this)):NI(this,this.S-c)};function ko(c){c.j.G==0||c.J||rw(c.j,c)}function Hr(c){Wh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,_I(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Kh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Qh(f.h,c))){if(!c.K&&Qh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Gc(f),qc(f);else break e;Xh(f),ut(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=Po(m(f.Za,f),6e3));if(1>=OI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else zr(f,11)}else if((c.K||f.g==c)&&Gc(f),!$(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let ge=b[d];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];let tt=ge[3];tt!=null&&(f.la=tt,f.j.info("VER="+f.la));let nt=ge[4];nt!=null&&(f.Aa=nt,f.j.info("SVER="+f.Aa));let Wi=ge[5];Wi!=null&&typeof Wi=="number"&&0<Wi&&(g=1.5*Wi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Lt=c.g;if(Lt){let Kc=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kc){var A=g.h;A.g||Kc.indexOf("spdy")==-1&&Kc.indexOf("quic")==-1&&Kc.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Yh(A,A.h),A.h=null))}if(g.D){let tf=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;tf&&(g.ya=tf,De(g.I,g.D,tf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=ow(g,g.J?g.ia:null,g.W),O.K){kI(g.h,O);var Ie=O,Ge=g.L;Ge&&(Ie.I=Ge),Ie.B&&(Wh(Ie),Vc(Ie)),g.g=O}else tw(g);0<f.i.length&&zc(f)}else ge[0]!="stop"&&ge[0]!="close"||zr(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?zr(f,7):Jh(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}xo(4)}catch{}}var LR=class{constructor(c,d){this.g=c,this.map=d}};function xI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function PI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function OI(c){return c.h?1:c.g?c.g.size:0}function Qh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Yh(c,d){c.g?c.g.add(d):c.h=d}function kI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}xI.prototype.cancel=function(){if(this.i=FI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function FI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function VR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function UR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function LI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=UR(c),g=VR(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var VI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function qr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof qr){this.h=c.h,Uc(this,c.j),this.o=c.o,this.g=c.g,jc(this,c.s),this.l=c.l;var d=c.i,f=new Vo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),UI(this,f),this.m=c.m}else c&&(d=String(c).match(VI))?(this.h=!1,Uc(this,d[1]||"",!0),this.o=Fo(d[2]||""),this.g=Fo(d[3]||"",!0),jc(this,d[4]),this.l=Fo(d[5]||"",!0),UI(this,d[6]||"",!0),this.m=Fo(d[7]||"")):(this.h=!1,this.i=new Vo(null,this.h))}qr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Lo(d,jI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Lo(d,jI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Lo(f,f.charAt(0)=="/"?HR:$R,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Lo(f,zR)),c.join("")};function In(c){return new qr(c)}function Uc(c,d,f){c.j=f?Fo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function jc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function UI(c,d,f){d instanceof Vo?(c.i=d,GR(c.i,c.h)):(f||(d=Lo(d,qR)),c.i=new Vo(d,c.h))}function De(c,d,f){c.i.set(d,f)}function Bc(c){return De(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Lo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,BR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function BR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jI=/[#\/\?@]/g,$R=/[#\?:]/g,HR=/[#\?]/g,qR=/[#\?@]/g,zR=/#/g;function Vo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function er(c){c.g||(c.g=new Map,c.h=0,c.i&&jR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Vo.prototype,t.add=function(c,d){er(this),this.i=null,c=zi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function BI(c,d){er(c),d=zi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function $I(c,d){return er(c),d=zi(c,d),c.g.has(d)}t.forEach=function(c,d){er(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){er(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){er(this);let d=[];if(typeof c=="string")$I(this,c)&&(d=d.concat(this.g.get(zi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return er(this),this.i=null,c=zi(this,c),$I(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function HI(c,d,f){BI(c,d),0<f.length&&(c.i=null,c.g.set(zi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var b=A;O[g]!==""&&(b+="="+encodeURIComponent(String(O[g]))),c.push(b)}}return this.i=c.join("&")};function zi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function GR(c,d){d&&!c.j&&(er(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(BI(this,g),HI(this,b,f))},c)),c.j=d}function WR(c,d){let f=new Oo;if(a.Image){let g=new Image;g.onload=v(tr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(tr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(tr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(tr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function KR(c,d){let f=new Oo,g=new AbortController,b=setTimeout(()=>{g.abort(),tr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?tr(f,"TestPingServer: ok",!0,d):tr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),tr(f,"TestPingServer: error",!1,d)})}function tr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function QR(){this.g=new NR}function YR(c,d,f){let g=f||"";try{LI(c,function(b,A){let O=b;l(b)&&(O=jh(b)),d.push(g+A+"="+encodeURIComponent(O))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Uo(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Uo,Bh),Uo.prototype.g=function(){return new $c(this.l,this.j)},Uo.prototype.i=function(c){return function(){return c}}({});function $c(c,d){et.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S($c,et),t=$c.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Bo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function qI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?jo(this):Bo(this),this.readyState==3&&qI(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,jo(this))},t.Qa=function(c){this.g&&(this.response=c,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Bo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Bo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty($c.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function zI(c){let d="";return Z(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Zh(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=zI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):De(c,d,f))}function Ae(c){et.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ae,et);var ZR=/^https?$/i,JR=["POST","PUT"];t=Ae.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qh.g(),this.v=this.o?II(this.o):II(qh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){GI(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(JR,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{QI(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){GI(this,A)}};function GI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,WI(c),Hc(c)}function WI(c){c.A||(c.A=!0,ct(c,"complete"),ct(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ct(this,"complete"),ct(this,"abort"),Hc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hc(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?KI(this):this.bb())},t.bb=function(){KI(this)};function KI(c){if(c.h&&typeof o<"u"&&(!c.v[1]||wn(c)!=4||c.Z()!=2)){if(c.u&&wn(c)==4)mI(c.Ea,0,c);else if(ct(c,"readystatechange"),wn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var b=String(c.D).match(VI)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!ZR.test(b?b.toLowerCase():"")}f=g}if(f)ct(c,"complete"),ct(c,"success");else{c.m=6;try{var A=2<wn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",WI(c)}}finally{Hc(c)}}}}function Hc(c,d){if(c.g){QI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ct(c,"ready");try{f.onreadystatechange=g}catch{}}}function QI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function wn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),MR(d)}};function YI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function XR(c){let d={};c=(c.g&&2<=wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if($(c[g]))continue;var f=C(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $o(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function ZI(c){this.Aa=0,this.i=[],this.j=new Oo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$o("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$o("baseRetryDelayMs",5e3,c),this.cb=$o("retryDelaySeedMs",1e4,c),this.Wa=$o("forwardChannelMaxRetries",2,c),this.wa=$o("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new xI(c&&c.concurrentRequestLimit),this.Da=new QR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ZI.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ut(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=ow(this,null,this.W),zc(this)};function Jh(c){if(JI(c),c.G==3){var d=c.U++,f=In(c.I);if(De(f,"SID",c.K),De(f,"RID",d),De(f,"TYPE","terminate"),Ho(c,f),d=new Xn(c,c.j,d),d.L=2,d.v=Bc(In(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=aw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Vc(d)}sw(c)}function qc(c){c.g&&(ef(c),c.g.cancel(),c.g=null)}function JI(c){qc(c),c.u&&(a.clearTimeout(c.u),c.u=null),Gc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function zc(c){if(!PI(c.h)&&!c.s){c.s=!0;var d=c.Ga;To||lI(),So||(To(),So=!0),Nh.add(d,c),c.B=0}}function eM(c,d){return OI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Po(m(c.Ga,c,d),iw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new Xn(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ew(this,b,d),f=In(this.I),De(f,"RID",c),De(f,"CVER",22),this.D&&De(f,"X-HTTP-Session-Id",this.D),Ho(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(zI(A)))+"&"+d:this.m&&Zh(f,this.m,A)),Yh(this.h,b),this.Ua&&De(f,"TYPE","init"),this.P?(De(f,"$req",d),De(f,"SID","null"),b.T=!0,Gh(b,f,null)):Gh(b,f,d),this.G=2}}else this.G==3&&(c?XI(this,c):this.i.length==0||PI(this.h)||XI(this))};function XI(c,d){var f;d?f=d.l:f=c.U++;let g=In(c.I);De(g,"SID",c.K),De(g,"RID",f),De(g,"AID",c.T),Ho(c,g),c.m&&c.o&&Zh(g,c.m,c.o),f=new Xn(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=ew(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Yh(c.h,f),Gh(f,g,d)}function Ho(c,d){c.H&&Z(c.H,function(f,g){De(d,g,f)}),c.l&&LI({},function(f,g){De(d,g,f)})}function ew(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=b[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ie=!0;for(let Ge=0;Ge<f;Ge++){let ge=b[Ge].g,tt=b[Ge].map;if(ge-=A,0>ge)A=Math.max(0,b[Ge].g-100),Ie=!1;else try{YR(tt,O,"req"+ge+"_")}catch{g&&g(tt)}}if(Ie){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function tw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;To||lI(),So||(To(),So=!0),Nh.add(d,c),c.v=0}}function Xh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Po(m(c.Fa,c),iw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,nw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Po(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),qc(this),nw(this))};function ef(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function nw(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=In(c.qa);De(d,"RID","rpc"),De(d,"SID",c.K),De(d,"AID",c.T),De(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&De(d,"TO",c.ja),De(d,"TYPE","xmlhttp"),Ho(c,d),c.m&&c.o&&Zh(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Bc(In(d)),f.m=null,f.P=!0,RI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,qc(this),Xh(this),ut(19))};function Gc(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function rw(c,d){var f=null;if(c.g==d){Gc(c),ef(c),c.g=null;var g=2}else if(Qh(c.h,d))f=d.D,kI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=kc(),ct(g,new bI(g,f)),zc(c)}else tw(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&eM(c,d)||g==2&&Xh(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:zr(c,5);break;case 4:zr(c,10);break;case 3:zr(c,6);break;default:zr(c,2)}}}function iw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function zr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new qr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Uc(g,"https"),Bc(g),b?WR(g.toString(),f):KR(g.toString(),f)}else ut(2);c.G=0,c.l&&c.l.sa(d),sw(c),JI(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function sw(c){if(c.G=0,c.ka=[],c.l){let d=FI(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function ow(c,d,f){var g=f instanceof qr?In(f):new qr(f);if(g.g!="")d&&(g.g=d+"."+g.g),jc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new qr(null);g&&Uc(A,g),d&&(A.g=d),b&&jc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&De(g,f,d),De(g,"VER",c.la),Ho(c,g),g}function aw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new Uo({eb:f})):new Ae(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cw(){}t=cw.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wc(){}Wc.prototype.g=function(c,d){return new mt(c,d)};function mt(c,d){et.call(this),this.g=new ZI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Gi(this)}S(mt,et),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){Jh(this.g)},mt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=jh(c),c=f);d.i.push(new LR(d.Ya++,c)),d.G==3&&zc(d)},mt.prototype.N=function(){this.g.l=null,delete this.j,Jh(this.g),delete this.g,mt.aa.N.call(this)};function uw(c){$h.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(uw,$h);function lw(){Hh.call(this),this.status=1}S(lw,Hh);function Gi(c){this.g=c}S(Gi,cw),Gi.prototype.ua=function(){ct(this.g,"a")},Gi.prototype.ta=function(c){ct(this.g,new uw(c))},Gi.prototype.sa=function(c){ct(this.g,new lw)},Gi.prototype.ra=function(){ct(this.g,"b")},Wc.prototype.createWebChannel=Wc.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,Wy=Gn.createWebChannelTransport=function(){return new Wc},Gy=Gn.getStatEventTarget=function(){return kc()},zy=Gn.Event=$r,Nd=Gn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fc.NO_ERROR=0,Fc.TIMEOUT=8,Fc.HTTP_ERROR=6,nc=Gn.ErrorCode=Fc,TI.COMPLETE="complete",qy=Gn.EventType=TI,wI.EventType=No,No.OPEN="a",No.CLOSE="b",No.ERROR="c",No.MESSAGE="d",et.prototype.listen=et.prototype.K,Js=Gn.WebChannel=wI,Hy=Gn.FetchXmlHttpFactory=Uo,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,$y=Gn.XhrIo=Ae}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});var K0="@firebase/firestore";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var vo="10.13.1";var Oi=new Ar("@firebase/firestore");function rc(){return Oi.logLevel}function V(t,...e){if(Oi.logLevel<=le.DEBUG){let n=e.map(O_);Oi.debug(`Firestore (${vo}): ${t}`,...n)}}function Kn(t,...e){if(Oi.logLevel<=le.ERROR){let n=e.map(O_);Oi.error(`Firestore (${vo}): ${t}`,...n)}}function so(t,...e){if(Oi.logLevel<=le.WARN){let n=e.map(O_);Oi.warn(`Firestore (${vo}): ${t}`,...n)}}function O_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function K(t="Unexpected state"){let e=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: `+t;throw Kn(e),new Error(e)}function Ee(t,e){t||K()}function Y(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends bt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Fd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Jy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}},Xy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ev=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string"),new Fd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new ze(e)}},tv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},nv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},rv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},iv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,V("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new rv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function F2(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ld=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=F2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ye(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Je=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Je(0,0))}static max(){return new t(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Vd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(),r===void 0?r=e.length-n:r>e.length-n&&K(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Te=class t extends Vd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},L2=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Tt=class t extends Vd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return L2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Te.fromString(e))}static fromName(e){return new t(Te.fromString(e).popFirst(5))}static empty(){return new t(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Te(e.slice()))}};var sv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};sv.UNKNOWN_ID=-1;function V2(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new ki(i,H.empty(),e)}function U2(t){return new ki(t.readTime,t.key,-1)}var ki=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ne.min(),H.empty(),-1)}static max(){return new t(ne.max(),H.empty(),-1)}};function j2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}var B2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ov=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ec(t){return w(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==B2)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function $2(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dc(t){return t.name==="IndexedDbTransactionError"}var RS=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function fh(t){return t==null}function lc(t){return t===0&&1/t==-1/0}function H2(t){return typeof t=="number"&&Number.isInteger(t)&&!lc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var q2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],o5=[...q2,"documentOverlays"],z2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],G2=z2,W2=[...G2,"indexConfiguration","indexState","indexEntries"];var a5=[...W2,"globals"];function Q0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _o(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||gn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new no(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new no(this.root,e,this.comparator,!1)}getReverseIterator(){return new no(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new no(this.root,e,this.comparator,!0)}},no=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,n,r,i,s){return this}insert(e,n,r){return new gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ot=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ud(this.data.getIterator())}getIteratorFrom(e){return new Ud(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ud=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var pn=class t{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new t([])}unionWith(e){let n=new ot(Tt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var jd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var at=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jd("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};at.EMPTY_BYTE_STRING=new at("");var K2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qn(t){if(Ee(!!t),typeof t=="string"){let e=0,n=K2.exec(t);if(Ee(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}function k_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function F_(t){let e=t.mapValue.fields.__previous_value__;return k_(e)?F_(e):e}function dc(t){let e=Qn(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}var av=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Bd=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var xd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?k_(t)?4:xS(t)?9007199254740991:NS(t)?10:11:K()}function vn(t,e){if(t===e)return!0;let n=Fi(t);if(n!==Fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dc(t).isEqual(dc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Qn(i.timestampValue),a=Qn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Vr(i.bytesValue).isEqual(Vr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return be(i.geoPointValue.latitude)===be(s.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return be(i.integerValue)===be(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=be(i.doubleValue),a=be(s.doubleValue);return o===a?lc(o)===lc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Q0(o)!==Q0(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!vn(o[u],a[u])))return!1;return!0}(t,e);default:return K()}}function hc(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function ao(t,e){if(t===e)return 0;let n=Fi(t),r=Fi(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=be(s.integerValue||s.doubleValue),u=be(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Y0(t.timestampValue,e.timestampValue);case 4:return Y0(dc(t),dc(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Vr(s),u=Vr(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ye(a[l],u[l]);if(h!==0)return h}return ye(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ye(be(s.latitude),be(o.latitude));return a!==0?a:ye(be(s.longitude),be(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Z0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=ye(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:Z0(v,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===xd.mapValue&&o===xd.mapValue)return 0;if(s===xd.mapValue)return 1;if(o===xd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ye(u[p],h[p]);if(m!==0)return m;let v=ao(a[u[p]],l[h[p]]);if(v!==0)return v}return ye(u.length,h.length)}(t.mapValue,e.mapValue);default:throw K()}}function Y0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);let n=Qn(t),r=Qn(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function Z0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=ao(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function co(t){return cv(t)}function cv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Qn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=cv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${cv(n.fields[o])}`;return i+"}"}(t.mapValue):K()}function J0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uv(t){return!!t&&"integerValue"in t}function L_(t){return!!t&&"arrayValue"in t}function X0(t){return!!t&&"nullValue"in t}function eS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Od(t){return!!t&&"mapValue"in t}function NS(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return _o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Gt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Od(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=Tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=sc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Od(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Od(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_o(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(sc(this.value))}};function PS(t){let e=[];return _o(t.fields,(n,r)=>{let i=new Tt([n]);if(Od(r)){let s=PS(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new pn(e)}var Wt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ne.min(),ne.min(),ne.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ne.min(),ne.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ne.min(),ne.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var uo=class{constructor(e,n){this.position=e,this.inclusive=n}};function tS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=ao(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function nS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}var Li=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Q2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var $d=class{},Le=class t extends $d{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dv(e,n,r):n==="array-contains"?new pv(e,r):n==="in"?new gv(e,r):n==="not-in"?new mv(e,r):n==="array-contains-any"?new yv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hv(e,r):new fv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ao(n,this.value)):n!==null&&Fi(this.value)===Fi(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kt=class t extends $d{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return OS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function OS(t){return t.op==="and"}function kS(t){return Y2(t)&&OS(t)}function Y2(t){for(let e of t.filters)if(e instanceof Kt)return!1;return!0}function lv(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+co(t.value);if(kS(t))return t.filters.map(e=>lv(e)).join(",");{let e=t.filters.map(n=>lv(n)).join(",");return`${t.op}(${e})`}}function FS(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&vn(r.value,i.value)}(t,e):t instanceof Kt?function(r,i){return i instanceof Kt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&FS(o,i.filters[a]),!0):!1}(t,e):void K()}function LS(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`}(t):t instanceof Kt?function(n){return n.op.toString()+" {"+n.getFilters().map(LS).join(" ,")+"}"}(t):"Filter"}var dv=class extends Le{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},hv=class extends Le{constructor(e,n){super(e,"in",n),this.keys=VS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},fv=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=VS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function VS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var pv=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return L_(n)&&hc(n.arrayValue,this.value)}},gv=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&hc(this.value.arrayValue,n)}},mv=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!hc(this.value.arrayValue,n)}},yv=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!L_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>hc(this.value.arrayValue,r))}};var vv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function rS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new vv(t,e,n,r,i,s,o)}function V_(t){let e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>co(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>co(r)).join(",")),e.ue=n}return e.ue}function U_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nS(t.startAt,e.startAt)&&nS(t.endAt,e.endAt)}function _v(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Ur=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Z2(t,e,n,r,i,s,o,a){return new Ur(t,e,n,r,i,s,o,a)}function j_(t){return new Ur(t)}function iS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function US(t){return t.collectionGroup!==null}function oc(t){let e=Y(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ot(Tt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Li(s,r))}),n.has(Tt.keyField().canonicalString())||e.ce.push(new Li(Tt.keyField(),r))}return e.ce}function mn(t){let e=Y(t);return e.le||(e.le=J2(e,oc(t))),e.le}function J2(t,e){if(t.limitType==="F")return rS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Li(i.field,s)});let n=t.endAt?new uo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uo(t.startAt.position,t.startAt.inclusive):null;return rS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Iv(t,e){let n=t.filters.concat([e]);return new Ur(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wv(t,e,n){return new Ur(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ph(t,e){return U_(mn(t),mn(e))&&t.limitType===e.limitType}function jS(t){return`${V_(mn(t))}|lt:${t.limitType}`}function Xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LS(i)).join(", ")}]`),fh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>co(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>co(i)).join(",")),`Target(${r})`}(mn(t))}; limitType=${t.limitType})`}function gh(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of oc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=tS(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,oc(r),i)||r.endAt&&!function(o,a,u){let l=tS(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,oc(r),i))}(t,e)}function X2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BS(t){return(e,n)=>{let r=!1;for(let i of oc(t)){let s=eB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function eB(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?ao(u,l):K()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var jr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return MS(this.inner)}size(){return this.innerSize}};var tB=new Ne(H.comparator);function Yn(){return tB}var $S=new Ne(H.comparator);function ic(...t){let e=$S;for(let n of t)e=e.insert(n.key,n);return e}function HS(t){let e=$S;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mi(){return ac()}function qS(){return ac()}function ac(){return new jr(t=>t.toString(),(t,e)=>t.isEqual(e))}var nB=new Ne(H.comparator),rB=new ot(H.comparator);function de(...t){let e=rB;for(let n of t)e=e.add(n);return e}var iB=new ot(ye);function sB(){return iB}function B_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function zS(t){return{integerValue:""+t}}function oB(t,e){return H2(e)?zS(e):B_(t,e)}var lo=class{constructor(){this._=void 0}};function aB(t,e,n){return t instanceof ho?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&k_(s)&&(s=F_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Vi?WS(t,e):t instanceof Ui?KS(t,e):function(i,s){let o=GS(i,s),a=sS(o)+sS(i.Pe);return uv(o)&&uv(i.Pe)?zS(a):B_(i.serializer,a)}(t,e)}function cB(t,e,n){return t instanceof Vi?WS(t,e):t instanceof Ui?KS(t,e):n}function GS(t,e){return t instanceof fo?function(r){return uv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ho=class extends lo{},Vi=class extends lo{constructor(e){super(),this.elements=e}};function WS(t,e){let n=QS(e);for(let r of t.elements)n.some(i=>vn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Ui=class extends lo{constructor(e){super(),this.elements=e}};function KS(t,e){let n=QS(e);for(let r of t.elements)n=n.filter(i=>!vn(i,r));return{arrayValue:{values:n}}}var fo=class extends lo{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function sS(t){return be(t.integerValue||t.doubleValue)}function QS(t){return L_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Vi&&i instanceof Vi||r instanceof Ui&&i instanceof Ui?oo(r.elements,i.elements,vn):r instanceof fo&&i instanceof fo?vn(r.Pe,i.Pe):r instanceof ho&&i instanceof ho}(t.transform,e.transform)}var Ev=class{constructor(e,n){this.version=e,this.transformResults=n}},Pi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function kd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var po=class{};function YS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hd(t.key,Pi.none()):new ji(t.key,t.data,Pi.none());{let n=t.data,r=Gt.empty(),i=new ot(Tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zn(t.key,r,new pn(i.toArray()),Pi.none())}}function lB(t,e,n){t instanceof ji?function(i,s,o){let a=i.value.clone(),u=aS(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Zn?function(i,s,o){if(!kd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=aS(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ZS(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function cc(t,e,n,r){return t instanceof ji?function(s,o,a,u){if(!kd(s.precondition,o))return a;let l=s.value.clone(),h=cS(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zn?function(s,o,a,u){if(!kd(s.precondition,o))return a;let l=cS(s.fieldTransforms,u,o),h=o.data;return h.setAll(ZS(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return kd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function dB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=GS(r.transform,i||null);s!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,s))}return n||null}function oS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oo(r,i,(s,o)=>uB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ji=class extends po{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Zn=class extends po{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function ZS(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function aS(t,e,n){let r=new Map;Ee(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,cB(o,a,n[i]))}return r}function cS(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,aB(s,o,e))}return r}var Hd=class extends po{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Dv=class extends po{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Cv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&lB(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=qS();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=YS(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(n,r)=>oS(n,r))&&oo(this.baseMutations,e.baseMutations,(n,r)=>oS(n,r))}},bv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length);let i=function(){return nB}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Tv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Sv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,pe;function hB(t){switch(t){default:return K();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function JS(t){if(t===void 0)return Kn("GRPC error has no .code"),M.UNKNOWN;switch(t){case ke.OK:return M.OK;case ke.CANCELLED:return M.CANCELLED;case ke.UNKNOWN:return M.UNKNOWN;case ke.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case ke.INTERNAL:return M.INTERNAL;case ke.UNAVAILABLE:return M.UNAVAILABLE;case ke.UNAUTHENTICATED:return M.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case ke.NOT_FOUND:return M.NOT_FOUND;case ke.ALREADY_EXISTS:return M.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return M.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case ke.ABORTED:return M.ABORTED;case ke.OUT_OF_RANGE:return M.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return M.UNIMPLEMENTED;case ke.DATA_LOSS:return M.DATA_LOSS;default:return K()}}(pe=ke||(ke={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";var uS=null;function fB(){return new TextEncoder}var pB=new Fr([4294967295,4294967295],0);function lS(t){let e=fB().encode(t),n=new By;return n.update(e),new Uint8Array(n.digest())}function dS(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fr([n,r],0),new Fr([i,s],0)]}var Av=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(r<0)throw new Ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Fr.fromNumber(r)));return i.compare(pB)===1&&(i=new Fr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=lS(e),[r,i]=dS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=lS(e),[r,i]=dS(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ni=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var qd=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,fc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ne.min(),i,new Ne(ye),Yn(),de())}},fc=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,de(),de(),de())}};var ro=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},zd=class{constructor(e,n){this.targetId=e,this.me=n}},Gd=class{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Wd=class{constructor(){this.fe=0,this.ge=fS(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:K()}}),new fc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=fS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Rv=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=hS(),this.Qe=new Ne(ye)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(_v(s))if(r===0){let o=new H(s.path);this.Ue(n,o,Wt.newNoDocument(o,ne.min()))}else Ee(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}uS?.et(function(h,p,m,v,S){var N,R,F,$,q,ae;let Se={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(Se.bloomFilter={applied:S===0,hashCount:(N=Z?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:($=(F=(R=Z?.bits)===null||R===void 0?void 0:R.bitmap)===null||F===void 0?void 0:F.length)!==null&&$!==void 0?$:0,padding:(ae=(q=Z?.bits)===null||q===void 0?void 0:q.padding)!==null&&ae!==void 0?ae:0,mightContain:D=>{var y;return(y=v?.mightContain(D))!==null&&y!==void 0&&y}}),Se}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Vr(r).toUint8Array()}catch(u){if(u instanceof jd)return so("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Av(o,i,s)}catch(u){return so(u instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&_v(a.target)){let u=new H(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Wt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new qd(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=hS(),this.Qe=new Ne(ye),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wd,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ot(ye),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function hS(){return new Ne(H.comparator)}function fS(){return new Ne(H.comparator)}var gB={asc:"ASCENDING",desc:"DESCENDING"},mB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yB={and:"AND",or:"OR"},Mv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Nv(t,e){return t.useProto3Json||fh(e)?e:{value:e}}function Kd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vB(t,e){return Kd(t,e.toTimestamp())}function yn(t){return Ee(!!t),ne.fromTimestamp(function(n){let r=Qn(n);return new Je(r.seconds,r.nanos)}(t))}function $_(t,e){return xv(t,e).canonicalString()}function xv(t,e){let n=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function eA(t){let e=Te.fromString(t);return Ee(sA(e)),e}function Pv(t,e){return $_(t.databaseId,e.path)}function Ky(t,e){let n=eA(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(nA(n))}function tA(t,e){return $_(t.databaseId,e)}function _B(t){let e=eA(t);return e.length===4?Te.emptyPath():nA(e)}function Ov(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nA(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pS(t,e,n){return{name:Pv(t,e),fields:n.value.mapValue.fields}}function IB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ee(h===void 0||typeof h=="string"),at.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?M.UNKNOWN:JS(l.code);return new L(h,l.message||"")}(o);n=new Gd(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ky(t,r.document.name),s=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):ne.min(),a=new Gt({mapValue:{fields:r.document.fields}}),u=Wt.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new ro(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ky(t,r.document),s=r.readTime?yn(r.readTime):ne.min(),o=Wt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ro([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ky(t,r.document),s=r.removedTargetIds||[];n=new ro([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Sv(i,s),a=r.targetId;n=new zd(a,o)}}return n}function wB(t,e){let n;if(e instanceof ji)n={update:pS(t,e.key,e.value)};else if(e instanceof Hd)n={delete:Pv(t,e.key)};else if(e instanceof Zn)n={update:pS(t,e.key,e.data),updateMask:MB(e.fieldMask)};else{if(!(e instanceof Dv))return K();n={verify:Pv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ho)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ui)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(t,e.precondition)),n}function EB(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?yn(i.updateTime):yn(s);return o.isEqual(ne.min())&&(o=yn(s)),new Ev(o,i.transformResults||[])}(n,e))):[]}function DB(t,e){return{documents:[tA(t,e.path)]}}function CB(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=tA(t,i);let s=function(l){if(l.length!==0)return iA(Kt.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:eo(m.field),direction:SB(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Nv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function bB(t){let e=_B(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ee(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=rA(p);return m instanceof Kt&&kS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(S){return new Li(to(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,fh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new uo(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new uo(v,m)}(n.endAt)),Z2(e,i,o,s,a,"F",u,l)}function TB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=to(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=to(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=to(n.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=to(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(to(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kt.create(n.compositeFilter.filters.map(r=>rA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(n.compositeFilter.op))}(t):K()}function SB(t){return gB[t]}function AB(t){return mB[t]}function RB(t){return yB[t]}function eo(t){return{fieldPath:t.canonicalString()}}function to(t){return Tt.fromServerFormat(t.fieldPath)}function iA(t){return t instanceof Le?function(n){if(n.op==="=="){if(eS(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NAN"}};if(X0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eS(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NAN"}};if(X0(n.value))return{unaryFilter:{field:eo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(n.field),op:AB(n.op),value:n.value}}}(t):t instanceof Kt?function(n){let r=n.getFilters().map(i=>iA(i));return r.length===1?r[0]:{compositeFilter:{op:RB(n.op),filters:r}}}(t):K()}function MB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var pc=class t{constructor(e,n,r,i,s=ne.min(),o=ne.min(),a=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var kv=class{constructor(e){this.ct=e}};function NB(t){let e=bB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wv(e,e.limit,"L"):e}var Qd=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),lc(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=Qn(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Vr(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?xS(e)?this.dt(n,Number.MAX_SAFE_INTEGER):NS(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):K()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(be(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),H.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Qd.vt=new Qd;var Fv=class{constructor(){this.un=new Lv}addToCollectionParentIndex(e,n){return this.un.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(ki.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Lv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ot(Te.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ot(Te.comparator)).toArray()}};var u5=new Uint8Array(0);var fn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);var gc=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Vv=class{constructor(){this.changes=new jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Uv=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var jv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&cc(r.mutation,i,pn.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){let i=Mi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ic();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Yn(),o=ac(),a=function(){return ac()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Zn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),cc(h.mutation,l,h.mutation.getFieldMask(),Je.now())):o.set(l.key,pn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Uv(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ac(),i=new Ne((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||pn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=qS();h.forEach(m=>{if(!s.has(m)){let v=YS(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):US(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):x.resolve(Mi()),a=-1,u=s;return o.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,de())).next(h=>({batchId:a,changes:HS(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ic();return this.indexManager.getCollectionParents(e,s).next(a=>x.forEach(a,u=>{let l=function(p,m){return new Ur(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,Wt.newInvalidDocument(h)))});let a=ic();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&cc(h.mutation,l,pn.empty(),Je.now()),gh(n,l)&&(a=a.insert(u,l))}),a})}};var Bv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return x.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:NB(i.bundledQuery),readTime:yn(i.readTime)}}(n)),x.resolve()}};var $v=class{constructor(){this.overlays=new Ne(H.comparator),this.Ir=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Mi();return x.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Mi(),s=n.length+1,o=new H(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Mi(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Mi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Tv(n,r));let s=this.Ir.get(n);s===void 0&&(s=de(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Hv=class{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var mc=class{constructor(){this.Tr=new ot(Fe.Er),this.dr=new ot(Fe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Fe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Fe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new H(new Te([])),r=new Fe(n,e),i=new Fe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new H(new Te([])),r=new Fe(n,e),i=new Fe(n,e+1),s=de();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Fe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||H.comparator(e.key,n.key)}};var qv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ot(Fe.Er)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Cv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Fe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return x.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),x.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(ye);return n.forEach(i=>{let s=new Fe(i,0),o=new Fe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),x.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new Fe(new H(s),0),a=new ot(ye);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),x.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return x.forEach(n.mutations,i=>{let s=new Fe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Fe(n,0),i=this.br.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var zv=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Wt.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Yn(),o=n.path,a=new H(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||j2(U2(h),r)<=0||(i.has(h.key)||gh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return x.resolve(s)}getAllFromCollectionGroup(e,n,r,i){K()}Or(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Gv(this)}getSize(e){return x.resolve(this.size)}},Gv=class extends Vv{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Wv=class{constructor(e){this.persistence=e,this.Nr=new jr(n=>V_(n),U_),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mc,this.targetCount=0,this.kr=gc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),x.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new gc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.Kn(n),x.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(s).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),x.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Br.containsKey(n))}};var Kv=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new RS(0),this.Kr=!1,this.Kr=!0,this.$r=new Hv,this.referenceDelegate=e(this),this.Ur=new Wv(this),this.indexManager=new Fv,this.remoteDocumentCache=function(i){return new zv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kv(n),this.Gr=new Bv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $v,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new qv(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new Qv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return x.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Qv=class extends ov{constructor(e){super(),this.currentSequenceNumber=e}},Yv=class t{constructor(e){this.persistence=e,this.Jr=new mc,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),x.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Xr,r=>{let i=H.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return x.or([()=>x.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Zv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Jv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Xv=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return PT()?8:$2(qe())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Jv;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(rc()<=le.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",Xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),x.resolve()):(rc()<=le.DEBUG&&V("QueryEngine","Query:",Xs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(rc()<=le.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",Xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mn(n))):x.resolve())}Yi(e,n){if(iS(n))return x.resolve(null);let r=mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wv(n,null,"F"),r=mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(n,a);return this.ns(n,l,o,u.readTime)?this.Yi(e,wv(n,null,"F")):this.rs(e,l,n,u)}))})))}Zi(e,n,r,i){return iS(n)||i.isEqual(ne.min())?x.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?x.resolve(null):(rc()<=le.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xs(n)),this.rs(e,o,n,V2(i,-1)).next(a=>a))})}ts(e,n){let r=new ot(BS(e));return n.forEach((i,s)=>{gh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return rc()<=le.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",Xs(n)),this.Ji.getDocumentsMatchingQuery(e,n,ki.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var e_=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ne(ye),this._s=new jr(s=>V_(s),U_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jv(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function xB(t,e,n,r){return new e_(t,e,n,r)}function oA(t,e){return w(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=de();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function PB(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=x.resolve();return m.forEach(S=>{v=v.next(()=>h.getEntry(u,S)).next(N=>{let R=l.docVersions.get(S);Ee(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function aA(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function OB(t,e){let n=Y(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(at.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,R,F){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,v,h)&&a.push(n.Ur.updateTargetData(s,v))});let u=Yn(),l=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(kB(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ne.min())){let h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.os=i,s))}function kB(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Yn();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):V("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function FB(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LB(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,x.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new pc(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function t_(t,e,n){return w(this,null,function*(){let r=Y(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Dc(o))throw o;V("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function gS(t,e,n){let r=Y(t),i=ne.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=Y(u),m=p._s.get(h);return m!==void 0?x.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,mn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:de())).next(a=>(VB(r,X2(e),a),{documents:a,Ts:s})))}function VB(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Yd=class{constructor(){this.activeTargetIds=sB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var n_=class{constructor(){this.so=new Yd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var r_=class{_o(e){}shutdown(){}};var Zd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){V("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){V("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Pd=null;function Qy(){return Pd===null?Pd=function(){return 268435456+Math.round(2147483648*Math.random())}():Pd++,"0x"+Pd.toString(16)}var UB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var i_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var st="WebChannelConnection",s_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Qy(),u=this.xo(n,r.toUriEncodedString());V("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,u,l,i).then(h=>(V("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw so("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=UB[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Qy();return new Promise((o,a)=>{let u=new $y;u.setWithCredentials(!0),u.listenOnce(qy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nc.NO_ERROR:let h=u.getResponseJson();V(st,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case nc.TIMEOUT:V(st,`RPC '${e}' ${s} timed out`),a(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:let p=u.getStatus();if(V(st,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let S=function(R){let F=R.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(F)>=0?F:M.UNKNOWN}(v.status);a(new L(S,v.message))}else a(new L(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new L(M.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{V(st,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);V(st,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Qy(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wy(),a=Gy(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Hy({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");V(st,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,S=new i_({Io:R=>{v?V(st,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(V(st,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(st,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),N=(R,F,$)=>{R.listen(F,q=>{try{$(q)}catch(ae){setTimeout(()=>{throw ae},0)}})};return N(p,Js.EventType.OPEN,()=>{v||(V(st,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),N(p,Js.EventType.CLOSE,()=>{v||(v=!0,V(st,`RPC '${e}' stream ${i} transport closed`),S.So())}),N(p,Js.EventType.ERROR,R=>{v||(v=!0,so(st,`RPC '${e}' stream ${i} transport errored:`,R),S.So(new L(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,Js.EventType.MESSAGE,R=>{var F;if(!v){let $=R.data[0];Ee(!!$);let q=$,ae=q.error||((F=q[0])===null||F===void 0?void 0:F.error);if(ae){V(st,`RPC '${e}' stream ${i} received error:`,ae);let Se=ae.status,Z=function(_){let E=ke[_];if(E!==void 0)return JS(E)}(Se),D=ae.message;Z===void 0&&(Z=M.INTERNAL,D="Unknown error status: "+Se+" with message "+ae.message),v=!0,S.So(new L(Z,D)),p.close()}else V(st,`RPC '${e}' stream ${i} received:`,$),S.bo($)}}),N(a,zy.STAT_EVENT,R=>{R.stat===Nd.PROXY?V(st,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Nd.NOPROXY&&V(st,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}};function Yy(){return typeof document<"u"?document:null}function mh(t){return new Mv(t,!0)}var Jd=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Xd=class{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Jd(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return w(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return w(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return w(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>w(this,null,function*(){this.state=0,this.start()}))}I_(e){return V("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(V("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},o_=class extends Xd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=IB(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?yn(o.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=Ov(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=_v(u)?{documents:DB(s,u)}:{query:CB(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=XS(s,o.resumeToken);let l=Nv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=Kd(s,o.snapshotVersion.toTimestamp());let l=Nv(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=TB(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=Ov(this.serializer),n.removeTarget=e,this.a_(n)}},a_=class extends Xd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=EB(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=Ov(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>wB(this.serializer,r))};this.a_(n)}};var c_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,xv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,xv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},u_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kn(n),this.D_=!1):V("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var l_=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>w(this,null,function*(){$i(this)&&(V("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=Y(u);l.L_.add(4),yield Cc(l),l.q_.set("Unknown"),l.L_.delete(4),yield yh(l)})}(this))}))}),this.q_=new u_(r,i)}};function yh(t){return w(this,null,function*(){if($i(t))for(let e of t.B_)yield e(!0)})}function Cc(t){return w(this,null,function*(){for(let e of t.B_)yield e(!1)})}function cA(t,e){let n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),G_(n)?z_(n):Io(n).r_()&&q_(n,e))}function H_(t,e){let n=Y(t),r=Io(n);n.N_.delete(e),r.r_()&&uA(n,e),n.N_.size===0&&(r.r_()?r.o_():$i(n)&&n.q_.set("Unknown"))}function q_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(t).A_(e)}function uA(t,e){t.Q_.xe(e),Io(t).R_(e)}function z_(t){t.Q_=new Rv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Io(t).start(),t.q_.v_()}function G_(t){return $i(t)&&!Io(t).n_()&&t.N_.size>0}function $i(t){return Y(t).L_.size===0}function lA(t){t.Q_=void 0}function jB(t){return w(this,null,function*(){t.q_.set("Online")})}function BB(t){return w(this,null,function*(){t.N_.forEach((e,n)=>{q_(t,e)})})}function $B(t,e){return w(this,null,function*(){lA(t),G_(t)?(t.q_.M_(e),z_(t)):t.q_.set("Unknown")})}function HB(t,e,n){return w(this,null,function*(){if(t.q_.set("Online"),e instanceof Gd&&e.state===2&&e.cause)try{yield function(i,s){return w(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){V("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield eh(t,r)}else if(e instanceof ro?t.Q_.Ke(e):e instanceof zd?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{let r=yield aA(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),uA(s,u);let p=new pc(h.target,u,l,h.sequenceNumber);q_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V("RemoteStore","Failed to raise snapshot:",r),yield eh(t,r)}})}function eh(t,e,n){return w(this,null,function*(){if(!Dc(e))throw e;t.L_.add(1),yield Cc(t),t.q_.set("Offline"),n||(n=()=>aA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){V("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield yh(t)}))})}function dA(t,e){return e().catch(n=>eh(t,n,e))}function vh(t){return w(this,null,function*(){let e=Y(t),n=Br(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qB(e);)try{let i=yield FB(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,zB(e,i)}catch(i){yield eh(e,i)}hA(e)&&fA(e)})}function qB(t){return $i(t)&&t.O_.length<10}function zB(t,e){t.O_.push(e);let n=Br(t);n.r_()&&n.V_&&n.m_(e.mutations)}function hA(t){return $i(t)&&!Br(t).n_()&&t.O_.length>0}function fA(t){Br(t).start()}function GB(t){return w(this,null,function*(){Br(t).p_()})}function WB(t){return w(this,null,function*(){let e=Br(t);for(let n of t.O_)e.m_(n.mutations)})}function KB(t,e,n){return w(this,null,function*(){let r=t.O_.shift(),i=bv.from(r,e,n);yield dA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield vh(t)})}function QB(t,e){return w(this,null,function*(){e&&Br(t).V_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return hB(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Br(r).s_(),yield dA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield vh(r)}})}(t,e)),hA(t)&&fA(t)})}function mS(t,e){return w(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),V("RemoteStore","RemoteStore received new credentials");let r=$i(n);n.L_.add(3),yield Cc(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield yh(n)})}function YB(t,e){return w(this,null,function*(){let n=Y(t);e?(n.L_.delete(2),yield yh(n)):e||(n.L_.add(2),yield Cc(n),n.q_.set("Unknown"))})}function Io(t){return t.K_||(t.K_=function(n,r,i){let s=Y(n);return s.w_(),new o_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:jB.bind(null,t),Ro:BB.bind(null,t),mo:$B.bind(null,t),d_:HB.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.K_.s_(),G_(t)?z_(t):t.q_.set("Unknown")):(yield t.K_.stop(),lA(t))}))),t.K_}function Br(t){return t.U_||(t.U_=function(n,r,i){let s=Y(n);return s.w_(),new a_(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GB.bind(null,t),mo:QB.bind(null,t),f_:WB.bind(null,t),g_:KB.bind(null,t)}),t.B_.push(e=>w(this,null,function*(){e?(t.U_.s_(),yield vh(t)):(yield t.U_.stop(),t.O_.length>0&&(V("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var d_=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function W_(t,e){if(Kn("AsyncQueue",`${e}: ${t}`),Dc(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var th=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=ic(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var nh=class{constructor(){this.W_=new Ne(H.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},go=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,th.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ph(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var h_=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},f_=class{constructor(){this.queries=yS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=Y(n),s=i.queries;i.queries=yS(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function yS(){return new jr(t=>jS(t),ph)}function ZB(t,e){return w(this,null,function*(){let n=Y(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new h_,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=W_(o,`Initialization of query '${Xs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&K_(n)})}function JB(t,e){return w(this,null,function*(){let n=Y(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function XB(t,e){let n=Y(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&K_(n)}function e$(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function K_(t){t.Y_.forEach(e=>{e.next()})}var p_,vS;(vS=p_||(p_={})).ea="default",vS.Cache="cache";var g_=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==p_.Cache}};var rh=class{constructor(e){this.key=e}},ih=class{constructor(e){this.key=e}},m_=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=BS(e),this.Ra=new th(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new nh,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=gh(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?S!==N&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(v,S){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return N(v)-N(S)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new go(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ih(r))}),this.da.forEach(r=>{e.has(r)||n.push(new rh(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return go.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},y_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},v_=class{constructor(e){this.key=e,this.va=!1}},__=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new jr(a=>jS(a),ph),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(H.comparator),this.Na=new Map,this.La=new mc,this.Ba={},this.ka=new Map,this.qa=gc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function t$(t,e,n=!0){return w(this,null,function*(){let r=_A(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield pA(r,e,n,!0),i})}function n$(t,e){return w(this,null,function*(){let n=_A(t);yield pA(n,e,!0,!1)})}function pA(t,e,n,r){return w(this,null,function*(){let i=yield LB(t.localStore,mn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield r$(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&cA(t.remoteStore,i),a})}function r$(t,e,n,r,i){return w(this,null,function*(){t.Ka=(p,m,v)=>function(N,R,F,$){return w(this,null,function*(){let q=R.view.ma(F);q.ns&&(q=yield gS(N.localStore,R.query,!1).then(({documents:D})=>R.view.ma(D,q)));let ae=$&&$.targetChanges.get(R.targetId),Se=$&&$.targetMismatches.get(R.targetId)!=null,Z=R.view.applyChanges(q,N.isPrimaryClient,ae,Se);return IS(N,R.targetId,Z.wa),Z.snapshot})}(t,p,m,v);let s=yield gS(t.localStore,e,!0),o=new m_(e,s.Ts),a=o.ma(s.documents),u=fc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);IS(t,n,l.wa);let h=new y_(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function i$(t,e,n){return w(this,null,function*(){let r=Y(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ph(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield t_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&H_(r.remoteStore,i.targetId),I_(r,i.targetId)}).catch(Ec))):(I_(r,i.targetId),yield t_(r.localStore,i.targetId,!0))})}function s$(t,e){return w(this,null,function*(){let n=Y(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),H_(n.remoteStore,r.targetId))})}function o$(t,e,n){return w(this,null,function*(){let r=f$(t);try{let i=yield function(o,a){let u=Y(o),l=Je.now(),h=a.reduce((v,S)=>v.add(S.key),de()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let S=Yn(),N=de();return u.cs.getEntries(v,h).next(R=>{S=R,S.forEach((F,$)=>{$.isValidDocument()||(N=N.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,S)).next(R=>{p=R;let F=[];for(let $ of a){let q=dB($,p.get($.key).overlayedDocument);q!=null&&F.push(new Zn($.key,q,PS(q.value.mapValue),Pi.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,F,a)}).next(R=>{m=R;let F=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,R.batchId,F)})}).then(()=>({batchId:m.batchId,changes:HS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ne(ye)),l=l.insert(a,u),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield bc(r,i.changes),yield vh(r.remoteStore)}catch(i){let s=W_(i,"Failed to persist write");n.reject(s)}})}function gA(t,e){return w(this,null,function*(){let n=Y(t);try{let r=yield OB(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ee(o.va):i.removedDocuments.size>0&&(Ee(o.va),o.va=!1))}),yield bc(n,r,e)}catch(r){yield Ec(r)}})}function _S(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=Y(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&K_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function a$(t,e,n){return w(this,null,function*(){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ne(H.comparator);o=o.insert(s,Wt.newNoDocument(s,ne.min()));let a=de().add(s),u=new qd(ne.min(),new Map,new Ne(ye),o,a);yield gA(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),Q_(r)}else yield t_(r.localStore,e,!1).then(()=>I_(r,e,n)).catch(Ec)})}function c$(t,e){return w(this,null,function*(){let n=Y(t),r=e.batch.batchId;try{let i=yield PB(n.localStore,e);yA(n,r,null),mA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield bc(n,i)}catch(i){yield Ec(i)}})}function u$(t,e,n){return w(this,null,function*(){let r=Y(t);try{let i=yield function(o,a){let u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ee(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);yA(r,e,n),mA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield bc(r,i)}catch(i){yield Ec(i)}})}function mA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function yA(t,e,n){let r=Y(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function I_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||vA(t,r)})}function vA(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(H_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Q_(t))}function IS(t,e,n){for(let r of n)r instanceof rh?(t.La.addReference(r.key,e),l$(t,r)):r instanceof ih?(V("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||vA(t,r.key)):K()}function l$(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(V("SyncEngine","New document in limbo: "+n),t.xa.add(r),Q_(t))}function Q_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new H(Te.fromString(e)),r=t.qa.next();t.Na.set(r,new v_(n)),t.Oa=t.Oa.insert(n,r),cA(t.remoteStore,new pc(mn(j_(n.path)),r,"TargetPurposeLimboResolution",RS.oe))}}function bc(t,e,n){return w(this,null,function*(){let r=Y(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Zv.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return w(this,null,function*(){let h=Y(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>x.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Dc(p))throw p;V("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),S=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function d$(t,e){return w(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){V("SyncEngine","User change. New user:",e.toKey());let r=yield oA(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield bc(n,r.hs)}})}function h$(t,e){let n=Y(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function _A(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a$.bind(null,e),e.Ca.d_=XB.bind(null,e.eventManager),e.Ca.$a=e$.bind(null,e.eventManager),e}function f$(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u$.bind(null,e),e}var sh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return xB(this.persistence,new Xv,e.initialUser,this.serializer)}createPersistence(e){return new Kv(Yv.Zr,this.serializer)}createSharedClientState(e){return new n_}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var w_=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_S(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=d$.bind(null,this.syncEngine),yield YB(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new f_}()}createDatastore(e){let n=mh(e.databaseInfo.databaseId),r=function(s){return new s_(s)}(e.databaseInfo);return function(s,o,a,u){return new c_(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new l_(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_S(this.syncEngine,n,0),function(){return Zd.D()?new Zd:new r_}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new __(i,s,o,a,u,l);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e,n;yield function(i){return w(this,null,function*(){let s=Y(i);V("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Cc(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var E_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var D_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ze.UNAUTHENTICATED,this.clientId=Ld.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){V("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=W_(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Zy(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield oA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function wS(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield g$(t);V("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mS(e.remoteStore,i)),t._onlineComponents=e})}function p$(t){return t.name==="FirebaseError"?t.code===M.FAILED_PRECONDITION||t.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function g$(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Zy(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!p$(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),yield Zy(t,new sh)}}else V("FirestoreClient","Using default OfflineComponentProvider"),yield Zy(t,new sh);return t._offlineComponents})}function IA(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V("FirestoreClient","Using user provided OnlineComponentProvider"),yield wS(t,t._uninitializedComponentsProvider._online)):(V("FirestoreClient","Using default OnlineComponentProvider"),yield wS(t,new w_))),t._onlineComponents})}function m$(t){return IA(t).then(e=>e.syncEngine)}function ES(t){return w(this,null,function*(){let e=yield IA(t),n=e.eventManager;return n.onListen=t$.bind(null,e.syncEngine),n.onUnlisten=i$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=n$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=s$.bind(null,e.syncEngine),n})}function wA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var DS=new Map;function EA(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function y$(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function CS(t){if(!H.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bS(t){if(H.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _h(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K()}function uc(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=_h(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var oh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},mo=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Jy;switch(r.type){case"firstParty":return new nv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=DS.get(n);r&&(V("ComponentProvider","Removing Datastore"),DS.delete(n),r.terminate())}(this),Promise.resolve()}};function DA(t,e,n,r={}){var i;let s=(t=uc(t,mo))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ze.MOCK_USER;else{a=AT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ze(l)}t._authCredentials=new Xy(new Fd(a,u))}}var Bi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},St=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Lr=class t extends Bi{constructor(e,n,r){super(e,n,j_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function CA(t,e,...n){if(t=Ze(t),EA("collection","path",e),t instanceof mo){let r=Te.fromString(e,...n);return bS(r),new Lr(t,null,r)}{if(!(t instanceof St||t instanceof Lr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Te.fromString(e,...n));return bS(r),new Lr(t.firestore,null,r)}}function bA(t,e,...n){if(t=Ze(t),arguments.length===1&&(e=Ld.newId()),EA("doc","path",e),t instanceof mo){let r=Te.fromString(e,...n);return CS(r),new St(t,null,new H(r))}{if(!(t instanceof St||t instanceof Lr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Te.fromString(e,...n));return CS(r),new St(t.firestore,t instanceof Lr?t.converter:null,new H(r))}}var C_=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Jd(this,"async_queue_retry"),this.Eu=()=>{let n=Yy();n&&V("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};let e=Yy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let n=Yy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let n=new Wn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return w(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Dc(e))throw e;V("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Kn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);let i=d_.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&K()}verifyOperationInProgress(){}mu(){return w(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let n=this.lu.indexOf(e);this.lu.splice(n,1)}};function TS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var yo=class extends mo{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new C_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AA(this),this._firestoreClient.terminate()}};function TA(t,e){let n=typeof t=="object"?t:Gs(),r=typeof t=="string"?t:e||"(default)",i=za(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=ST("firestore");s&&DA(i,...s)}return i}function SA(t){return t._firestoreClient||AA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function AA(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new av(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wA(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new D_(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var yc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(at.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ah=class{constructor(e){this._methodName=e}};var _c=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}};var Ic=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var v$=/^__.*__$/,b_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ji(e,this.data,n,this.fieldTransforms)}};function RA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var T_=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return ch(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(RA(this.wu)&&v$.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},S_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mh(e)}Nu(e,n,r,i=!1){return new T_({wu:e,methodName:n,Ou:r,path:Tt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function MA(t){let e=t._freezeSettings(),n=mh(t._databaseId);return new S_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _$(t,e,n,r,i,s={}){let o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);PA("Data must be an object, but it was:",o,r);let a=NA(r,o),u,l;if(s.merge)u=new pn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=w$(e,p,n);if(!o.contains(m))throw new L(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);D$(h,m)||h.push(m)}u=new pn(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new b_(new Gt(a),u,l)}function I$(t,e,n,r=!1){return Y_(n,t.Nu(r?4:3,e))}function Y_(t,e){if(xA(t=Ze(t)))return PA("Unsupported field value:",e,t),NA(t,e);if(t instanceof ah)return function(r,i){if(!RA(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Y_(a,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Je.fromDate(r);return{timestampValue:Kd(i.serializer,s)}}if(r instanceof Je){let s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kd(i.serializer,s)}}if(r instanceof _c)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yc)return{bytesValue:XS(i.serializer,r._byteString)};if(r instanceof St){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ic)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Mu("VectorValues must only contain numeric values.");return B_(a.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${_h(r)}`)}(t,e)}function NA(t,e){let n={};return MS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(t,(r,i)=>{let s=Y_(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function xA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof _c||t instanceof yc||t instanceof St||t instanceof ah||t instanceof Ic)}function PA(t,e,n){if(!xA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=_h(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function w$(t,e,n){if((e=Ze(e))instanceof vc)return e._internalPath;if(typeof e=="string")return OA(t,e);throw ch("Field path arguments must be of type string or ",t,!1,void 0,n)}var E$=new RegExp("[~\\*/\\[\\]]");function OA(t,e,n){if(e.search(E$)>=0)throw ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vc(...e.split("."))._internalPath}catch{throw ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ch(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function D$(t,e){return t.some(n=>n.isEqual(e))}var uh=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new A_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Z_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},A_=class extends uh{data(){return super.data()}};function Z_(t,e){return typeof e=="string"?OA(t,e):e instanceof vc?e._internalPath:e._delegate._internalPath}function C$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wc=class{},lh=class extends wc{};function kA(t,e,...n){let r=[];e instanceof wc&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof M_).length,a=s.filter(u=>u instanceof R_).length;if(o>1||o>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var R_=class t extends lh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return LA(e._query,n),new Bi(e.firestore,e.converter,Iv(e._query,n))}_parse(e){let n=MA(e.firestore);return function(s,o,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){AS(p,h);let v=[];for(let S of p)v.push(SS(u,s,S));m={arrayValue:{values:v}}}else m=SS(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||AS(p,h),m=I$(a,o,p,h==="in"||h==="not-in");return Le.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var M_=class t extends wc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)LA(o,u),o=Iv(o,u)}(e._query,n),new Bi(e.firestore,e.converter,Iv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var N_=class t extends lh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Li(s,o)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Ur(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function FA(t,e="asc"){let n=e,r=Z_("orderBy",t);return N_._create(r,n)}function SS(t,e,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!US(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Te.fromString(n));if(!H.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return J0(t,new H(r))}if(n instanceof St)return J0(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function AS(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LA(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var x_=class{convertValue(e,n="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return _o(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>be(o.doubleValue));return new Ic(s)}convertGeoPoint(e){return new _c(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=F_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){let n=Qn(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Te.fromString(e);Ee(sA(r));let i=new Bd(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(n)||Kn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function b$(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var xi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dh=class extends uh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new io(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Z_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},io=class extends dh{data(e={}){return super.data(e)}},P_=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new xi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new io(this._firestore,this._userDataWriter,r.key,r,new xi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new io(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new io(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:T$(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function T$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}var hh=class extends x_{constructor(e){super(),this.firestore=e}convertBytes(e){return new yc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}};function VA(t,e){let n=uc(t.firestore,yo),r=bA(t),i=b$(t.converter,e);return S$(n,[_$(MA(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Pi.exists(!1))]).then(()=>r)}function J_(t,...e){var n,r,i;t=Ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||TS(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(TS(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof St)l=uc(t.firestore,yo),h=j_(t._key.path),u={next:p=>{e[o]&&e[o](A$(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=uc(t,Bi);l=uc(p.firestore,yo),h=p._query;let m=new hh(l);u={next:v=>{e[o]&&e[o](new P_(l,m,p,v))},error:e[o+1],complete:e[o+2]},C$(t._query)}return function(m,v,S,N){let R=new E_(N),F=new g_(v,R,S);return m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return ZB(yield ES(m),F)})),()=>{R.za(),m.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return JB(yield ES(m),F)}))}}(SA(l),h,a,u)}function S$(t,e){return function(r,i){let s=new Wn;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return o$(yield m$(r),i,s)})),s.promise}(SA(t),e)}function A$(t,e,n){let r=n.docs.get(e._key),i=new hh(t);return new dh(t,i,e._key,r,new xi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){vo=i})(Nr),Mr(new Ft("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new yo(new ev(r.getProvider("auth-internal")),new iv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bd(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Be(K0,"4.7.1",e),Be(K0,"4.7.1","esm2017")})();var Ih=function(){return Ih=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ih.apply(this,arguments)};var N$={includeMetadataChanges:!1};function UA(t,e){return e===void 0&&(e=N$),new ce(function(n){var r=J_(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function jA(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Ih(Ih({},r),(n={},n[e.idField]=t.id,n))}function BA(t){return UA(t,{includeMetadataChanges:!0}).pipe(X(function(e){return e.docs}))}function $A(t,e){return e===void 0&&(e={}),BA(t).pipe(X(function(n){return n.map(function(r){return jA(r,e)})}))}var Hi=class{constructor(e){return e}},HA="firestore",X_=class{constructor(){return Ga(HA)}};var eI=new U("angularfire2.firestore-instances");function x$(t,e){let n=ld(HA,t,e);return n&&new Hi(n)}function P$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Hi(r)}}var O$={provide:X_,deps:[[new it,eI]]},k$={provide:Hi,useFactory:x$,deps:[[new it,eI],$n]};function BK(t,...e){return Be("angularfire",Di.full,"fst"),nn([k$,O$,{provide:eI,useFactory:P$(t),multi:!0,deps:[ve,Ke,Qs,Ci,[new it,tc],[new it,Ks],...e]}])}var qA=gt($A,!0);var zA=gt(VA,!0);var GA=gt(CA,!0);var $K=gt(TA,!0);var WA=gt(FA,!0);var KA=gt(kA,!0);var rR=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(te(xn),te(wt))},e.\u0275dir=je({type:e});let t=e;return t})(),L$=(()=>{let e=class e extends rR{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ss(e)))(s||e)}})(),e.\u0275dir=je({type:e,features:[Pn]});let t=e;return t})(),iR=new U("");var V$={provide:iR,useExisting:ui(()=>Ah),multi:!0};function U$(){let t=Fn()?Fn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var j$=new U(""),Ah=(()=>{let e=class e extends rR{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!U$())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(te(xn),te(wt),te(j$,8))},e.\u0275dir=je({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&an("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[pa([V$]),Pn]});let t=e;return t})();function B$(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var nI=new U(""),sR=new U("");function $$(t){return B$(t.value)?{required:!0}:null}function QA(t){return null}function oR(t){return t!=null}function aR(t){return pi(t)?Ce(t):t}function cR(t){let e={};return t.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function uR(t,e){return e.map(n=>n(t))}function H$(t){return!t.validate}function lR(t){return t.map(e=>H$(e)?e:n=>e.validate(n))}function q$(t){if(!t)return null;let e=t.filter(oR);return e.length==0?null:function(n){return cR(uR(n,e))}}function rI(t){return t!=null?q$(lR(t)):null}function z$(t){if(!t)return null;let e=t.filter(oR);return e.length==0?null:function(n){let r=uR(n,e).map(aR);return Df(r).pipe(X(cR))}}function iI(t){return t!=null?z$(lR(t)):null}function YA(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function G$(t){return t._rawValidators}function W$(t){return t._rawAsyncValidators}function tI(t){return t?Array.isArray(t)?t:[t]:[]}function Eh(t,e){return Array.isArray(t)?t.includes(e):t===e}function ZA(t,e){let n=tI(e);return tI(t).forEach(i=>{Eh(n,i)||n.push(i)}),n}function JA(t,e){return tI(e).filter(n=>!Eh(t,n))}var Dh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=iI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Do=class extends Dh{get formDirective(){return null}get path(){return null}},Nc=class extends Dh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ch=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},K$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},s7=oe(k({},K$),{"[class.ng-submitted]":"isSubmitted"}),dR=(()=>{let e=class e extends Ch{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(te(Nc,2))},e.\u0275dir=je({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Al("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Pn]});let t=e;return t})(),hR=(()=>{let e=class e extends Ch{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(te(Do,10))},e.\u0275dir=je({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Al("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Pn]});let t=e;return t})();var Tc="VALID",wh="INVALID",wo="PENDING",Sc="DISABLED",Co=class{},bh=class extends Co{constructor(e,n){super(),this.value=e,this.source=n}},Rc=class extends Co{constructor(e,n){super(),this.pristine=e,this.source=n}},Mc=class extends Co{constructor(e,n){super(),this.touched=e,this.source=n}},Eo=class extends Co{constructor(e,n){super(),this.status=e,this.source=n}};function fR(t){return(Rh(t)?t.validators:t)||null}function Q$(t){return Array.isArray(t)?rI(t):t||null}function pR(t,e){return(Rh(e)?e.asyncValidators:t)||null}function Y$(t){return Array.isArray(t)?iI(t):t||null}function Rh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Z$(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[n])throw new j(1001,"")}function J$(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new j(1002,"")})}var Th=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ga(()=>this.statusReactive()),this.statusReactive=da(void 0),this._pristine=ga(()=>this.pristineReactive()),this.pristineReactive=da(!0),this._touched=ga(()=>this.touchedReactive()),this.touchedReactive=da(!1),this._events=new $e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return On(this.statusReactive)}set status(e){On(()=>this.statusReactive.set(e))}get valid(){return this.status===Tc}get invalid(){return this.status===wh}get pending(){return this.status==wo}get disabled(){return this.status===Sc}get enabled(){return this.status!==Sc}get pristine(){return On(this.pristineReactive)}set pristine(e){On(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return On(this.touchedReactive)}set touched(e){On(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ZA(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZA(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(JA(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(JA(e,this._rawAsyncValidators))}hasValidator(e){return Eh(this._rawValidators,e)}hasAsyncValidator(e){return Eh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(oe(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Mc(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Mc(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(oe(k({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Rc(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Rc(!0,r))}markAsPending(e={}){this.status=wo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eo(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(oe(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Sc,this.errors=null,this._forEachChild(i=>{i.disable(oe(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bh(this.value,r)),this._events.next(new Eo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Tc,this._forEachChild(r=>{r.enable(oe(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tc||this.status===wo)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bh(this.value,n)),this._events.next(new Eo(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(oe(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Sc:Tc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=wo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=aR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Eo(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Me,this.statusChanges=new Me}_calculateStatus(){return this._allControlsDisabled()?Sc:this.errors?wh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wo)?wo:this._anyControlsHaveStatus(wh)?wh:Tc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Rc(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Mc(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Q$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Y$(this._rawAsyncValidators)}},Sh=class extends Th{constructor(e,n,r){super(fR(n),pR(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){J$(this,!0,e),Object.keys(e).forEach(r=>{Z$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var sI=new U("CallSetDisabledState",{providedIn:"root",factory:()=>oI}),oI="always";function X$(t,e){return[...e.path,t]}function gR(t,e,n=oI){mR(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),tH(t,e),rH(t,e),nH(t,e),eH(t,e)}function XA(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function eH(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function mR(t,e){let n=G$(t);e.validator!==null?t.setValidators(YA(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=W$(t);e.asyncValidator!==null?t.setAsyncValidators(YA(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();XA(e._rawValidators,i),XA(e._rawAsyncValidators,i)}function tH(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&yR(t,e)})}function nH(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&yR(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function yR(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function rH(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function iH(t,e){t==null,mR(t,e)}function sH(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function oH(t){return Object.getPrototypeOf(t.constructor)===L$}function aH(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function cH(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Ah?n=s:oH(s)?r=s:i=s}),i||r||n||null}var uH={provide:Do,useExisting:ui(()=>aI)},Ac=Promise.resolve(),aI=(()=>{let e=class e extends Do{get submitted(){return On(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=ga(()=>this.submittedReactive()),this.submittedReactive=da(!1),this._directives=new Set,this.ngSubmit=new Me,this.form=new Sh({},rI(r),iI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Ac.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),gR(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Ac.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Ac.then(()=>{let i=this._findContainer(r.path),s=new Sh({});iH(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Ac.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Ac.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),aH(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(te(nI,10),te(sR,10),te(sI,8))},e.\u0275dir=je({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&an("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pa([uH]),Pn]});let t=e;return t})();function eR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function tR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var lH=class extends Th{constructor(e=null,n,r){super(fR(n),pR(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(tR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){eR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){eR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){tR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var dH={provide:Nc,useExisting:ui(()=>cI)},nR=Promise.resolve(),cI=(()=>{let e=class e extends Nc{constructor(r,i,s,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new lH,this._registered=!1,this.name="",this.update=new Me,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=cH(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),sH(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){gR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){nR.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Cr(i);nR.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?X$(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(te(Do,9),te(nI,10),te(sR,10),te(iR,10),te(Dr,8),te(sI,8))},e.\u0275dir=je({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[pa([dH]),Pn,Nn]});let t=e;return t})(),vR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var hH=(()=>{let e=class e{constructor(){this._validator=QA}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):QA,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=je({type:e,features:[Nn]});let t=e;return t})();var fH={provide:nI,useExisting:ui(()=>uI),multi:!0};var uI=(()=>{let e=class e extends hH{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Cr,this.createValidator=r=>$$}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ss(e)))(s||e)}})(),e.\u0275dir=je({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&ha("required",s._enabled?"":null)},inputs:{required:"required"},features:[pa([fH]),Pn]});let t=e;return t})();var pH=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_r({type:e}),e.\u0275inj=vr({});let t=e;return t})();var _R=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:sI,useValue:r.callSetDisabledState??oI}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_r({type:e}),e.\u0275inj=vr({imports:[pH]});let t=e;return t})();var Mh=class t{constructor(e){this.firestore=e;this.messagesCollection=GA(this.firestore,"messages");let n=KA(this.messagesCollection,WA("time","asc"));this.messages=qA(n,{idField:"id"})}messagesCollection;messages;sendMessage(e,n){let i={user:e,message:n,time:new Date};return zA(this.messagesCollection,i).then(()=>{}).catch(s=>{console.error("Error al enviar mensaje: ",s)})}getMessages(){return this.messages.pipe(X(e=>e.map(n=>{let r=n.time.toDate();return oe(k({},n),{time:r})})))}static \u0275fac=function(n){return new(n||t)(G(Hi))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var yH=(t,e)=>({"bg-primary text-white ms-auto text-end":t,"bg-light text-dark text-start":e});function vH(t,e){if(t&1){let n=bg();Et(0,"button",3),an("click",function(){oa(n);let i=fi();return aa(i.toggleChat())}),Ns(1,"i",4),Ot()}}function _H(t,e){if(t&1&&(Et(0,"div")(1,"small",16),fa(2),Ot(),Et(3,"div",17),fa(4),Ot()()),t&2){let n=e.$implicit,r=fi(2);wr(2),Tg("",n.user," - ",n.time.toLocaleString(),""),wr(),Ms("ngClass",YC(4,yH,n.user===r.currentUser,n.user!==r.currentUser)),wr(),Rl(" ",n.message," ")}}function IH(t,e){if(t&1){let n=bg();Et(0,"div",5)(1,"div",6)(2,"h3",7),fa(3,"Chat Mini"),Ot(),Et(4,"button",8),an("click",function(){oa(n);let i=fi();return aa(i.toggleChat())}),Ns(5,"i",9),Ot()(),Et(6,"div",10),Sl(7,_H,5,7,"div",11),Ot(),Et(8,"form",12),an("submit",function(){oa(n);let i=fi();return aa(i.sendMessage())}),Et(9,"div",13)(10,"input",14),Ag("ngModelChange",function(i){oa(n);let s=fi();return KC(s.newMessage,i)||(s.newMessage=i),aa(i)}),Ot(),Et(11,"button",15),fa(12,"Enviar"),Ot()()()()}if(t&2){let n=fi();wr(7),Ms("ngForOf",n.messages),wr(3),Sg("ngModel",n.newMessage)}}var IR=class t{constructor(e,n){this.chatService=e;this.auth=n;this.currentUser=this.auth.currentUser?.email||"Anonimo"}messages=[];newMessage="";currentUser;messagesSubscription;isOpen=!1;toggleChat(){this.isOpen=!this.isOpen}ngOnInit(){this.messagesSubscription=this.chatService.getMessages().subscribe(e=>{this.messages=e})}ngOnDestroy(){this.messagesSubscription&&this.messagesSubscription.unsubscribe()}sendMessage(){this.newMessage.trim()!==""&&(this.chatService.sendMessage(this.currentUser,this.newMessage),this.newMessage="")}static \u0275fac=function(n){return new(n||t)(te(Mh),te(Ri))};static \u0275cmp=dl({type:t,selectors:[["app-chat"]],standalone:!0,features:[Ml],decls:3,vars:2,consts:[[1,"chat-btn-container"],["class","btn btn-primary rounded-circle p-0 chat-closed-icon",3,"click",4,"ngIf"],["class","bg-white border rounded shadow-lg d-flex flex-column chat-open",4,"ngIf"],[1,"btn","btn-primary","rounded-circle","p-0","chat-closed-icon",3,"click"],[1,"bi","bi-chat-dots-fill"],[1,"bg-white","border","rounded","shadow-lg","d-flex","flex-column","chat-open"],[1,"d-flex","justify-content-between","align-items-center","p-2","border-bottom"],[1,"fw-semibold"],[1,"btn","btn-link",3,"click"],[1,"bi","bi-x"],[1,"flex-grow-1","p-2","overflow-auto"],[4,"ngFor","ngForOf"],[1,"p-2","border-top",3,"submit"],[1,"input-group"],["type","text","placeholder","Escribe un mensaje...","name","message","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"text-muted"],[1,"mb-2","p-2","rounded","message-bubble",3,"ngClass"]],template:function(n,r){n&1&&(Et(0,"div",0),Sl(1,vH,2,0,"button",1)(2,IH,13,2,"div",2),Ot()),n&2&&(wr(),Ms("ngIf",!r.isOpen),wr(),Ms("ngIf",r.isOpen))},dependencies:[_R,vR,Ah,dR,hR,uI,cI,aI,jg,vb,_b,Ib],styles:[".chat-btn-container[_ngcontent-%COMP%]{position:fixed;right:32px;bottom:10vh}.chat-closed-icon[_ngcontent-%COMP%]{width:48px;height:48px}.chat-open[_ngcontent-%COMP%]{width:320px;max-height:80vh}.message-bubble[_ngcontent-%COMP%]{max-width:80%}"]})};export{w as a,vr as b,dl as c,_r as d,oa as e,aa as f,V9 as g,qx as h,wr as i,te as j,Sl as k,Ms as l,$9 as m,Et as n,Ot as o,Ns as p,Ak as q,Rk as r,bg as s,an as t,fi as u,fa as v,Fk as w,Rl as x,Tg as y,Sg as z,KC as A,Ag as B,Ml as C,H9 as D,_b as E,Ib as F,jg as G,j3 as H,dF as I,un as J,Ub as K,i6 as L,s6 as M,o6 as N,Ah as O,dR as P,hR as Q,aI as R,cI as S,vR as T,uI as U,_R as V,Q6 as W,Y6 as X,Ri as Y,H8 as Z,q8 as _,z8 as $,G8 as aa,W8 as ba,Hi as ca,BK as da,zA as ea,GA as fa,$K as ga,IR as ha};
